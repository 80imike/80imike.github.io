{"title":"15 个实用的 Kubernetes 集群资源清理命令","id":"posts/2396.html","date_published":"12/20/2021","summary":"\n长时间运行的集群，常会面临各种资源耗尽的问题，另外磁盘不足时 Kubelet 还会主动清理镜像增加不确定因素，本文提供了一些命令片段用于清理工作。\n\nKubernetes 基础对象清理\n\n清理 Evicted 状态的 Pod\n\n1$ kubectl get pods --all-namespaces -o wide | grep Evicted | awk &#39;&#123;print $1,$2&#125;&#39; | xargs -L1 kubectl delete pod -n\n\n清理 Error 状态的 Pod\n\n1$ kubectl get pods --all-namespaces -o wide | grep Error | awk &#39;&#123;print $1,$2&#125;&#39; | xargs -L1 kubectl delete pod -n\n\n清理 Completed 状态的 Pod\n\n1$ kubectl get pods --all-namespaces -o wide | grep Completed | awk &#39;&#123;print $1,$2&#125;&#39; | xargs -L1 kubectl delete pod -n","url":"https://www.hi-linux.com/posts/2396.html","tags":["技巧","Linux","Kubernetes"],"categories":["微服务"]}