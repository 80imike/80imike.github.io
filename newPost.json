{"title":"如何在不杀进程的前提下关闭一个 TCP Socket 连接","id":"posts/62556.html","date_published":"05/23/2020","summary":"要在线关闭一个 TCP Socket 连接，你可能会说很简单，netstat -antp 找到连接，kill 掉这个进程就行了。\n123# netstat -antp|grep 6789tcp        0      0 1.1.1.1:59950      1.1.1.2:6789        ESTABLISHED 45059&#x2F;ceph-fuse# kill 45059\n连接确实关掉了，进程也跟着一起杀死了。达不到 “在线” 的要求。\n有没有办法不杀死进程，但还是可以关闭 Socket 连接呢？\n我们知道，在编码的时候，要关闭一个 Socket，只要调用 close 函数就可以了，但是进程在运行着呢，怎么让它调用 close 呢？\n在 superuser 上看到一个很棒的方法，原理就是 gdb attach 到进程上下文，然后 call close($fd)。","url":"https://www.hi-linux.com/posts/62556.html","tags":["Linux","技巧","Shell"],"categories":["Linux"]}