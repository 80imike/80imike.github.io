{"title":"万字长文详解 PaaS toB 场景下 Kubernetes 离线部署方案","id":"posts/27427.html","date_published":"09/01/2021","summary":"在企业私有云环境当中，出于对数据安全的考虑以及满足 网络安全等级保护 的要求，往往会对内部环境中的服务器做出严格的访问限制。一般来讲生产环境都会禁止访问外部网络，开发人员要访问生产环境也必须通过堡垒机或者其他方式进行安全审计登录。在这种无网（无法访问公网）的环境中，想要部署好一个 K8s 集群并不是一件轻松的事儿。市面上 K8s 部署工具也多不胜数，对于离线部署的支持情况也各不相同：\n\n\n\nItem\nLanguage\nStar\nFork\n离线部署支持情况\n\n\n\n\nkops\nGolang\n13.2k\n4.1k\n不支持\n\n\nkubespray\nAnsible\n11.1k\n4.7k\n支持，需自行构建安装包\n\n\nkubeasz\nAnsible\n7.2k\n2.7k\n支持，需自行构建安装包\n\n\nsealos\nGolang\n4.1k\n790\n支持，需付费充值会员\n\n\nRKE\nGolang\n2.5k\n480\n不支持，需自行安装 docker\n\n\nsealer\nGolang\n503\n112\n支持，源自 sealos\n\n\nkubekey\nGolang\n471\n155\n部分支持，仅镜像可离线\n\n\n\n无网环境离线部署 K8s 往往是作为一个商业服务或者商业付费产品来出售（如 sealos ），很少有开源免费的解决方案；或者虽然提供了离线部署方案，但想要操作起来十分繁琐，很难顺畅地做到一键部署；又或者只支持部分离线部署，还有一部分资源需要在部署的时候通过公网获取。\n针对上述问题，本文调研主流的 K8s 部署工具，并基于这些工具设计并实现一种从构建离线安装包到一键部署 K8s 集群全流程的解决方案，以满足在无网的环境中一键部署 K8s 集群的需求，比较适合基于 K8s 的 PaaS toB 产品使用。","url":"https://www.hi-linux.com/posts/27427.html","tags":["技巧","Linux","Kubernetes"],"categories":["Kubernetes"]}