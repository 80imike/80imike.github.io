{"title":"如何优雅的在 Docker 容器中指定用户及组权限的三种方式","id":"posts/44367.html","date_published":"05/22/2020","summary":"如果平常有在玩 Docker 的用户肯定知道透过 docker command 启动的容器预设是使用 root 用户来当作预设使用者及群组的。这样就会遇到一个问题，当主机环境你拥有 root 权限时就没有此问题。如果你没有 root 权限，又有需求在 Docker 容器內挂上 Volume，会发现产生出来的文件皆会是 root 权限，这时候在主机完全是无法写入的。本篇文章将教大家三种方式来设定容器使用者权限，以解决上述遇到的问题。\n使用 docker 指令时指定使用者\n以进入一个 Ubuntu 容器为例，通过以下指令:\n1$ docker run -ti ubuntu &#x2F;bin&#x2F;bash\n这时候我们可以通过 -u 方式将使用者 uid 及群组 gid 传入容器内。\n123$ mkdir tmp$ docker run -ti -v $PWD&#x2F;tmp:&#x2F;test \\  -u uid:gid ubuntu &#x2F;bin&#x2F;bash\n如何找到目前使用者 uid 及 gid 呢，可以通过下面的方式。\n12$ id -u$ id -g\n为了更加方便，上述指令可以改成:\n12$ docker run -ti -v $PWD&#x2F;tmp:&#x2F;test \\  -u $(id -u):$(id -g) ubuntu &#x2F;bin&#x2F;bash","url":"https://www.hi-linux.com/posts/44367.html","tags":["Linux","Docker","技巧"],"categories":["Docker"]}