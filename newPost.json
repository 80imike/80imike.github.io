{"title":"分享一个解决 sudo 命令找不到环境变量的小技巧","id":"posts/30418.html","date_published":"06/22/2020","summary":"如何解决 sudo 命令找不到环境变量的问题\n在通过 sudo 运行命令时，系统会默认重置环境变量为安全的环境变量，也就是说，先前设置的变量都会失效，只有少数配置文件中指定的环境变量能够保存下来。\nsudo 的配置文件是 /etc/sudoers，需要 root 权限才能读取，运行以下命令：\n1$ sudo sed &#39;&#x2F;^#&#x2F;d;&#x2F;^$&#x2F;d&#39; &#x2F;etc&#x2F;sudoers\nsudo 的配置如下图所示：\n\nsudo 配置文件\n请注意：\n\n\n第 3 行的 Defaults env_reset 表示默认会重置环境变量，因此自定义的变量会在 sudo 环境中失效，也就不会获取正确的变量值。\n\n\n第 4 行至第 8 行的 env_keep 配置项，用于保留部分环境变量不被重置，需要保留的变量就写入双引号之中。\n\n\n第 9 行的 secure_path 配置项，其中包含的路径将被当做 sudo 环境的 PATH 变量使用，如果在 sudo 环境无法找到某些命令，那么可以将这些命令的路径加入该配置项之中。\n\n","url":"https://www.hi-linux.com/posts/30418.html","tags":["技巧","Linux","sudo"],"categories":["Linux"]}