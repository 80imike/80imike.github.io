{"title":"一文搞懂 Redis 的三种集群方案","id":"posts/34936.html","date_published":"11/23/2020","summary":"在开发测试环境中，我们一般搭建Redis的单实例来应对开发测试需求，但是在生产环境，如果对可用性、可靠性要求较高，则需要引入Redis的集群方案。虽然现在各大云平台有提供缓存服务可以直接使用，但了解一下其背后的实现与原理总还是有些必要（比如面试）， 本文就一起来学习一下Redis的几种集群方案。\nRedis支持三种集群方案\n\n主从复制模式\nSentinel（哨兵）模式\nCluster模式\n\n主从复制模式\n1. 基本原理\n主从复制模式中包含一个主数据库实例（master）与一个或多个从数据库实例（slave），如下图\n\n客户端可对主数据库进行读写操作，对从数据库进行读操作，主数据库写入的数据会实时自动同步给从数据库。\n具体工作机制为：\n\nslave启动后，向master发送SYNC命令，master接收到SYNC命令后通过bgsave保存快照（即上文所介绍的RDB持久化），并使用缓冲区记录保存快照这段时间内执行的写命令\nmaster将保存的快照文件发送给slave，并继续记录执行的写命令\nslave接收到快照文件后，加载快照文件，载入数据\nmaster快照发送完后开始向slave发送缓冲区的写命令，slave接收命令并执行，完成复制初始化\n此后master每次执行一个写命令都会同步发送给slave，保持master与slave之间数据的一致性\n","url":"https://www.hi-linux.com/posts/34936.html","tags":["Redis","Linux","Docker"],"categories":["Redis"]}