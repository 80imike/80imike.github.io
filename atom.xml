<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¥‡å¦™çš„ Linux ä¸–ç•Œ</title>
  
  <subtitle>ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.hi-linux.com/"/>
  <updated>2021-07-21T02:09:49.990Z</updated>
  <id>https://www.hi-linux.com/</id>
  
  <author>
    <name>Mike</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¦‚ä½•ä¼˜é›…çš„åœ¨ Linux ä¸‹å¼€æœºè‡ªåŠ¨é‡å¯è„šæœ¬</title>
    <link href="https://www.hi-linux.com/posts/36782.html"/>
    <id>https://www.hi-linux.com/posts/36782.html</id>
    <published>2021-07-21T01:00:00.000Z</published>
    <updated>2021-07-21T02:09:49.990Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><h2><span id="ç®€ä»‹">ç®€ä»‹</span></h2><p>ç»å¸¸ç¢°åˆ°æœºå™¨æ–­ç”µä¹‹åéœ€è¦é‡å¯ä¸€å¤§å †æœåŠ¡ï¼Œä¸ºäº†é˜²æ­¢è¿™ç§äº‹æƒ…å‘ç”Ÿï¼Œè®¾ç½®å¼€æœºè‡ªå¯çš„è„šæœ¬ååˆ†çš„é‡è¦ï¼Œæˆ‘ä»¬ä¹ æƒ¯æ€§çš„åšæ³•å°±æ˜¯ç¼–å†™ä¸€ä¸ªé‡å¯è„šæœ¬ï¼Œç„¶ååœ¨ <code>/etc/rc.local</code> ä¸­å»å®Œæˆå¼€æœºæ‰§è¡Œã€‚ä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat &#x2F;etc&#x2F;rc.local</span><br><span class="line">bash &#x2F;root&#x2F;script&#x2F;restart.sh</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„æ–¹æ³•è™½ç„¶å¯è¡Œï¼Œä½†å¹¶ä¸ä¼˜é›…ã€‚ä»Šå¤©æˆ‘ä»¬å°±ç»™å¤§å®¶ä»‹ç»ä¸¤ç§æ›´å¥½çš„å®ç°æ–¹å¼ï¼š</p><h2><span id="é€šè¿‡-crontab-å®ç°">é€šè¿‡ Crontab å®ç°</span></h2><p>Crontab å¯ä»¥ä½¿ç”¨ <code>@reboot</code> æ¥æ‰§è¡Œä¸»æœºå¯åŠ¨ä¹‹åçš„å‘½ä»¤ã€‚é¦–å…ˆåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@reboot &#x2F;root&#x2F;script&#x2F;restart.sh</span><br></pre></td></tr></table></figure><p>å®Œæˆåï¼Œè¿™ä¸ªè„šæœ¬å°±å¯ä»¥åœ¨é‡å¯çš„æ—¶å€™è‡ªåŠ¨æ‰§è¡Œäº†ã€‚å…¶å®ƒçš„ä¸€äº›è¿›é˜¶ç©æ³•ï¼š</p><ul><li>åœ¨å¯åŠ¨å®Œæˆåçš„æŒ‡å®šæ—¶é—´å†…è¿è¡Œè„šæœ¬</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨å¯åŠ¨ 5 åˆ†é’Ÿåè¿è¡ŒæŒ‡å®šè„šæœ¬</span><br><span class="line">@reboot sleep 300 &amp;&amp; &#x2F;home&#x2F;wwwjobs&#x2F;clean-static-cache.sh</span><br></pre></td></tr></table></figure><h2><span id="é€šè¿‡-systemd-å®ç°">é€šè¿‡ Systemd å®ç°</span></h2><p>é¦–å…ˆç¼–å†™ä¸€ä¸ªåä¸º restart çš„ Systemd æœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ vim &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;restart.service</span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;restart</span><br><span class="line">After&#x3D;default.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart&#x3D;&#x2F;root&#x2F;script&#x2F;restart.sh</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;default.target</span><br></pre></td></tr></table></figure><p>ç„¶åå¯ç”¨è¿™ä¸ª Systemd æœåŠ¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl daemon-reload</span><br><span class="line">$ systemctl enable restart.service</span><br></pre></td></tr></table></figure><p>å®Œæˆåï¼Œè¿™ä¸ªæœåŠ¡å¯¹åº”çš„è„šæœ¬å°±å¯ä»¥è‡ªåŠ¨å¼€æœºè‡ªå¯äº†ã€‚</p><h2><span id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</span></h2><ul><li><a href="https://www.google.com" target="_blank" rel="noopener">https://www.google.com</a></li><li><a href="https://tinyurl.com/6ryafefw" target="_blank" rel="noopener">https://tinyurl.com/6ryafefw</a></li><li><a href="https://www.cyberciti.biz/faq/linux-execute-cron-job-after-system-reboot/" target="_blank" rel="noopener">https://www.cyberciti.biz/faq/linux-execute-cron-job-after-system-reboot/</a></li></ul></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      
      
        
        
          &lt;div id=&quot;vip-container&quot;&gt;&lt;h2&gt;&lt;span id=&quot;ç®€ä»‹&quot;&gt;ç®€ä»‹&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ç»å¸¸ç¢°åˆ°æœºå™¨æ–­ç”µä¹‹åéœ€è¦é‡å¯ä¸€å¤§å †æœåŠ¡ï¼Œä¸ºäº†é˜²æ­¢è¿™ç§äº‹æƒ…å‘ç”Ÿï¼Œè®¾ç½®å¼€æœºè‡ªå¯çš„è„šæœ¬ååˆ†çš„é‡è¦ï¼Œæˆ‘ä»¬ä¹ æƒ¯æ€§çš„åšæ³•å°±æ˜¯ç¼–å†™ä¸€ä¸ªé‡å¯è„šæœ¬ï¼Œç„¶ååœ¨
        
      
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="æ•™ç¨‹" scheme="https://www.hi-linux.com/tags/%E6%95%99%E7%A8%8B/"/>
    
      <category term="Shell" scheme="https://www.hi-linux.com/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>æ¨èä¸€æ¬¾é¢å‘å¼€å‘è€…å‹å¥½çš„ Kubernetes æŒç»­äº¤ä»˜å·¥ä½œæµç®¡ç†è½¯ä»¶ Devtron</title>
    <link href="https://www.hi-linux.com/posts/45793.html"/>
    <id>https://www.hi-linux.com/posts/45793.html</id>
    <published>2021-07-15T01:00:00.000Z</published>
    <updated>2021-07-15T08:28:23.181Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>Devtron(<a href="https://devtron.ai" target="_blank" rel="noopener">https://devtron.ai</a>) æ˜¯ç”¨ go ç¼–å†™çš„ç”¨äº Kubernetes äº¤ä»˜å·¥ä½œæµç®¡ç†çš„å¼€æºè½¯ä»¶ã€‚å®ƒè¢«è®¾è®¡ä¸ºä¸€ä¸ªè‡ªæˆ‘æœåŠ¡å¹³å°ï¼Œä»¥å¼€å‘è€…å‹å¥½çš„æ–¹å¼åœ¨ Kubernetes ä¸Šè¿ç»´å’Œç»´æŠ¤åº”ç”¨ç¨‹åºï¼ˆAppOpsï¼‰ã€‚</p><blockquote><p>ä»“åº“åœ°å€ï¼š<a href="https://github.com/devtron-labs/devtron" target="_blank" rel="noopener">https://github.com/devtron-labs/devtron</a></p></blockquote><a id="more"></a><h2><span id="ç‰¹æ€§">ğŸ‰ ç‰¹æ€§</span></h2><ul><li><p>é›¶ä»£ç è½¯ä»¶äº¤ä»˜å·¥ä½œæµ</p><ul><li>äº†è§£ kubernetesã€æµ‹è¯•ã€CDã€SecOps ç­‰é¢†åŸŸçš„å·¥ä½œæµï¼Œè¿™æ ·ä½ å°±ä¸å¿…å†™è„šæœ¬ã€‚</li><li>å¯é‡å¤ä½¿ç”¨å’Œå¯ç»„åˆçš„ç»„ä»¶ï¼Œä½¿å·¥ä½œæµæ˜“äºæ„å»ºä½¿ç”¨ã€‚</li></ul></li><li><p>å¤šäº‘éƒ¨ç½²</p><ul><li>å¤©ç„¶æ”¯æŒéƒ¨ç½²åˆ°å¤šä¸ª kubernetes é›†ç¾¤ä¸Š</li></ul></li><li><p>è½»æ¾å®ç°å¼€å‘-å®‰å…¨-è¿ç»´ä¸€ä½“åŒ–</p><ul><li>å…¨å±€ã€é›†ç¾¤ã€ç¯å¢ƒå’Œåº”ç”¨çš„å¤šå±‚æ¬¡å®‰å…¨ç­–ç•¥ï¼Œå®ç°é«˜æ•ˆçš„åˆ†å±‚ç­–ç•¥ç®¡ç†</li><li>è¡Œä¸ºé©±åŠ¨çš„å®‰å…¨ç­–ç•¥</li><li>kubernetes èµ„æºå®šä¹‰ç­–ç•¥å’Œå¼‚å¸¸æƒ…å†µ</li><li>å®šä¹‰äº‹ä»¶çš„ç­–ç•¥ï¼Œä»¥ä¾¿æ›´å¿«åœ°è§£å†³é—®é¢˜</li></ul></li><li><p>åº”ç”¨ç¨‹åºè°ƒè¯•é¢æ¿</p><ul><li>æ‰€æœ‰å†å²çš„ kubernetes äº‹ä»¶éƒ½é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹</li><li>å®‰å…¨åœ°è®¿é—®æ‰€æœ‰æ¸…å•ï¼Œå¦‚ secretã€configmap</li><li>cpuã€ramã€http çŠ¶æ€ç å’Œå»¶è¿Ÿç­‰åº”ç”¨æŒ‡æ ‡ï¼Œå¹¶è¿›è¡Œæ–°æ—§å¯¹æ¯”</li><li>ä½¿ç”¨ grep å’Œ json æœç´¢æ—¥å¿—</li><li>äº‹ä»¶å’Œæ—¥å¿—ä¹‹é—´çš„æ™ºèƒ½å…³è”æ€§</li></ul></li><li><p>ä¼ä¸šçº§çš„å®‰å…¨æ€§å’Œåˆè§„æ€§</p><ul><li>ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶ï¼›æ§åˆ¶è°å¯ä»¥ç¼–è¾‘é…ç½®ï¼Œè°å¯ä»¥éƒ¨ç½²</li><li>å®¡è®¡æ—¥å¿—ï¼Œäº†è§£è°åšäº†ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™åšçš„</li><li>æ‰€æœ‰ CI å’Œ CD äº‹ä»¶çš„å†å²è®°å½•</li><li>å½±å“åº”ç”¨ç¨‹åºçš„ Kubernetes äº‹ä»¶</li><li>ç›¸å…³çš„äº‘äº‹ä»¶åŠå…¶å¯¹åº”ç”¨ç¨‹åºçš„å½±å“</li><li>å…ˆè¿›çš„å·¥ä½œæµç¨‹ç­–ç•¥ï¼Œå¦‚åˆ†æ”¯ç¯å¢ƒï¼Œç¡®ä¿æ„å»ºå’Œéƒ¨ç½²ç®¡é“çš„å®‰å…¨</li></ul></li><li><p>äº†è§£ Gitops</p><ul><li>é€šè¿‡ API å’Œ UI æš´éœ²çš„ Gitopsï¼Œä½¿ä½ ä¸å¿…ä¸ Git å®¢æˆ·ç«¯äº¤äº’</li><li>ç”± postgres æ”¯æŒçš„ Gitops æ›´å®¹æ˜“åˆ†æ</li><li>å®æ–½æ¯” git æ›´ç²¾ç»†çš„è®¿é—®æ§åˆ¶</li></ul></li><li><p>ä¸šåŠ¡æ´å¯Ÿ</p><ul><li>éƒ¨ç½²æŒ‡æ ‡æ¥è¡¡é‡æ•æ·è¿‡ç¨‹çš„æˆåŠŸï¼Œå®ƒå¯ä»¥æ•æ‰åˆ° mttrã€å˜æ›´å¤±è´¥ç‡ã€éƒ¨ç½²é¢‘ç‡ã€éƒ¨ç½²è§„æ¨¡ç­‰ã€‚</li><li>å®¡è®¡æ—¥å¿—ä»¥äº†è§£å¤±è´¥çš„åŸå› </li><li>ç›‘æµ‹è·¨éƒ¨ç½²çš„å˜åŒ–ï¼Œå¹¶è½»æ¾æ¢å¤</li></ul></li></ul><h2><span id="å®‰è£…">ğŸš€ å®‰è£…</span></h2><p>é»˜è®¤çš„å®‰è£…é…ç½®ä¼šä½¿ç”¨ MinIO æ¥å­˜å‚¨æ„å»ºæ—¥å¿—å’Œç¼“å­˜ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ helm repo add devtron https:&#x2F;&#x2F;helm.devtron.ai</span><br><span class="line">$ helm install devtron devtron&#x2F;devtron-operator --create-namespace --namespace devtroncd \</span><br><span class="line">--set secrets.POSTGRESQL_PASSWORD&#x3D;change-me</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å®˜æ–¹çš„å®‰è£…æ–¹å¼ä¼šä» GitHub ä¸Šé¢å»ä¸‹è½½å¾ˆå¤šè„šæœ¬è¿›è¡Œåˆå§‹åŒ–ï¼Œç”±äºæŸäº›åŸå› ï¼Œå¯èƒ½æˆ‘ä»¬æ²¡åŠæ³•æ­£å¸¸è®¿é—®ï¼Œè¿™é‡Œæˆ‘å·²ç»å°†æ‰€æœ‰çš„å®‰è£…è„šæœ¬å’Œä»£ç åŒæ­¥åˆ°äº† <code>gitee</code> ä¸Šé¢ï¼Œä¸ç”¨æ‹…å¿ƒå®‰è£…ä¸ä¸Šäº†ã€‚</p><p>é¦–å…ˆ clone å®‰è£…è„šæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https:&#x2F;&#x2F;gitee.com&#x2F;cnych&#x2F;devtron-installation-script.git</span><br><span class="line">$ cd devtron-installation-script</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Helm3 æ¥è¿›è¡Œå®‰è£…ï¼Œæˆ‘ä»¬åªéœ€è¦å®‰è£… <code>devtron-operator</code> å³å¯å¸®æˆ‘ä»¬è‡ªåŠ¨å®‰è£… devtron äº†ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ helm upgrade --install devtron .&#x2F;charts&#x2F;devtron --create-namespace --namespace devtroncd</span><br><span class="line">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: &#x2F;Users&#x2F;ych&#x2F;.kube&#x2F;config</span><br><span class="line">WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: &#x2F;Users&#x2F;ych&#x2F;.kube&#x2F;config</span><br><span class="line">W0624 11:00:57.798698 56125 warnings.go:67] apiextensions.k8s.io&#x2F;v1beta1 CustomResourceDefinition is deprecated in v1.16+, unavailable in v1.22+; use apiextensions.k8s.io&#x2F;v1 CustomResourceDefinition</span><br><span class="line">W0624 11:00:59.829583 56125 warnings.go:67] apiextensions.k8s.io&#x2F;v1beta1 CustomResourceDefinition is deprecated in v1.16+, unavailable in v1.22+; use apiextensions.k8s.io&#x2F;v1 CustomResourceDefinition</span><br><span class="line">NAME: devtron</span><br><span class="line">LAST DEPLOYED: Thu Jun 24 11:01:00 2021</span><br><span class="line">NAMESPACE: devtroncd</span><br><span class="line">STATUS: deployed</span><br><span class="line">REVISION: 1</span><br><span class="line">TEST SUITE: None</span><br><span class="line">NOTES:</span><br><span class="line"></span><br><span class="line">1. Run the following command to get the default admin password. Default username is admin</span><br><span class="line"></span><br><span class="line">   kubectl -n devtroncd get secret devtron-secret -o jsonpath&#x3D;&#39;&#123;.data.ACD_PASSWORD&#125;&#39; | base64 -d</span><br><span class="line"></span><br><span class="line">2. You can watch the progress of Devtron microservices installation by the following command</span><br><span class="line"></span><br><span class="line">   kubectl -n devtroncd get installers installer-devtron -o jsonpath&#x3D;&#39;&#123;.status.sync.status&#125;&#39;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤ä¼šå¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºå®‰è£… devtron çš„ Podï¼Œè¯¥ Pod ä¼šå»è¯»å–æˆ‘ä»¬çš„ <code>installaction-script</code> è„šæœ¬è¿›è¡Œåˆå§‹åŒ–å®‰è£…ï¼Œè¿™ä¸ªå®‰è£…è¿‡ç¨‹éœ€è¦èŠ±ä¸€ç‚¹æ—¶é—´ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦æä¾›ä¸€ä¸ªé»˜è®¤çš„ StorageClassï¼Œå¦åˆ™ MinIO å¯¹åº”çš„ PVC æ²¡åŠæ³•ç»‘å®šï¼Œä¹Ÿå°±å®‰è£…ä¸æˆåŠŸäº†ï¼Œæˆ‘è¿™é‡Œæ˜¯åœ¨ä»£ç ä»“åº“ä¸­æ˜ç¡®æŒ‡å®šçš„ä¸€ä¸ªåä¸º <code>nfs-storage</code> çš„ StorageClassï¼Œæ­£å¸¸å®‰è£…åä¼šäº§ç”Ÿå¾ˆå¤š Podï¼š</p><p><img src="https://img.hi-linux.com/staticfile/640-20210630113548589-2021-06-30-Zl4ugu.jpg" alt="devtron pods"></p><p>ä¸ºäº†è®¿é—®æ–¹ä¾¿æˆ‘è¿™é‡Œè¿˜åˆ›å»ºäº†ä¸€ä¸ª IngressRoute å¯¹è±¡ç”¨æ¥ç»‘å®š Dashboardï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># devtron-ingressroute.yaml</span><br><span class="line">apiVersion: traefik.containo.us&#x2F;v1alpha1</span><br><span class="line">kind: IngressRoute</span><br><span class="line">metadata:</span><br><span class="line">  name: devtron</span><br><span class="line">  namespace: devtroncd</span><br><span class="line">spec:</span><br><span class="line">  entryPoints:</span><br><span class="line">    - web</span><br><span class="line">  routes:</span><br><span class="line">    - kind: Rule</span><br><span class="line">      match: Host(&#96;devtron.k8s.local&#96;)</span><br><span class="line">      services:</span><br><span class="line">        - name: devtron-service</span><br><span class="line">          port: 80</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®Œæˆåæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åŸŸåï¼ˆæå‰åšå¥½è§£æï¼‰å°±å¯ä»¥è®¿é—® devtron äº†ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210630130148000-2021-06-30-tQSDbk.jpg" alt="login devtron"></p><p>ç™»å½•çš„æ—¶å€™ä½¿ç”¨çš„é»˜è®¤ç”¨æˆ·åä¸º <code>admin</code>ï¼Œå¯†ç åˆ™å¯ä»¥ä½¿ç”¨ä¸Šé¢å®‰è£… Helm Charts çš„æ—¶å€™çš„æç¤ºå‘½ä»¤è·å–:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl -n devtroncd get secret devtron-secret -o jsonpath&#x3D;&#39;&#123;.data.ACD_PASSWORD&#125;&#39; | base64 -d</span><br></pre></td></tr></table></figure><p>ç™»å½•åå°±å¯ä»¥è¿›å…¥åˆ° Dashboard çš„ä¸»é¡µäº†ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/640-20210630113548607-2021-06-30-W9dUld.jpg" alt></p><p>è¿›å…¥ Dashboard åæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›é…ç½®æ‰èƒ½ä½¿ç”¨ï¼Œæ¯”å¦‚æ·»åŠ  Docker é•œåƒä»“åº“ã€é…ç½® gitops ç­‰ã€‚å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£è¯´æ˜ <a href="https://docs.devtron.ai" target="_blank" rel="noopener">https://docs.devtron.ai</a>ï¼Œåç»­æˆ‘ä»¬å†æä¾›ä¸€ä¸ªè¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£ã€‚</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ Githubçˆ±å¥½è€… ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/4y93htj9" target="_blank" rel="noopener">https://tinyurl.com/4y93htj9</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Devtron(&lt;a href=&quot;https://devtron.ai&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://devtron.ai&lt;/a&gt;) æ˜¯ç”¨ go ç¼–å†™çš„ç”¨äº Kubernetes äº¤ä»˜å·¥ä½œæµç®¡ç†çš„å¼€æºè½¯ä»¶ã€‚å®ƒè¢«è®¾è®¡ä¸ºä¸€ä¸ªè‡ªæˆ‘æœåŠ¡å¹³å°ï¼Œä»¥å¼€å‘è€…å‹å¥½çš„æ–¹å¼åœ¨ Kubernetes ä¸Šè¿ç»´å’Œç»´æŠ¤åº”ç”¨ç¨‹åºï¼ˆAppOpsï¼‰ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»“åº“åœ°å€ï¼š&lt;a href=&quot;https://github.com/devtron-labs/devtron&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/devtron-labs/devtron&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/categories/kubernetes/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/tags/Kubernetes/"/>
    
      <category term="Devtron" scheme="https://www.hi-linux.com/tags/Devtron/"/>
    
  </entry>
  
  <entry>
    <title>GitHub è®¿é—®æ…¢ï¼Ÿæ‰‹æŠŠæ‰‹æ•™ä½ å‡ æ‹›è§£å†³å®ƒï¼</title>
    <link href="https://www.hi-linux.com/posts/50785.html"/>
    <id>https://www.hi-linux.com/posts/50785.html</id>
    <published>2021-07-12T01:00:00.000Z</published>
    <updated>2021-07-13T03:08:10.355Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><blockquote><p>ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œè®¿é—® Github æ—¶ï¼Œç½‘ç»œä¼šé˜»æ–­æˆ–è€…å¾ˆæ…¢ã€‚æœ¬æ–‡æä¾›äº†è‹¥å¹²è®¿é—®æ–¹æ³•ã€‚</p></blockquote><h2><span id="1-ä½¿ç”¨-github-mirror-ä¸‹è½½">1. ä½¿ç”¨ Github Mirror ä¸‹è½½</span></h2><p>ç›´æ¥åœ¨ GitHub ä»“åº“å‰é¢æ‹¼æ¥ Proxy åœ°å€ï¼Œä¸åŒçš„ Mirror æ‹¼æ¥æ–¹å¼å¯èƒ½æœ‰æ‰€ä¸åŒã€‚ä¸‹é¢ä»¥æ‹‰å– <a href="https://github.com/shaowenchen/scripts" target="_blank" rel="noopener">https://github.com/shaowenchen/scripts</a> ä»“åº“ä¸ºä¾‹ã€‚</p><ul><li><a href="https://mirror.ghproxy.com/" target="_blank" rel="noopener">https://mirror.ghproxy.com</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https:&#x2F;&#x2F;mirror.ghproxy.com&#x2F;https:&#x2F;&#x2F;github.com&#x2F;shaowenchen&#x2F;scripts</span><br></pre></td></tr></table></figure><ul><li><a href="https://github.com.cnpmjs.org/" target="_blank" rel="noopener">https://github.com.cnpmjs.org</a></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https:&#x2F;&#x2F;github.com.cnpmjs.org&#x2F;shaowenchen&#x2F;scripts</span><br></pre></td></tr></table></figure><a id="more"></a><h2><span id="2-é€šè¿‡-gitee-å¯¼å…¥-github-é¡¹ç›®">2. é€šè¿‡ Gitee å¯¼å…¥ GitHub é¡¹ç›®</span></h2><p>å¯ä»¥å‚è€ƒæ–‡æ¡£: <a href="https://gitee.com/help/articles/4284" target="_blank" rel="noopener">GitHubä»“åº“å¿«é€Ÿå¯¼å…¥GiteeåŠåŒæ­¥æ›´æ–°</a>, å°† GitHub ä»“åº“å¯¼å…¥ Giteeã€‚ç„¶åä½¿ç”¨ Gitee çš„åœ°å€æ‹‰å–ä»£ç ã€‚</p><blockquote><p>æ–‡æ¡£é“¾æ¥ï¼š<a href="https://gitee.com/help/articles/4284" target="_blank" rel="noopener">https://gitee.com/help/articles/4284</a></p></blockquote><h2><span id="3-é…ç½®-github-host-åœ°å€">3. é…ç½® Github Host åœ°å€</span></h2><p>æ‰“å¼€ <a href="https://www.ipaddress.com/" target="_blank" rel="noopener">https://www.ipaddress.com/</a> æŸ¥è¯¢ <a href="https://github.com.ipaddress.com/" target="_blank" rel="noopener">github.com</a> çš„ IP åœ°å€</p><p>ç¼–è¾‘æœ¬åœ° /etc/hosts æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">140.82.112.4 github.com</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥ä½¿ç”¨å¼€æºé¡¹ç›® GitHub520 è·å–æœ€æ–°çš„ IP åœ°å€ã€‚</p><blockquote><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/521xueweihan/GitHub520" target="_blank" rel="noopener">https://github.com/521xueweihan/GitHub520</a></p></blockquote><p>æ¥ç€å°±å¯ä»¥æ‹‰å–ä»£ç äº†ï¼Œä½†æ˜¯é€Ÿåº¦å¹¶ä¸ä¼šå¾ˆå¿«ï¼Œå› ä¸º Github ç”¨çš„æ˜¯ç¾å›½ IPã€‚</p><h2><span id="4-é…ç½®å‘½ä»¤è¡Œä»£ç†">4. é…ç½®å‘½ä»¤è¡Œä»£ç†</span></h2><p>å¦‚æœæœ‰å¯ç”¨çš„ä»£ç†æœåŠ¡ï¼Œé‚£ä¹ˆåœ¨æœ¬åœ° Terminal ä¸­é…ç½®ä»£ç†å³å¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Proxy</span><br><span class="line">function proxy_off()&#123;</span><br><span class="line">    unset http_proxy</span><br><span class="line">    unset HTTP_PROXY</span><br><span class="line">    unset https_proxy</span><br><span class="line">    unset HTTPS_PROXY</span><br><span class="line">    echo -e &quot;å·²å…³é—­ä»£ç†&quot;</span><br><span class="line">&#125;</span><br><span class="line">function proxy_on()&#123;</span><br><span class="line">    export http_proxy&#x3D;&quot;http:&#x2F;&#x2F;127.0.0.1:1087&quot;;</span><br><span class="line">    export HTTP_PROXY&#x3D;&quot;http:&#x2F;&#x2F;127.0.0.1:1087&quot;;</span><br><span class="line">    export https_proxy&#x3D;&quot;http:&#x2F;&#x2F;127.0.0.1:1087&quot;;</span><br><span class="line">    export HTTPS_PROXY&#x3D;&quot;http:&#x2F;&#x2F;127.0.0.1:1087&quot;;</span><br><span class="line">    echo -e &quot;å·²å¼€å¯ä»£ç†&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œé™ˆå°‘æ–‡çš„ç½‘ç«™ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/4tubycn9" target="_blank" rel="noopener">https://tinyurl.com/4tubycn9</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œè®¿é—® Github æ—¶ï¼Œç½‘ç»œä¼šé˜»æ–­æˆ–è€…å¾ˆæ…¢ã€‚æœ¬æ–‡æä¾›äº†è‹¥å¹²è®¿é—®æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;1-ä½¿ç”¨-Github-Mirror-ä¸‹è½½&quot;&gt;1. ä½¿ç”¨ Github Mirror ä¸‹è½½&lt;/h2&gt;
&lt;p&gt;ç›´æ¥åœ¨ GitHub ä»“åº“å‰é¢æ‹¼æ¥ Proxy åœ°å€ï¼Œä¸åŒçš„ Mirror æ‹¼æ¥æ–¹å¼å¯èƒ½æœ‰æ‰€ä¸åŒã€‚ä¸‹é¢ä»¥æ‹‰å– &lt;a href=&quot;https://github.com/shaowenchen/scripts&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/shaowenchen/scripts&lt;/a&gt; ä»“åº“ä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://mirror.ghproxy.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://mirror.ghproxy.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git clone https:&amp;#x2F;&amp;#x2F;mirror.ghproxy.com&amp;#x2F;https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;shaowenchen&amp;#x2F;scripts&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com.cnpmjs.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com.cnpmjs.org&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git clone https:&amp;#x2F;&amp;#x2F;github.com.cnpmjs.org&amp;#x2F;shaowenchen&amp;#x2F;scripts&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="WireGuard" scheme="https://www.hi-linux.com/categories/WireGuard/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="æ•™ç¨‹" scheme="https://www.hi-linux.com/tags/%E6%95%99%E7%A8%8B/"/>
    
      <category term="GitHub" scheme="https://www.hi-linux.com/tags/GitHub/"/>
    
  </entry>
  
  <entry>
    <title>Wintunï¼šä¸€æ¬¾æƒŠè‰³çš„ WireGuard è™šæ‹Ÿç½‘å¡æ¥å£é©±åŠ¨</title>
    <link href="https://www.hi-linux.com/posts/42946.html"/>
    <id>https://www.hi-linux.com/posts/42946.html</id>
    <published>2021-07-07T01:00:00.000Z</published>
    <updated>2021-07-08T08:13:31.352Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>å‰ä¸€æ®µæ—¶é—´ï¼Œä¸€ç›´åœ¨æ‰¾å¯» Windows æ“ä½œç³»ç»Ÿä¸Šçš„è™šæ‹Ÿç½‘å¡æ¥å£ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ­å»ºéš§é“ä½¿ç”¨ã€‚ä½†æ˜¯ Windows æ“ä½œç³»ç»Ÿä¸åƒ Linux æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„ä»£ç ä¸å¼€æºï¼Œå¯¼è‡´è¿™æ–¹é¢çš„èµ„æ–™å¾ˆå°‘ï¼Œå› æ­¤èŠ±è´¹äº†è¾ƒé•¿æ—¶é—´æ¥å¯»æ‰¾ç›¸å…³å®ç°æ¡†æ¶ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ä¸¤æ¬¾å¼€æºé¡¹ç›®çš„è™šæ‹Ÿæ¥å£é©±åŠ¨ï¼š</p><ul><li>Wireguard é¡¹ç›®çš„ Wintun æ¥å£[1]</li><li>OpenVPN çš„ Tap æ¥å£[2]</li></ul><p>è¿™ä¸¤ä¸ªé¡¹ç›®éƒ½æ˜¯éå¸¸å‡ºåçš„æ­å»ºéš§é“çš„å¼€æº V.P.N é¡¹ç›®ã€‚ç”±äºç›®å‰å¯¹ openVPN é¡¹ç›®ä¸å¤ªäº†è§£ï¼Œä¹Ÿæ²¡æœ‰é€‚é… Tap æ¥å£ï¼Œå› æ­¤è¿™é‡Œé‡ç‚¹ä»‹ç»ä¸‹ WinTun æ¥å£ã€‚æ­¤æ¥å£å®ç°æˆ‘æ˜¯éå¸¸éå¸¸çš„å–œæ¬¢ï¼Œå–œæ¬¢åˆ°ç®€ç›´ä¸è¦ä¸è¦çš„ã€‚</p><a id="more"></a><h2><span id="ç®€ä»‹">ç®€ä»‹</span></h2><p>è¯´åˆ° Wintun é¡¹ç›®ï¼Œå°±ä¸å¾—ä¸è¯´åˆ°å®ƒçš„çˆ¶äº²ï¼šWireGuard é¡¹ç›®ï¼ˆä»¥ä¸‹ç®€ç§° WGï¼‰ã€‚<strong>Github ä¼ é€é—¨</strong>[3]</p><p><img src="https://img.hi-linux.com/staticfile/640-20210630113612450-2021-06-30-Tfcrxr.png" alt></p><p>WG é¡¹ç›®ä½œä¸ºå¼€æº V.P.N é¡¹ç›®ï¼Œä¸åŒäº OpenVPN, Openswan, Strongswan ç­‰ï¼Œå®ƒçš„å®ç°éå¸¸ç®€ä»‹ï¼ŒLinux å†…æ ¸ä»£ç å®ç°ä¸åˆ° 4000 è¡Œã€‚ç›¸å¯¹äºä¸Šè¿°çš„ä¸‰ä¸ª â€œæŒ‰è¡Œæ”¶è´¹â€ çš„é¡¹ç›®ï¼ˆä»£ç  10 ä¸‡è¡Œèµ·æ­¥ï¼‰ï¼Œå®ƒç®€ç›´æ˜¯å¤ªç®€æ´äº†ã€‚æ•…è€Œå¾—åˆ°äº†ä¼—å¤šå¥½è¯„ï¼Œå…¶ä¸­å°±åŒ…æ‹¬ Linux é¼»ç¥–ï¼šLinus Torvaldsã€‚ä»–çš„è¯„ä»·å¦‚ä¸‹ï¼š</p><blockquote><p>Btw, on an unrelated issue: I see that Jason actually made the pull request to have wireguard included in the kernel.</p><p>Can I just once again state my love for it and hope it gets merged soon? Maybe the code isnâ€™t perfect, but Iâ€™ve skimmed it, and compared to the horrors that are OpenVPN and IPSec, itâ€™s a work of art.</p><p>Linus</p></blockquote><p>ç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼š<strong>åŠ³èµ„ç¨€ç½•ä½ ï¼Œè¦æŠŠä½ åˆå…¥æˆ‘çš„ Linux é¡¹ç›®ä¸­</strong>ã€‚å› æ­¤ Linux å†…æ ¸è‡ª 5.6 ä¹‹åä¾¿è‡ªå¸¦ WG éš§é“åŠŸèƒ½ï¼Œé…ç½®éå¸¸çš„ç®€å•ã€‚é€šè¿‡å‡ è¡Œä»£ç ä¾¿å¯ä»¥å®Œæˆä¸€ä¸ª WG éš§é“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ip link add dev wg0 type wireguard</span><br><span class="line">$ ip address add dev wg0 10.0.0.1&#x2F;24</span><br><span class="line">$ wg set wg0 listen-port 51820 private-key .&#x2F;private.key peer NIk5TyDpRDoU9tfIckTTXCsz1eht2aEmdN7l0Q31ow0&#x3D; allowed-ips 10.0.0.2&#x2F;32 endpoint 192.168.1.5:51820</span><br><span class="line">$ ip link set dev wg0 up</span><br></pre></td></tr></table></figure><p>é…ç½®éå¸¸ç®€å•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æä¾›äº† Windows å®¢æˆ·ç«¯ï¼Œè¿™ä¹Ÿæ˜¯æ­¤é¡¹ç›®ä¸ºä½•åŒ…å« Wintun è™šæ‹Ÿç½‘ç»œæ¥å£çš„åŸå› ã€‚</p><p>å®¢æˆ·ç«¯é¡µé¢ä¹Ÿæ˜¯éå¸¸ç®€æ´ï¼Œæ²¡æœ‰å¤šä½™çš„ä¸œè¥¿ (<strong>å®¢æˆ·ç«¯é“¾æ¥</strong>[4])ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/640-20210630113622279-2021-06-30-pTYDow.png" alt></p><p>å®¢æˆ·ç«¯ä¸Šéš§é“åå•†æˆåŠŸä¹‹åï¼Œä¼šæ ¹æ®éš§é“åç§°å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œéš§é“æ‹†é™¤åæ¥å£è‡ªåŠ¨åˆ é™¤ã€‚ç”±äºæˆ‘çš„éš§é“åç§°ä¸º Tun-1ï¼Œå› æ­¤åœ¨ â€œæ§åˆ¶ç‰ˆé¢â€ çš„â€œç½‘ç»œè¿æ¥â€ä¸­å‡ºç°äº†ä¸€ä¸ª Tun-1 çš„ç½‘ç»œæ¥å£ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/640-20210630113627967-2021-06-30-a6Sb0B.png" alt></p><p>å¥½äº†ï¼Œä¸‹é¢å¼€å§‹ä»‹ç»æ­¤è™šæ‹Ÿç½‘ç»œæ¥å£ã€‚</p><h2><span id="wintun-è™šæ‹Ÿç½‘ç»œæ¥å£">WinTun è™šæ‹Ÿç½‘ç»œæ¥å£</span></h2><p><img src="https://img.hi-linux.com/staticfile/640-20210630113633922-2021-06-30-rnV9d1.png" alt></p><ul><li><p><strong>Github ä¼ é€é—¨</strong>[5]</p></li><li><p><strong>wintun å®˜ç½‘ä¼ é€é—¨</strong>[6]</p></li></ul><p>å¸¸è§çš„ <strong>windwos çš„æ¥å£é©±åŠ¨å¼€å‘</strong>[7]ã€å®‰è£…æ¯”è¾ƒå¤æ‚ã€‚å¸¸è§çš„é©±åŠ¨å®‰è£…åŒ…æœ‰ï¼š.inf æ–‡ä»¶ã€.sys æ–‡ä»¶ã€.cat æ–‡ä»¶; é™¤æ­¤ä¹‹å¤–è¿˜æ¶‰åŠé©±åŠ¨ç¨‹åºç­¾åï¼Œå¦åˆ™æ— æ³•å®‰è£…æˆåŠŸã€‚å°¤å…¶åœ¨å¼€å‘è°ƒè¯•é˜¶æ®µï¼Œæ¯æ¬¡éƒ½å¾—ç­¾åï¼Œå¤ªç£¨å½äº†ã€‚</p><p>ä½†æ˜¯ WinTun æ¥å£ç”¨æ³•<strong>éå¸¸ç®€å•é«˜æ•ˆ</strong>ã€‚<strong>éå¸¸ç®€å•é«˜æ•ˆ</strong>ã€‚<strong>éå¸¸ç®€å•é«˜æ•ˆ</strong>ã€‚</p><blockquote><ol><li>å¼•å…¥å¤´æ–‡ä»¶ï¼šwintun.h</li><li>åŠ è½½åŠ¨æ€åº“ï¼Œè§£æåŠ¨æ€åº“ä¸­çš„å‡½æ•°æŒ‡é’ˆ</li></ol></blockquote><p>å®ƒé€šè¿‡<strong>åŠ¨æ€åº“</strong>ä¸­æ–¹å¼æ¥æä¾›æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åŠ è½½æ­¤åŠ¨æ€åº“ï¼Œç„¶åè°ƒç”¨åŠ¨æ€åº“ä¸­çš„å‡½æ•°æŒ‡é’ˆæ¥å®Œæˆè™šæ‹Ÿæ¥å£çš„åˆ›å»ºã€é”€æ¯ã€æ”¶å‘æ•°æ®åŒ…ç­‰å·¥ä½œã€‚æ­¤å¤–<strong>å®ƒæä¾›äº†ä¸€ä¸ªç¤ºä¾‹ä¾›å¤§å®¶å­¦ä¹ </strong>[8]ï¼Œæˆ‘ä¾¿æ˜¯é€šè¿‡å‚è€ƒå¼€æºä»£ç ä¸­çš„ç¤ºä¾‹ï¼ˆexample.cï¼‰ï¼Œå°† Wintun æ¥å£ç§»æ¤åˆ°æˆ‘çš„å·¥ç¨‹ä¹‹ä¸­ã€‚éå¸¸ç®€å•ï¼Œæˆ‘å¤ªå–œæ¬¢å®ƒäº†ã€‚</p><p>å®ä¾‹ä»£ç å°± 400 è¡Œï¼Œå…¶ä¸­å¤§éƒ¨åˆ†ä¸º log ä¿¡æ¯ï¼Œä¾›å¤§å®¶æŸ¥çœ‹ç¨‹åºè¿è¡ŒçŠ¶æ€å’ŒæŠ¥æ–‡æ”¶å‘ä¿¡æ¯ã€‚</p><h3><span id="åŠ è½½åŠ¨æ€åº“ä¸­çš„å‡½æ•°æŒ‡é’ˆ">åŠ è½½åŠ¨æ€åº“ä¸­çš„å‡½æ•°æŒ‡é’ˆ</span></h3><p>æ­¤å‡½æ•°çš„ä½œç”¨ï¼š</p><ul><li><strong>åŠ è½½åŠ¨æ€åº“ï¼Œè·å–åˆ°åŠ¨æ€åº“ä¸­çš„å‡½æ•°æŒ‡é’ˆï¼Œåé¢é€šè¿‡å‡½æ•°æŒ‡é’ˆæ¥æ“ä½œè™šæ‹Ÿç½‘å¡æ¥å£ã€‚</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">static HMODULE</span><br><span class="line">InitializeWintun(void)</span><br><span class="line">&#123;</span><br><span class="line">    HMODULE Wintun &#x3D;</span><br><span class="line">        LoadLibraryExW(L&quot;wintun.dll&quot;, NULL, LOAD_LIBRARY_SEARCH_APPLICATION_DIR | LOAD_LIBRARY_SEARCH_SYSTEM32);</span><br><span class="line">    if (!Wintun)</span><br><span class="line">        return NULL;</span><br><span class="line">#define X(Name, Type) ((Name &#x3D; (Type)GetProcAddress(Wintun, #Name)) &#x3D;&#x3D; NULL)</span><br><span class="line">    if (X(WintunCreateAdapter, WINTUN_CREATE_ADAPTER_FUNC) || X(WintunDeleteAdapter, WINTUN_DELETE_ADAPTER_FUNC) ||</span><br><span class="line">        X(WintunDeletePoolDriver, WINTUN_DELETE_POOL_DRIVER_FUNC) || X(WintunEnumAdapters, WINTUN_ENUM_ADAPTERS_FUNC) ||</span><br><span class="line">        X(WintunFreeAdapter, WINTUN_FREE_ADAPTER_FUNC) || X(WintunOpenAdapter, WINTUN_OPEN_ADAPTER_FUNC) ||</span><br><span class="line">        X(WintunGetAdapterLUID, WINTUN_GET_ADAPTER_LUID_FUNC) ||</span><br><span class="line">        X(WintunGetAdapterName, WINTUN_GET_ADAPTER_NAME_FUNC) ||</span><br><span class="line">        X(WintunSetAdapterName, WINTUN_SET_ADAPTER_NAME_FUNC) ||</span><br><span class="line">        X(WintunGetRunningDriverVersion, WINTUN_GET_RUNNING_DRIVER_VERSION_FUNC) ||</span><br><span class="line">        X(WintunSetLogger, WINTUN_SET_LOGGER_FUNC) || X(WintunStartSession, WINTUN_START_SESSION_FUNC) ||</span><br><span class="line">        X(WintunEndSession, WINTUN_END_SESSION_FUNC) || X(WintunGetReadWaitEvent, WINTUN_GET_READ_WAIT_EVENT_FUNC) ||</span><br><span class="line">        X(WintunReceivePacket, WINTUN_RECEIVE_PACKET_FUNC) ||</span><br><span class="line">        X(WintunReleaseReceivePacket, WINTUN_RELEASE_RECEIVE_PACKET_FUNC) ||</span><br><span class="line">        X(WintunAllocateSendPacket, WINTUN_ALLOCATE_SEND_PACKET_FUNC) || X(WintunSendPacket, WINTUN_SEND_PACKET_FUNC))</span><br><span class="line">#undef X</span><br><span class="line">    &#123;</span><br><span class="line">        DWORD LastError &#x3D; GetLastError();</span><br><span class="line">        FreeLibrary(Wintun);</span><br><span class="line">        SetLastError(LastError);</span><br><span class="line">        return NULL;</span><br><span class="line">    &#125;</span><br><span class="line">    return Wintun;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="main-å‡½æ•°">main() å‡½æ•°</span></h3><p>ä½œç”¨ï¼š</p><ul><li><strong>é€šè¿‡å‡½æ•°æŒ‡é’ˆåˆ›å»ºè™šæ‹Ÿç½‘å¡</strong></li><li><strong>åˆ›å»ºè™šæ‹Ÿç½‘å¡çš„æ”¶å‘çº¿ç¨‹</strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">int</span><br><span class="line">main(void)</span><br><span class="line">&#123;</span><br><span class="line">    HMODULE Wintun &#x3D; InitializeWintun();</span><br><span class="line">    if (!Wintun)</span><br><span class="line">        return LogError(L&quot;Failed to initialize Wintun&quot;, GetLastError());</span><br><span class="line">    WintunSetLogger(ConsoleLogger);</span><br><span class="line">    Log(WINTUN_LOG_INFO, L&quot;Wintun library loaded&quot;);</span><br><span class="line">    WintunEnumAdapters(L&quot;Example&quot;, PrintAdapter, 0);</span><br><span class="line"></span><br><span class="line">    DWORD LastError;</span><br><span class="line">    HaveQuit &#x3D; FALSE;</span><br><span class="line">    QuitEvent &#x3D; CreateEventW(NULL, TRUE, FALSE, NULL);</span><br><span class="line">    if (!QuitEvent)</span><br><span class="line">    &#123;</span><br><span class="line">        LastError &#x3D; LogError(L&quot;Failed to create event&quot;, GetLastError());</span><br><span class="line">        goto cleanupWintun;</span><br><span class="line">    &#125;</span><br><span class="line">    if (!SetConsoleCtrlHandler(CtrlHandler, TRUE))</span><br><span class="line">    &#123;</span><br><span class="line">        LastError &#x3D; LogError(L&quot;Failed to set console handler&quot;, GetLastError());</span><br><span class="line">        goto cleanupQuit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    GUID ExampleGuid &#x3D; &#123; 0xdeadbabe, 0xcafe, 0xbeef, &#123; 0x01, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef &#125; &#125;;</span><br><span class="line">    WINTUN_ADAPTER_HANDLE Adapter &#x3D; WintunOpenAdapter(L&quot;Example&quot;, L&quot;Demo&quot;);</span><br><span class="line">    if (!Adapter)</span><br><span class="line">    &#123;</span><br><span class="line">        Adapter &#x3D; WintunCreateAdapter(L&quot;Example&quot;, L&quot;Demo&quot;, &amp;ExampleGuid, NULL);</span><br><span class="line">        if (!Adapter)</span><br><span class="line">        &#123;</span><br><span class="line">            LastError &#x3D; GetLastError();</span><br><span class="line">            LogError(L&quot;Failed to create adapter&quot;, LastError);</span><br><span class="line">            goto cleanupQuit;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    DWORD Version &#x3D; WintunGetRunningDriverVersion();</span><br><span class="line">    Log(WINTUN_LOG_INFO, L&quot;Wintun v%u.%u loaded&quot;, (Version &gt;&gt; 16) &amp; 0xff, (Version &gt;&gt; 0) &amp; 0xff);</span><br><span class="line"></span><br><span class="line">    MIB_UNICASTIPADDRESS_ROW AddressRow;</span><br><span class="line">    InitializeUnicastIpAddressEntry(&amp;AddressRow);</span><br><span class="line">    WintunGetAdapterLUID(Adapter, &amp;AddressRow.InterfaceLuid);</span><br><span class="line">    AddressRow.Address.Ipv4.sin_family &#x3D; AF_INET;</span><br><span class="line">    AddressRow.Address.Ipv4.sin_addr.S_un.S_addr &#x3D; htonl((10 &lt;&lt; 24) | (6 &lt;&lt; 16) | (7 &lt;&lt; 8) | (7 &lt;&lt; 0)); &#x2F;* 10.6.7.7 *&#x2F;</span><br><span class="line">    AddressRow.OnLinkPrefixLength &#x3D; 24; &#x2F;* This is a &#x2F;24 network *&#x2F;</span><br><span class="line">    LastError &#x3D; CreateUnicastIpAddressEntry(&amp;AddressRow);</span><br><span class="line">    if (LastError !&#x3D; ERROR_SUCCESS &amp;&amp; LastError !&#x3D; ERROR_OBJECT_ALREADY_EXISTS)</span><br><span class="line">    &#123;</span><br><span class="line">        LogError(L&quot;Failed to set IP address&quot;, LastError);</span><br><span class="line">        goto cleanupAdapter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    WINTUN_SESSION_HANDLE Session &#x3D; WintunStartSession(Adapter, 0x400000);</span><br><span class="line">    if (!Session)</span><br><span class="line">    &#123;</span><br><span class="line">        LastError &#x3D; LogLastError(L&quot;Failed to create adapter&quot;);</span><br><span class="line">        goto cleanupAdapter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Log(WINTUN_LOG_INFO, L&quot;Launching threads and mangling packets...&quot;);</span><br><span class="line"></span><br><span class="line">    HANDLE Workers[] &#x3D; &#123; CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)ReceivePackets, (LPVOID)Session, 0, NULL),</span><br><span class="line">                         CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)SendPackets, (LPVOID)Session, 0, NULL) &#125;;</span><br><span class="line">    if (!Workers[0] || !Workers[1])</span><br><span class="line">    &#123;</span><br><span class="line">        LastError &#x3D; LogError(L&quot;Failed to create threads&quot;, GetLastError());</span><br><span class="line">        goto cleanupWorkers;</span><br><span class="line">    &#125;</span><br><span class="line">    WaitForMultipleObjectsEx(_countof(Workers), Workers, TRUE, INFINITE, TRUE);</span><br><span class="line">    LastError &#x3D; ERROR_SUCCESS;</span><br><span class="line"></span><br><span class="line">cleanupWorkers:</span><br><span class="line">    HaveQuit &#x3D; TRUE;</span><br><span class="line">    SetEvent(QuitEvent);</span><br><span class="line">    for (size_t i &#x3D; 0; i &lt; _countof(Workers); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        if (Workers[i])</span><br><span class="line">        &#123;</span><br><span class="line">            WaitForSingleObject(Workers[i], INFINITE);</span><br><span class="line">            CloseHandle(Workers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    WintunEndSession(Session);</span><br><span class="line">cleanupAdapter:</span><br><span class="line">    WintunDeleteAdapter(Adapter, FALSE, NULL);</span><br><span class="line">    WintunFreeAdapter(Adapter);</span><br><span class="line">cleanupQuit:</span><br><span class="line">    SetConsoleCtrlHandler(CtrlHandler, FALSE);</span><br><span class="line">    CloseHandle(QuitEvent);</span><br><span class="line">cleanupWintun:</span><br><span class="line">    FreeLibrary(Wintun);</span><br><span class="line">    return LastError;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¶å‘æŠ¥æ–‡çš„æ¥å£æ“ä½œä¹Ÿéå¸¸ç®€å•ï¼Œä½†æ˜¯ä¸ windows ç½‘ç»œåè®®æ ˆä¹‹é—´çš„å…³ç³»ä»éœ€è¦ç»§ç»­æ‘¸ç´¢ã€‚</p><h3><span id="ç‰¹åˆ«è¯´æ˜">ç‰¹åˆ«è¯´æ˜</span></h3><p>Wintun æ¥å£æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ 3 å±‚é€»è¾‘æ¥å£ã€‚åŸæ–‡å¦‚ä¸‹ï¼š</p><blockquote><p>Wintun is a very simple and minimal TUN driver for the Windows kernel, which provides userspace programs with a simple network adapter for reading and writing packets. It is akin to Linuxâ€™s /dev/net/tun and BSDâ€™s /dev/tun. Originally designed for use in WireGuard, Wintun is meant to be generally useful for a wide variety of layer 3 networking protocols and experiments. The driver is open source, so anybody can inspect and build it. Due to Microsoftâ€™s driver signing requirements, we provide precompiled and signed versions that may be distributed with your software. The goal of the project is to be as simple as possible, opting to do things in the most pure and straight-forward way provided by NDIS.</p></blockquote><p>è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªå°å°çš„é—®é¢˜ï¼š<strong>Wireshark ä¸Šæ— æ³•æŠ“å–æ­¤æ¥å£æŠ¥æ–‡</strong>ã€‚å¦‚æœæƒ³çœ‹å°è£…åçš„æŠ¥æ–‡ä¿¡æ¯ï¼Œåˆ™éœ€è¦å•ç‹¬è®°å½•æ—¥å¿—è€ŒéæŠ“åŒ…æ¥å®Œæˆã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210630113648931-2021-06-30-rB5kXq.png" alt></p><p>å¯¼è‡´è¿™ä¸ªé—®é¢˜åŸå› æ²¡æœ‰æ‰¾åˆ°ï¼Œæˆ‘è®¤ä¸ºæ˜¯ï¼š<strong>wireshark æŠ“å–çš„æŠ¥æ–‡æ˜¯äºŒå±‚æŠ¥æ–‡ (ä¸€ä¸ªå®Œæ•´çš„ä»¥å¤ªç½‘å¸§)ï¼Œè€Œ 3 å±‚é€»è¾‘æ¥å£ä¸Šçš„æŠ¥æ–‡å°šæœªå°è£…ä»¥å¤ªç½‘å¸§ï¼Œæ•…æ— æ³•æŠ“å–æ­¤æ¥å£ã€‚è¿™åªæ˜¯ä¸ªäººçŒœæµ‹ï¼Œæ ¹æœ¬åŸå› ä¸å¾—è€ŒçŸ¥ã€‚</strong></p><p><img src="https://img.hi-linux.com/staticfile/640-20210630113654931-2021-06-30-0mF6hi.png" alt></p><p>å¥½äº†ï¼ŒåŸºæœ¬ä»‹ç»å®Œæ¯•ï¼Œé‡æ–°è¡¨è¾¾ä¸‹æˆ‘å¯¹ WireGuard å’Œ WinTun çš„æ€åº¦ï¼š<strong>åŠ³èµ„ç¨€ç½•ä½ ï¼Œvery å–œæ¬¢ã€‚</strong></p><blockquote><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/s2603898260/article/details/117389372" target="_blank" rel="noopener">https://blog.csdn.net/s2603898260/article/details/117389372</a></p></blockquote><h3><span id="è„šæ³¨">è„šæ³¨</span></h3><p>[1]Wireguard é¡¹ç›®çš„ Wintun æ¥å£: <em><a href="https://github.com/WireGuard" target="_blank" rel="noopener">https://github.com/WireGuard</a></em></p><p>[2]OpenVPN çš„ Tap æ¥å£: <em><a href="https://github.com/Toney-Sun/openvpn" target="_blank" rel="noopener">https://github.com/Toney-Sun/openvpn</a></em></p><p>[3]Github ä¼ é€é—¨: <em><a href="https://github.com/WireGuard" target="_blank" rel="noopener">https://github.com/WireGuard</a></em></p><p>[4]å®¢æˆ·ç«¯é“¾æ¥: <em><a href="https://www.wireguard.com/install/" target="_blank" rel="noopener">https://www.wireguard.com/install/</a></em></p><p>[5]Github ä¼ é€é—¨: <em><a href="https://github.com/Toney-Sun/wintun" target="_blank" rel="noopener">https://github.com/Toney-Sun/wintun</a></em></p><p>[6]wintun å®˜ç½‘ä¼ é€é—¨: <em><a href="https://www.wintun.net/" target="_blank" rel="noopener">https://www.wintun.net/</a></em></p><p>[7]windwos çš„æ¥å£é©±åŠ¨å¼€å‘: <em><a href="https://docs.microsoft.com/zh-cn/windows-hardware/drivers/install/components-of-a-driver-package" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/windows-hardware/drivers/install/components-of-a-driver-package</a></em></p><p>[8]å®ƒæä¾›äº†ä¸€ä¸ªç¤ºä¾‹ä¾›å¤§å®¶å­¦ä¹ : <em><a href="https://git.zx2c4.com/wintun/tree/example/example.c" target="_blank" rel="noopener">https://git.zx2c4.com/wintun/tree/example/example.c</a></em></p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œäº‘åŸç”Ÿå®éªŒå®¤ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/y6mv2ym2" target="_blank" rel="noopener">https://tinyurl.com/y6mv2ym2</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ä¸€æ®µæ—¶é—´ï¼Œä¸€ç›´åœ¨æ‰¾å¯» Windows æ“ä½œç³»ç»Ÿä¸Šçš„è™šæ‹Ÿç½‘å¡æ¥å£ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ­å»ºéš§é“ä½¿ç”¨ã€‚ä½†æ˜¯ Windows æ“ä½œç³»ç»Ÿä¸åƒ Linux æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„ä»£ç ä¸å¼€æºï¼Œå¯¼è‡´è¿™æ–¹é¢çš„èµ„æ–™å¾ˆå°‘ï¼Œå› æ­¤èŠ±è´¹äº†è¾ƒé•¿æ—¶é—´æ¥å¯»æ‰¾ç›¸å…³å®ç°æ¡†æ¶ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ä¸¤æ¬¾å¼€æºé¡¹ç›®çš„è™šæ‹Ÿæ¥å£é©±åŠ¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wireguard é¡¹ç›®çš„ Wintun æ¥å£[1]&lt;/li&gt;
&lt;li&gt;OpenVPN çš„ Tap æ¥å£[2]&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªé¡¹ç›®éƒ½æ˜¯éå¸¸å‡ºåçš„æ­å»ºéš§é“çš„å¼€æº V.P.N é¡¹ç›®ã€‚ç”±äºç›®å‰å¯¹ openVPN é¡¹ç›®ä¸å¤ªäº†è§£ï¼Œä¹Ÿæ²¡æœ‰é€‚é… Tap æ¥å£ï¼Œå› æ­¤è¿™é‡Œé‡ç‚¹ä»‹ç»ä¸‹ WinTun æ¥å£ã€‚æ­¤æ¥å£å®ç°æˆ‘æ˜¯éå¸¸éå¸¸çš„å–œæ¬¢ï¼Œå–œæ¬¢åˆ°ç®€ç›´ä¸è¦ä¸è¦çš„ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="WireGuard" scheme="https://www.hi-linux.com/categories/WireGuard/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="æ•™ç¨‹" scheme="https://www.hi-linux.com/tags/%E6%95%99%E7%A8%8B/"/>
    
      <category term="WireGuard" scheme="https://www.hi-linux.com/tags/WireGuard/"/>
    
  </entry>
  
  <entry>
    <title>å†™ç»™ Linux å°ç™½ç”¨æˆ·çš„å‘½ä»¤è¡Œæç®€æ•™ç¨‹</title>
    <link href="https://www.hi-linux.com/posts/38789.html"/>
    <id>https://www.hi-linux.com/posts/38789.html</id>
    <published>2021-07-06T01:00:00.000Z</published>
    <updated>2021-07-06T04:38:08.156Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>ç”µè„‘å›¾å½¢åŒ–çš„äº¤äº’æ–¹å¼å¯¹ç”¨æˆ·ä½¿ç”¨æ¥è¯´æ›´åŠ çš„å‹å¥½ï¼Œè€Œå¯¹äºå‘½ä»¤è¡Œçš„æ“ä½œæ–¹å¼æ¥è¯´ï¼Œé€šå¸¸ä¼šæœ‰æ›´åŠ é«˜çš„å­¦ä¹ æ›²çº¿ã€‚ä½†ä½ ä¸å¾—ä¸æ‰¿è®¤ï¼Œä½¿ç”¨å›¾å½¢åŒ–çš„ç•Œé¢ä¼šéœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºï¼Œè€Œä¸”é€šå¸¸æ¥è¯´æ˜¯æ¯”è¾ƒéš¾é€šè¿‡è„šæœ¬çš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨åŒ–çš„ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬è¦è¾©è¯çš„æ¥çœ‹è¿™ä¸ªé—®é¢˜ï¼Œå›¾å½¢ç•Œé¢æ“ä½œæ–¹å¼è™½å¥½ï¼Œä½†æ˜¯å¯¹äºå·¥ç¨‹å¸ˆæ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬è¦æ›´é«˜æ•ˆçš„å®Œæˆæˆ‘ä»¬çš„å·¥ä½œï¼Œå‘½ä»¤è¡Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼æé«˜æˆ‘ä»¬å·¥ä½œæ•ˆç‡çš„æ–¹å¼ã€‚</p><p>ä»Šå¤©è¦æ¨èçš„å¼€æºé¡¹ç›®æ±‡æ€»äº†æˆ‘ä»¬æ—¥å¸¸ä¼šä½¿ç”¨çš„å‘½ä»¤è¡Œçš„åˆ—è¡¨ï¼Œå¹¶å¢åŠ äº†æœ‰è¶£çš„è®²è§£æ–¹å¼ï¼Œç›¸ä¿¡èƒ½å¤Ÿå¸®åŠ©ä½ å¾ˆå¥½çš„å…¥é—¨å‘½ä»¤è¡Œæ“ä½œæ–¹å¼ã€‚</p><a id="more"></a><p><img src="https://img.hi-linux.com/staticfile/image-20210630104614098-2021-06-30-j5qxxN.png" alt></p><p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªç›®å½•åˆ—è¡¨ï¼ŒåŸºæœ¬è¦†ç›–äº†æ—¥å¸¸ç»å¸¸ç”¨åˆ°çš„ï¼Œå¦‚æœèƒ½ä½¿ç”¨ä¸Šä¸€å®šä¼šæå¤§æé«˜ä½ çš„æ•ˆç‡ã€‚</p><p>ä»¥ä¸‹æ˜¯å¯¹æœç´¢æ–‡æ¡£çš„å‘½ä»¤è§£é‡Šï¼š</p><p><img src="https://img.hi-linux.com/staticfile/image-20210630104542733-2021-06-30-F5F6qf.png" alt></p><p>æ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹ <code>You-Dont-Need-GUI</code> å¼€æºé¡¹ç›®é“¾æ¥ï¼š<a href="https://github.com/you-dont-need/You-Dont-Need-GUI" target="_blank" rel="noopener">https://github.com/you-dont-need/You-Dont-Need-GUI</a></p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ GitHub ç²¾é€‰ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/hehuhfjj" target="_blank" rel="noopener">https://tinyurl.com/hehuhfjj</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”µè„‘å›¾å½¢åŒ–çš„äº¤äº’æ–¹å¼å¯¹ç”¨æˆ·ä½¿ç”¨æ¥è¯´æ›´åŠ çš„å‹å¥½ï¼Œè€Œå¯¹äºå‘½ä»¤è¡Œçš„æ“ä½œæ–¹å¼æ¥è¯´ï¼Œé€šå¸¸ä¼šæœ‰æ›´åŠ é«˜çš„å­¦ä¹ æ›²çº¿ã€‚ä½†ä½ ä¸å¾—ä¸æ‰¿è®¤ï¼Œä½¿ç”¨å›¾å½¢åŒ–çš„ç•Œé¢ä¼šéœ€è¦æ›´å¤šçš„è®¡ç®—èµ„æºï¼Œè€Œä¸”é€šå¸¸æ¥è¯´æ˜¯æ¯”è¾ƒéš¾é€šè¿‡è„šæœ¬çš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨åŒ–çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬è¦è¾©è¯çš„æ¥çœ‹è¿™ä¸ªé—®é¢˜ï¼Œå›¾å½¢ç•Œé¢æ“ä½œæ–¹å¼è™½å¥½ï¼Œä½†æ˜¯å¯¹äºå·¥ç¨‹å¸ˆæ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬è¦æ›´é«˜æ•ˆçš„å®Œæˆæˆ‘ä»¬çš„å·¥ä½œï¼Œå‘½ä»¤è¡Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼æé«˜æˆ‘ä»¬å·¥ä½œæ•ˆç‡çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©è¦æ¨èçš„å¼€æºé¡¹ç›®æ±‡æ€»äº†æˆ‘ä»¬æ—¥å¸¸ä¼šä½¿ç”¨çš„å‘½ä»¤è¡Œçš„åˆ—è¡¨ï¼Œå¹¶å¢åŠ äº†æœ‰è¶£çš„è®²è§£æ–¹å¼ï¼Œç›¸ä¿¡èƒ½å¤Ÿå¸®åŠ©ä½ å¾ˆå¥½çš„å…¥é—¨å‘½ä»¤è¡Œæ“ä½œæ–¹å¼ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/categories/Linux/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="æ•™ç¨‹" scheme="https://www.hi-linux.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>5 åˆ†é’Ÿææ‡‚é«˜æ€§èƒ½åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿ Kafka</title>
    <link href="https://www.hi-linux.com/posts/21173.html"/>
    <id>https://www.hi-linux.com/posts/21173.html</id>
    <published>2021-07-05T01:00:00.000Z</published>
    <updated>2021-07-06T04:38:08.154Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>kafka ç”± LinkedIn å…¬å¸æ¨å‡ºçš„ä¸€ä¸ªé«˜ååçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œé€šä¿—çš„è¯´å°±æ˜¯ä¸€ä¸ªåŸºäºå‘å¸ƒå’Œè®¢é˜…çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</p><blockquote><p>å®˜ç½‘åœ°å€ï¼š<a href="https://kafka.apache.org/intro" target="_blank" rel="noopener">https://kafka.apache.org/intro</a></p></blockquote><h2><span id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</span></h2><ul><li>å¼‚æ­¥è§£æ„ï¼šåœ¨ä¸Šä¸‹æ¸¸æ²¡æœ‰å¼ºä¾èµ–çš„ä¸šåŠ¡å…³ç³»æˆ–é’ˆå¯¹å•æ¬¡è¯·æ±‚ä¸éœ€è¦ç«‹åˆ»å¤„ç†çš„ä¸šåŠ¡ï¼›</li><li>ç³»ç»Ÿç¼“å†²ï¼šæœ‰åˆ©äºè§£å†³æœåŠ¡ç³»ç»Ÿçš„ååé‡ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå°¤å…¶å¯¹å¤„ç†é€Ÿåº¦è¾ƒæ…¢çš„æœåŠ¡æ¥è¯´èµ·åˆ°ç¼“å†²ä½œç”¨ï¼›</li><li>æ¶ˆå³°ä½œç”¨ï¼šå¯¹äºçŸ­æ—¶é—´å¶ç°çš„æç«¯æµé‡ï¼Œå¯¹åç«¯çš„æœåŠ¡å¯ä»¥å¯åŠ¨ä¿æŠ¤ä½œç”¨ï¼›</li><li>æ•°æ®æµå¤„ç†ï¼šé›†æˆ spark åšå®äº‹æ•°æ®æµå¤„ç†ã€‚</li></ul><a id="more"></a><h2><span id="kafka-æ‹“æ‰‘å›¾å¤šå‰¯æœ¬æœºåˆ¶">Kafka æ‹“æ‰‘å›¾ï¼ˆå¤šå‰¯æœ¬æœºåˆ¶ï¼‰</span></h2><p><img src="https://img.hi-linux.com/staticfile/640-2021-06-08-UybUKS.jpg" alt></p><p>ç”±ä¸Šå›¾æˆ‘ä»¬å¯ä»¥å‘ç° Kafka æ˜¯åˆ†å¸ƒå¼ï¼ŒåŒæ—¶å¯¹äºæ¯ä¸€ä¸ªåˆ†åŒºéƒ½å­˜åœ¨å¤šå‰¯æœ¬ï¼ŒåŒæ—¶æ•´ä¸ªé›†ç¾¤çš„ç®¡ç†éƒ½é€šè¿‡ zookeeper ç®¡ç†ã€‚</p><h2><span id="kafka-æ ¸å¿ƒç»„ä»¶">Kafka æ ¸å¿ƒç»„ä»¶</span></h2><h3><span id="broker">broker</span></h3><p>Kafka æœåŠ¡å™¨ï¼Œè´Ÿè´£æ¶ˆæ¯å­˜å‚¨å’Œè½¬å‘ï¼›ä¸€ broker å°±ä»£è¡¨ä¸€ä¸ª kafka èŠ‚ç‚¹ã€‚<strong>ä¸€ä¸ª broker å¯ä»¥åŒ…å«å¤šä¸ª topic</strong></p><h3><span id="topic">topic</span></h3><p>æ¶ˆæ¯ç±»åˆ«ï¼ŒKafka æŒ‰ç…§ topic æ¥åˆ†ç±»æ¶ˆæ¯</p><h3><span id="partition">partition</span></h3><ul><li>topic çš„åˆ†åŒºï¼Œä¸€ä¸ª topic å¯ä»¥åŒ…å«å¤šä¸ª partitionï¼Œtopic æ¶ˆæ¯ä¿å­˜åœ¨å„ä¸ª partition ä¸Šï¼›ç”±äºä¸€ä¸ª topic èƒ½è¢«åˆ†åˆ°å¤šä¸ªåˆ†åŒºä¸Šï¼Œç»™ kafka æä¾›ç»™äº†å¹¶è¡Œçš„å¤„ç†èƒ½åŠ›ï¼Œè¿™ä¹Ÿæ­£æ˜¯ kafka é«˜ååçš„åŸå› ä¹‹ä¸€ã€‚</li><li>partition ç‰©ç†ä¸Šç”±å¤šä¸ª segment æ–‡ä»¶ç»„æˆï¼Œæ¯ä¸ª segment å¤§å°ç›¸ç­‰ï¼Œ<strong>é¡ºåºè¯»å†™ï¼ˆè¿™ä¹Ÿæ˜¯ kafka æ¯”è¾ƒå¿«çš„åŸå› ä¹‹ä¸€ï¼Œä¸éœ€è¦éšæœºå†™ï¼‰</strong>ã€‚æ¯ä¸ª Segment æ•°æ®æ–‡ä»¶ä»¥è¯¥æ®µä¸­æœ€å°çš„ offset ï¼Œæ–‡ä»¶æ‰©å±•åä¸º.logã€‚å½“æŸ¥æ‰¾ offset çš„ Message çš„æ—¶å€™ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¿«æ‰¾åˆ° Message æ‰€å¤„äºçš„ Segment ä¸­ã€‚</li></ul><p><img src="https://img.hi-linux.com/staticfile/640-20210608153214599-2021-06-08-1TbIEn.jpg" alt></p><h3><span id="offset">offset</span></h3><ul><li>æ¶ˆæ¯åœ¨æ—¥å¿—ä¸­çš„ä½ç½®ï¼Œå¯ä»¥ç†è§£æ˜¯æ¶ˆæ¯åœ¨ partition ä¸Šçš„åç§»é‡ï¼Œä¹Ÿæ˜¯ä»£è¡¨è¯¥æ¶ˆæ¯çš„ <strong>å”¯ä¸€åºå·</strong>ã€‚</li><li>åŒæ—¶ä¹Ÿæ˜¯ä¸»ä»ä¹‹é—´çš„éœ€è¦åŒæ­¥çš„ä¿¡æ¯ã€‚</li></ul><p><img src="https://img.hi-linux.com/staticfile/640-20210608171653851-2021-06-08-vYXtZy.png" alt></p><h3><span id="producer">Producer</span></h3><p>ç”Ÿäº§è€…ï¼Œè´Ÿè´£å‘ Kafka Broker å‘æ¶ˆæ¯çš„å®¢æˆ·ç«¯</p><h3><span id="consumer">Consumer</span></h3><p>æ¶ˆæ¯æ¶ˆè€…ï¼Œè´Ÿè´£æ¶ˆè´¹ Kafka Broker ä¸­çš„æ¶ˆæ¯</p><h3><span id="consumer-group">Consumer Group</span></h3><p>æ¶ˆè´¹è€…ç»„ï¼Œæ¯ä¸ª Consumer å¿…é¡»å±äºä¸€ä¸ª groupï¼›ï¼ˆ<strong>æ³¨æ„çš„æ˜¯ ä¸€ä¸ªåˆ†åŒºåªèƒ½ç”±ç»„å†…ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œæ¶ˆè´¹è€…ç»„ä¹‹é—´äº’ä¸å½±å“ã€‚</strong>ï¼‰</p><h3><span id="zookeeper">Zookeeper</span></h3><p>ç®¡ç† kafka é›†ç¾¤ï¼Œè´Ÿè´£å­˜å‚¨äº†é›†ç¾¤ brokerã€topicã€partition ç­‰ meta æ•°æ®å­˜å‚¨ï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£ broker æ•…éšœå‘ç°ï¼Œpartition leader é€‰ä¸¾ï¼Œè´Ÿè½½å‡è¡¡ç­‰åŠŸèƒ½ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210608153214949-2021-06-08-k34ndR.jpg" alt></p><h2><span id="æœåŠ¡æ²»ç†">æœåŠ¡æ²»ç†</span></h2><p>æ—¢ç„¶ Kafka æ˜¯åˆ†å¸ƒå¼çš„å‘å¸ƒ/è®¢é˜…ç³»ç»Ÿï¼Œè¿™æ ·å¦‚æœåšçš„é›†ç¾¤ä¹‹é—´æ•°æ®åŒæ­¥å’Œä¸€è‡´æ€§ï¼Œkafka æ˜¯ä¸æ˜¯è‚¯å®šä¸ä¼šä¸¢æ¶ˆæ¯å‘¢ï¼Ÿä»¥åŠå®•æœºçš„æ—¶å€™å¦‚æœè¿›è¡Œ Leader é€‰ä¸¾å‘¢ï¼Ÿ</p><h3><span id="æ•°æ®åŒæ­¥">æ•°æ®åŒæ­¥</span></h3><p>åœ¨ Kafka ä¸­çš„ Partition æœ‰ä¸€ä¸ª leader ä¸å¤šä¸ª followerï¼Œproducer å¾€æŸä¸ª Partition ä¸­å†™å…¥æ•°æ®æ˜¯ï¼Œåªä¼šå¾€ leader ä¸­å†™å…¥æ•°æ®ï¼Œç„¶åæ•°æ®æ‰ä¼šè¢«å¤åˆ¶è¿›å…¶ä»–çš„ Replica ä¸­ã€‚è€Œæ¯ä¸€ä¸ª follower å¯ä»¥ç†è§£æˆä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œå®šæœŸå» leader å»æ‹‰å»æ¶ˆæ¯ã€‚è€Œåªæœ‰æ•°æ®åŒæ­¥äº†åï¼Œkafka æ‰ä¼šç»™ç”Ÿäº§è€…è¿”å›ä¸€ä¸ª ACK å‘ŠçŸ¥æ¶ˆæ¯å·²ç»å­˜å‚¨è½åœ°äº†ã€‚</p><h4><span id="isr">ISR</span></h4><p>åœ¨ Kafka ä¸­ï¼Œä¸ºäº†ä¿è¯æ€§èƒ½ï¼ŒKafka ä¸ä¼šé‡‡ç”¨å¼ºä¸€è‡´æ€§çš„æ–¹å¼æ¥åŒæ­¥ä¸»ä»çš„æ•°æ®ã€‚è€Œæ˜¯ç»´æŠ¤äº†ä¸€ä¸ªï¼šin-sync Replica çš„åˆ—è¡¨ï¼ŒLeader ä¸éœ€è¦ç­‰å¾…æ‰€æœ‰ Follower éƒ½å®ŒæˆåŒæ­¥ï¼Œåªè¦åœ¨ ISR ä¸­çš„ Follower å®Œæˆæ•°æ®åŒæ­¥å°±å¯ä»¥å‘é€ ack ç»™ç”Ÿäº§è€…å³å¯è®¤ä¸ºæ¶ˆæ¯åŒæ­¥å®Œæˆã€‚åŒæ—¶å¦‚æœå‘ç° ISR é‡Œé¢æŸä¸€ä¸ª follower è½åå¤ªå¤šçš„è¯ï¼Œå°±ä¼šæŠŠå®ƒå‰”é™¤ã€‚</p><p>å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/640-20210608171703950-2021-06-08-xMVWIS.jpg" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210608153215253-2021-06-08-YVCeg5.jpg" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210608171710748-2021-06-08-xDzUTa.jpg" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210608153215595-2021-06-08-0UxZSM.jpg" alt></p><p><strong>ä¸Šè¿°çš„åšæ³•å¹¶æ— æ³•ä¿è¯ kafka ä¸€å®šä¸ä¸¢æ¶ˆæ¯ã€‚</strong> è™½ç„¶ Kafka é€šè¿‡å¤šå‰¯æœ¬æœºåˆ¶ä¸­æœ€å¤§é™åº¦ä¿è¯æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼Œä½†æ˜¯å¦‚æœæ•°æ®å·²ç»å†™å…¥ç³»ç»Ÿ page cache ä¸­ä½†æ˜¯è¿˜æ²¡æ¥å¾—åŠåˆ·å…¥ç£ç›˜ï¼Œæ­¤æ—¶çªç„¶æœºå™¨å®•æœºæˆ–è€…æ‰ç”µï¼Œé‚£æ¶ˆæ¯è‡ªç„¶è€Œç„¶çš„å°±ä¼šä¸¢å¤±ã€‚</p><h4><span id="kafka-æ•…éšœæ¢å¤">Kafka æ•…éšœæ¢å¤</span></h4><p><img src="https://img.hi-linux.com/staticfile/640-20210608171719734-2021-06-08-qboDya.jpg" alt></p><p>Kafka é€šè¿‡ Zookeeper è¿åé›†ç¾¤çš„ç®¡ç†ï¼Œæ‰€ä»¥è¿™é‡Œçš„é€‰ä¸¾æœºåˆ¶é‡‡ç”¨çš„æ˜¯ Zab(zookeeper ä½¿ç”¨)ã€‚</p><ul><li>ç”Ÿäº§è€…å‘ç”Ÿæ¶ˆæ¯ç»™ leaderï¼Œè¿™ä¸ªæ—¶å€™ leader å®Œæˆæ•°æ®å­˜å‚¨ï¼Œçªç„¶å‘ç”Ÿæ•…éšœï¼Œæ²¡æœ‰ç»™ producer è¿”å› ackï¼›</li><li>é€šè¿‡ ZK é€‰ä¸¾ï¼Œå…¶ä¸­ä¸€ä¸ª follower æˆä¸º leaderï¼Œè¿™ä¸ªæ—¶å€™ producer é‡æ–°è¯·æ±‚æ–°çš„ leaderï¼Œå¹¶å­˜å‚¨æ•°æ®ã€‚</li></ul><h2><span id="kafka-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«">Kafka ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«</span></h2><h3><span id="é¡ºåºå†™ç£ç›˜">é¡ºåºå†™ç£ç›˜</span></h3><p>Kafka é‡‡ç”¨äº†é¡ºåºå†™ç£ç›˜ï¼Œè€Œç”±äºé¡ºåºå†™ç£ç›˜ç›¸å¯¹éšæœºå†™ï¼Œå‡å°‘äº†å¯»åœ°å€çš„è€—è´¹æ—¶é—´ã€‚ï¼ˆåœ¨ Kafka çš„æ¯ä¸€ä¸ªåˆ†åŒºé‡Œé¢æ¶ˆæ¯æ˜¯æœ‰åºçš„ã€‚</p><h3><span id="page-cache">Page Cache</span></h3><p>Kafka åœ¨ OS ç³»ç»Ÿæ–¹é¢ä½¿ç”¨äº† Page Cache è€Œä¸æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€ç”¨çš„ Bufferã€‚Page Cache å…¶å®ä¸é™Œç”Ÿï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹ç‰©ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210608171726453-2021-06-08-U7ZUfO.jpg" alt></p><p>æˆ‘ä»¬åœ¨linuxä¸ŠæŸ¥çœ‹å†…å­˜çš„æ—¶å€™ï¼Œç»å¸¸å¯ä»¥çœ‹åˆ°buff/cacheï¼Œä¸¤è€…éƒ½æ˜¯ç”¨æ¥åŠ é€ŸIOè¯»å†™ç”¨çš„ï¼Œè€Œcacheæ˜¯ä½œç”¨äºè¯»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç£ç›˜çš„å†…å®¹å¯ä»¥è¯»åˆ°cacheé‡Œé¢è¿™æ ·ï¼Œåº”ç”¨ç¨‹åºè¯»ç£ç›˜å°±éå¸¸å¿«ï¼›è€Œbuffæ˜¯ä½œç”¨äºå†™ï¼Œæˆ‘ä»¬å¼€å‘å†™ç£ç›˜éƒ½æ˜¯ï¼Œä¸€èˆ¬å¦‚æœå†™å…¥ä¸€ä¸ªbuffé‡Œé¢å†flushå°±éå¸¸å¿«ã€‚è€Œkafkaæ­£æ˜¯æŠŠè¿™ä¸¤è€…å‘æŒ¥äº†æè‡´ï¼šKafkaè™½ç„¶æ˜¯scalaå†™çš„ï¼Œä½†æ˜¯ä¾æ—§åœ¨Javaçš„è™šæ‹Ÿæœºä¸Šè¿è¡Œï¼Œå°½ç®¡å¦‚æ­¤ï¼Œkafkaå®ƒè¿˜æ˜¯å°½é‡é¿å¼€äº†JVMçš„é™åˆ¶ï¼Œå®ƒåˆ©ç”¨äº†Page cacheæ¥å­˜å‚¨ï¼Œè¿™æ ·èº²å¼€äº†æ•°æ®åœ¨JVMå› ä¸ºGCè€Œå‘ç”Ÿçš„STWã€‚å¦ä¸€æ–¹é¢ä¹Ÿæ˜¯Page Cacheä½¿å¾—å®ƒå®ç°äº†é›¶æ‹·è´ï¼Œå…·ä½“ä¸‹é¢ä¼šè®²ã€‚</p><h3><span id="é›¶æ‹·è´">é›¶æ‹·è´</span></h3><p>æ— è®ºæ˜¯ä¼˜ç§€çš„ Netty è¿˜æ˜¯å…¶ä»–ä¼˜ç§€çš„ Java æ¡†æ¶ï¼ŒåŸºæœ¬éƒ½åœ¨é›¶æ‹·è´å‡å°‘äº† CPU çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç£ç›˜çš„ IOã€‚å½“ç„¶ Kafka ä¹Ÿä¸ä¾‹å¤–ã€‚é›¶æ‹·è´çš„æ¦‚å¿µå…·ä½“è¿™é‡Œä¸ä½œå¤ªè¯¦ç»†çš„å¤è¿°ï¼Œå¤§è‡´çš„ç»™å¤§å®¶è®²ä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µã€‚</p><h4><span id="ä¼ ç»Ÿçš„ä¸€æ¬¡åº”ç”¨ç¨‹è¯·æ±‚æ•°æ®çš„è¿‡ç¨‹">ä¼ ç»Ÿçš„ä¸€æ¬¡åº”ç”¨ç¨‹è¯·æ±‚æ•°æ®çš„è¿‡ç¨‹</span></h4><p><img src="https://img.hi-linux.com/staticfile/640-20210608171732790-2021-06-08-v7LMHm.jpg" alt></p><p>è¿™é‡Œå¤§è‡´å¯ä»¥å‘ä¼ ç»Ÿçš„æ–¹å¼å‘ç”Ÿäº† 4 æ¬¡æ‹·è´ï¼Œ2 æ¬¡ DMA å’Œ 2 æ¬¡ CPUï¼Œè€Œ CPU å‘ç”Ÿäº† 4 æ¬¡çš„åˆ‡æ¢ã€‚_ï¼ˆDMA ç®€å•ç†è§£å°±æ˜¯ï¼Œåœ¨è¿›è¡Œ I/O è®¾å¤‡å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“çš„æ—¶å€™ï¼Œæ•°æ®æ¬è¿çš„å·¥ä½œå…¨éƒ¨äº¤ç»™ DMA æ§åˆ¶å™¨ï¼Œè€Œ CPU ä¸å†å‚ä¸ä»»ä½•ä¸æ•°æ®æ¬è¿ç›¸å…³çš„äº‹æƒ…ï¼‰ã€‚</p><h4><span id="é›¶æ‹·è´çš„æ–¹å¼">é›¶æ‹·è´çš„æ–¹å¼</span></h4><p><img src="https://img.hi-linux.com/staticfile/640-20210608171739895-2021-06-08-yevm8J.jpg" alt></p><p>é€šè¿‡ä¼˜åŒ–æˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒCPU åªå‘ç”Ÿäº† 2 æ¬¡çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œ 3 æ¬¡æ•°æ®æ‹·è´ã€‚ï¼ˆlinux ç³»ç»Ÿæä¾›äº†ç³»ç»Ÿäº‹æ•…è°ƒç”¨å‡½æ•°â€œ sendfile()â€ï¼Œè¿™æ ·ç³»ç»Ÿè°ƒç”¨ï¼Œå¯ä»¥ç›´æ¥æŠŠå†…æ ¸ç¼“å†²åŒºé‡Œçš„æ•°æ®æ‹·è´åˆ° socket ç¼“å†²åŒºé‡Œï¼Œä¸å†æ‹·è´åˆ°ç”¨æˆ·æ€ï¼‰ã€‚</p><h4><span id="åˆ†åŒºåˆ†æ®µ">åˆ†åŒºåˆ†æ®µ</span></h4><p>æˆ‘ä»¬ä¸Šé¢ä¹Ÿä»‹ç»è¿‡äº†ï¼Œkafka é‡‡å–äº†åˆ†åŒºçš„æ¨¡å¼ï¼Œè€Œæ¯ä¸€ä¸ªåˆ†åŒºåˆå¯¹åº”åˆ°ä¸€ä¸ªç‰©ç†åˆ†æ®µï¼Œè€ŒæŸ¥æ‰¾çš„æ—¶å€™å¯ä»¥æ ¹æ®äºŒåˆ†æŸ¥æ‰¾å¿«é€Ÿå®šä½ã€‚è¿™æ ·ä¸ä»…æä¾›äº†æ•°æ®è¯»çš„æŸ¥è¯¢æ•ˆç‡ï¼Œä¹Ÿæä¾›äº†å¹¶è¡Œæ“ä½œçš„æ–¹å¼ã€‚</p><h4><span id="æ•°æ®å‹ç¼©">æ•°æ®å‹ç¼©</span></h4><p>Kafka å¯¹æ•°æ®æä¾›äº†ï¼šGzip å’Œ Snappy å‹ç¼©åè®®ç­‰å‹ç¼©åè®®ï¼Œå¯¹æ¶ˆæ¯ç»“æ„ä½“è¿›è¡Œäº†å‹ç¼©ï¼Œä¸€æ–¹é¢å‡å°‘äº†å¸¦å®½ï¼Œä¹Ÿå‡å°‘äº†æ•°æ®ä¼ è¾“çš„æ¶ˆè€—ã€‚</p><h2><span id="kafka-å®‰è£…">Kafka å®‰è£…</span></h2><h3><span id="å®‰è£…-jdk">å®‰è£… JDK</span></h3><p>ç”±äºä½¿ç”¨å‹ç¼©åŒ…è¿˜éœ€è¦è‡ªå·±é…ç½®ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥è¿™é‡Œæ¨èç›´æ¥ç”¨ yum å®‰è£…ï¼Œç†Ÿæ‚‰æŸ¥çœ‹ç›®å‰ Java çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y list Java*</span><br></pre></td></tr></table></figure><p>å®‰è£…ä½ æƒ³è¦çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘æ˜¯ 1.8</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install java-1.8.0-openjdk-devel.x86_64</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ Java -version</span><br></pre></td></tr></table></figure><h3><span id="å®‰è£…-zookeeper">å®‰è£… Zookeeper</span></h3><p>é¦–å…ˆéœ€è¦å»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œç„¶åè§£å‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxvf zookeeper-3.4.9.tar.gz</span><br></pre></td></tr></table></figure><p><strong>è¦åšçš„å°±æ˜¯å°†è¿™ä¸ªæ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œå¹¶å‘½åä¸ºï¼šzoo.cfgï¼Œç„¶ååœ¨ zoo.cfg ä¸­ä¿®æ”¹è‡ªå·±çš„é…ç½®å³å¯</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cp zoo_sample.cfg zoo.cfg</span><br><span class="line">$ vim zoo.cfg</span><br></pre></td></tr></table></figure><p>ä¸»è¦é…ç½®è§£é‡Šå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># zookeeperå†…éƒ¨çš„åŸºæœ¬å•ä½ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼Œè¿™ä¸ªè¡¨ç¤ºä¸€ä¸ªtickTimeä¸º2000æ¯«ç§’ï¼Œåœ¨zookeeperçš„å…¶ä»–é…ç½®ä¸­ï¼Œéƒ½æ˜¯åŸºäºtickTimeæ¥åšæ¢ç®—çš„</span><br><span class="line">tickTime&#x3D;2000</span><br><span class="line"># é›†ç¾¤ä¸­çš„followeræœåŠ¡å™¨(F)ä¸leaderæœåŠ¡å™¨(L)ä¹‹é—´ åˆå§‹è¿æ¥ æ—¶èƒ½å®¹å¿çš„æœ€å¤šå¿ƒè·³æ•°ï¼ˆtickTimeçš„æ•°é‡ï¼‰ã€‚</span><br><span class="line">initLimit&#x3D;10</span><br><span class="line">#syncLimitï¼šé›†ç¾¤ä¸­çš„followeræœåŠ¡å™¨(F)ä¸leaderæœåŠ¡å™¨(L)ä¹‹é—´ è¯·æ±‚å’Œåº”ç­” ä¹‹é—´èƒ½å®¹å¿çš„æœ€å¤šå¿ƒè·³æ•°ï¼ˆtickTimeçš„æ•°é‡ï¼‰</span><br><span class="line">syncLimit&#x3D;5</span><br><span class="line"># æ•°æ®å­˜æ”¾æ–‡ä»¶å¤¹ï¼Œzookeeperè¿è¡Œè¿‡ç¨‹ä¸­æœ‰ä¸¤ä¸ªæ•°æ®éœ€è¦å­˜å‚¨ï¼Œä¸€ä¸ªæ˜¯å¿«ç…§æ•°æ®ï¼ˆæŒä¹…åŒ–æ•°æ®ï¼‰å¦ä¸€ä¸ªæ˜¯äº‹åŠ¡æ—¥å¿—</span><br><span class="line">dataDir&#x3D;&#x2F;tmp&#x2F;zookeeper</span><br><span class="line">## å®¢æˆ·ç«¯è®¿é—®ç«¯å£</span><br><span class="line">clientPort&#x3D;2181</span><br></pre></td></tr></table></figure><p>é…ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~&#x2F;.bash_profile</span><br><span class="line">$ export ZK&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;apache-zookeeper-3.7.0-bin</span><br><span class="line">$ export PATH&#x3D;$PATH:$ZK&#x2F;bin</span><br><span class="line">$ export PATH</span><br><span class="line"># å¯åŠ¨</span><br><span class="line">$ zkServer.sh start</span><br></pre></td></tr></table></figure><p>ä¸‹é¢èƒ½çœ‹å¯åŠ¨æˆåŠŸ</p><p><img src="https://img.hi-linux.com/staticfile/640-20210608171748740-2021-06-08-xFDssz.jpg" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210608171754226-2021-06-08-BKOjow.jpg" alt></p><h3><span id="å®‰è£…-kafka">å®‰è£… Kafka</span></h3><ul><li>ä¸‹è½½ kafka</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https:&#x2F;&#x2F;www.apache.org&#x2F;dyn&#x2F;closer.cgi?path&#x3D;&#x2F;kafka&#x2F;2.8.0&#x2F;kafka-2.8.0-src.tgz</span><br></pre></td></tr></table></figure><ul><li>å®‰è£… kafka</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xzvf kafka_2.12-2.0.0.tgz</span><br></pre></td></tr></table></figure><ul><li>é…ç½®ç¯å¢ƒå˜é‡</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ export ZK&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;apache-zookeeper-3.7.0-bin</span><br><span class="line">$ export PATH&#x3D;$PATH:$ZK&#x2F;bin</span><br><span class="line">$ export KAFKA&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;kafka</span><br><span class="line">$ export PATH&#x3D;$PATH:$KAFKA&#x2F;bin</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨ Kafka</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nohup kafka-server-start.sh è‡ªå·±çš„é…ç½®æ–‡ä»¶è·¯å¾„&#x2F;server.properties &amp;</span><br></pre></td></tr></table></figure><p><img src="https://img.hi-linux.com/staticfile/640-20210608153215851-2021-06-08-wXh4n6.jpg" alt></p><p>å¤§åŠŸå‘Šæˆï¼</p><h2><span id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</span></h2><ul><li>ã€Šæ·±å…¥ç†è§£ Kafkaï¼šæ ¸å¿ƒè®¾è®¡å®è·µåŸç†ã€‹</li></ul><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ è…¾è®¯æŠ€æœ¯å·¥ç¨‹ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/2ssfz7rk" target="_blank" rel="noopener">https://tinyurl.com/2ssfz7rk</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;kafka ç”± LinkedIn å…¬å¸æ¨å‡ºçš„ä¸€ä¸ªé«˜ååçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œé€šä¿—çš„è¯´å°±æ˜¯ä¸€ä¸ªåŸºäºå‘å¸ƒå’Œè®¢é˜…çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å®˜ç½‘åœ°å€ï¼š&lt;a href=&quot;https://kafka.apache.org/intro&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://kafka.apache.org/intro&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;åº”ç”¨åœºæ™¯&quot;&gt;åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¼‚æ­¥è§£æ„ï¼šåœ¨ä¸Šä¸‹æ¸¸æ²¡æœ‰å¼ºä¾èµ–çš„ä¸šåŠ¡å…³ç³»æˆ–é’ˆå¯¹å•æ¬¡è¯·æ±‚ä¸éœ€è¦ç«‹åˆ»å¤„ç†çš„ä¸šåŠ¡ï¼›&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿç¼“å†²ï¼šæœ‰åˆ©äºè§£å†³æœåŠ¡ç³»ç»Ÿçš„ååé‡ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå°¤å…¶å¯¹å¤„ç†é€Ÿåº¦è¾ƒæ…¢çš„æœåŠ¡æ¥è¯´èµ·åˆ°ç¼“å†²ä½œç”¨ï¼›&lt;/li&gt;
&lt;li&gt;æ¶ˆå³°ä½œç”¨ï¼šå¯¹äºçŸ­æ—¶é—´å¶ç°çš„æç«¯æµé‡ï¼Œå¯¹åç«¯çš„æœåŠ¡å¯ä»¥å¯åŠ¨ä¿æŠ¤ä½œç”¨ï¼›&lt;/li&gt;
&lt;li&gt;æ•°æ®æµå¤„ç†ï¼šé›†æˆ spark åšå®äº‹æ•°æ®æµå¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Kafka" scheme="https://www.hi-linux.com/categories/Kafka/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="æ•™ç¨‹" scheme="https://www.hi-linux.com/tags/%E6%95%99%E7%A8%8B/"/>
    
      <category term="Kafka" scheme="https://www.hi-linux.com/tags/Kafka/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€æ–‡å¸¦ä½ ç†è§£äº‘åŸç”Ÿ | äº‘åŸç”Ÿå…¨æ™¯å›¾è¯¦è§£</title>
    <link href="https://www.hi-linux.com/posts/14157.html"/>
    <id>https://www.hi-linux.com/posts/14157.html</id>
    <published>2021-07-01T01:00:00.000Z</published>
    <updated>2021-07-01T01:37:18.903Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><h2><span id="å¸¦ä½ äº†è§£äº‘åŸç”ŸæŠ€æœ¯å›¾è°±">å¸¦ä½ äº†è§£äº‘åŸç”ŸæŠ€æœ¯å›¾è°±</span></h2><p>å¦‚æœä½ ç ”ç©¶è¿‡äº‘åŸç”Ÿåº”ç”¨ç¨‹åºå’Œç›¸å…³æŠ€æœ¯ï¼Œå¤§æ¦‚ç‡ä½ é‡åˆ°è¿‡ CNCF çš„äº‘åŸç”Ÿå…¨æ™¯å›¾ã€‚è¿™å¼ å…¨æ™¯å›¾æŠ€æœ¯ä¹‹å¤šè§„æ¨¡ä¹‹å¤§æ— ç–‘ä¼šè®©äººæ„Ÿåˆ°éœ‡æƒŠï¼Œè¯¥å¦‚ä½•å»ç†è§£è¿™å¼ å›¾å‘¢ï¼Ÿ</p><p>å¦‚æœæŠŠå®ƒæ‹†å¼€æ¥ä¸€æ¬¡åªåˆ†æä¸€å°å—å†…å®¹ï¼Œä½ ä¼šå‘ç°æ•´ä¸ªå…¨æ™¯å›¾æ²¡æœ‰é‚£ä¹ˆå¤æ‚ã€‚äº‹å®ä¸Šï¼Œè¯¥å…¨æ™¯å›¾æŒ‰ç…§åŠŸèƒ½æœ‰åºåœ°ç»„ç»‡åœ¨ä¸€èµ·ï¼Œä¸€æ—¦ä½ äº†è§£äº†æ¯ä¸ªç±»åˆ«ä»£è¡¨çš„å†…å®¹ï¼Œä½ å°±å¯ä»¥è½»æ¾æ¸¸èµ°äºå…¨æ™¯å›¾ä¸­ã€‚</p><p>æœ¬ç« èŠ‚æˆ‘ä»¬å°†æŠŠæ•´ä¸ªå…¨æ™¯å›¾æ‹†è§£å¼€æ¥ï¼Œå¹¶å¯¹æ•´ä¸ªå…¨æ™¯å›¾è¿›è¡Œç»¼è¿°ã€‚åœ¨åç»­ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†èšç„¦åœ¨æ¯ä¸€å±‚ï¼ˆor æ¯ä¸€åˆ—ï¼‰ï¼Œå¯¹æ¯ä¸ªç±»åˆ«è§£å†³çš„é—®é¢˜å’ŒåŸç†è¿›è¡Œæ›´ä¸ºè¯¦ç»†çš„è§£è¯»ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701092946955-2021-07-01-NjRgpd.png" alt="äº‘åŸç”Ÿå…¨æ™¯å›¾çš„ 4 å±‚"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å‰¥ç¦»æ‰æ‰€æœ‰å•ä¸ªçš„æŠ€æœ¯ï¼Œä»…æŸ¥çœ‹ç±»åˆ«ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚å›¾ä¸­æœ‰ä¸åŒçš„â€œè¡Œâ€ï¼Œåƒå»ºç­‘çš„ä¸åŒå±‚ï¼Œæ¯å±‚éƒ½æœ‰è‡ªå·±çš„å­ç±»åˆ«ã€‚æœ€åº•å±‚æä¾›äº†æ„å»ºäº‘åŸç”ŸåŸºç¡€è®¾æ–½çš„å·¥å…·ã€‚å¾€ä¸Šï¼Œä½ å¯ä»¥å¼€å§‹æ·»åŠ è¿è¡Œå’Œç®¡ç†åº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥å…·ï¼Œæ¯”å¦‚è¿è¡Œæ—¶å’Œè°ƒåº¦å±‚ã€‚åœ¨æœ€ä¸Šå±‚ï¼Œæœ‰å®šä¹‰å’Œå¼€å‘åº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œæ¯”å¦‚æ•°æ®åº“ã€é•œåƒæ„å»ºå’Œ CI/CD å·¥å…·ï¼ˆæˆ‘ä»¬å°†åœ¨åæ–‡è®¨è®ºï¼‰ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701092955887-2021-07-01-CCKzaW.png" alt></p><p>å¥½äº†ï¼Œç°åœ¨ä½ åº”è¯¥è®°ä½äº†äº‘åŸç”Ÿå…¨æ™¯å›¾å§‹äºåŸºç¡€è®¾æ–½ï¼Œå¾€ä¸Šçš„æ¯ä¸€å±‚éƒ½æ›´æ¥è¿‘å®é™…çš„åº”ç”¨ç¨‹åºã€‚è¿™å°±æ˜¯æ¯å±‚ä»£è¡¨çš„æ„æ€ï¼ˆåé¢æˆ‘ä»¬ä¼šè®¨è®ºä¸Šå›¾å³è¾¹çš„ä¸¤â€œåˆ—â€ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä»æœ€åº•å±‚å¼€å§‹ï¼Œé€å±‚è¿›è¡Œè§£æã€‚</p><a id="more"></a><p><strong>ä¾›åº”å±‚ ï¼ˆProvisioningï¼‰</strong></p><p>ä¾›åº”æŒ‡çš„æ˜¯ä¸ºäº‘åŸç”Ÿåº”ç”¨å‡†å¤‡æ ‡å‡†åŸºç¡€ç¯å¢ƒæ‰€æ¶‰åŠçš„å·¥å…·ã€‚å®ƒåŒ…å«äº†åŸºç¡€è®¾æ–½çš„åˆ›å»ºã€ç®¡ç†ã€é…ç½®æµç¨‹çš„è‡ªåŠ¨åŒ–ï¼Œä»¥åŠå®¹å™¨é•œåƒçš„æ‰«æã€ç­¾åå’Œå­˜å‚¨ç­‰ã€‚ä¾›åº”å±‚é€šè¿‡æä¾›è®¾ç½®å’Œå®æ–½ç­–ç•¥ï¼Œåœ¨åº”ç”¨ç¨‹åºå’Œå¹³å°ä¸­æ„å»ºèº«ä»½éªŒè¯å’Œæˆæƒï¼Œä»¥åŠå¤„ç†å¯†é’¥åˆ†å‘ç­‰ç­‰çš„å·¥å…·ï¼Œä¹Ÿæ‹“å±•åˆ°äº†å®‰å…¨é¢†åŸŸã€‚</p><p>ä¾›åº”å±‚åŒ…æ‹¬ï¼š</p><ul><li><p>è‡ªåŠ¨åŒ–å’Œéƒ¨ç½²å·¥å…·ï¼šå¸®åŠ©å·¥ç¨‹å¸ˆåœ¨æ— éœ€äººå·¥å¹²é¢„æƒ…å†µä¸‹å³å¯æ„å»ºè®¡ç®—ç¯å¢ƒï¼›</p></li><li><p>å®¹å™¨æ³¨å†Œè¡¨ï¼šå­˜å‚¨åº”ç”¨ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼›</p></li><li><p>ä¸åŒå®‰å…¨é¢†åŸŸçš„å®‰å…¨å’Œåˆè§„æ¡†æ¶ï¼›å¯†é’¥ç®¡ç†è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡åŠ å¯†ç¡®ä¿åªæœ‰æˆæƒçš„ç”¨æˆ·æ‰èƒ½è®¿é—®ç‰¹å®šçš„åº”ç”¨ç¨‹åºã€‚</p></li><li><p>è¿™äº›å·¥å…·ä½¿å·¥ç¨‹å¸ˆå¯ä»¥ç¼–å†™åŸºç¡€è®¾æ–½å‚æ•°ï¼Œä½¿ç³»ç»Ÿå¯ä»¥æŒ‰éœ€æ­å»ºæ–°ç¯å¢ƒï¼Œç¡®ä¿äº†ä¸€è‡´æ€§å’Œå®‰å…¨æ€§ã€‚</p></li></ul><p><strong>è¿è¡Œæ—¶å±‚ï¼ˆRuntimeï¼‰</strong></p><p>æ¥ä¸‹æ¥æ˜¯è¿è¡Œæ—¶å±‚ã€‚è¿™ä¸ªè¯å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°è¿·æƒ‘ã€‚åƒå¾ˆå¤š IT æœ¯è¯­ä¸€æ ·ï¼Œè¿è¡Œæ—¶æ²¡æœ‰ä¸¥æ ¼çš„å®šä¹‰ï¼Œä¸”å¯ä»¥æ ¹æ®è¯­å¢ƒæœ‰ä¸åŒçš„ç”¨æ³•ã€‚ç‹­ä¹‰ä¸Šè®²ï¼Œè¿è¡Œæ—¶æ˜¯ç‰¹å®šæœºå™¨ä¸Šå‡†å¤‡è¿è¡Œåº”ç”¨ç¨‹åºçš„æ²™ç›’â€”â€”ä¹Ÿå°±æ˜¯ä¿éšœåº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œæ‰€éœ€çš„æœ€ä½é…ç½®ã€‚å¹¿ä¹‰ä¸Šè®²ï¼Œè¿è¡Œæ—¶æ˜¯è¿è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰å·¥å…·ã€‚</p><p>åœ¨ CNCF äº‘åŸç”Ÿå…¨æ™¯å›¾ä¸­ï¼Œè¿è¡Œæ—¶ä¿éšœäº†å®¹å™¨åŒ–åº”ç”¨ç¨‹åºç»„ä»¶çš„è¿è¡Œå’Œé€šä¿¡ï¼Œ åŒ…æ‹¬ï¼š</p><ul><li><p>äº‘åŸç”Ÿå­˜å‚¨ï¼šä¸ºå®¹å™¨åŒ–åº”ç”¨æä¾›è™šæ‹Ÿç£ç›˜æˆ–æŒä¹…åŒ–å­˜å‚¨ï¼›</p></li><li><p>å®¹å™¨è¿è¡Œæ—¶ï¼šä¸ºå®¹å™¨æä¾›éš”ç¦»ã€èµ„æºå’Œå®‰å…¨ï¼›</p></li><li><p>äº‘ç½‘ç»œï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„èŠ‚ç‚¹ï¼ˆæœºå™¨æˆ–è¿›ç¨‹ï¼‰é€šè¿‡å…¶è¿æ¥å’Œé€šä¿¡ã€‚</p></li></ul><p><strong>ç¼–æ’å’Œç®¡ç†å±‚ï¼ˆOrchestration and Managementï¼‰</strong></p><p>ä¸€æ—¦æŒ‰ç…§å®‰å…¨å’Œåˆè§„æ€§æ ‡å‡†ï¼ˆä¾›åº”å±‚ï¼‰è‡ªåŠ¨åŒ–åŸºç¡€è®¾æ–½ä¾›åº”ï¼Œå¹¶å®‰è£…äº†åº”ç”¨ç¨‹åºè¿è¡Œæ‰€éœ€çš„å·¥å…·ï¼ˆè¿è¡Œæ—¶å±‚ï¼‰ï¼Œå·¥ç¨‹å¸ˆå°±éœ€è¦å¼„æ¸…æ¥šå¦‚ä½•ç¼–æ’å’Œç®¡ç†åº”ç”¨ç¨‹åºã€‚ç¼–æ’å’Œç®¡ç†å±‚å°†æ‰€æœ‰å®¹å™¨åŒ–æœåŠ¡ï¼ˆåº”ç”¨ç¨‹åºç»„ä»¶ï¼‰ä½œä¸ºä¸€ä¸ªç¾¤ç»„ç®¡ç†ã€‚è¿™äº›å®¹å™¨åŒ–æœåŠ¡éœ€è¦ç›¸äº’è¯†åˆ«å’Œé€šä¿¡ï¼Œå¹¶éœ€è¦è¿›è¡Œåè°ƒã€‚è¿™ä¸€å±‚å¯ä¸ºäº‘åŸç”Ÿåº”ç”¨æä¾›è‡ªåŠ¨åŒ–å’Œå¼¹æ€§èƒ½åŠ›ï¼Œä½¿äº‘åŸç”Ÿåº”ç”¨å¤©ç„¶å…·æœ‰å¯æ‰©å±•æ€§ã€‚</p><p>è¿™ä¸€å±‚åŒ…å«ï¼š</p><ul><li><p>ç¼–æ’å’Œè°ƒåº¦ï¼šéƒ¨ç½²å’Œç®¡ç†å®¹å™¨é›†ç¾¤ï¼Œç¡®ä¿å®ƒä»¬å…·æœ‰å¼¹æ€§ä¼¸ç¼©èƒ½åŠ›ï¼Œç›¸äº’ä¹‹é—´ä½è€¦åˆï¼Œå¹¶ä¸”å¯æ‰©å±•ã€‚äº‹å®ä¸Šï¼Œç¼–æ’å·¥å…·ï¼ˆç»å¤§å¤šæ•°æƒ…å†µä¸‹å°±æ˜¯ Kubernetesï¼‰é€šè¿‡ç®¡ç†å®¹å™¨å’Œæ“ä½œç¯å¢ƒæ„æˆäº†é›†ç¾¤ï¼›</p></li><li><p>åè°ƒå’ŒæœåŠ¡å‘ç°ï¼šä½¿å¾—æœåŠ¡ï¼ˆåº”ç”¨ç¨‹åºç»„ä»¶ï¼‰ä¹‹é—´å¯ä»¥ç›¸äº’å®šä½å’Œé€šä¿¡ï¼›</p></li><li><p>è¿œç¨‹è¿›ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ï¼šä½¿è·¨èŠ‚ç‚¹æœåŠ¡é—´é€šä¿¡çš„æŠ€æœ¯ï¼›</p></li><li><p>æœåŠ¡ä»£ç†ï¼šæœåŠ¡é—´é€šä¿¡çš„ä¸­ä»‹ã€‚æœåŠ¡ä»£ç†çš„å”¯ä¸€ç›®çš„å°±æ˜¯å¯¹æœåŠ¡ä¹‹é—´çš„é€šä¿¡è¿›è¡Œæ›´å¤šæ§åˆ¶ï¼Œè€Œä¸ä¼šå¯¹é€šä¿¡æœ¬èº«æ·»åŠ ä»»ä½•å†…å®¹ã€‚æœåŠ¡ä»£ç†å¯¹ä¸‹é¢å°†æåˆ°çš„æœåŠ¡ç½‘æ ¼ï¼ˆService Meshï¼‰è‡³å…³é‡è¦ã€‚</p></li><li><p>API ç½‘å…³ï¼šä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå¤–éƒ¨åº”ç”¨å¯é€šè¿‡ API ç½‘å…³è¿›è¡Œé€šä¿¡ï¼›</p></li><li><p>Service Meshï¼šæŸç§ç¨‹åº¦ä¸Šç±»ä¼¼äº API ç½‘å…³ï¼Œå®ƒæ˜¯åº”ç”¨ç¨‹åºè¿›è¡Œé€šä¿¡çš„ä¸“ç”¨åŸºç¡€æ¶æ„å±‚ï¼Œæä¾›åŸºäºç­–ç•¥çš„å†…éƒ¨æœåŠ¡é—´é€šä¿¡ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å¯èƒ½åŒ…å«æµé‡åŠ å¯†ã€æœåŠ¡å‘ç°ã€åº”ç”¨ç¨‹åºç›‘æ§ç­‰å†…å®¹ã€‚</p></li></ul><p><strong>åº”ç”¨å®šä¹‰å’Œå¼€å‘å±‚ ï¼ˆApplication Definition and Developement)</strong></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åˆ°äº†æœ€é¡¶å±‚ã€‚åº”ç”¨å®šä¹‰å’Œå¼€å‘å±‚ï¼Œé¡¾åæ€ä¹‰ï¼Œèšé›†äº†è®©å·¥ç¨‹å¸ˆæ„å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ä¸Šè¿°æ‰€æœ‰å†…å®¹éƒ½æ˜¯å…³äºæ„å»ºå¯é ã€å®‰å…¨çš„ç¯å¢ƒï¼Œä»¥åŠæä¾›å…¨éƒ¨æ‰€éœ€çš„åº”ç”¨ç¨‹åºä¾èµ–ã€‚</p><p>è¿™ä¸€å±‚åŒ…æ‹¬ï¼š</p><ul><li><p>æ•°æ®åº“ï¼šä½¿åº”ç”¨ç¨‹åºèƒ½ä»¥æœ‰åºçš„æ–¹å¼æ”¶é›†æ•°æ®ï¼›</p></li><li><p>æµå’Œæ¶ˆæ¯ä¼ é€’ï¼šä½¿åº”ç”¨ç¨‹åºèƒ½å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ï¼ˆäº‹ä»¶å’Œæµï¼‰ã€‚å®ƒä¸æ˜¯ç½‘ç»œå±‚ï¼Œè€Œæ˜¯è®©æ¶ˆæ¯æˆä¸ºé˜Ÿåˆ—å¹¶å¤„ç†æ¶ˆæ¯çš„å·¥å…·ï¼›</p></li><li><p>åº”ç”¨ç¨‹åºå®šä¹‰å’Œé•œåƒæ„å»ºï¼šç”¨äºé…ç½®ã€ç»´æŠ¤å’Œè¿è¡Œå®¹å™¨é•œåƒï¼ˆåº”ç”¨ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼‰çš„æœåŠ¡ï¼›</p></li><li><p>æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI/CDï¼‰ï¼šä½¿å¼€å‘è€…å¯è‡ªåŠ¨æµ‹è¯•ä»£ç æ˜¯å¦ä¸ä»£ç åº“ï¼ˆåº”ç”¨ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†ï¼‰å…¼å®¹ã€‚å¦‚æœå›¢é˜Ÿè¶³å¤Ÿæˆç†Ÿï¼Œç”šè‡³å¯ä»¥è‡ªåŠ¨éƒ¨ç½²ä»£ç åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</p></li></ul><p><strong>è´¯ç©¿æ‰€æœ‰å±‚çš„å·¥å…·</strong></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›å…¥åˆ°äº‘åŸç”Ÿå…¨æ™¯å›¾å³ä¾§è´¯ç©¿æ‰€æœ‰å±‚çš„ä¸¤åˆ—ã€‚å¯è§‚å¯Ÿæ€§å’Œåˆ†æï¼ˆObservability&amp;analysisï¼‰æ˜¯ç›‘æ§å„å±‚çš„å·¥å…·ï¼Œå¹³å°åˆ™å°†å„å±‚ä¸­ä¸åŒçš„æŠ€æœ¯æ†ç»‘ä¸ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093003517-2021-07-01-Oa1xSU.png" alt="å¯è§‚å¯Ÿæ€§å’Œåˆ†æï¼ˆObservability and Analysisï¼‰"></p><p>ä¸ºäº†é™åˆ¶æœåŠ¡ä¸­æ–­å¹¶é™ä½è§£å†³é—®é¢˜çš„å¹³å‡æ—¶é—´ï¼ˆMRRTï¼‰ï¼Œä½ éœ€è¦ç›‘æ§å’Œåˆ†æåº”ç”¨å±‚åºçš„æ–¹æ–¹é¢é¢ï¼Œä»¥ä¾¿åœ¨å‡ºç°å¼‚å¸¸æ—¶å¯ç«‹å³å‘ç°å¹¶çº æ­£ã€‚å¤æ‚ç¯å¢ƒä¸­å®¹æ˜“å‡ºç°æ•…éšœï¼Œè¿™äº›å·¥å…·å¯å¿«é€Ÿè¯†åˆ«å¹¶è§£å†³æ•…éšœï¼Œä»è€Œé™ä½æ•…éšœå¸¦æ¥çš„å½±å“ã€‚ç”±äºè¿™ä¸€ç±»åˆ«è´¯ç©¿å¹¶ç›‘æ§å„å±‚ï¼Œå› æ­¤å®ƒåœ¨ä¾§é¢ï¼Œè€Œä¸æ˜¯åµŒå…¥åˆ°æŸä¸€å±‚ä¸­ã€‚</p><p>è¿™ä¸€ç±»åˆ«ä½ å°†å‘ç°ï¼š</p><ul><li><p>æ—¥å¿—å·¥å…·ï¼šæ”¶é›†äº‹ä»¶æ—¥å¿—ï¼ˆæœ‰å…³è¿›ç¨‹çš„ä¿¡æ¯ï¼‰ï¼›</p></li><li><p>ç›‘æ§æ–¹æ¡ˆï¼šæ”¶é›†æŒ‡æ ‡ï¼ˆä»¥æ•°å­—è¡¨ç¤ºçš„ç³»ç»Ÿå‚æ•°ï¼Œä¾‹å¦‚ RAM å¯ç”¨æ€§ï¼‰ï¼›</p></li><li><p>è¿½è¸ªå·¥å…·ï¼šè¿½è¸ªæ¯”ç›‘æ§æ›´è¿›äº†ä¸€æ­¥ï¼Œå®ƒä»¬ç›‘æ§ç”¨æˆ·è¯·æ±‚çš„ä¼ æ’­ï¼Œä¸æœåŠ¡ç½‘æ ¼ç›¸å…³ã€‚</p></li><li><p>æ··æ²Œå·¥ç¨‹ï¼ˆChaos Engineeringï¼‰ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æµ‹è¯•è½¯ä»¶çš„å·¥å…·ï¼Œå¯è¯†åˆ«ç¼ºé™·å¹¶è¿›è¡Œä¿®å¤ï¼Œå‡å°‘å…¶å¯¹æœåŠ¡äº¤ä»˜çš„å½±å“ã€‚</p></li></ul><p><strong>å¹³å°ç±»ï¼ˆPlatformï¼‰</strong></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå›¾ä¸­æ¯ä¸€ä¸ªæ¨¡å—è§£å†³ä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ã€‚ä½†æˆ‘ä»¬çŸ¥é“ï¼Œä»…æœ‰å­˜å‚¨å¹¶ä¸èƒ½æä¾›åº”ç”¨ç¨‹åºæ‰€éœ€çš„å…¨éƒ¨åŠŸèƒ½ã€‚ä½ è¿˜éœ€è¦ç¼–æ’å·¥å…·ï¼Œå®¹å™¨è¿è¡Œæ—¶ï¼ŒæœåŠ¡å‘ç°ï¼Œç½‘ç»œï¼ŒAPI ç½‘å…³ç­‰ç­‰ã€‚å¹³å°è¦†ç›–å¤šå±‚ï¼Œå°†ä¸åŒçš„å·¥å…·ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥è§£å†³æ›´å¤§çš„é—®é¢˜ã€‚</p><p>é…ç½®å’Œå¾®è°ƒä¸åŒçš„æ¨¡å—ä½¿å…¶å®‰å…¨å¯é ï¼Œå¹¶ç¡®ä¿å®ƒåˆ©ç”¨çš„æŠ€æœ¯éƒ½èƒ½åŠæ—¶æ›´æ–°ã€æ‰€æœ‰æ¼æ´éƒ½æ‰“äº†è¡¥ä¸ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚ä½¿ç”¨å¹³å°æ—¶ï¼Œç”¨æˆ·ä¸ç”¨é¢å¤–æ‹…å¿ƒè¿™äº›ç»†èŠ‚é—®é¢˜ã€‚</p><p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæ‰€æœ‰çš„ç±»åˆ«éƒ½å›´ç»•ç€ Kubernetes å±•å¼€ã€‚è¿™æ˜¯å› ä¸º Kubernetes è™½ç„¶åªæ˜¯äº‘åŸç”Ÿæ™¯è§‚å›¾è¿™å¼ æ‹¼å›¾ä¸­çš„ä¸€å—ï¼Œä½†å®ƒå´æ˜¯äº‘åŸç”ŸæŠ€æœ¯æ ˆçš„æ ¸å¿ƒã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒCNCF åˆšåˆ›å»ºæ—¶ï¼ŒKubernetes å°±æ˜¯å…¶ä¸­çš„ç¬¬ä¸€ä¸ªç§å­é¡¹ç›®ï¼Œåæ¥æ‰æœ‰äº†å…¶ä»–é¡¹ç›®ã€‚</p><p>å¹³å°å¯åˆ†ä¸ºå››ç±»ï¼š</p><ul><li><p>Kubernetes å‘è¡Œç‰ˆï¼šé‡‡ç”¨æœªç»ä¿®æ”¹çš„å¼€æ”¾æºä»£ç ï¼ˆå°½ç®¡æœ‰äººå¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼‰ï¼Œå¹¶æ ¹æ®å¸‚åœºéœ€è¦å¢åŠ äº†å…¶ä»–åŠŸèƒ½ï¼›</p></li><li><p>æ‰˜ç®¡çš„ Kubernetesï¼šç±»ä¼¼äº Kubernetes å‘è¡Œç‰ˆï¼Œä½†æ˜¯ç”±æä¾›å•†æ‰˜ç®¡ï¼›</p></li><li><p>Kubernetes å®‰è£…ç¨‹åºï¼šè‡ªåŠ¨æ‰§è¡Œ Kubernetes çš„å®‰è£…å’Œé…ç½®è¿‡ç¨‹ï¼›</p></li><li><p>PaaS/å®¹å™¨æœåŠ¡ï¼šç±»ä¼¼äºæ‰˜ç®¡çš„ Kubernetesï¼Œä½†æ˜¯åŒ…å«äº†ä¸€å¥—æ›´å¹¿æ³›çš„åº”ç”¨éƒ¨ç½²å·¥å…·ï¼ˆé€šå¸¸æ˜¯æ¥è‡ªäº‘åŸç”Ÿæ™¯è§‚å›¾ï¼‰ã€‚</p></li></ul><p><strong>å°ç»“</strong></p><p>åœ¨æ¯ä¸ªç±»åˆ«ä¸­ï¼Œé’ˆå¯¹ç›¸åŒæˆ–ç›¸ä¼¼çš„é—®é¢˜ï¼Œéƒ½æœ‰ä¸åŒçš„å·¥å…·å¯é€‰æ‹©ã€‚æœ‰ä¸€äº›æ˜¯é€‚ç”¨äºæ–°ç°å®çš„é¢„äº‘åŸç”ŸæŠ€æœ¯ï¼Œè¿˜æœ‰ä¸€äº›åˆ™æ˜¯å…¨æ–°çš„ã€‚åŒºåˆ«åœ¨äºå®ƒä»¬çš„å®ç°å’Œè®¾è®¡æ–¹æ³•ã€‚æ²¡æœ‰å®Œç¾çš„æŠ€æœ¯ç¬¦åˆä½ çš„æ‰€æœ‰éœ€æ±‚ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒæŠ€æœ¯å—è®¾è®¡å’Œæ¶æ„é€‰æ‹©çš„é™åˆ¶â€”â€”å§‹ç»ˆéœ€è¦æƒè¡¡å–èˆã€‚</p><p>åœ¨é€‰æ‹©æŠ€æœ¯æ ˆæ—¶ï¼Œå·¥ç¨‹å¸ˆå¿…é¡»ä»”ç»†è€ƒè™‘æ¯ç§èƒ½åŠ›å’Œéœ€è¦æƒè¡¡å–èˆçš„åœ°æ–¹ï¼Œä»¥ç¡®å®šæœ€åˆé€‚çš„é€‰é¡¹ã€‚è™½ç„¶è¿™æ ·ä¼šè®©æƒ…å†µå˜å¾—æ›´å¤æ‚ï¼Œä½†åœ¨é€‰æ‹©åº”ç”¨ç¨‹åºæ‰€éœ€çš„æœ€é€‚åˆçš„æ•°æ®å­˜å‚¨ã€åŸºç¡€è®¾æ–½ç®¡ç†ã€æ¶ˆæ¯ç³»ç»Ÿç­‰æ–¹æ¡ˆæ—¶ï¼Œè¿™æ ·åšæ˜¯æœ€å¯è¡Œçš„åŠæ³•ã€‚ç°åœ¨ï¼Œæ„å»ºä¸€ä¸ªç³»ç»Ÿæ¯”äº‘åŸç”Ÿä¹‹å‰çš„æ—¶ä»£å®¹æ˜“å¤šäº†ã€‚å¦‚æœæ„å»ºæ°å½“ï¼Œäº‘åŸç”ŸæŠ€æœ¯å°†æä¾›æ›´å¼ºå¤§çš„çµæ´»æ€§ã€‚åœ¨ç°å¦‚ä»Šå¿«é€Ÿå˜åŒ–çš„æŠ€æœ¯ç”Ÿæ€ä¸­ï¼Œè¿™å¯èƒ½æ˜¯æœ€é‡è¦çš„èƒ½åŠ›ä¹‹ä¸€ã€‚</p><p>ä¸‹é¢è¯¦ç»†ä»‹ç»äº‘åŸç”Ÿå…¨æ™¯å›¾çš„æ¯ä¸€å±‚ã€‚</p><h2><span id="ä¾›åº”å±‚">ä¾›åº”å±‚</span></h2><p>äº‘åŸç”Ÿå…¨æ™¯å›¾çš„æœ€åº•å±‚æ˜¯ä¾›åº”å±‚ï¼ˆprovisioningï¼‰ã€‚è¿™ä¸€å±‚åŒ…å«æ„å»ºäº‘åŸç”ŸåŸºç¡€è®¾æ–½çš„å·¥å…·ï¼Œå¦‚åŸºç¡€è®¾æ–½çš„åˆ›å»ºã€ç®¡ç†ã€é…ç½®æµç¨‹çš„è‡ªåŠ¨åŒ–ï¼Œä»¥åŠå®¹å™¨é•œåƒçš„æ‰«æã€ç­¾åå’Œå­˜å‚¨ç­‰ã€‚ä¾›åº”å±‚ä¹Ÿè·Ÿå®‰å…¨ç›¸å…³ï¼Œè¯¥å±‚ä¸­çš„ä¸€äº›å·¥å…·å¯ç”¨äºè®¾ç½®å’Œå®æ–½ç­–ç•¥ï¼Œå°†èº«ä»½éªŒè¯å’Œæˆæƒå†…ç½®åˆ°åº”ç”¨ç¨‹åºå’Œå¹³å°ä¸­ï¼Œä»¥åŠå¤„ç† secret åˆ†å‘ç­‰ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093009951-2021-07-01-xOFCfR.png" alt></p><p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¾›åº”å±‚çš„æ¯ä¸ªç±»åˆ«ï¼Œå®ƒæ‰€æ‰®æ¼”çš„è§’è‰²ä»¥åŠè¿™äº›æŠ€æœ¯å¦‚ä½•å¸®åŠ©åº”ç”¨ç¨‹åºé€‚åº”æ–°çš„äº‘åŸç”Ÿç¯å¢ƒã€‚</p><h3><span id="è‡ªåŠ¨åŒ–å’Œé…ç½®">è‡ªåŠ¨åŒ–å’Œé…ç½®</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>è‡ªåŠ¨åŒ–å’Œé…ç½®å·¥å…·å¯åŠ å¿«è®¡ç®—èµ„æºï¼ˆè™šæ‹Ÿæœºã€ç½‘ç»œã€é˜²ç«å¢™è§„åˆ™ã€è´Ÿè½½å‡è¡¡å™¨ç­‰ï¼‰çš„åˆ›å»ºå’Œé…ç½®è¿‡ç¨‹ã€‚è¿™äº›å·¥å…·å¯ä»¥å¤„ç†åŸºç¡€è®¾æ–½æ„å»ºè¿‡ç¨‹ä¸­ä¸åŒéƒ¨åˆ†çš„å†…å®¹ï¼Œå¤§å¤šæ•°å·¥å…·éƒ½å¯ä¸è¯¥ç©ºé—´ä¸­å…¶ä»–é¡¹ç›®å’Œäº§å“é›†æˆã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>ä¼ ç»Ÿä¸Šï¼ŒIT æµç¨‹ä¾èµ–é«˜å¼ºåº¦çš„æ‰‹åŠ¨å‘å¸ƒè¿‡ç¨‹ï¼Œå‘¨æœŸå†—é•¿ï¼Œé€šå¸¸å¯è¾¾ 3-6 ä¸ªæœˆã€‚è¿™äº›å‘¨æœŸä¼´éšç€è®¸å¤šäººå·¥æµç¨‹å’Œç®¡æ§ï¼Œè®©ç”Ÿäº§ç¯å¢ƒçš„å˜æ›´éå¸¸ç¼“æ…¢ã€‚è¿™ç§ç¼“æ…¢çš„å‘å¸ƒå‘¨æœŸå’Œé™æ€çš„ç¯å¢ƒä¸äº‘åŸç”Ÿå¼€å‘ä¸åŒ¹é…ã€‚ä¸ºäº†ç¼©çŸ­å¼€å‘å‘¨æœŸï¼Œå¿…é¡»åŠ¨æ€é…ç½®åŸºç¡€è®¾æ–½ä¸”æ— éœ€äººå·¥å¹²é¢„ã€‚</p><p><strong>å¦‚ä½•è§£å†³é—®é¢˜</strong></p><p>ä¾›åº”å±‚çš„è¿™äº›å·¥å…·ä½¿å·¥ç¨‹å¸ˆæ— éœ€äººå·¥å¹²é¢„å³å¯æ„å»ºè®¡ç®—ç¯å¢ƒã€‚é€šè¿‡ä»£ç åŒ–ç¯å¢ƒè®¾ç½®ï¼Œåªéœ€ç‚¹å‡»æŒ‰é’®å³å¯å®ç°ç¯å¢ƒé…ç½®ã€‚æ‰‹åŠ¨è®¾ç½®å®¹æ˜“å‡ºé”™ï¼Œä½†æ˜¯ä¸€æ—¦è¿›è¡Œäº†ç¼–ç ï¼Œç¯å¢ƒåˆ›å»ºå°±ä¼šä¸æ‰€éœ€çš„ç¡®åˆ‡çŠ¶æ€ç›¸åŒ¹é…ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜åŠ¿ã€‚</p><p>å°½ç®¡ä¸åŒå·¥å…·å®ç°çš„æ–¹æ³•ä¸åŒï¼Œä½†å®ƒä»¬éƒ½æ˜¯é€šè¿‡è‡ªåŠ¨åŒ–æ¥ç®€åŒ–é…ç½®èµ„æºè¿‡ç¨‹ä¸­çš„äººå·¥æ“ä½œã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>å½“æˆ‘ä»¬ä»è€å¼çš„äººå·¥é©±åŠ¨æ„å»ºæ–¹å¼è¿‡æ¸¡åˆ°äº‘ç¯å¢ƒæ‰€éœ€çš„æŒ‰éœ€æ‰©å±•æ¨¡å¼æ—¶ï¼Œä¼šå‘ç°ä»¥å‰çš„æ¨¡å¼å’Œå·¥å…·å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œç»„ç»‡ä¹Ÿæ— æ³•ç»´æŒä¸€ä¸ªéœ€è¦åˆ›å»ºã€é…ç½®å’Œç®¡ç†æœåŠ¡å™¨çš„ 7Ã—24 å‘˜å·¥é˜Ÿä¼ã€‚Terraform ä¹‹ç±»çš„è‡ªåŠ¨åŒ–å·¥å…·å‡å°‘äº†æ‰©å±•æ•°æœåŠ¡å™¨å’Œç›¸å…³ç½‘ç»œä»¥åŠé˜²ç«å¢™è§„åˆ™æ‰€éœ€çš„å·¥ä½œé‡ã€‚Puppetï¼ŒChef å’Œ Ansible ä¹‹ç±»çš„å·¥å…·å¯ä»¥åœ¨æœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ä»¥ç¼–ç¨‹æ–¹å¼é…ç½®å®ƒä»¬ï¼Œå¹¶å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨å®ƒä»¬ã€‚</p><p>ä¸€äº›å·¥å…·ç›´æ¥ä¸ AWS æˆ– vSphere ç­‰å¹³å°æä¾›çš„åŸºç¡€è®¾æ–½ API è¿›è¡Œäº¤äº’ï¼Œè¿˜æœ‰ä¸€äº›å·¥å…·åˆ™ä¾§é‡äºé…ç½®å•ä¸ªè®¡ç®—æœºä»¥ä½¿å…¶æˆä¸º Kubernetes é›†ç¾¤çš„ä¸€éƒ¨åˆ†ã€‚Chef å’Œ Terraform è¿™ç±»çš„å·¥å…·å¯ä»¥è¿›è¡Œäº’æ“ä½œä»¥é…ç½®ç¯å¢ƒã€‚OpenStack è¿™ç±»å·¥å…·å¯æä¾› IaaS ç¯å¢ƒè®©å…¶ä»–å·¥å…·ä½¿ç”¨ã€‚</p><p>ä»æ ¹æœ¬ä¸Šè®²ï¼Œåœ¨è¿™ä¸€å±‚ï¼Œä½ éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ªå·¥å…·æ¥ä¸º Kubernetes é›†ç¾¤æ­å»ºè®¡ç®—ç¯å¢ƒã€CPUã€å†…å­˜ã€å­˜å‚¨å’Œç½‘ç»œã€‚æ­¤å¤–ï¼Œä½ è¿˜éœ€è¦å…¶ä¸­çš„ä¸€äº›å·¥å…·æ¥åˆ›å»ºå’Œç®¡ç† Kubernetes é›†ç¾¤æœ¬èº«ã€‚</p><p>åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œè¯¥é¢†åŸŸä¸­æœ‰ä¸‰ä¸ª CNCF é¡¹ç›®ï¼šKubeEdgeï¼ˆä¸€ä¸ªæ²™ç›’é¡¹ç›®ï¼‰ä»¥åŠ Kubespray å’Œ Kopsï¼ˆåä¸¤ä¸ªæ˜¯ Kubernetes å­é¡¹ç›®ï¼Œè™½ç„¶æœªåœ¨å…¨æ™¯å›¾ä¸­åˆ—å‡ºï¼Œä½†å®ƒä»¬ä¹Ÿå±äº CNCFï¼‰ã€‚æ­¤ç±»åˆ«ä¸­çš„å¤§å¤šæ•°å·¥å…·éƒ½æä¾›å¼€æºå’Œä»˜è´¹ç‰ˆæœ¬ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093015958-2021-07-01-emmUPF.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093021222-2021-07-01-teXcLx.png" alt></p><h3><span id="container-registry">Container Registry</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>åœ¨å®šä¹‰ Container Registry ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè®¨è®ºä¸‰ä¸ªç´§å¯†ç›¸å…³çš„æ¦‚å¿µï¼š</p><ul><li><p>å®¹å™¨æ˜¯æ‰§è¡Œæµç¨‹çš„ä¸€ç»„æŠ€æœ¯çº¦æŸã€‚å®¹å™¨å†…å¯åŠ¨çš„è¿›ç¨‹ä¼šç›¸ä¿¡å®ƒä»¬æ­£åœ¨è‡ªå·±çš„ä¸“ç”¨è®¡ç®—æœºä¸Šè¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨ä¸å…¶ä»–è¿›ç¨‹ï¼ˆç±»ä¼¼äºè™šæ‹Ÿæœºï¼‰å…±äº«çš„è®¡ç®—æœºä¸Šè¿è¡Œã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®¹å™¨å¯ä»¥ä½¿ä½ åœ¨ä»»ä½•ç¯å¢ƒä¸­éƒ½èƒ½æ§åˆ¶è‡ªå·±çš„ä»£ç è¿è¡Œã€‚</p></li><li><p>é•œåƒæ˜¯è¿è¡Œå®¹å™¨åŠå…¶è¿‡ç¨‹æ‰€éœ€çš„ä¸€ç»„å­˜æ¡£æ–‡ä»¶ã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸ºæ¨¡æ¿çš„ä¸€ç§å½¢å¼ï¼Œå¯ä»¥åœ¨å…¶ä¸Šåˆ›å»ºæ— é™æ•°é‡çš„å®¹å™¨ã€‚</p></li><li><p>ä»“åº“æ˜¯å­˜å‚¨é•œåƒçš„ç©ºé—´ã€‚</p></li></ul><p>å›åˆ° Container Registryï¼Œè¿™æ˜¯åˆ†ç±»å’Œå­˜å‚¨ä»“åº“çš„ä¸“ç”¨ Web åº”ç”¨ç¨‹åºã€‚</p><p>é•œåƒåŒ…å«æ‰§è¡Œç¨‹åºï¼ˆåœ¨å®¹å™¨å†…ï¼‰æ‰€éœ€çš„ä¿¡æ¯ï¼Œå¹¶å­˜å‚¨åœ¨ä»“åº“ä¸­ï¼Œä»“åº“è¢«åˆ†ç±»å’Œåˆ†ç»„ã€‚æ„å»ºã€è¿è¡Œå’Œç®¡ç†å®¹å™¨çš„å·¥å…·éœ€è¦è®¿é—®ï¼ˆé€šè¿‡å¼•ç”¨ä»“åº“ï¼‰è¿™äº›é•œåƒã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093027683-2021-07-01-Dt5D0A.png" alt></p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>äº‘åŸç”Ÿåº”ç”¨ç¨‹åºè¢«æ‰“åŒ…åä»¥å®¹å™¨çš„æ–¹å¼è¿è¡Œã€‚Container Registry è´Ÿè´£å­˜å‚¨å’Œæä¾›è¿™äº›å®¹å™¨é•œåƒã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>é€šè¿‡åœ¨ä¸€ä¸ªåœ°æ–¹é›†ä¸­å­˜å‚¨æ‰€æœ‰å®¹å™¨é•œåƒï¼Œè¿™äº›å®¹å™¨é•œåƒå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«åº”ç”¨ç¨‹åºçš„å¼€å‘è€…è®¿é—®ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>Container Registry è¦ä¹ˆå­˜å‚¨å’Œåˆ†å‘é•œåƒï¼Œè¦ä¹ˆä»¥æŸç§æ–¹å¼å¢å¼ºç°æœ‰ä»“åº“ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯ä¸€ç§ Web APIï¼Œå…è®¸å®¹å™¨å¼•æ“å­˜å‚¨å’Œæ£€ç´¢é•œåƒã€‚è®¸å¤š Container Registry æä¾›æ¥å£ï¼Œä½¿å®¹å™¨æ‰«æ/ç­¾åå·¥å…·æ¥å¢å¼ºæ‰€å­˜å‚¨é•œåƒçš„å®‰å…¨æ€§ã€‚æœ‰äº› Container Registry èƒ½ä»¥ç‰¹åˆ«æœ‰æ•ˆçš„æ–¹å¼åˆ†å‘æˆ–å¤åˆ¶å›¾åƒã€‚ä»»ä½•ä½¿ç”¨å®¹å™¨çš„ç¯å¢ƒéƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªä»“åº“ã€‚</p><p>è¯¥ç©ºé—´ä¸­çš„å·¥å…·å¯ä»¥æä¾›é›†æˆåŠŸèƒ½ï¼Œä»¥æ‰«æï¼Œç­¾åå’Œæ£€æŸ¥å®ƒä»¬å­˜å‚¨çš„é•œåƒã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒDragonfly å’Œ Harbor æ˜¯è¯¥é¢†åŸŸä¸­çš„ CNCF é¡¹ç›®ï¼Œè€Œ Harbor æœ€è¿‘æˆä¸ºäº†ç¬¬ä¸€ä¸ªéµå¾ª OCI çš„ä»“åº“ã€‚ä¸»è¦çš„äº‘æä¾›å•†éƒ½æä¾›è‡ªå·±çš„æ‰˜ç®¡ä»“åº“ï¼Œå…¶ä»–ä»“åº“å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Helm ä¹‹ç±»çš„å·¥å…·ç›´æ¥éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ä¸­ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093033771-2021-07-01-wYlIC9.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093039766-2021-07-01-bTwe5x.png" alt></p><h3><span id="å®‰å…¨å’Œåˆè§„">å®‰å…¨å’Œåˆè§„</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>äº‘åŸç”Ÿåº”ç”¨ç¨‹åºçš„ç›®æ ‡æ˜¯å¿«é€Ÿè¿­ä»£ã€‚ä¸ºäº†å®šæœŸå‘å¸ƒä»£ç ï¼Œå¿…é¡»ç¡®ä¿ä»£ç å’Œæ“ä½œç¯å¢ƒæ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸”åªèƒ½ç”±è·å¾—æˆæƒçš„å·¥ç¨‹å¸ˆè®¿é—®ã€‚è¿™ä¸€éƒ¨åˆ†çš„å·¥å…·å’Œé¡¹ç›®å¯ä»¥ç”¨å®‰å…¨çš„æ–¹å¼åˆ›å»ºå’Œè¿è¡Œç°ä»£åº”ç”¨ç¨‹åºã€‚</p><p><strong>è§£å†³ä»€ä¹ˆé—®é¢˜</strong></p><p>è¿™äº›å·¥å…·å’Œé¡¹ç›®å¯ä¸ºå¹³å°å’Œåº”ç”¨ç¨‹åºåŠ å¼ºã€ç›‘æ§å’Œå®æ–½å®‰å…¨æ€§ã€‚å®ƒä»¬ä½¿ä½ èƒ½åœ¨å®¹å™¨å’Œ Kubernetes ç¯å¢ƒä¸­è®¾ç½®ç­–ç•¥ï¼ˆç”¨äºåˆè§„æ€§ï¼‰ï¼Œæ·±å…¥äº†è§£å­˜åœ¨çš„æ¼æ´ï¼Œæ•è·é”™è¯¯é…ç½®ï¼Œå¹¶åŠ å›ºå®¹å™¨å’Œé›†ç¾¤ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>ä¸ºäº†å®‰å…¨åœ°è¿è¡Œå®¹å™¨ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œæ‰«æä»¥æŸ¥æ‰¾å·²çŸ¥æ¼æ´ï¼Œå¹¶å¯¹å…¶è¿›è¡Œç­¾åä»¥ç¡®ä¿å®ƒä»¬æœªè¢«ç¯¡æ”¹ã€‚Kubernetes é»˜è®¤çš„è®¿é—®æ§åˆ¶æ¯”è¾ƒå®½æ¾ï¼Œå¯¹äºæƒ³æ”»å‡»ç³»ç»Ÿçš„äººæ¥è¯´ï¼Œ Kubernetes é›†ç¾¤å¾ˆå®¹æ˜“æˆä¸ºç›®æ ‡ã€‚è¯¥ç©ºé—´ä¸­çš„å·¥å…·å’Œé¡¹ç›®æœ‰åŠ©äºå¢å¼ºç¾¤é›†ï¼Œå¹¶åœ¨ç³»ç»Ÿè¿è¡Œå¼‚å¸¸æ—¶æä¾›å·¥å…·æ¥æ£€æµ‹ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>ä¸ºäº†åœ¨åŠ¨æ€ã€å¿«é€Ÿå‘å±•çš„ç¯å¢ƒä¸­å®‰å…¨è¿è¡Œï¼Œæˆ‘ä»¬å¿…é¡»å°†å®‰å…¨æ€§è§†ä¸ºå¹³å°å’Œåº”ç”¨ç¨‹åºå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ã€‚è¿™éƒ¨åˆ†çš„å·¥å…·ç§ç±»ç¹å¤šï¼Œå¯è§£å†³å®‰å…¨é¢†åŸŸä¸åŒæ–¹é¢çš„é—®é¢˜ã€‚å¤§å¤šæ•°å·¥å…·å±äºä»¥ä¸‹ç±»åˆ«ï¼š</p><ul><li><p>å®¡è®¡å’Œåˆè§„</p></li><li><p>ç”Ÿäº§ç¯å¢ƒå¼ºåŒ–å·¥å…·çš„è·¯å¾„ï¼š</p><ul><li><p>ä»£ç æ‰«æ</p></li><li><p>æ¼æ´æ‰«æ</p></li><li><p>é•œåƒç­¾å</p></li></ul></li><li><p>ç­–ç•¥åˆ¶å®šå’Œæ‰§è¡Œ</p></li><li><p>ç½‘ç»œå±‚å®‰å…¨</p></li></ul><p>å…¶ä¸­çš„ä¸€äº›å·¥å…·å’Œé¡¹ç›®å¾ˆå°‘ä¼šè¢«ç›´æ¥ä½¿ç”¨ã€‚ä¾‹å¦‚ Trivyã€Claire å’Œ Notaryï¼Œå®ƒä»¬ä¼šè¢« Registry æˆ–å…¶ä»–æ‰«æå·¥å…·æ‰€åˆ©ç”¨ã€‚è¿˜æœ‰ä¸€äº›å·¥å…·æ˜¯ç°ä»£åº”ç”¨ç¨‹åºå¹³å°çš„å…³é”®å¼ºåŒ–ç»„ä»¶ï¼Œä¾‹å¦‚ Falco æˆ– Open Policy Agentï¼ˆOPAï¼‰ã€‚</p><p>è¯¥é¢†åŸŸæœ‰è®¸å¤šæˆç†Ÿçš„ä¾›åº”å•†æä¾›è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæœ‰å¾ˆå¤šåˆ›ä¸šå…¬å¸çš„ä¸šåŠ¡æ˜¯æŠŠ Kubernetes åŸç”Ÿæ¡†æ¶æ¨å‘å¸‚åœºã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒFalcoã€Notary/TUF å’Œ OPA æ˜¯è¯¥é¢†åŸŸä¸­ä»…æœ‰çš„ CNCF é¡¹ç›®ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093047903-2021-07-01-eGPSRj.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093054334-2021-07-01-RMVXhu.png" alt></p><h3><span id="å¯†é’¥å’Œèº«ä»½ç®¡ç†">å¯†é’¥å’Œèº«ä»½ç®¡ç†</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>åœ¨è¿›å…¥åˆ°å¯†é’¥ç®¡ç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸‹å¯†é’¥ã€‚å¯†é’¥æ˜¯ç”¨äºåŠ å¯†æˆ–ç­¾åæ•°æ®çš„å­—ç¬¦ä¸²ã€‚å’Œç°å®ä¸­çš„é’¥åŒ™ä¸€æ ·ï¼Œå¯†é’¥é”å®šï¼ˆåŠ å¯†ï¼‰æ•°æ®ï¼Œåªæœ‰æ‹¥æœ‰æ­£ç¡®å¯†é’¥çš„äººæ‰èƒ½è§£é”ï¼ˆè§£å¯†ï¼‰æ•°æ®ã€‚</p><p>éšç€åº”ç”¨ç¨‹åºå’Œæ“ä½œå¼€å§‹é€‚åº”æ–°çš„äº‘åŸç”Ÿç¯å¢ƒï¼Œå®‰å…¨å·¥å…·ä¹Ÿåœ¨ä¸æ–­å‘å±•ä»¥æ»¡è¶³æ–°çš„éœ€æ±‚ã€‚æ­¤ç±»åˆ«ä¸­çš„å·¥å…·å’Œé¡¹ç›®å¯ç”¨äºå®‰å…¨åœ°å­˜å‚¨å¯†ç å’Œå…¶ä»– secretsï¼ˆä¾‹å¦‚ API å¯†é’¥ï¼ŒåŠ å¯†å¯†é’¥ç­‰æ•æ„Ÿæ•°æ®ï¼‰ã€ä»å¾®æœåŠ¡ç¯å¢ƒä¸­å®‰å…¨åˆ é™¤å¯†ç å’Œ secret ç­‰ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>äº‘åŸç”Ÿç¯å¢ƒæ˜¯é«˜åº¦åŠ¨æ€çš„ï¼Œéœ€è¦å®Œå…¨ç¼–ç¨‹ï¼ˆæ— äººå‚ä¸ï¼‰å’Œè‡ªåŠ¨åŒ–çš„æŒ‰éœ€ secret åˆ†å‘ã€‚åº”ç”¨ç¨‹åºè¿˜å¿…é¡»çŸ¥é“ç»™å®šçš„è¯·æ±‚æ˜¯å¦æ¥è‡ªæœ‰æ•ˆæ¥æºï¼ˆèº«ä»½éªŒè¯ï¼‰ï¼Œä»¥åŠè¯¥è¯·æ±‚æ˜¯å¦æœ‰æƒæ‰§è¡Œæ“ä½œï¼ˆæˆæƒï¼‰ã€‚é€šå¸¸å°†å…¶ç§°ä¸º AuthN å’Œ AuthZã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>æ¯ä¸ªå·¥å…·æˆ–é¡¹ç›®å®æ–½çš„æ–¹æ³•ä¸åŒï¼Œä½†ä»–ä»¬éƒ½æä¾›ï¼š</p><ul><li><p>å®‰å…¨åˆ†å‘ secret æˆ–å¯†é’¥çš„æ–¹æ³•ã€‚</p></li><li><p>èº«ä»½è®¤è¯æˆ–ï¼ˆå’Œï¼‰æˆæƒçš„æœåŠ¡æˆ–è§„èŒƒã€‚</p></li></ul><p><strong>å¯¹åº”çš„å·¥å…·</strong></p><p>æ­¤ç±»åˆ«ä¸­çš„å·¥å…·å¯ä»¥åˆ†ä¸ºä¸¤ç»„ï¼š</p><ul><li><p>ä¸€äº›å·¥å…·ä¸“æ³¨äºå¯†é’¥ç”Ÿæˆã€å­˜å‚¨ã€ç®¡ç†å’Œè½®è½¬ã€‚</p></li><li><p>å¦ä¸€äº›ä¸“æ³¨äºå•ç‚¹ç™»å½•å’Œèº«ä»½ç®¡ç†ã€‚</p></li></ul><p>æ‹¿ Vault æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„å¯†é’¥ç®¡ç†å·¥å…·ï¼Œå¯ç®¡ç†ä¸åŒç±»å‹çš„å¯†é’¥ã€‚è€Œ Keycloak åˆ™æ˜¯ä¸€ä¸ªèº«ä»½ä»£ç†å·¥å…·ï¼Œå¯ç”¨äºç®¡ç†ä¸åŒæœåŠ¡çš„è®¿é—®å¯†é’¥ã€‚</p><p>åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒSPIFFE/SPIRE æ˜¯è¯¥é¢†åŸŸä¸­å”¯ä¸€çš„ CNCF é¡¹ç›®ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093101081-2021-07-01-7b4gvL.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093106887-2021-07-01-q655GC.png" alt></p><p>ä¾›åº”å±‚ä¸“æ³¨äºæ„å»ºäº‘åŸç”Ÿå¹³å°å’Œåº”ç”¨ç¨‹åºçš„åŸºç¡€ï¼Œå…¶ä¸­çš„å·¥å…·æ¶‰åŠåŸºç¡€è®¾æ–½ä¾›åº”ã€å®¹å™¨æ³¨å†Œè¡¨ä»¥åŠå®‰å…¨æ€§ã€‚æœ¬ç« èŠ‚è¯¦ç»†ä»‹ç»äº†äº‘åŸç”Ÿå…¨æ™¯å›¾çš„æœ€åº•å±‚ã€‚</p><h2><span id="è¿è¡Œæ—¶å±‚">è¿è¡Œæ—¶å±‚</span></h2><p>æœ¬ç« èŠ‚æˆ‘ä»¬å°†ä¸€èµ·äº†è§£è¿è¡Œæ—¶å±‚ï¼ˆruntimeï¼‰ï¼Œè¿™ä¸€å±‚åŒ…å«äº†å®¹å™¨åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­è¿è¡Œæ‰€éœ€çš„ä¸€åˆ‡ã€‚å³ï¼šå¯åŠ¨å®¹å™¨çš„ä»£ç ï¼Œä¹Ÿå«è¿è¡Œæ—¶å¼•æ“ï¼›ä½¿å®¹å™¨è·å¾—æŒä¹…åŒ–å­˜å‚¨çš„å·¥å…·ï¼›ä»¥åŠç®¡ç†å®¹å™¨ç¯å¢ƒç½‘ç»œçš„å·¥å…·ã€‚</p><p>ä½†æ˜¯æ³¨æ„ï¼Œä¸è¦å°†è¿™ä¸€å±‚çš„èµ„æºä¸åŸºç¡€è®¾æ–½å’Œä¾›åº”å±‚çš„ç½‘ç»œå’Œå­˜å‚¨å¼„æ··æ·†ï¼Œåè€…çš„å·¥ä½œæ˜¯è®©å®¹å™¨å¹³å°è¿è¡Œèµ·æ¥ã€‚å®¹å™¨ç›´æ¥ä½¿ç”¨è¿è¡Œæ—¶å±‚çš„å·¥å…·æ¥å¯åŠ¨æˆ–åœæ­¢ï¼Œå­˜å‚¨æ•°æ®ï¼Œä»¥åŠç›¸äº’é€šä¿¡ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093113293-2021-07-01-8EjriE.png" alt></p><h3><span id="äº‘åŸç”Ÿå­˜å‚¨">äº‘åŸç”Ÿå­˜å‚¨</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>å­˜å‚¨æ˜¯å­˜æ”¾ä¸€ä¸ªåº”ç”¨ç¨‹åºæŒä¹…æ•°æ®çš„åœ°æ–¹ï¼Œä¹Ÿå«åšæŒä¹…å·ï¼ˆpersistent volume)ã€‚è½»æ¾è®¿é—®æŒä¹…å·å¯¹äºåº”ç”¨ç¨‹åºå¯é è¿è¡Œè‡³å…³é‡è¦ã€‚é€šå¸¸ï¼Œå½“æˆ‘ä»¬è¯´æŒä¹…æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯æŒ‡æ•°æ®åº“ã€æ¶ˆæ¯ä¹‹ç±»çš„ï¼Œæˆ–å…¶ä»–ä»»ä½•åœ¨åº”ç”¨é‡æ–°å¯åŠ¨æ—¶ä¸ä¼šä¸¢å¤±çš„ä¿¡æ¯ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>äº‘åŸç”Ÿæ¶æ„å…·æœ‰é«˜åº¦çš„çµæ´»æ€§å’Œå¼¹æ€§ï¼Œè¿™ä½¿å¾—é‡å¯åº”ç”¨æ—¶å­˜å‚¨æŒä¹…æ•°æ®å˜å¾—å¾ˆæœ‰æŒ‘æˆ˜æ€§ã€‚å®¹å™¨åŒ–åº”ç”¨ç¨‹åºåœ¨æ‰©å®¹ã€ç¼©å®¹æˆ–è‡ªåŠ¨æ¢å¤æ—¶ï¼Œä¼šä¸æ–­åœ°åˆ›å»ºæˆ–åˆ é™¤å®ä¾‹ï¼Œå¹¶éšç€æ—¶é—´æ”¹å˜ç‰©ç†ä½ç½®ã€‚å› æ­¤ï¼Œå¿…é¡»ä»¥ä¸èŠ‚ç‚¹æ— å…³çš„æ–¹å¼æä¾›äº‘åŸç”Ÿå­˜å‚¨ã€‚ä½†æ˜¯ï¼Œè¦å­˜å‚¨æ•°æ®ï¼Œå°±éœ€è¦ç¡¬ä»¶ï¼ˆå…·ä½“æ¥è¯´æ˜¯ç£ç›˜ï¼‰ã€‚ç£ç›˜å’Œå…¶ä»–ç¡¬ä»¶ä¸€æ ·ï¼Œå—åˆ°åŸºç¡€è®¾æ–½çš„é™åˆ¶ã€‚è¿™æ˜¯ç¬¬ä¸€ä¸ªå¤§çš„æŒ‘æˆ˜ã€‚</p><p>ç¬¬äºŒä¸ªæŒ‘æˆ˜æ˜¯å­˜å‚¨æ¥å£ã€‚è¯¥æ¥å£åœ¨æ•°æ®ä¸­å¿ƒä¹‹é—´å¯èƒ½ä¼šå‘ç”Ÿå¾ˆå¤§çš„å˜åŒ–ï¼ˆåœ¨ä»¥å‰ï¼Œä¸åŒçš„åŸºç¡€è®¾æ–½éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œå¹¶å¸¦æœ‰è‡ªå·±çš„æ¥å£ï¼‰ï¼Œè¿™ä½¿å¾—å¯ç§»æ¤æ€§å˜å¾—éå¸¸å›°éš¾ã€‚</p><p>æœ€åï¼Œç”±äºäº‘çš„å¼¹æ€§ï¼Œå­˜å‚¨å¿…é¡»ä»¥è‡ªåŠ¨åŒ–æ–¹å¼è¿›è¡Œé…ç½®ï¼Œå› ä¸ºæ‰‹åŠ¨é…ç½®å’Œè‡ªåŠ¨æ‰©å±•ä¸å…¼å®¹ã€‚é¢ä¸´ä»¥ä¸Šè¿™äº›é—®é¢˜ï¼Œäº‘åŸç”Ÿå­˜å‚¨å°±æ˜¯ä¸ºæ–°çš„äº‘åŸç”Ÿç¯å¢ƒé‡èº«å®šåˆ¶çš„ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>è¯¥ç±»åˆ«çš„å·¥å…·å¯ä»¥ï¼š</p><ul><li><p>ä¸ºå®¹å™¨æä¾›äº‘åŸç”Ÿå­˜å‚¨é€‰é¡¹ï¼›</p></li><li><p>æ ‡å‡†åŒ–å®¹å™¨ä¸å­˜å‚¨æä¾›è€…ä¹‹é—´çš„æ¥å£ï¼›</p></li><li><p>é€šè¿‡å¤‡ä»½å’Œè¿˜åŸæ“ä½œæä¾›æ•°æ®ä¿æŠ¤ã€‚</p></li></ul><p>äº‘åŸç”Ÿå­˜å‚¨æ„å‘³ç€ä½¿ç”¨å…¼å®¹äº‘åŸç”Ÿç¯å¢ƒçš„å®¹å™¨å­˜å‚¨æ¥å£ï¼ˆä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªç±»åˆ«ä¸­çš„å·¥å…·ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨é…ç½®ï¼Œé€šè¿‡æ¶ˆé™¤äººåŠ›ç“¶é¢ˆä»è€Œå®ç°äº†è‡ªåŠ¨æ‰©å±•å’Œè‡ªæˆ‘æ¢å¤ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>å®¹å™¨å­˜å‚¨æ¥å£ï¼ˆCSIï¼‰åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä½¿äº‘åŸç”Ÿå­˜å‚¨å˜æˆäº†å¯èƒ½ã€‚CSI å…è®¸ä½¿ç”¨æ ‡å‡† API å‘å®¹å™¨æä¾›æ–‡ä»¶å’Œå—å­˜å‚¨ã€‚è¯¥é¢†åŸŸä¸­æœ‰å¾ˆå¤šå·¥å…·ï¼Œæ—¢æœ‰å¼€æºçš„ä¹Ÿæœ‰ä¾›åº”å•†æä¾›çš„ï¼Œéƒ½å¯åˆ©ç”¨ CSI ä¸ºå®¹å™¨æä¾›æŒ‰éœ€å­˜å‚¨ã€‚</p><p>é™¤äº†è¿™ä¸€åŠå…¶é‡è¦çš„åŠŸèƒ½ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å·¥å…·å’ŒæŠ€æœ¯æ—¨åœ¨è§£å†³äº‘åŸç”Ÿç©ºé—´ä¸­çš„å­˜å‚¨é—®é¢˜ã€‚Minio æ˜¯ä¸€ä¸ªå—æ¬¢è¿çš„é¡¹ç›®ï¼Œå®ƒæä¾›äº†å…¼å®¹ S3 çš„ API ç”¨äºå¯¹è±¡å­˜å‚¨ã€‚Velero ä¹‹ç±»çš„å·¥å…·å¯å¸®åŠ©ç®€åŒ– Kubernetes é›†ç¾¤æœ¬èº«ä»¥åŠåº”ç”¨ç¨‹åºä½¿ç”¨çš„æŒä¹…åŒ–æ•°æ®çš„å¤‡ä»½å’Œè¿˜åŸè¿‡ç¨‹ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093121093-2021-07-01-TJZOf4.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093126617-2021-07-01-SjPyDB.png" alt></p><h3><span id="å®¹å™¨è¿è¡Œæ—¶">å®¹å™¨è¿è¡Œæ—¶</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>å‰é¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œå®¹å™¨æ˜¯ä¸€ç»„ç”¨äºæ‰§è¡Œåº”ç”¨ç¨‹åºçš„æŠ€æœ¯çº¦æŸã€‚å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºç›¸ä¿¡è‡ªå·±æ­£åœ¨ä¸“ç”¨è®¡ç®—æœºä¸Šè¿è¡Œï¼Œè€Œå¿½ç•¥äº†å®ƒä»¬å…¶å®æ˜¯ä¸å…¶ä»–è¿›ç¨‹ï¼ˆç±»ä¼¼äºè™šæ‹Ÿæœºï¼‰å…±äº«èµ„æºã€‚</p><p>å®¹å™¨è¿è¡Œæ—¶æ˜¯æ‰§è¡Œå®¹å™¨åŒ–ï¼ˆæˆ–â€œéš”ç¦»â€ï¼‰åº”ç”¨çš„è½¯ä»¶ã€‚å¦‚æœæ²¡æœ‰è¿è¡Œæ—¶ï¼Œå°†åªæœ‰å®¹å™¨é•œåƒâ€”â€”æŒ‡å®šå®¹å™¨åŒ–åº”ç”¨ç¨‹åºå¤–è§‚çš„æ–‡ä»¶ã€‚è¿è¡Œæ—¶å°†åœ¨å®¹å™¨ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸ºå…¶æä¾›æ‰€éœ€çš„èµ„æºã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>å®¹å™¨é•œåƒï¼ˆå¸¦æœ‰åº”ç”¨ç¨‹åºè§„èŒƒçš„æ–‡ä»¶ï¼‰å¿…é¡»ä»¥æ ‡å‡†åŒ–ã€å®‰å…¨å’Œéš”ç¦»çš„æ–¹å¼å¯åŠ¨ï¼š</p><ul><li><p>æ ‡å‡†åŒ–ï¼šæ— è®ºå®ƒä»¬åœ¨ä½•å¤„è¿è¡Œï¼Œéƒ½éœ€è¦æ ‡å‡†æ“ä½œè§„åˆ™ï¼›</p></li><li><p>å®‰å…¨ï¼šè®¿é—®æƒé™åº”è¯¥è¦æ³¨æ„è®¾ç½®ï¼›</p></li><li><p>éš”ç¦»ï¼šè¯¥åº”ç”¨ç¨‹åºä¸åº”å½±å“å…¶ä»–åº”ç”¨ç¨‹åºæˆ–å—åˆ°å…¶ä»–åº”ç”¨ç¨‹åºçš„å½±å“ï¼ˆä¾‹å¦‚ï¼Œä½äºåŒä¸€ä½ç½®çš„åº”ç”¨ç¨‹åºå´©æºƒï¼‰ã€‚éš”ç¦»åŸºæœ¬ä¸Šèµ·åˆ°ä¿æŠ¤ä½œç”¨ã€‚</p></li></ul><p>æ­¤å¤–ï¼Œå¿…é¡»ä¸ºåº”ç”¨ç¨‹åºæä¾› CPUã€å­˜å‚¨ã€å†…å­˜ç­‰èµ„æºã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>å®¹å™¨è¿è¡Œæ—¶å¯ä»¥å®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œã€‚å®ƒä»¥æ ‡å‡†åŒ–æ–¹å¼åœ¨æ‰€æœ‰ç¯å¢ƒä¸­å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œå¹¶è®¾ç½®å®‰å…¨è¾¹ç•Œã€‚å®‰å…¨è¾¹ç•Œæ˜¯è¿è¡Œæ—¶å’Œå…¶ä»–å·¥å…·ä¸åŒçš„åœ°æ–¹ï¼ŒCRI-O æˆ– gVisor ç­‰è¿è¡Œæ—¶å¼ºåŒ–äº†å®ƒä»¬çš„å®‰å…¨æ€§è¾¹ç•Œã€‚è¿è¡Œæ—¶è¿˜ä¸ºå®¹å™¨è®¾ç½®èµ„æºé™åˆ¶ã€‚æ²¡æœ‰èµ„æºé™åˆ¶ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šæ ¹æ®éœ€è¦æ¶ˆè€—èµ„æºï¼Œè¿™æ ·å°±æœ‰å¯èƒ½å ç”¨å…¶ä»–åº”ç”¨ç¨‹åºçš„èµ„æºã€‚å› æ­¤è®¾ç½®èµ„æºé™åˆ¶æ˜¯å¾ˆå¿…è¦çš„ã€‚</p><p><strong>å¯¹åº”çš„å·¥å…·</strong></p><p>ä¸æ˜¯æ‰€æœ‰æ­¤ç±»åˆ«ä¸­çš„å·¥å…·éƒ½ä¸€æ ·ã€‚Containerdï¼ˆDocker äº§å“çš„ä¸€éƒ¨åˆ†ï¼‰å’Œ CRI-O æ˜¯æ ‡å‡†çš„å®¹å™¨è¿è¡Œæ—¶å®ç°ã€‚æœ‰ä¸€äº›å·¥å…·å¯ä»¥å°†å®¹å™¨çš„ä½¿ç”¨æ‰©å±•åˆ°å…¶ä»–æŠ€æœ¯ï¼Œä¾‹å¦‚ Kataï¼Œå®ƒå…è®¸å°†å®¹å™¨ä½œä¸º VM è¿è¡Œã€‚å…¶ä»–å·¥å…·æ—¨åœ¨è§£å†³ä¸å®¹å™¨ç›¸å…³çš„ç‰¹å®šé—®é¢˜ï¼Œä¾‹å¦‚ gVisorï¼Œå®ƒåœ¨å®¹å™¨å’Œ OS ä¹‹é—´æä¾›äº†é¢å¤–çš„å®‰å…¨å±‚ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093132603-2021-07-01-8jh68O.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093137560-2021-07-01-rPR0k3.png" alt></p><h3><span id="äº‘åŸç”Ÿç½‘ç»œ">äº‘åŸç”Ÿç½‘ç»œ</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>å®¹å™¨é€šè¿‡äº‘åŸç”Ÿç½‘ç»œå®ç°ç›¸äº’ä¹‹é—´åŠå’ŒåŸºç¡€è®¾æ–½å±‚ä¹‹é—´çš„é€šä¿¡ã€‚åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå…·æœ‰å¤šä¸ªç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å°†ç½‘ç»œç”¨äºä¸åŒç›®çš„ã€‚æ­¤ç±»åˆ«ä¸­çš„å·¥å…·å°†è™šæ‹Ÿç½‘ç»œè¦†ç›–åœ¨ç°æœ‰ç½‘ç»œä¹‹ä¸Šï¼Œä¸“é—¨ç”¨äºåº”ç”¨ç¨‹åºè¿›è¡Œé€šä¿¡ï¼Œç§°ä¸ºè¦†ç›–ç½‘ç»œï¼ˆoverlay network)ã€‚</p><p><strong>è§£å†³ä»€ä¹ˆé—®é¢˜</strong></p><p>é€šå¸¸æˆ‘ä»¬å°†åœ¨å®¹å™¨ä¸­è¿è¡Œçš„ä»£ç ç§°ä¸ºåº”ç”¨ç¨‹åºï¼Œä½†å®é™…ä¸Šï¼Œå¤§å¤šæ•°å®¹å™¨ä¸­ä»…åŒ…å«å¤§å‹åº”ç”¨ç¨‹åºçš„ä¸€å°éƒ¨åˆ†ç‰¹å®šåŠŸèƒ½ã€‚è¯¸å¦‚ Netflix æˆ– Gmail ä¹‹ç±»çš„ç°ä»£åº”ç”¨ç¨‹åºå®é™…ä¸Šç”±è®¸å¤šè¾ƒå°çš„ç»„ä»¶ç»„æˆï¼Œæ¯ä¸ªç»„ä»¶éƒ½åœ¨è‡ªå·±çš„å®¹å™¨ä¸­è¿è¡Œã€‚ä¸ºäº†ä½¿æ‰€æœ‰è¿™äº›ç‹¬ç«‹çš„éƒ¨åˆ†æ­£å¸¸è¿è¡Œç»„æˆä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ï¼Œå®¹å™¨ä¹‹é—´éœ€è¦ç›¸äº’é€šä¿¡ã€‚æ­¤ç±»åˆ«çš„å·¥å…·å°±æä¾›è¯¥ä¸“ç”¨é€šä¿¡ç½‘ç»œã€‚</p><p>æ­¤å¤–ï¼Œè¿™äº›å®¹å™¨ä¹‹é—´äº¤æ¢çš„æ¶ˆæ¯å¯èƒ½æ˜¯ç§å¯†çš„ã€æ•æ„Ÿçš„æˆ–è€…éå¸¸é‡è¦çš„ã€‚è¿™å¯¼è‡´äº†å…¶ä»–è¦æ±‚ï¼šä¾‹å¦‚ä¸ºå„ç§ç»„ä»¶æä¾›éš”ç¦»ï¼Œæ£€æŸ¥æµé‡ä»¥è¯†åˆ«ç½‘ç»œé—®é¢˜çš„èƒ½åŠ›ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½è¿˜éœ€è¦æ‹“å±•è¿™äº›ç½‘ç»œåŠç½‘ç»œç­–ç•¥ï¼ˆå¦‚é˜²ç«å¢™å’Œè®¿é—®è§„åˆ™ï¼‰ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºå¯ä»¥è¿æ¥åˆ°å®¹å™¨ç½‘ç»œå¤–éƒ¨è¿è¡Œçš„ VM æˆ–æœåŠ¡ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>æ­¤ç±»åˆ«ä¸­çš„é¡¹ç›®å’Œäº§å“ä½¿ç”¨ CNCF ä¸­çš„é¡¹ç›®â€”â€”å®¹å™¨ç½‘ç»œæ¥å£ï¼ˆContainer Network Interface, CNIï¼‰ä¸ºå®¹å™¨åŒ–åº”ç”¨æä¾›ç½‘ç»œåŠŸèƒ½ã€‚æŸäº›å·¥å…·ï¼ˆä¾‹å¦‚ Flannelï¼‰ä»…ä¸ºå®¹å™¨æä¾›åŸºæœ¬è¿æ¥ã€‚å…¶ä»–å·¥å…·ï¼ˆå¦‚ NSX-Tï¼‰æä¾›äº†å®Œæ•´çš„è½¯ä»¶å®šä¹‰ç½‘ç»œå±‚ï¼Œå¯ä¸ºæ¯ä¸ª Kubernetes åç§°ç©ºé—´åˆ›å»ºä¸€ä¸ªéš”ç¦»çš„è™šæ‹Ÿç½‘ç»œã€‚</p><p>å®¹å™¨ç½‘ç»œè‡³å°‘åº”è¯¥èƒ½ä¸º Podï¼ˆKubernetes ä¸­è¿è¡Œå®¹å™¨åŒ–åº”ç”¨çš„åœ°æ–¹ï¼‰åˆ†é… IP åœ°å€ï¼Œä»¥å…è®¸å…¶ä»–è¿›ç¨‹è®¿é—®ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>CNI æ ‡å‡†åŒ–äº†ç½‘ç»œå±‚ä¸º Pod æä¾›åŠŸèƒ½çš„æ–¹å¼ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå®ç°äº†è¯¥é¢†åŸŸçš„å¤šæ ·æ€§å’Œåˆ›æ–°æ€§ã€‚ä¸º Kubernetes ç¯å¢ƒé€‰æ‹©ç½‘ç»œéå¸¸å…³é”®ï¼Œæœ‰è®¸å¤šå·¥å…·å¯é€‰ã€‚Weave Netï¼ŒAntreaï¼ŒCalico å’Œ Flannel å‡æä¾›æœ‰æ•ˆçš„å¼€æºç½‘ç»œå±‚ï¼Œå®ƒä»¬çš„åŠŸèƒ½å„ä¸ç›¸åŒï¼Œåº”æ ¹æ®ç‰¹å®šéœ€æ±‚è¿›è¡Œé€‰æ‹©ã€‚</p><p>æ­¤å¤–ï¼Œè®¸å¤šä¾›åº”å•†å·²å‡†å¤‡å¥½ä½¿ç”¨è½¯ä»¶å®šä¹‰ç½‘ç»œï¼ˆSDNï¼‰å·¥å…·æ¥æ”¯æŒå’Œæ‰©å±• Kubernetes ç½‘ç»œï¼Œè¿™äº›å·¥å…·å¯ä½¿ä½ æ·±å…¥äº†è§£ç½‘ç»œæµé‡ï¼Œæ‰§è¡Œç½‘ç»œç­–ç•¥ï¼Œç”šè‡³å°†å®¹å™¨ç½‘ç»œå’Œç­–ç•¥æ‰©å±•åˆ°æ›´å¹¿æ³›çš„æ•°æ®ä¸­å¿ƒã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093142946-2021-07-01-Y6M0IO.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093148358-2021-07-01-L7I3yd.png" alt></p><p>æœ¬æ–‡æ˜¯å¯¹è¿è¡Œæ—¶å±‚çš„æ¦‚è¿°ï¼Œè¯¥å±‚æä¾›äº†å®¹å™¨åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­è¿è¡Œæ‰€éœ€çš„å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><p>å­˜å‚¨ï¼šä½¿åº”ç”¨ç¨‹åºè½»æ¾å¿«é€Ÿè®¿é—®è¿è¡Œæ‰€éœ€çš„æ•°æ®ï¼›</p></li><li><p>å®¹å™¨è¿è¡Œæ—¶ï¼šæ‰§è¡Œåº”ç”¨ç¨‹åºä»£ç ï¼›</p></li><li><p>ç½‘ç»œï¼šç¡®ä¿å®¹å™¨åŒ–åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ã€‚</p></li></ul><p>åœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ç¼–æ’å’Œç®¡ç†å±‚ï¼Œè¯¥å±‚å¤„ç†çš„æ˜¯å¦‚ä½•å°†æ‰€æœ‰å®¹å™¨åŒ–åº”ç”¨ç¨‹åºä½œä¸ºä¸€ä¸ªç»„è¿›è¡Œç®¡ç†ã€‚</p><h2><span id="ç¼–æ’å’Œç®¡ç†å±‚">ç¼–æ’å’Œç®¡ç†å±‚</span></h2><p>ç¼–æ’å’Œç®¡ç†å±‚æ˜¯ CNCF äº‘åŸç”Ÿå…¨æ™¯å›¾çš„ç¬¬ä¸‰å±‚ã€‚åœ¨ä½¿ç”¨è¿™ä¸€å±‚çš„å·¥å…·ä¹‹å‰ï¼Œå·¥ç¨‹å¸ˆå¤§æ¦‚å·²ç»æŒ‰ç…§å®‰å…¨åˆè§„æ ‡å‡†è‡ªåŠ¨é…ç½®äº†åŸºç¡€è®¾æ–½ï¼Œå¹¶ä¸ºåº”ç”¨ç¨‹åºè®¾ç½®äº†è¿è¡Œæ—¶ï¼ˆè¿è¡Œæ—¶å±‚ï¼‰ã€‚ç°åœ¨ï¼Œä»–ä»¬å¿…é¡»å¼„æ¸…æ¥šå¦‚ä½•å°†æ‰€æœ‰åº”ç”¨ç¨‹åºç»„ä»¶ä½œä¸ºæ•´ä½“æ¥ç¼–æ’å’Œç®¡ç†ã€‚è¿™äº›ç»„ä»¶å¿…é¡»ç›¸äº’è¯†åˆ«ä»¥è¿›è¡Œé€šä¿¡ï¼Œå¹¶é€šè¿‡åè°ƒå®ç°å…±åŒçš„ç›®æ ‡ã€‚ç¼–æ’å’Œç®¡ç†å±‚çš„å·¥å…·å¯å®ç°è‡ªåŠ¨åŒ–å’Œå¼¹æ€§ä¼¸ç¼©ï¼ŒåŸºäºæ­¤äº‘åŸç”Ÿåº”ç”¨ç¨‹åºå¤©ç„¶å…·æœ‰å¯æ‰©å±•æ€§ã€‚</p><h3><span id="ç¼–æ’å’Œè°ƒåº¦">ç¼–æ’å’Œè°ƒåº¦</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>ç¼–æ’å’Œè°ƒåº¦æ˜¯æŒ‡åœ¨é›†ç¾¤ä¸­è¿è¡Œå’Œç®¡ç†å®¹å™¨ï¼ˆä¸€ç§æ‰“åŒ…å’Œè¿é€åº”ç”¨çš„æ–°æ–¹å¼ï¼‰ã€‚é›†ç¾¤æ˜¯é€šè¿‡ç½‘ç»œè¿æ¥çš„ä¸€ç»„æœºå™¨ï¼ˆç‰©ç†æœºæˆ–è™šæ‹Ÿæœºå‡å¯ï¼‰ã€‚</p><p>å®¹å™¨ç¼–æ’å™¨ï¼ˆå’Œè°ƒåº¦å™¨ï¼‰ä¸ç”µè„‘ä¸Šç®¡ç†æ‰€æœ‰åº”ç”¨ç¨‹åºï¼ˆå¦‚å¾®è½¯ 360ã€Zoomã€Slack ç­‰ï¼‰çš„æ“ä½œç³»ç»Ÿç±»ä¼¼ã€‚æ“ä½œç³»ç»Ÿæ‰§è¡Œä½ æƒ³ä½¿ç”¨çš„åº”ç”¨ç¨‹åºï¼Œå¹¶è§„åˆ’å“ªä¸ªåº”ç”¨ç¨‹åºè¯¥åœ¨ä½•æ—¶ä½¿ç”¨ç”µè„‘çš„ CPU å’Œå…¶ä»–ç¡¬ä»¶èµ„æºã€‚</p><p>è™½ç„¶åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œæ‰€æœ‰ä¸œè¥¿å¾ˆæ£’ï¼Œä½†å¦‚ä»Šå¤§å¤šæ•°åº”ç”¨ç¨‹åºçš„å¤§å°è¿œéä¸€å°æœºå™¨æ‰€èƒ½å¤„ç†ï¼Œå¤§å¤šæ•°ç°ä»£çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯åˆ†å¸ƒå¼çš„ï¼Œè¿™å°±éœ€è¦ä¸€ç§è½¯ä»¶èƒ½å¤Ÿç®¡ç†åœ¨ä¸åŒæœºå™¨ä¸Šè¿è¡Œçš„ç»„ä»¶ã€‚ç®€å•æ¥è¯´ï¼Œä½ éœ€è¦ä¸€ä¸ªâ€œé›†ç¾¤æ“ä½œç³»ç»Ÿâ€ã€‚è¿™å°±æ˜¯ç¼–æ’å·¥å…·ã€‚</p><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œåœ¨æœ¬ç³»åˆ—çš„å‰å‡ ç¯‡æ–‡ç« ä¸­ï¼Œå®¹å™¨é¢‘ç¹å‡ºç°ã€‚å®¹å™¨å¯ä»¥è®©åº”ç”¨ç¨‹åºè¿è¡Œåœ¨ä¸åŒçš„ç¯å¢ƒä¸­ï¼Œè¿™ç§èƒ½åŠ›æ˜¯å…³é”®ã€‚å®¹å™¨ç¼–æ’å™¨ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æŒ‡ Kubernetesï¼‰ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å®¹å™¨å’Œ Kubernetes æ˜¯äº‘åŸç”Ÿæ¶æ„çš„æ ¸å¿ƒï¼Œæ‰€ä»¥æˆ‘ä»¬æ€»æ˜¯å¬åˆ°åˆ«äººæèµ·å®ƒä»¬ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>åœ¨äº‘åŸç”Ÿæ¶æ„ä¸­ï¼Œåº”ç”¨ç¨‹åºè¢«åˆ†è§£æˆå¾ˆå¤šå°çš„ç»„ä»¶æˆ–æœåŠ¡ï¼Œæ¯ä¸ªç»„ä»¶æˆ–æœåŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªå®¹å™¨é‡Œã€‚ä½ å¯èƒ½å·²ç»å¬è¯´è¿‡å¾®æœåŠ¡ï¼ŒæŒ‡çš„å°±æ˜¯è¿™ç§æƒ…å†µã€‚ç°åœ¨ï¼Œä½ æ‹¥æœ‰çš„ä¸å†æ˜¯ä¸€ä¸ªå¤§å‹çš„åº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯å¤šä¸ªå°å‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½éœ€è¦èµ„æºã€è¦è¢«ç›‘æ§ï¼Œåœ¨å‡ºç°é—®é¢˜çš„æ—¶å€™ä¹Ÿéœ€è¦ä¿®å¤ã€‚å¯¹å•ä¸ªæœåŠ¡æ¥è¯´æ‰‹åŠ¨æ‰§è¡Œè¿™äº›æ“ä½œæ˜¯å¯è¡Œçš„ï¼Œä½†å½“ä½ æœ‰ä¸Šç™¾ä¸ªå®¹å™¨æ—¶ï¼Œä½ å°±éœ€è¦è‡ªåŠ¨åŒ–çš„æµç¨‹ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>å®¹å™¨ç¼–æ’å™¨è‡ªåŠ¨åŒ–äº†å®¹å™¨ç®¡ç†çš„è¿‡ç¨‹ã€‚è¿™åœ¨å®é™…æ“ä½œä¸­æ„å‘³ç€ä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬ä»¥ Kubernetes æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º Kubernetes æ˜¯äº‹å®ä¸Šçš„å®¹å™¨ç¼–æ’å™¨ã€‚</p><p>Kubernetes åšçš„äº‹æƒ…æ˜¯â€œæœŸæœ›çŠ¶æ€åè°ƒâ€ï¼šå°†é›†ç¾¤ä¸­å®¹å™¨çš„å½“å‰çŠ¶æ€ä¸æœŸæœ›çŠ¶æ€åŒ¹é…ã€‚å·¥ç¨‹å¸ˆåœ¨æ–‡ä»¶ä¸­æŒ‡å®šæ‰€éœ€çŠ¶æ€ï¼Œä¾‹å¦‚ï¼šæœåŠ¡ A çš„ 10 ä¸ªå®ä¾‹åœ¨ä¸‰ä¸ªèŠ‚ç‚¹ï¼ˆå³ï¼šæœºå™¨ï¼‰ä¸Šè¿è¡Œï¼Œå¯è®¿é—® B æ•°æ®åº“ï¼Œç­‰ç­‰ã€‚è¯¥çŠ¶æ€éœ€æŒç»­ä¸å®é™…çŠ¶æ€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœé¢„æœŸçŠ¶æ€ä¸å®é™…çŠ¶æ€ä¸åŒ¹é…ï¼ŒKubernetes ä¼šé€šè¿‡åˆ›å»ºæˆ–é”€æ¯å¯¹è±¡æ¥è¿›è¡Œåè°ƒï¼ˆä¾‹å¦‚ï¼šå¦‚æœæŸä¸ªå®¹å™¨å´©æºƒäº†ï¼ŒKubernetes ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨ï¼‰ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼ŒKubernetes å…è®¸ä½ å°†é›†ç¾¤è§†ä¸ºä¸€å°è®¡ç®—æœºã€‚å®ƒä»…å…³æ³¨ç¯å¢ƒå¹¶ä¸ºä½ å¤„ç†å®ç°ç»†èŠ‚ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>Kubernetes ä¸å…¶ä»–å®¹å™¨ç¼–æ’å™¨ï¼ˆDocker Swarmï¼ŒMesos ç­‰ï¼‰éƒ½æ˜¯ç¼–æ’è°ƒåº¦å·¥å…·ï¼Œå…¶åŸºæœ¬ç›®çš„æ˜¯å…è®¸å°†å¤šä¸ªä¸åŒçš„è®¡ç®—æœºä½œä¸ºä¸€ä¸ªèµ„æºæ± è¿›è¡Œç®¡ç†ï¼Œå¹¶ä»¥å£°æ˜å¼çš„æ–¹å¼ç®¡ç†å®ƒä»¬ï¼Œå³ä¸å¿…å‘Šè¯‰ Kubernetes å¦‚ä½•åšï¼Œè€Œæ˜¯æä¾›è¦å®Œæˆçš„å·¥ä½œçš„å®šä¹‰ã€‚è¿™æ ·å¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª YAML æ–‡ä»¶ä¸­ç»´æŠ¤æ‰€éœ€çš„çŠ¶æ€ï¼Œå¹¶å°†å…¶åº”ç”¨äºå…¶ä»– Kubernetes é›†ç¾¤ã€‚ç„¶åï¼Œç¼–æ’å™¨æœ¬èº«ä¼šåˆ›å»ºç¼ºå¤±çš„å†…å®¹æˆ–åˆ é™¤æ— éœ€å­˜åœ¨çš„ä¸œè¥¿ã€‚</p><p>è™½ç„¶ Kubernetes ä¸æ˜¯ CNCF æ‰˜ç®¡çš„å”¯ä¸€ç¼–æ’å™¨ï¼ˆCrossplane å’Œ Volcano æ˜¯å¦å¤–ä¸¤ä¸ªå­µåŒ–é¡¹ç›®ï¼‰ï¼Œä½†å®ƒæ˜¯æœ€å¸¸ç”¨çš„ï¼Œé¡¹ç›®ä¹Ÿæœ‰å¤§é‡ç§¯æçš„ç»´æŠ¤è€…ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093201238-2021-07-01-bGT6MM.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093205543-2021-07-01-STL1m3.png" alt></p><h3><span id="åè°ƒå’ŒæœåŠ¡å‘ç°">åè°ƒå’ŒæœåŠ¡å‘ç°</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>ç°ä»£åº”ç”¨ç¨‹åºç”±å¤šä¸ªå•ç‹¬çš„æœåŠ¡ç»„æˆï¼Œè¿™äº›æœåŠ¡ä¹‹é—´éœ€è¦ç›¸äº’åä½œæ‰èƒ½ä¸ºæœ€ç»ˆç”¨æˆ·æä¾›ä»·å€¼ã€‚è¦è¿›è¡Œåä½œï¼Œè¿™äº›æœåŠ¡é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼ˆæˆ‘ä»¬åœ¨è¿è¡Œæ—¶å±‚å·²ç»è®¨è®ºè¿‡ï¼‰ã€‚è¦é€šä¿¡ï¼ŒæœåŠ¡éœ€è¦èƒ½ç›¸äº’å®šä½ã€‚æœåŠ¡å‘ç°å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>äº‘åŸç”Ÿæ¶æ„æ˜¯åŠ¨æ€çš„ï¼Œæ€»æ˜¯åœ¨ä¸æ–­å˜åŒ–ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„æŸä¸ªå®¹å™¨å´©æºƒæ—¶ï¼Œä¸€ä¸ªæ–°çš„å®¹å™¨ä¼šåœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå¯åŠ¨æ¥æ›¿ä»£å®ƒã€‚æˆ–è€…ï¼Œå½“ä¸€ä¸ªåº”ç”¨ç¨‹åºæ‰©å±•æ—¶ï¼Œå®ƒçš„å‰¯æœ¬ä¼šæ•£å¸ƒåœ¨æ•´ä¸ªç½‘ç»œä¸­ã€‚æ²¡æœ‰ä¸€ä¸ªåœ°æ–¹å¯ä»¥æä¾›ç‰¹å®šæœåŠ¡ï¼Œä¸€åˆ‡çš„ä½ç½®åœ¨ä¸æ–­å˜åŒ–ã€‚æ­¤ç±»åˆ«çš„å·¥å…·è·Ÿè¸ªç½‘ç»œä¸­çš„æœåŠ¡ï¼Œä»¥ä¾¿æœåŠ¡åœ¨éœ€è¦æ—¶å¯ä»¥ç›¸äº’æŸ¥æ‰¾ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>æœåŠ¡å‘ç°å·¥å…·å¯æä¾›ä¸€ä¸ªå…¬å…±çš„ä½ç½®æ¥æŸ¥æ‰¾å’Œè¯†åˆ«å•ä¸ªçš„æœåŠ¡ã€‚è¯¥ç±»åˆ«ä¸­æœ‰ä¸¤ç§å·¥å…·ï¼š</p><ul><li><p>æœåŠ¡å‘ç°å¼•æ“ï¼šç±»ä¼¼æ•°æ®åº“çš„å·¥å…·ï¼Œå­˜å‚¨çš„ä¿¡æ¯åŒ…æ‹¬ï¼šå­˜åœ¨ä»€ä¹ˆå“ªäº›æœåŠ¡ä»¥åŠå¦‚ä½•å®šä½å®ƒä»¬ï¼›</p></li><li><p>åç§°è§£æå·¥å…·ï¼ˆå¦‚ CoreDNSï¼‰ï¼šæ¥æ”¶æœåŠ¡ä½ç½®è¯·æ±‚å¹¶è¿”å›ç½‘ç»œåœ°å€ä¿¡æ¯ã€‚</p></li></ul><p>æ³¨ï¼šåœ¨ Kubernetes ä¸­ï¼Œä¸ºäº†ä½¿ Pod å¯è¾¾ï¼Œå¼•å…¥äº†ä¸€ä¸ªç§°ä¸ºâ€œServiceâ€çš„æ–°æŠ½è±¡å±‚ã€‚Service ä¸ºåŠ¨æ€å˜åŒ–çš„ Pod ç»„æä¾›äº†å•ä¸€ç¨³å®šçš„åœ°å€ã€‚</p><p>è¯·æ³¨æ„ï¼Œâ€œServiceâ€ åœ¨ä¸åŒçš„è¯­å¢ƒä¸­æœ‰ä¸åŒçš„å«ä¹‰ï¼Œå¯èƒ½ä¼šé€ æˆæ··æ·†ã€‚â€œservicesâ€ é€šå¸¸æŒ‡ä½äºå®¹å™¨/Pod ä¸­çš„æœåŠ¡ï¼Œæ˜¯å®é™…åº”ç”¨ç¨‹åºä¸­å…·æœ‰ç‰¹å®šåŠŸèƒ½çš„åº”ç”¨ç»„ä»¶æˆ–å¾®æœåŠ¡ï¼ˆä¾‹å¦‚ï¼šiPhone çš„é¢éƒ¨è¯†åˆ«ç®—æ³•ï¼‰ã€‚<br>è€Œ Kubernetes çš„ Service æ˜¯ä¸€ç§æŠ½è±¡ï¼Œå¯å¸®åŠ© Pod ç›¸äº’æŸ¥æ‰¾å’Œå®šä½ã€‚å®ƒæ˜¯æœåŠ¡ï¼ˆåŠŸèƒ½ä¸Šçš„ï¼‰ä½œä¸ºè¿›ç¨‹æˆ– Pod çš„å…¥å£ç‚¹ã€‚åœ¨ Kubernetes ä¸­ï¼Œå½“ä½ åˆ›å»ºäº†ä¸€ä¸ª Service ï¼ˆæŠ½è±¡ï¼‰ï¼Œä½ å°±åˆ›å»ºäº†ä¸€ç»„ Podï¼Œè¿™äº› Pod ä¸€èµ·é€šè¿‡å•ä¸€ endpoint ï¼ˆå…¥å£ï¼‰æä¾›ä¸€ä¸ªæœåŠ¡ï¼ˆåŠŸèƒ½ï¼‰ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>éšç€åˆ†å¸ƒå¼ç³»ç»Ÿå˜å¾—è¶Šæ¥è¶Šæ™®éï¼Œä¼ ç»Ÿçš„ DNS æµç¨‹å’Œè´Ÿè½½å‡è¡¡å™¨å·²ç»æ— æ³•è·Ÿä¸Šä¸æ–­å˜åŒ–çš„ Endpoint ä¿¡æ¯ï¼Œå› æ­¤æœ‰äº†æœåŠ¡å‘ç°å·¥å…·ã€‚å®ƒä»¬å¯ç”¨æ¥å¤„ç†å¿«é€Ÿå¯¹è‡ªèº«è¿›è¡Œæ³¨å†Œå’Œæ³¨é”€çš„å„ä¸ªåº”ç”¨ç¨‹åºå®ä¾‹ã€‚ä¸€äº›æœåŠ¡å‘ç°å·¥å…·ï¼ˆä¾‹å¦‚ etcd å’Œ CoreDNSï¼‰æ˜¯ Kubernetes åŸç”Ÿçš„ï¼Œå…¶ä»–ä¸€äº›å·¥å…·æœ‰è‡ªå®šä¹‰çš„åº“æˆ–å·¥å…·è®©æœåŠ¡æœ‰æ•ˆè¿è¡Œã€‚CoreDNS å’Œ etcd æ˜¯ CNCF é¡¹ç›®ï¼Œå¹¶ä¸”å†…ç½®åœ¨ Kubernetes ä¸­ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093212167-2021-07-01-tNqnoy.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093215933-2021-07-01-4ZjVnW.png" alt></p><h3><span id="è¿œç¨‹è¿›ç¨‹è°ƒç”¨">è¿œç¨‹è¿›ç¨‹è°ƒç”¨</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>è¿œç¨‹è¿›ç¨‹è°ƒç”¨ï¼ˆRPCï¼ŒRemote Procedure Callï¼‰æ˜¯ä¸€ç§ä½¿åº”ç”¨ç¨‹åºç›¸äº’é€šä¿¡çš„ç‰¹æ®ŠæŠ€æœ¯ã€‚å®ƒä»£è¡¨äº†åº”ç”¨ç¨‹åºç›¸äº’ä¹‹é—´æ„å»ºé€šä¿¡çš„ä¸€ç§æ–¹æ³•ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>ç°ä»£åº”ç”¨ç¨‹åºç”±ä¼—å¤šå•ç‹¬çš„æœåŠ¡ç»„æˆï¼Œè¿™äº›æœåŠ¡å¿…é¡»é€šè¿‡é€šä¿¡æ‰èƒ½è¿›è¡Œåä½œã€‚RPC æ˜¯åº”ç”¨ç¨‹åºä¹‹é—´è¿›è¡Œé€šä¿¡çš„ä¸€ç§æ–¹æ³•ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>RPC å¯ä»¥ä¸€ç§ç´§è€¦åˆä¸”é«˜åº¦è‡ªè§‰çš„æ–¹å¼å¤„ç†æœåŠ¡ä¹‹é—´çš„é€šä¿¡ã€‚å®ƒå…è®¸å¸¦å®½é«˜æ•ˆçš„é€šä¿¡ï¼Œå¹¶ä¸”è®¸å¤šè¯­è¨€æ”¯æŒ RPC æ¥å£å®ç°ã€‚RPC ä¸æ˜¯è§£å†³æ­¤é—®é¢˜çš„å”¯ä¸€æ–¹æ³•ï¼Œä¹Ÿä¸æ˜¯æœ€å¸¸è§çš„æ–¹æ³•ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>RPC ä¸ºæœåŠ¡ä¹‹é—´çš„é€šä¿¡æä¾›äº†é«˜åº¦ç»“æ„åŒ–ä¸”ç´§å¯†è€¦åˆçš„æ¥å£ã€‚gRPC æ˜¯éå¸¸æµè¡Œçš„ RPC å®ç°ï¼Œå·²è¢« CNCF é‡‡ç”¨ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093222708-2021-07-01-YGvWn7.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093226688-2021-07-01-P4glNj.png" alt></p><h3><span id="æœåŠ¡ä»£ç†">æœåŠ¡ä»£ç†</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>æœåŠ¡ä»£ç†å·¥å…·ç”¨äºæ‹¦æˆªè¿›å‡ºæŸä¸ªæœåŠ¡çš„æµé‡ï¼Œå¯¹å…¶åº”ç”¨ä¸€äº›é€»è¾‘ï¼Œç„¶åè½¬å‘è¯¥æµé‡åˆ°å¦ä¸€ä¸ªæœåŠ¡ã€‚æœåŠ¡ä»£ç†çš„æœ¬è´¨æ˜¯ä¸€ç§â€œä¸­é—´äººâ€ï¼Œæ”¶é›†ç½‘ç»œæµé‡çš„ä¿¡æ¯å¹¶å¯¹å…¶åº”ç”¨è§„åˆ™ã€‚ç®€å•å¦‚å……å½“è´Ÿè½½å‡è¡¡å™¨å°†æµé‡è½¬å‘åˆ°å•ä¸ªåº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯å¤æ‚å¦‚å¹¶æ’è¿è¡Œçš„ä»£ç†ç½‘æ ¼ï¼Œç”±å•ä¸ªçš„å®¹å™¨åŒ–åº”ç”¨ç¨‹åºå¤„ç†æ‰€æœ‰ç½‘ç»œè¿æ¥ã€‚</p><p>æœåŠ¡ä»£ç†æœ¬èº«å¾ˆæœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å°†æµé‡ä»æ›´å¹¿æ³›çš„ç½‘ç»œå¼•åˆ° Kubernetes é›†ç¾¤æ—¶ã€‚æœåŠ¡ä»£ç†åŒæ—¶ä¹Ÿä¸ºå…¶ä»–ç³»ç»Ÿï¼ˆå¦‚ API ç½‘å…³æˆ–æœåŠ¡ç½‘æ ¼ï¼‰æ­å»ºäº†åŸºç¡€ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹æ–‡è®¨è®ºã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>åº”ç”¨ç¨‹åºåº”ä»¥å—æ§æ–¹å¼å‘é€å’Œæ¥æ”¶ç½‘ç»œæµé‡ã€‚ä¸ºäº†è·Ÿè¸ªæµé‡å¹¶å¯¹å…¶è¿›è¡Œè½¬æ¢æˆ–é‡å®šå‘ï¼Œæˆ‘ä»¬éœ€è¦æ”¶é›†æ•°æ®ã€‚ä¼ ç»Ÿä¸Šï¼Œå¼€å¯æ•°æ®æ”¶é›†å’Œç½‘ç»œæµé‡ç®¡ç†çš„ä»£ç åµŒå…¥åœ¨æ¯ä¸ªåº”ç”¨ç¨‹åºä¸­ã€‚æœåŠ¡ä»£ç†å¯ä»¥ä½¿æˆ‘ä»¬â€œå¤–éƒ¨åŒ–â€è¯¥åŠŸèƒ½ï¼Œä½¿å…¶æ— éœ€å†å­˜åœ¨äºåº”ç”¨ç¨‹åºä¸­ï¼Œè€Œæ˜¯åµŒå…¥åˆ°å¹³å°å±‚ï¼ˆåº”ç”¨ç¨‹åºè¿è¡Œçš„åœ°æ–¹ï¼‰ã€‚</p><p>è¿™æ˜¯éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä½¿å¼€å‘äººå‘˜å¯ä»¥å®Œå…¨ä¸“æ³¨äºç¼–å†™åº”ç”¨ç¨‹åºé€»è¾‘ï¼Œè€Œå¤„ç†æµé‡çš„é€šç”¨ä»»åŠ¡ç”±å¹³å°å›¢é˜Ÿç®¡ç†ï¼ˆè¿™æ˜¯å¹³å°å›¢é˜Ÿçš„é¦–è¦èŒè´£ï¼‰ã€‚é€šè¿‡ä»å•ä¸ªå…¬å…±ä½ç½®é›†ä¸­åˆ†é…å’Œç®¡ç†å…¨å±€æ‰€éœ€çš„æœåŠ¡åŠŸèƒ½ï¼ˆä¾‹å¦‚è·¯ç”±æˆ– TLS ç»ˆæ­¢ï¼‰ï¼ŒæœåŠ¡ä¹‹é—´çš„é€šä¿¡å°†æ›´åŠ å¯é ï¼Œå®‰å…¨å’Œé«˜æ•ˆã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>ä»£ç†å……å½“ç”¨æˆ·å’ŒæœåŠ¡ä¹‹é—´æˆ–ä¸åŒæœåŠ¡ä¹‹é—´çš„å®ˆé—¨å‘˜ã€‚é€šè¿‡è¿™ç§ç‹¬ç‰¹çš„å®šä½ï¼Œä»–ä»¬å¯ä»¥æ´æ‚‰æ­£åœ¨å‘ç”Ÿçš„é€šä¿¡ç±»å‹ã€‚æ ¹æ®æ´å¯Ÿï¼Œä»–ä»¬å¯ä»¥ç¡®å®šå°†ç‰¹å®šè¯·æ±‚å‘é€åˆ°å“ªé‡Œï¼Œç”šè‡³å®Œå…¨æ‹’ç»è¯¥è¯·æ±‚ã€‚</p><p>ä»£ç†æ”¶é›†å…³é”®æ•°æ®ï¼Œç®¡ç†è·¯ç”±ï¼ˆåœ¨æœåŠ¡ä¹‹é—´å¹³å‡åˆ†é…æµé‡æˆ–åœ¨æŸäº›æœåŠ¡å‘ç”Ÿæ•…éšœæ—¶é‡æ–°è·¯ç”±ï¼‰ï¼ŒåŠ å¯†è¿æ¥å’Œç¼“å­˜å†…å®¹ï¼ˆå‡å°‘èµ„æºæ¶ˆè€—ï¼‰ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>æœåŠ¡ä»£ç†çš„å·¥ä½œåŸç†æ˜¯æ‹¦æˆªæœåŠ¡ä¹‹é—´çš„æµé‡ï¼Œå¯¹å®ƒä»¬æ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œç„¶åå¯èƒ½ä¼šå…è®¸æµé‡ç»§ç»­å‰è¿›ã€‚é€šè¿‡å°†ä¸€ç»„é›†ä¸­æ§åˆ¶çš„åŠŸèƒ½æ”¾å…¥æ­¤ä»£ç†ï¼Œç®¡ç†å‘˜å¯ä»¥å®Œæˆå‡ ä»¶äº‹ã€‚ä»–ä»¬å¯ä»¥æ”¶é›†æœ‰å…³æœåŠ¡é—´é€šä¿¡çš„è¯¦ç»†æŒ‡æ ‡ï¼Œé˜²æ­¢æœåŠ¡è¿‡è½½ï¼Œå¹¶å°†å…¶ä»–é€šç”¨æ ‡å‡†åº”ç”¨äºæœåŠ¡ã€‚æœåŠ¡ä»£ç†æ˜¯æœåŠ¡ç½‘æ ¼ç­‰å…¶ä»–å·¥å…·çš„åŸºç¡€ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†å¯¹æ‰€æœ‰ç½‘ç»œæµé‡å®æ–½æ›´é«˜çº§åˆ«ç­–ç•¥çš„æ–¹æ³•ã€‚</p><p>è¯·æ³¨æ„ï¼ŒCNCF å°†è´Ÿè½½å‡è¡¡å™¨å’Œ ingress provider åŒ…æ‹¬åœ¨æ­¤ç±»åˆ«ä¸­ã€‚Envoyï¼ŒContour å’Œ BFE éƒ½æ˜¯ CNCF é¡¹ç›®ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093233111-2021-07-01-5S9Thb.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093237043-2021-07-01-088mPy.png" alt></p><h3><span id="api-ç½‘å…³">API ç½‘å…³</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>äººä»¬é€šå¸¸é€šè¿‡ç½‘é¡µæˆ–ï¼ˆæ¡Œé¢ï¼‰åº”ç”¨ç¨‹åºä¹‹ç±»çš„ GUIï¼ˆå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼‰ä¸è®¡ç®—æœºç¨‹åºè¿›è¡Œäº¤äº’ï¼Œè®¡ç®—æœºåˆ™é€šè¿‡ APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰ç›¸äº’è¿›è¡Œäº¤äº’ã€‚ä½†æ˜¯ï¼Œè¯·å‹¿å°† API ä¸ API ç½‘å…³æ··æ·†ã€‚</p><p>API ç½‘å…³å…è®¸ç»„ç»‡å°†å…³é”®åŠŸèƒ½ï¼ˆä¾‹å¦‚æˆæƒæˆ–é™åˆ¶åº”ç”¨ç¨‹åºä¹‹é—´çš„è¯·æ±‚æ•°é‡ï¼‰ç§»åŠ¨åˆ°é›†ä¸­ç®¡ç†çš„ä½ç½®ã€‚å®ƒè¿˜ç”¨ä½œï¼ˆé€šå¸¸æ˜¯å¤–éƒ¨çš„ï¼‰API ä½¿ç”¨è€…çš„é€šç”¨æ¥å£ã€‚</p><p>é€šè¿‡ API ç½‘å…³ï¼Œç»„ç»‡å¯ä»¥é›†ä¸­æ§åˆ¶ï¼ˆé™åˆ¶æˆ–å¯ç”¨ï¼‰åº”ç”¨ç¨‹åºä¹‹é—´çš„äº¤äº’å¹¶è·Ÿè¸ªå®ƒä»¬ï¼Œä»è€Œå®ç° æ‹’ç»è¯·æ±‚ã€èº«ä»½éªŒè¯ä¹‹ç±»çš„åŠŸèƒ½ï¼Œå¹¶é˜²æ­¢æœåŠ¡è¢«è¿‡åº¦ä½¿ç”¨ï¼ˆä¹Ÿç§°ä¸ºé€Ÿç‡é™åˆ¶ï¼‰ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>å°½ç®¡å¤§å¤šæ•°å®¹å™¨å’Œæ ¸å¿ƒåº”ç”¨ç¨‹åºéƒ½å…·æœ‰ APIï¼Œä½† API ç½‘å…³ä¸ä»…ä»…æ˜¯ APIã€‚API ç½‘å…³ç®€åŒ–äº†ç»„ç»‡ç®¡ç†è§„åˆ™å’Œå°†è§„åˆ™åº”ç”¨äºæ‰€æœ‰äº¤äº’çš„æ–¹å¼ã€‚</p><p>API ç½‘å…³å…è®¸å¼€å‘äººå‘˜ç¼–å†™å’Œç»´æŠ¤è¾ƒå°‘çš„è‡ªå®šä¹‰ä»£ç ã€‚ä»–ä»¬è¿˜ä½¿å›¢é˜Ÿèƒ½å¤ŸæŸ¥çœ‹å’Œæ§åˆ¶ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºæœ¬èº«ä¹‹é—´çš„äº¤äº’ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>API ç½‘å…³ä½äºç”¨æˆ·å’Œåº”ç”¨ç¨‹åºä¹‹é—´ã€‚å®ƒå……å½“ä¸­ä»‹ï¼Œå°†æ¥è‡ªç”¨æˆ·çš„æ¶ˆæ¯ï¼ˆè¯·æ±‚ï¼‰è½¬å‘ç»™é€‚å½“çš„æœåŠ¡ã€‚ä½†æ˜¯åœ¨äº¤å‡ºè¯·æ±‚ä¹‹å‰ï¼Œå®ƒä¼šè¯„ä¼°ç”¨æˆ·çš„è¯·æ±‚æ˜¯å¦è¢«å…è®¸ï¼Œå¹¶è¯¦ç»†è®°å½•å‘å‡ºè¯·æ±‚çš„äººä»¥åŠå‘å‡ºçš„è¯·æ±‚æ•°é‡ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼ŒAPI ç½‘å…³ä¸ºåº”ç”¨ç¨‹åºç”¨æˆ·æä¾›äº†å…·æœ‰é€šç”¨ç”¨æˆ·ç•Œé¢çš„å•å…¥å£ç‚¹ã€‚å®ƒè¿˜å¯ä»¥å°†åŸæœ¬åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°çš„ä»»åŠ¡ç§»äº¤ç»™ç½‘å…³ï¼Œä»è€Œä¸ºå¼€å‘äººå‘˜èŠ‚çœæ—¶é—´å’Œé‡‘é’±ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>åƒè¯¥å±‚ä¸­çš„è®¸å¤šç±»åˆ«ä¸€æ ·ï¼ŒAPI ç½‘å…³ä»åº”ç”¨ç¨‹åºä¸­åˆ é™¤è‡ªå®šä¹‰ä»£ç ï¼Œå¹¶å°†å…¶å¸¦å…¥ä¸­å¤®ç³»ç»Ÿã€‚API ç½‘å…³çš„å·¥ä½œåŸç†æ˜¯æ‹¦æˆªå¯¹åç«¯æœåŠ¡çš„è°ƒç”¨ï¼Œæ‰§è¡ŒæŸç§å¢å€¼æ´»åŠ¨ï¼Œä¾‹å¦‚éªŒè¯æˆæƒã€æ”¶é›†æŒ‡æ ‡æˆ–è½¬æ¢è¯·æ±‚ï¼Œç„¶åæ‰§è¡Œå®ƒè®¤ä¸ºé€‚å½“çš„æ“ä½œã€‚API ç½‘å…³æ˜¯ä¸€ç»„ä¸‹æ¸¸åº”ç”¨ç¨‹åºçš„é€šç”¨å…¥å£ç‚¹ï¼ŒåŒæ—¶ä¸ºå›¢é˜Ÿæä¾›äº†å¯ä»¥æ³¨å…¥ä¸šåŠ¡é€»è¾‘ä»¥å¤„ç†æˆæƒï¼Œé€Ÿç‡é™åˆ¶å’Œæ‹’ç»è¯·æ±‚çš„åœ°æ–¹ã€‚å®ƒä»¬ä½¿åº”ç”¨å¼€å‘è€…å¯ä»¥ä»å®¢æˆ·é‚£é‡Œæå–å¯¹ä¸‹æ¸¸ API çš„æ›´æ”¹ï¼Œå¹¶å°†æ·»åŠ æ–°å®¢æˆ·ä¹‹ç±»çš„ä»»åŠ¡äº¤ç»™ç½‘å…³ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093243827-2021-07-01-Qx1HJs.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093247594-2021-07-01-utpero.png" alt></p><h3><span id="æœåŠ¡ç½‘æ ¼">æœåŠ¡ç½‘æ ¼</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>å¦‚æœä½ å·²ç»äº†è§£äº†ä¸€äº›äº‘åŸç”Ÿç›¸å…³çš„çŸ¥è¯†ï¼Œåˆ™â€œæœåŠ¡ç½‘æ ¼â€è¿™ä¸ªæœ¯è¯­å¯èƒ½å·²ç»å¬è¯´è¿‡ã€‚æœ€è¿‘æœåŠ¡ç½‘æ ¼å¼•èµ·äº†å¾ˆå¤šå…³æ³¨ã€‚TNS çš„é•¿æœŸè´¡çŒ®è€… Janakiram MSV è¡¨ç¤ºï¼Œâ€œåœ¨ Kubernetes ä¹‹åï¼ŒæœåŠ¡ç½‘æ ¼æŠ€æœ¯å·²æˆä¸ºäº‘åŸç”ŸæŠ€æœ¯æ ˆä¸­æœ€å…³é”®çš„éƒ¨åˆ†ã€‚â€ æœåŠ¡ç½‘æ ¼ç®¡ç†æœåŠ¡ä¹‹é—´çš„æµé‡ï¼ˆå³é€šä¿¡ï¼‰ã€‚å®ƒä»¬ä½¿å¹³å°å›¢é˜Ÿèƒ½å¤Ÿæ— éœ€æ›´æ”¹ä»»ä½•ä»£ç å³å¯åœ¨é›†ç¾¤å†…è¿è¡Œçš„æ‰€æœ‰æœåŠ¡ä¹‹é—´ç»Ÿä¸€æ·»åŠ å¯é æ€§ï¼Œå¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§åŠŸèƒ½ã€‚</p><p><strong>è§£å†³ä»€ä¹ˆé—®é¢˜</strong></p><p>åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬è¦å¤„ç†å¾ˆå¤šæœåŠ¡ï¼Œè¿™äº›æœåŠ¡éƒ½éœ€è¦é€šä¿¡ã€‚è¿™æ„å‘³ç€åœ¨æœ¬æ¥ä¸å¯é ä¸”é€šå¸¸å¾ˆæ…¢çš„ç½‘ç»œä¸Šéœ€è¦æ¥å›ä¼ è¾“æ›´å¤šæµé‡ã€‚ä¸ºäº†åº”å¯¹è¿™äº›æ–°æŒ‘æˆ˜ï¼Œå·¥ç¨‹å¸ˆå¿…é¡»å®æ–½é¢å¤–çš„åŠŸèƒ½ã€‚åœ¨æœåŠ¡ç½‘æ ¼ä¹‹å‰ï¼Œå¿…é¡»å°†è¯¥åŠŸèƒ½ç¼–ç åˆ°æ¯ä¸ªå•ç‹¬çš„åº”ç”¨ç¨‹åºä¸­ã€‚è¿™äº›ä»£ç é€šå¸¸ä¼šæˆä¸ºæŠ€æœ¯å€ºï¼Œå¹¶å¯¼è‡´å¤±è´¥æˆ–æ¼æ´ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>æœåŠ¡ç½‘æ ¼åœ¨å¹³å°å±‚çš„æ‰€æœ‰æœåŠ¡ä¹‹é—´ç»Ÿä¸€å¢åŠ äº†å¯é æ€§ï¼Œå¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§ï¼Œè€Œæ— éœ€è§¦åŠåº”ç”¨ç¨‹åºä»£ç ã€‚å®ƒä»¬ä¸ä»»ä½•ç¼–ç¨‹è¯­è¨€å…¼å®¹ï¼Œä½¿å¼€å‘å›¢é˜Ÿå¯ä»¥ä¸“æ³¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘ã€‚</p><p>æ³¨ï¼šä¼ ç»Ÿä¸Šå¿…é¡»å°†è¿™äº›æœåŠ¡ç½‘æ ¼åŠŸèƒ½ç¼–ç åˆ°æ¯ä¸ªæœåŠ¡ä¸­ï¼Œå› æ­¤æ¯æ¬¡å‘å¸ƒæˆ–æ›´æ–°æ–°æœåŠ¡æ—¶ï¼Œå¼€å‘äººå‘˜éƒ½å¿…é¡»ç¡®ä¿è¿™äº›åŠŸèƒ½ä¹Ÿèƒ½ä½¿ç”¨ï¼Œä¼šå¯¼è‡´å¾ˆå¤šäººä¸ºé”™è¯¯ã€‚äº‹å®ä¸Šï¼Œå¼€å‘äººå‘˜æ›´å–œæ¬¢ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼ˆäº§ç”Ÿä»·å€¼çš„åŠŸèƒ½ï¼‰ï¼Œè€Œä¸æ˜¯å»ºç«‹å¯é æ€§ï¼Œå¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§åŠŸèƒ½ã€‚ä½†å¯¹äºå¹³å°æ‰€æœ‰è€…æ¥è¯´ï¼Œå¯é æ€§ã€å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œå¯¹äºä»–ä»¬æ‰€åšçš„ä¸€åˆ‡è‡³å…³é‡è¦ã€‚è®©å¼€å‘äººå‘˜è´Ÿè´£æ·»åŠ å¹³å°æ‰€æœ‰è€…éœ€è¦çš„åŠŸèƒ½æœ¬èº«å¾ˆéš¾ã€‚æœåŠ¡ç½‘æ ¼å’Œ API ç½‘å…³è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”±å¹³å°æ‰€æœ‰è€…å®ç°å¹¶æ™®éåº”ç”¨äºæ‰€æœ‰æœåŠ¡çš„ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>æœåŠ¡ç½‘æ ¼é€šè¿‡æœåŠ¡ä»£ç†å°†é›†ç¾¤ä¸Šè¿è¡Œçš„æ‰€æœ‰æœåŠ¡ç»‘å®šåœ¨ä¸€èµ·ï¼Œä»è€Œåˆ›å»ºäº†æœåŠ¡çš„ç½‘æ ¼ã€‚è¿™äº›æ˜¯é€šè¿‡æœåŠ¡ç½‘æ ¼æ§åˆ¶å¹³é¢è¿›è¡Œç®¡ç†å’Œæ§åˆ¶çš„ã€‚æœåŠ¡ç½‘æ ¼å…è®¸å¹³å°æ‰€æœ‰è€…åœ¨ä¸è¦æ±‚å¼€å‘äººå‘˜ç¼–å†™è‡ªå®šä¹‰é€»è¾‘çš„æƒ…å†µä¸‹æ‰§è¡Œå¸¸è§æ“ä½œæˆ–åœ¨åº”ç”¨ç¨‹åºä¸Šæ”¶é›†æ•°æ®ã€‚æœ¬è´¨ä¸Šï¼ŒæœåŠ¡ç½‘æ ¼æ˜¯é€šè¿‡å‘æœåŠ¡ä»£ç†çš„ç½‘ç»œæˆ–ç½‘æ ¼æä¾›å‘½ä»¤å’Œæ§åˆ¶ä¿¡å·æ¥ç®¡ç†æœåŠ¡é—´é€šä¿¡çš„åŸºç¡€ç»“æ„å±‚ã€‚å®ƒçš„èƒ½åŠ›åœ¨äºæ— éœ€ä¿®æ”¹åº”ç”¨ç¨‹åºå³å¯æä¾›å…³é”®ç³»ç»ŸåŠŸèƒ½ã€‚</p><p>æŸäº›æœåŠ¡ç½‘æ ¼å°†é€šç”¨æœåŠ¡ä»£ç†ï¼ˆè¯·å‚è§ä¸Šæ–‡ï¼‰ç”¨äºå…¶æ•°æ®å¹³é¢ã€‚å¦å¤–ä¸€äº›åˆ™ä½¿ç”¨ä¸“ç”¨ä»£ç†ã€‚ä¾‹å¦‚ï¼ŒLinkerd ä½¿ç”¨ Linkerd2-proxy â€œå¾®å‹ä»£ç†â€æ¥è·å¾—æ€§èƒ½å’Œèµ„æºæ¶ˆè€—æ–¹é¢çš„ä¼˜åŠ¿ã€‚è¿™äº›ä»£ç†é€šè¿‡è¾¹è½¦ï¼ˆsidecar) ç»Ÿä¸€åœ°é™„åŠ åˆ°æ¯ä¸ªæœåŠ¡ä¸Šã€‚Sidecar æ˜¯æŒ‡ä»£ç†åœ¨è‡ªå·±çš„å®¹å™¨ä¸­è¿è¡Œä½†å­˜åœ¨äºåŒä¸€ä¸ª Pod ä¸­ï¼Œå°±åƒæ‘©æ‰˜è½¦è¾¹è½¦ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ï¼Œé™„ç€åœ¨æ‘©æ‰˜è½¦ä¸Šã€‚</p><p>æœåŠ¡ç½‘æ ¼æä¾›äº†è®¸å¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ˜¾ç¤ºè¯¦ç»†æŒ‡æ ‡ï¼ŒåŠ å¯†æ‰€æœ‰æµé‡ï¼Œé™åˆ¶æœåŠ¡å¯æˆæƒçš„æ“ä½œï¼Œä¸ºå…¶ä»–å·¥å…·æä¾›é¢å¤–æ’ä»¶ç­‰ç­‰ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æœåŠ¡ç½‘æ ¼æ¥å£è§„èŒƒï¼š<a href="https://smi-spec.io/" target="_blank" rel="noopener">https://smi-spec.io/</a></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093253303-2021-07-01-2vllxs.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093258142-2021-07-01-UBbI8l.png" alt></p><p><strong>å°ç»“</strong></p><p>ç¼–æ’å’Œç®¡ç†å±‚çš„å·¥å…·æ—¨åœ¨å°†ç‹¬ç«‹çš„å®¹å™¨åŒ–åº”ç”¨ä½œä¸ºä¸€ä¸ªç»„è¿›è¡Œç®¡ç†ã€‚ç¼–æ’å’Œè°ƒåº¦å·¥å…·å¯ä»¥çœ‹ä½œæ˜¯é›†ç¾¤æ“ä½œç³»ç»Ÿï¼Œç”¨äºç®¡ç†æ•´ä¸ªé›†ç¾¤ä¸­çš„å®¹å™¨åŒ–åº”ç”¨ç¨‹åºã€‚åè°ƒå’ŒæœåŠ¡å‘ç°ï¼ŒæœåŠ¡ä»£ç†å’ŒæœåŠ¡ç½‘æ ¼ç¡®ä¿æœåŠ¡å¯ä»¥æ‰¾åˆ°å½¼æ­¤å¹¶è¿›è¡Œæœ‰æ•ˆé€šä¿¡ï¼Œå½¼æ­¤åä½œä»¥æˆä¸ºä¸€ä¸ªæµç•…çš„åº”ç”¨ç¨‹åºã€‚API ç½‘å…³æ˜¯ä¸€ä¸ªé™„åŠ å±‚ï¼Œå¯å¯¹æœåŠ¡é€šä¿¡åŠ ä»¥æ›´å¤šæ§åˆ¶ï¼Œå°¤å…¶æ˜¯å¯¹å¤–éƒ¨åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ã€‚åœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºåº”ç”¨ç¨‹åºå®šä¹‰å’Œå¼€å‘å±‚â€”â€”CNCF å…¨æ™¯å›¾çš„æœ€åä¸€å±‚ã€‚å®ƒæ¶µç›–æ•°æ®åº“ã€æ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’ã€åº”ç”¨ç¨‹åºå®šä¹‰å’Œé•œåƒæ„å»ºï¼Œä»¥åŠæŒç»­é›†æˆå’Œäº¤ä»˜ã€‚</p><h2><span id="åº”ç”¨ç¨‹åºå®šä¹‰å’Œå¼€å‘å±‚">åº”ç”¨ç¨‹åºå®šä¹‰å’Œå¼€å‘å±‚</span></h2><p>ç°åœ¨æˆ‘ä»¬æ¥åˆ°äº†äº‘åŸç”Ÿå…¨æ™¯å›¾çš„æœ€ä¸Šå±‚ã€‚åº”ç”¨ç¨‹åºå®šä¹‰å’Œå¼€å‘å±‚ï¼Œé¡¾åæ€ä¹‰ï¼Œèšç„¦åœ¨å¸®åŠ©å·¥ç¨‹å¸ˆæ„å»ºåº”ç”¨ç¨‹åºå¹¶ä½¿å…¶è¿è¡Œçš„å·¥å…·ä¸Šã€‚æœ¬æ–‡å‰é¢çš„å†…å®¹éƒ½æ˜¯å…³äºæ„å»ºå¯é å®‰å…¨çš„ç¯å¢ƒä»¥åŠæä¾›æ‰€æœ‰å¿…éœ€çš„åº”ç”¨ç¨‹åºä¾èµ–ï¼Œåº”ç”¨ç¨‹åºå®šä¹‰å’Œå¼€å‘å±‚åˆ™æ˜¯å…³äºæ„å»ºè½¯ä»¶ã€‚</p><h3><span id="æ•°æ®åº“">æ•°æ®åº“</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¯å¸®åŠ©å…¶ä»–åº”ç”¨ç¨‹åºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ã€‚</p><p>æ•°æ®åº“èƒ½ä¿éšœæ•°æ®å­˜å‚¨ï¼Œä»…æˆæƒçš„ç”¨æˆ·èƒ½è®¿é—®æ•°æ®ï¼Œå¹¶ä¸”å…è®¸ç”¨æˆ·é€šè¿‡ä¸“é—¨çš„è¯·æ±‚æ¥æ£€ç´¢æ•°æ®ã€‚å°½ç®¡æ•°æ®åº“ç±»å‹ç¹å¤šï¼Œä½†å®ƒä»¬çš„æ€»ä½“ç›®æ ‡éƒ½æ˜¯ç›¸åŒçš„ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½éœ€è¦æœ‰æ•ˆçš„æ–¹å¼æ¥å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼Œå¹¶ä¸”ä¿è¯æ•°æ®å®‰å…¨ã€‚æ•°æ®åº“ä½¿ç”¨æˆç†Ÿçš„æŠ€æœ¯ä»¥ç»“æ„åŒ–çš„æ–¹å¼è¿›è¡Œæ­¤æ“ä½œã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>æ•°æ®åº“æä¾›å­˜å‚¨å’Œæ£€ç´¢åº”ç”¨ç¨‹åºæ•°æ®çš„é€šç”¨æ¥å£ã€‚å¼€å‘äººå‘˜ä½¿ç”¨è¿™äº›æ ‡å‡†æ¥å£ï¼Œå¹¶ç”¨ä¸€ç§ç®€å•çš„æŸ¥è¯¢è¯­è¨€æ¥å­˜å‚¨ã€æŸ¥è¯¢å’Œæ£€ç´¢ä¿¡æ¯ã€‚åŒæ—¶ï¼Œæ•°æ®åº“å…è®¸ç”¨æˆ·è¿ç»­å¤‡ä»½å’Œä¿å­˜æ•°æ®ä»¥åŠåŠ å¯†å’Œç®¡ç†æ•°æ®è®¿é—®æƒé™ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>æˆ‘ä»¬å·²ç»äº†è§£äº†æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ç§ç”¨äºå­˜å‚¨å’Œæ£€ç´¢æ•°æ®çš„åº”ç”¨ç¨‹åºã€‚å®ƒä½¿ç”¨ä¸€ç§é€šç”¨çš„è¯­è¨€å’Œç•Œé¢ï¼Œå¹¶ä¸”å¯ä»¥è¢«å¤šç§è¯­è¨€å’Œæ¡†æ¶è½»æ¾ä½¿ç”¨ã€‚</p><p>å¸¸è§çš„ä¸¤ç§æ•°æ®åº“ç±»å‹ä¸ºï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰æ•°æ®åº“å’Œ NoSQL æ•°æ®åº“ã€‚åº”ç”¨ç¨‹åºè¯¥ä½¿ç”¨å“ªç§æ•°æ®åº“åº”è¯¥ç”±å…¶éœ€æ±‚æ¥é©±åŠ¨ã€‚</p><p>Kubernetes æ”¯æŒæœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºï¼Œè¿‘å¹´æ¥ä½¿ç”¨ Kubernetes çš„ä½¿ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†åˆ©ç”¨å®¹å™¨åŒ–æŠ€æœ¯çš„æ–°ä¸€ä»£æ•°æ®åº“ã€‚è¿™äº›æ–°çš„äº‘åŸç”Ÿæ•°æ®åº“æ—¨åœ¨å°† Kubernetes çš„æ‰©å±•æ€§å’Œå¯ç”¨æ€§ä¼˜åŠ¿å¼•å…¥æ•°æ®åº“ã€‚YugaByte å’Œ Couchbase ä¹‹ç±»çš„å·¥å…·æ˜¯å…¸å‹çš„äº‘åŸç”Ÿæ•°æ®åº“ï¼ŒVitess å’Œ TiKV æ˜¯è¯¥é¢†åŸŸçš„ CNCF é¡¹ç›®ã€‚</p><p>æ³¨æ„ï¼šæŸ¥çœ‹æ­¤ç±»åˆ«æ—¶ä¼šå‘ç°ä»¥ DB ç»“å°¾çš„å¤šä¸ªåç§°ï¼ˆä¾‹å¦‚ MongoDBã€CockroachDBã€FaunaDBï¼‰ï¼Œä½ å¯èƒ½ä¼šçŒœæµ‹å®ƒä»¬ä»£è¡¨æ•°æ®åº“ã€‚è¿˜æœ‰ä»¥ SQL ç»“å°¾çš„å„ç§åç§°ï¼ˆä¾‹å¦‚ MySQL æˆ– MemSQLï¼‰ã€‚ä¸€äº›æ˜¯å·²ç»é€‚åº”äº†äº‘åŸç”Ÿç¯å¢ƒçš„â€œè€æ´¾â€æ•°æ®åº“ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯å…¼å®¹ SQL çš„ NoSQL æ•°æ®åº“ï¼Œä¾‹å¦‚ YugaByte å’Œ Vitessã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093304995-2021-07-01-3QynTd.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093312213-2021-07-01-6mHNQW.png" alt></p><h3><span id="æ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’">æ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>æ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’å·¥å…·é€šè¿‡åœ¨ç³»ç»Ÿä¹‹é—´ä¼ è¾“æ¶ˆæ¯ï¼ˆå³äº‹ä»¶ï¼‰æ¥å®ç°æœåŠ¡åˆ°æœåŠ¡çš„é€šä¿¡ã€‚å•ä¸ªæœåŠ¡è¿æ¥åˆ°æ¶ˆæ¯ä¼ é€’æœåŠ¡ä»¥å‘å¸ƒäº‹ä»¶å’Œï¼ˆæˆ–ï¼‰ä»å…¶ä»–æœåŠ¡è¯»å–æ¶ˆæ¯ã€‚è¿™ç§åŠ¨æ€å˜åŒ–åˆ›é€ äº†ä¸€ä¸ªç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­å•ä¸ªåº”ç”¨è¦ä¹ˆæ˜¯å‘å¸ƒè€…ï¼Œå³å¯ç¼–å†™äº‹ä»¶ï¼›è¦ä¹ˆæ˜¯è®¢é˜…äº‹ä»¶çš„è®¢é˜…è€…ï¼Œæˆ–è€…æ›´å¯èƒ½æ˜¯ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>éšç€æœåŠ¡æ¿€å¢ï¼Œåº”ç”¨ç¨‹åºç¯å¢ƒå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ç¼–æ’ä¹Ÿæ›´å…·æŒ‘æˆ˜æ€§ã€‚æ•°æ®æµæˆ–æ¶ˆæ¯å¹³å°æä¾›äº†ä¸€ä¸ªä¸­å¿ƒä½ç½®æ¥å‘å¸ƒå’Œè¯»å–ç³»ç»Ÿä¸­å‘ç”Ÿçš„æ‰€æœ‰äº‹ä»¶ï¼Œä»è€Œä½¿åº”ç”¨ç¨‹åºå¯ä»¥ä¸€èµ·å·¥ä½œï¼Œè€Œä¸å¿…ç›¸äº’äº†è§£ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>å½“ä¸€ä¸ªæœåŠ¡æ‰§è¡Œå…¶ä»–æœåŠ¡åº”è¯¥çŸ¥é“çš„äº‹æƒ…æ—¶ï¼Œå®ƒä¼šå°†äº‹ä»¶â€œå‘å¸ƒâ€åˆ°æ•°æ®æµæˆ–æ¶ˆæ¯ä¼ é€’å·¥å…·ã€‚éœ€è¦äº†è§£è¿™äº›äº‹ä»¶ç±»å‹çš„æœåŠ¡å°†è®¢é˜…å¹¶ç›‘è§†æ•°æ®æµæˆ–æ¶ˆæ¯ä¼ é€’å·¥å…·ã€‚è¿™å°±æ˜¯â€œå‘å¸ƒ-è®¢é˜…â€çš„æœ¬è´¨ã€‚</p><p>é€šè¿‡å¼•å…¥ç®¡ç†é€šä¿¡çš„â€œä¸­é—´å±‚â€å¯ä»¥ä½¿æœåŠ¡å½¼æ­¤è§£è€¦ã€‚æœåŠ¡åªæ˜¯ç›‘è§†äº‹ä»¶ã€é‡‡å–è¡ŒåŠ¨å¹¶å‘å¸ƒæ–°äº‹ä»¶ï¼Œè¿™æ ·èƒ½å»ºç«‹é«˜åº¦åˆ†ç¦»çš„ä½“ç³»ç»“æ„ã€‚åœ¨æ­¤ä½“ç³»ç»“æ„ä¸­ï¼ŒæœåŠ¡å¯ä»¥åä½œè€Œæ— éœ€å½¼æ­¤äº†è§£ã€‚è¿™ç§è§£è€¦ä½¿å·¥ç¨‹å¸ˆèƒ½å¤Ÿæ·»åŠ æ–°åŠŸèƒ½ï¼Œè€Œæ— éœ€æ›´æ–°ä¸‹æ¸¸åº”ç”¨ç¨‹åºï¼ˆæ¶ˆè´¹è€…ï¼‰æˆ–å‘é€å¤§é‡æŸ¥è¯¢ã€‚ç³»ç»Ÿçš„è§£è€¦ç¨‹åº¦è¶Šé«˜ï¼Œæ›´æ”¹çš„çµæ´»æ€§å’Œé€‚åº”æ€§å°±è¶Šé«˜ï¼Œè€Œè¿™æ­£æ˜¯å·¥ç¨‹å¸ˆåœ¨ç³»ç»Ÿä¸­æ‰€è¿½æ±‚çš„ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>æ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’å·¥å…·æ—©åœ¨äº‘åŸç”ŸæŠ€æœ¯æˆä¸ºç°å®ä¹‹å‰å°±å·²ç»å­˜åœ¨äº†ã€‚ä¸ºäº†é›†ä¸­ç®¡ç†å…³é”®ä¸šåŠ¡äº‹ä»¶ï¼Œç»„ç»‡å»ºç«‹äº†å¤§å‹çš„ä¼ä¸šçº§æœåŠ¡æ€»çº¿ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­è°ˆè®ºæ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’æ—¶ï¼Œé€šå¸¸æ˜¯æŒ‡ NATSã€RabbitMQã€Kafka æˆ–äº‘æä¾›çš„æ¶ˆæ¯é˜Ÿåˆ—ä¹‹ç±»çš„å·¥å…·ã€‚</p><p>æ¶ˆæ¯ä¼ é€’å’Œæ•°æ®æµä¼ è¾“ç³»ç»Ÿä¸ºç¼–æ’ç³»ç»Ÿè¿›è¡Œé€šä¿¡æä¾›äº†ä¸€ä¸ªä¸­å¿ƒä½ç½®ã€‚æ¶ˆæ¯æ€»çº¿æä¾›äº†æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½å¯ä»¥è®¿é—®çš„å…¬å…±ä½ç½®ï¼Œåº”ç”¨ç¨‹åºéƒ½å¯ä»¥é€šè¿‡å‘å¸ƒæ¶ˆæ¯æ¥å‘Šè¯‰å…¶æœåŠ¡å®ƒä»¬åœ¨åšä»€ä¹ˆï¼Œæˆ–è€…é€šè¿‡è®¢é˜…æ¶ˆæ¯æ¥æŸ¥çœ‹æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚</p><p>NATS å’Œ Cloudevents é¡¹ç›®éƒ½æ˜¯è¿™ä¸ªé¢†åŸŸçš„å­µåŒ–é¡¹ç›®ï¼ŒNATS æä¾›äº†ä¸€ä¸ªæˆç†Ÿçš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿï¼Œè€Œ Cloudevents åˆ™è‡´åŠ›äºæ ‡å‡†åŒ–ç³»ç»Ÿä¹‹é—´çš„æ¶ˆæ¯æ ¼å¼ã€‚Strimziï¼ŒPravega å’Œ Tremor æ˜¯æ²™ç›’é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½é’ˆå¯¹æ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’çš„ç‹¬ç‰¹ç”¨ä¾‹è¿›è¡Œäº†é‡èº«å®šåˆ¶ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093318671-2021-07-01-gHqk5T.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093324256-2021-07-01-qymLXJ.png" alt></p><h3><span id="åº”ç”¨ç¨‹åºå®šä¹‰å’Œé•œåƒæ„å»º">åº”ç”¨ç¨‹åºå®šä¹‰å’Œé•œåƒæ„å»º</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>åº”ç”¨ç¨‹åºå®šä¹‰å’Œé•œåƒæ„å»ºæ˜¯ä¸€ä¸ªå¹¿æ³›çš„ç±»åˆ«ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªä¸»è¦çš„å­ç±»åˆ«ï¼š</p><ul><li><p>èšç„¦äºå¼€å‘çš„å·¥å…·ï¼šå¯å¸®åŠ©å°†åº”ç”¨ç¨‹åºä»£ç æ„å»ºåˆ°å®¹å™¨å’Œï¼ˆæˆ–ï¼‰Kubernetes ä¸­ï¼›</p></li><li><p>èšç„¦äºè¿ç»´çš„å·¥å…·ï¼šä»¥æ ‡å‡†åŒ–çš„æ–¹å¼éƒ¨ç½²åº”ç”¨ã€‚</p></li></ul><p>æ— è®ºæ˜¯åŠ å¿«æˆ–ç®€åŒ–å¼€å‘ç¯å¢ƒï¼Œæä¾›æ ‡å‡†åŒ–çš„æ–¹å¼æ¥éƒ¨ç½²ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºï¼Œè¿˜æ˜¯ç®€åŒ–ç¼–å†™æ–°çš„ Kubernetes æ‰©å±•çš„è¿‡ç¨‹ï¼Œæ­¤ç±»åˆ«çš„å·¥å…·éƒ½å¯ä»¥ä¼˜åŒ– Kubernetes å¼€å‘å’Œè¿ç»´äººå‘˜çš„ä½“éªŒã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>Kubernetesï¼ˆæˆ–è€…å®¹å™¨åŒ–ç¯å¢ƒï¼‰éå¸¸çµæ´»ä¸”åŠŸèƒ½å¼ºå¤§ã€‚è¿™ç§çµæ´»æ€§ä¹Ÿå¸¦æ¥äº†å¤æ‚æ€§ï¼Œä¸»è¦ä½“ç°åœ¨å¯¹äºå„ç§æ–°ç”¨ä¾‹æœ‰ä¼—å¤šé…ç½®é€‰é¡¹ã€‚å¼€å‘äººå‘˜å¿…é¡»å°†ä»£ç å®¹å™¨åŒ–ï¼Œå¹¶åœ¨ç±»ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œå¼€å‘ã€‚åœ¨å¿«é€Ÿçš„å‘å¸ƒè®¡åˆ’å‘¨æœŸä¸‹ï¼Œè¿ç»´äººå‘˜éœ€è¦ä»¥ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹æ³•æ¥å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°å®¹å™¨ç¯å¢ƒä¸­ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>è¯¥é¢†åŸŸçš„å·¥å…·æ—¨åœ¨è§£å†³å¼€å‘æˆ–è¿ç»´äººå‘˜é¢ä¸´çš„ä¸€äº›æŒ‘æˆ˜ã€‚å¯¹äºå¼€å‘è€…ï¼Œæœ‰ä¸€äº›å·¥å…·å¯ä»¥ç®€åŒ–æ‰©å±• Kubernetes çš„è¿‡ç¨‹ä»¥æ„å»ºã€éƒ¨ç½²å’Œè¿æ¥åº”ç”¨ç¨‹åºã€‚è®¸å¤šé¡¹ç›®å’Œäº§å“å¯ä»¥å­˜å‚¨æˆ–éƒ¨ç½²é¢„æ‰“åŒ…çš„åº”ç”¨ç¨‹åºï¼Œä½¿è¿ç»´äººå‘˜å¯ä»¥å¿«é€Ÿéƒ¨ç½² Kafka ä¹‹ç±»çš„æµæœåŠ¡æˆ–å®‰è£… Linkerd ä¹‹ç±»çš„æœåŠ¡ç½‘æ ¼ã€‚</p><p>å¼€å‘äº‘åŸç”Ÿåº”ç”¨ç¨‹åºå¸¦æ¥äº†ä¸€ç³»åˆ—å…¨æ–°çš„æŒ‘æˆ˜ï¼Œå› æ­¤éœ€è¦å¤§é‡å¤šæ ·åŒ–çš„å·¥å…·æ¥ç®€åŒ–åº”ç”¨ç¨‹åºçš„æ„å»ºå’Œéƒ¨ç½²ã€‚å½“ä½ éœ€è¦è§£å†³ç¯å¢ƒä¸­çš„å¼€å‘å’Œè¿ç»´é—®é¢˜æ—¶ï¼Œå¯ä»¥çœ‹çœ‹æ­¤ç±»åˆ«ä¸­çš„å·¥å…·ã€‚</p><p><strong>å¯¹åº”çš„å·¥å…·</strong></p><p>åº”ç”¨ç¨‹åºå®šä¹‰å’Œæ„å»ºå·¥å…·æ¶µç›–äº†å¹¿æ³›çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ä½¿ç”¨ KubeVirt å°† Kubernetes æ‰©å±•åˆ°è™šæ‹Ÿæœºï¼Œæˆ–ä½¿ç”¨ Telepresence ä¹‹ç±»çš„å·¥å…·å°†å¼€å‘ç¯å¢ƒç§»æ¤åˆ° Kubernetes ä¸­æ¥åŠ é€Ÿåº”ç”¨ç¨‹åºå¼€å‘ç­‰ã€‚ä»æ•´ä½“ä¸Šè®²ï¼Œè¯¥é¢†åŸŸä¸­çš„å·¥å…·å¯ä»¥è§£å†³å¼€å‘äººå‘˜é¢ä¸´çš„æ­£ç¡®ç¼–å†™ã€æ‰“åŒ…ã€æµ‹è¯•æˆ–è¿è¡Œè‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥è§£å†³è¿ç»´äººå‘˜é¢ä¸´çš„éƒ¨ç½²å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„é—®é¢˜ã€‚</p><p>Helm æ˜¯è¯¥ç±»åˆ«ä¸­å”¯ä¸€ä¸€ä¸ªæ¯•ä¸šçš„é¡¹ç›®ï¼Œä¸ºè®¸å¤šåº”ç”¨ç¨‹åºéƒ¨ç½²æ¨¡å¼å¥ å®šäº†åŸºç¡€ã€‚Helm å…è®¸ Kubernetes ç”¨æˆ·éƒ¨ç½²å’Œè‡ªå®šä¹‰ä¸€äº›æµè¡Œçš„ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºï¼ŒArtifact Hubï¼ˆCNCF æ²™ç®±é¡¹ç›®ï¼‰å’Œ Bitnami ç­‰é¡¹ç›®å·²é‡‡ç”¨ Helm æ¥æä¾›ç²¾é€‰çš„åº”ç”¨ç¨‹åºç›®å½•ã€‚Helm ä¹Ÿè¶³å¤Ÿçµæ´»ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰è‡ªå·±çš„åº”ç”¨ç¨‹åºéƒ¨ç½²ã€‚</p><p>Operator Framework æ˜¯ä¸€ä¸ªå­µåŒ–é¡¹ç›®ï¼Œæ—¨åœ¨ç®€åŒ–æ„å»ºå’Œéƒ¨ç½² Operator çš„è¿‡ç¨‹ã€‚Operator ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œä½†è¯·æ³¨æ„ï¼Œå®ƒç±»ä¼¼äº Helmï¼Œæœ‰åŠ©äºéƒ¨ç½²å’Œç®¡ç†åº”ç”¨ç¨‹åºã€‚Cloud Native Buildpacks æ˜¯å¦ä¸€ä¸ªå­µåŒ–é¡¹ç›®ï¼Œæ—¨åœ¨ç®€åŒ–å°†åº”ç”¨ç¨‹åºä»£ç æ„å»ºåˆ°å®¹å™¨ä¸­çš„è¿‡ç¨‹ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093331777-2021-07-01-pEdIp6.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093345215-2021-07-01-PskDZz.png" alt></p><h3><span id="æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜">æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>æŒç»­é›†æˆï¼ˆCIï¼‰å’ŒæŒç»­äº¤ä»˜ï¼ˆCDï¼‰å·¥å…·å¯é€šè¿‡åµŒå…¥å¼è´¨é‡ä¿è¯å®ç°å¿«é€Ÿé«˜æ•ˆçš„å¼€å‘è¿‡ç¨‹ã€‚CI é€šè¿‡ç«‹å³æ„å»ºå’Œæµ‹è¯•ä»£ç æ¥è‡ªåŠ¨åŒ–ä»£ç å˜æ›´ï¼Œç¡®ä¿ç”Ÿæˆå¯éƒ¨ç½²çš„åˆ¶å“ã€‚CD åˆ™æ›´è¿›ä¸€æ­¥ï¼Œæ¨åŠ¨è¯¥åˆ¶å“è¿›å…¥éƒ¨ç½²é˜¶æ®µã€‚</p><p>æˆç†Ÿçš„ CI/CD ç³»ç»Ÿä¼šç›‘è§†æºä»£ç ä¸­çš„å˜æ›´ï¼Œè‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•ä»£ç ï¼Œç„¶åå°†å…¶ä»å¼€å‘é˜¶æ®µè½¬ç§»åˆ°ç”Ÿäº§é˜¶æ®µã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒCI/CD ç³»ç»Ÿå¿…é¡»é€šè¿‡å„ç§æµ‹è¯•æˆ–éªŒè¯æ¥å†³å®šè¯¥è¿‡ç¨‹æ˜¯ç»§ç»­è¿˜æ˜¯å¤±è´¥ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>æ„å»ºå’Œéƒ¨ç½²åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªå›°éš¾é‡é‡ä¸”å®¹æ˜“å‡ºé”™çš„è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯å½“è¿‡ç¨‹ä¸­æ¶‰åŠå¾ˆå¤šäººä¸ºå¹²é¢„å’Œæ‰‹åŠ¨æ­¥éª¤æ—¶ã€‚å¦‚æœä¸å°†ä»£ç é›†æˆåˆ°ä»£ç åº“ä¸­ï¼Œå¼€å‘äººå‘˜åœ¨è½¯ä»¶ä¸ŠèŠ±çš„æ—¶é—´è¶Šé•¿ï¼Œè¯†åˆ«é”™è¯¯æ‰€èŠ±è´¹çš„æ—¶é—´å°±è¶Šé•¿ï¼Œé—®é¢˜ä¿®å¤ä¹Ÿå°±è¶Šå›°éš¾ã€‚é€šè¿‡å®šæœŸé›†æˆä»£ç ï¼Œå¯ä»¥åŠæ—©å‘ç°é”™è¯¯å¹¶æ›´è½»æ¾åœ°æ’é™¤æ•…éšœã€‚æ¯•ç«Ÿï¼Œåœ¨å‡ è¡Œä»£ç ä¸­æŸ¥æ‰¾é”™è¯¯æ¯”åœ¨å‡ ç™¾è¡Œä»£ç ä¸­æŸ¥æ‰¾é”™è¯¯è¦å®¹æ˜“å¾—å¤šã€‚</p><p>å°½ç®¡ Kubernetes ä¹‹ç±»çš„å·¥å…·ä¸ºè¿è¡Œå’Œç®¡ç†åº”ç”¨ç¨‹åºæä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå®ƒä»¬ä¹Ÿä¸º CI/CD å·¥å…·å¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜å’Œæœºé‡ã€‚äº‘åŸç”Ÿ CI/CD ç³»ç»Ÿèƒ½å¤Ÿåˆ©ç”¨ Kubernetes æœ¬èº«æ¥æ„å»ºã€è¿è¡Œå’Œç®¡ç† CI/CD æµç¨‹ï¼ˆé€šå¸¸ç§°ä¸ºæµæ°´çº¿ï¼‰ã€‚Kubernetes è¿˜æä¾›åº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶å†µçš„ä¿¡æ¯ï¼Œä»è€Œä½¿äº‘åŸç”Ÿ CI/CD å·¥å…·èƒ½å¤Ÿæ›´è½»æ¾åœ°ç¡®å®šç»™å®šçš„å˜æ›´æ˜¯å¦æˆåŠŸï¼Œæ˜¯å¦éœ€è¦å›æ»šã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>CI å·¥å…·å¯ç¡®ä¿å¼€å‘äººå‘˜å¼•å…¥çš„ä»»ä½•ä»£ç æ›´æ”¹æˆ–æ›´æ–°éƒ½èƒ½è‡ªåŠ¨ã€è¿ç»­åœ°ä¸å…¶ä»–æ›´æ”¹è¿›è¡Œæ„å»ºã€éªŒè¯å¹¶é›†æˆã€‚å¼€å‘äººå‘˜æ¯æ¬¡æ·»åŠ æ›´æ–°æ—¶éƒ½ä¼šè§¦å‘è‡ªåŠ¨æµ‹è¯•ï¼Œç¡®ä¿åªæœ‰è‰¯å¥½çš„ä»£ç æ‰èƒ½å°†å…¶å¯¼å…¥ç³»ç»Ÿã€‚CD æ‰©å±•äº† CIï¼Œèƒ½å°† CI æµç¨‹çš„ç»“æœæ¨é€åˆ°ç±»ç”Ÿäº§å’Œç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p><p>å‡è®¾å¼€å‘äººå‘˜æ›´æ”¹äº† Web åº”ç”¨çš„ä»£ç ã€‚CI ç³»ç»Ÿä¼šçœ‹åˆ°ä»£ç æ›´æ”¹ï¼Œç„¶åæ„å»ºå¹¶æµ‹è¯•è¯¥ Web åº”ç”¨çš„æ–°ç‰ˆæœ¬ã€‚CD ç³»ç»Ÿè·å–è¯¥æ–°ç‰ˆæœ¬ï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°å¼€å‘ã€æµ‹è¯•ã€é¢„ç”Ÿäº§ä»¥åŠæœ€ç»ˆç”Ÿäº§ç¯å¢ƒä¸­ã€‚åœ¨æµç¨‹çš„æ¯ä¸ªæ­¥éª¤ä¹‹åæµ‹è¯•å·²éƒ¨ç½²çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šæ‰§è¡Œæ­¤æ“ä½œã€‚è¿™äº›ç³»ç»Ÿä¸€èµ·æ„æˆäº†è¯¥ Web åº”ç”¨çš„ CI/CD ç®¡é“ã€‚</p><p><strong>å¯¹åº”å·¥å…·</strong></p><p>éšç€æ—¶é—´çš„æµé€ï¼Œå¸‚é¢ä¸Šå·²ç»æœ‰äº†è®¸å¤šå·¥å…·æ¥å¸®åŠ©å°†ä»£ç ä»å­˜å‚¨åº“ç§»è‡³è¿è¡Œæœ€ç»ˆåº”ç”¨ç¨‹åºçš„ç”Ÿäº§ç¯å¢ƒã€‚åƒå¤§å¤šæ•°å…¶ä»–è®¡ç®—é¢†åŸŸä¸€æ ·ï¼Œäº‘åŸç”Ÿå¼€å‘çš„åˆ°æ¥æ”¹å˜äº† CI/CD ç³»ç»Ÿã€‚ç±»ä¼¼ Jenkins ï¼ˆå¯èƒ½æ˜¯å¸‚åœºä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ CI å·¥å…·ï¼‰çš„ä¼ ç»Ÿå·¥å…·å·²ç»é€šè¿‡å®Œå–„è¿­ä»£ï¼Œä»¥æ›´å¥½åœ°é€‚åº” Kubernetes ç”Ÿæ€ç³»ç»Ÿã€‚Flux å’Œ Argo ç­‰å…¬å¸ç‡å…ˆå¼€å‘äº†ä¸€ç§ç§°ä¸º GitOps çš„æŒç»­äº¤ä»˜çš„æ–°æ–¹æ³•ã€‚</p><p>é€šå¸¸ï¼Œè¯¥é¢†åŸŸçš„é¡¹ç›®å’Œäº§å“æ˜¯ï¼š</p><ul><li><p>CI ç³»ç»Ÿï¼›</p></li><li><p>CD ç³»ç»Ÿï¼›</p></li><li><p>å¸®åŠ© CD ç³»ç»Ÿç¡®å®šä»£ç æ˜¯å¦å‡†å¤‡å¥½æŠ•å…¥ç”Ÿäº§çš„å·¥å…·ï¼›å’Œï¼ˆæˆ–ï¼‰</p></li><li><p>å‰ä¸‰è€…çš„åˆé›†ï¼ˆSpinnaker å’Œ Argo å°±æ˜¯å¦‚æ­¤ï¼‰ã€‚</p></li></ul><p>Argo å’Œ Brigade æ˜¯è¯¥é¢†åŸŸä¸­ä»…æœ‰çš„ CNCF é¡¹ç›®ï¼Œä½†æ˜¯ä½ å¯ä»¥æ‰¾åˆ°ç”±æŒç»­äº¤ä»˜åŸºé‡‘ä¼šï¼ˆContinuous Delivery Foundationï¼‰æ‰˜ç®¡çš„æ›´å¤šé¡¹ç›®ã€‚åœ¨æ­¤ç©ºé—´ä¸­å¯»æ‰¾å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ç»„ç»‡è‡ªåŠ¨åŒ–ç”Ÿäº§è·¯å¾„ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093351066-2021-07-01-XbCg1R.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093357187-2021-07-01-6b4TjE.png" alt></p><p><strong>å°ç»“</strong></p><p>åº”ç”¨ç¨‹åºå®šä¹‰å’Œå¼€å‘å±‚ä¸­çš„å·¥å…·ä½¿å·¥ç¨‹å¸ˆèƒ½å¤Ÿæ„å»ºäº‘åŸç”Ÿåº”ç”¨ç¨‹åºã€‚è¯¥å±‚çš„å·¥å…·åŒ…æ‹¬ï¼š</p><ul><li><p>æ•°æ®åº“ï¼šå­˜å‚¨å’Œæ£€ç´¢æ•°æ®ï¼›</p></li><li><p>æ•°æ®æµå’Œæ¶ˆæ¯ä¼ é€’å·¥å…·ï¼šå®ç°ç›¸äº’åˆ†ç¦»ã€ç²¾å¿ƒè®¾è®¡çš„æ¶æ„ï¼›</p></li><li><p>åº”ç”¨ç¨‹åºå®šä¹‰å’Œé•œåƒæ„å»ºå·¥å…·ï¼šåŒ…å«å¯æ”¹å–„å¼€å‘äººå‘˜å’Œæ“ä½œå‘˜ä½“éªŒçš„å¤šç§æŠ€æœ¯ï¼›</p></li><li><p>CI/CD å·¥å…·ï¼šç¡®ä¿ä»£ç å¤„äºå¯éƒ¨ç½²çŠ¶æ€ï¼Œå¹¶å¸®åŠ©å·¥ç¨‹å¸ˆåŠæ—©å‘ç°é”™è¯¯ï¼Œä»è€Œç¡®ä¿ä»£ç è´¨é‡ã€‚</p></li></ul><h2><span id="æ‰˜ç®¡-kubernetes-å’Œ-paas-è§£å†³ä»€ä¹ˆé—®é¢˜">æ‰˜ç®¡ Kubernetes å’Œ PaaS è§£å†³ä»€ä¹ˆé—®é¢˜</span></h2><p>åœ¨ä¹‹å‰çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº† CNCF äº‘åŸç”Ÿå…¨æ™¯å›¾çš„å„å±‚ï¼šä¾›åº”å±‚ã€è¿è¡Œæ—¶å±‚ã€ç¼–æ’ç®¡ç†å±‚ä»¥åŠåº”ç”¨å®šä¹‰å’Œå¼€å‘å±‚ã€‚æœ¬ç« èŠ‚æˆ‘ä»¬å°†èšç„¦åœ¨å¹³å°å±‚ã€‚</p><p>æ­£å¦‚æˆ‘ä»¬åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæ¯ä¸ªç±»åˆ«éƒ½è§£å†³äº†ç‰¹å®šçš„é—®é¢˜ã€‚ä»…ä»…å­˜å‚¨å¹¶ä¸èƒ½æä¾›ç®¡ç†åº”ç”¨ç¨‹åºæ‰€éœ€çš„å…¨éƒ¨åŠŸèƒ½ï¼Œä½ è¿˜éœ€è¦ç¼–æ’ç®¡ç†ã€å®¹å™¨è¿è¡Œæ—¶ã€æœåŠ¡å‘ç°ã€ç½‘ç»œã€API ç½‘å…³ç­‰å·¥å…·ã€‚å¹³å°å°†æ¥è‡ªä¸åŒå±‚çš„å·¥å…·æ†ç»‘åœ¨ä¸€èµ·ï¼Œä»¥è§£å†³æ›´å¤§çš„é—®é¢˜ã€‚</p><p>å¹³å°é‡Œå…¶å®æ²¡æœ‰æ–°çš„å·¥å…·ã€‚ä½ å½“ç„¶å¯ä»¥æ„å»ºè‡ªå·±çš„å¹³å°ï¼Œäº‹å®ä¸Šï¼Œè®¸å¤šç»„ç»‡éƒ½è¿™æ ·åšã€‚ä½†æ˜¯ï¼Œå¯é ã€å®‰å…¨åœ°é…ç½®å’Œå¾®è°ƒä¸åŒçš„æ¨¡å—ï¼ŒåŒæ—¶ç¡®ä¿å§‹ç»ˆæ›´æ–°æ‰€æœ‰æŠ€æœ¯å¹¶ä¿®è¡¥æ¼æ´ï¼Œè¿™ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ã€‚ä½ éœ€è¦ä¸€æ”¯ä¸“é—¨çš„å›¢é˜Ÿæ¥æ„å»ºå’Œç»´æŠ¤å®ƒã€‚å¦‚æœæ²¡æœ‰æ‰€éœ€çš„ä¸“ä¸šçŸ¥è¯†ï¼Œé‚£ä¹ˆä½¿ç”¨å¹³å°å¯èƒ½ä¼šæ›´å¥½ã€‚å¯¹äºæŸäº›ç»„ç»‡ï¼Œå°¤å…¶æ˜¯å·¥ç¨‹å›¢é˜Ÿè§„æ¨¡è¾ƒå°çš„ç»„ç»‡ï¼Œå¹³å°æ˜¯é‡‡ç”¨äº‘åŸç”ŸæŠ€æœ¯çš„å”¯ä¸€æ–¹æ³•ã€‚</p><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œæ‰€æœ‰çš„å¹³å°éƒ½æ˜¯å›´ç»• Kubernetes æ¥æ¼”åŒ–çš„ï¼Œå› ä¸º Kubernetes æ˜¯äº‘åŸç”ŸæŠ€æœ¯æ ˆçš„æ ¸å¿ƒã€‚</p><h3><span id="kubernetes-å‘è¡Œç‰ˆ">Kubernetes å‘è¡Œç‰ˆ</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>å‘è¡Œç‰ˆæ˜¯æŒ‡ä¾›åº”å•†ä»¥ Kubernetes ä¸ºæ ¸å¿ƒï¼ˆé‡‡ç”¨æœªç»ä¿®æ”¹çš„å¼€æºä»£ç ï¼Œå°½ç®¡æœ‰äº›äººå¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ï¼‰ï¼Œå¹¶å°†å…¶æ‰“åŒ…ä»¥è¿›è¡Œé‡æ–°å‘è¡Œã€‚é€šå¸¸è¿™ä¸ªè¿‡ç¨‹éœ€è¦æŸ¥æ‰¾å’ŒéªŒè¯ Kubernetes è½¯ä»¶ï¼Œå¹¶æä¾›é›†ç¾¤å®‰è£…å’Œå‡çº§çš„æœºåˆ¶ã€‚è®¸å¤š Kubernetes å‘è¡Œç‰ˆéƒ½åŒ…å«å…¶ä»–é—­æºæˆ–å¼€æºçš„åº”ç”¨ç¨‹åºã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>å¼€æº Kubernetes å¹¶æœªæŒ‡å®šç‰¹å®šçš„å®‰è£…å·¥å…·ï¼Œè€Œæ˜¯å°†è®¸å¤šè®¾ç½®é…ç½®é€‰é¡¹æä¾›ç»™ç”¨æˆ·ã€‚æ­¤å¤–ï¼Œæœ‰é™çš„ç¤¾åŒºèµ„æºï¼ˆåŒ…æ‹¬ç¤¾åŒºè®ºå›ã€StackOverflowã€Slack æˆ– Discord ç­‰ï¼‰å·²ç»ä¸èƒ½è§£å†³æ‰€æœ‰çš„é—®é¢˜ã€‚</p><p>éšç€ Kubernetes çš„æ™®åŠï¼ŒKubernetes çš„ä½¿ç”¨å˜å¾—è¶Šæ¥è¶Šå®¹æ˜“ï¼Œä½†æ˜¯æŸ¥æ‰¾å’Œä½¿ç”¨å¼€æºå®‰è£…ç¨‹åºå¯èƒ½ä¼šé¢ä¸´æŒ‘æˆ˜ã€‚ç”¨æˆ·éœ€è¦äº†è§£ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬ï¼Œåœ¨ä½•å¤„è·å–ï¼Œä»¥åŠç‰¹å®šç»„ä»¶æ˜¯å¦èƒ½å…¼å®¹ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦å†³å®šé›†ç¾¤ä¸Šéƒ¨ç½²ä»€ä¹ˆè½¯ä»¶ï¼Œè¦ä½¿ç”¨å“ªäº›è®¾ç½®æ¥ç¡®ä¿å¹³å°çš„å®‰å…¨æ€§ã€ç¨³å®šæ€§å’Œé«˜æ€§èƒ½ã€‚æ‰€æœ‰è¿™äº›éƒ½éœ€è¦ä¸°å¯Œçš„ Kubernetes ä¸“ä¸šçŸ¥è¯†ï¼Œè€Œè¿™äº›çŸ¥è¯†å¯èƒ½å¹¶ä¸å®¹æ˜“è·å¾—ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>Kubernetes å‘è¡Œç‰ˆæä¾›äº†ä¸€ç§å®‰è£… Kubernetes çš„å¯é æ–¹å¼ï¼Œå¹¶æä¾›äº†åˆç†çš„é»˜è®¤å€¼ä»¥åˆ›å»ºæ›´å¥½ã€æ›´å®‰å…¨çš„æ“ä½œç¯å¢ƒã€‚Kubernetes å‘è¡Œç‰ˆä¸ºä¾›åº”å•†å’Œé¡¹ç›®æä¾›äº†æ‰€éœ€çš„æŒæ§åº¦å’Œå¯é¢„æµ‹æ€§ï¼Œä»¥å¸®åŠ©ä»–ä»¬æ”¯æŒå®¢æˆ·éƒ¨ç½²ã€ç»´æŠ¤å’Œå‡çº§ Kubernetes é›†ç¾¤ã€‚</p><p>è¿™ç§å¯é¢„æµ‹æ€§ä½¿å‘è¡Œç‰ˆæä¾›å•†åœ¨å®¢æˆ·é‡åˆ°ç”Ÿäº§é—®é¢˜æ—¶å¯ä¸ºå…¶æä¾›æ”¯æŒã€‚å‘è¡Œç‰ˆå¸¸å¸¸æä¾›ç»è¿‡æµ‹è¯•å’Œå—æ”¯æŒçš„å‡çº§è·¯å¾„ï¼Œä½¿ç”¨æˆ·çš„ Kubernetes é›†ç¾¤ä¿æŒæœ€æ–°çš„ç‰ˆæœ¬ã€‚æ­¤å¤–ï¼Œå‘è¡Œç‰ˆé€šå¸¸æä¾›å¯åœ¨ Kubernetes ä¸Šéƒ¨ç½²çš„è½¯ä»¶ï¼Œä»è€Œä½¿å…¶æ›´æ˜“äºä½¿ç”¨ã€‚</p><p><strong>å¯¹åº”çš„å·¥å…·</strong></p><p>å¦‚æœä½ å·²ç»å®‰è£…äº† Kubernetesï¼Œé‚£ä½ å¯èƒ½å·²ç»ä½¿ç”¨äº† kubeadm ä¹‹ç±»çš„å·¥å…·æ¥å¯åŠ¨å’Œè¿è¡Œé›†ç¾¤ã€‚å³ä¾¿å¦‚æ­¤ï¼Œä½ å¯èƒ½è¿˜éœ€è¦ CNIï¼ˆå®¹å™¨ç½‘ç»œæ¥å£ï¼‰æ¥å®‰è£…å’Œé…ç½®å®ƒã€‚ç„¶åï¼Œä½ å¯èƒ½å·²ç»æ·»åŠ äº†ä¸€äº›å­˜å‚¨ç±»ï¼Œä¸€ä¸ªå¤„ç†æ—¥å¿—æ¶ˆæ¯çš„å·¥å…·ï¼Œå¯èƒ½è¿˜éœ€è¦ä¸ª ingress controllerï¼Œä»¥åŠæ›´å¤šå…¶ä»–çš„å·¥å…·ã€‚Kubernetes å‘è¡Œç‰ˆå°†è‡ªåŠ¨æ‰§è¡Œéƒ¨åˆ†æˆ–å…¨éƒ¨è®¾ç½®ã€‚å®ƒè¿˜å°†æ ¹æ®è‡ªå·±å¯¹æœ€ä½³å®è·µæˆ–æ™ºèƒ½é»˜è®¤å€¼çš„ç†è§£æä¾›é…ç½®è®¾ç½®ã€‚æ­¤å¤–ï¼Œå¤§å¤šæ•°å‘è¡Œç‰ˆéƒ½å°†æ†ç»‘ä¸€äº›ç»è¿‡æµ‹è¯•çš„æ‰©å±•æˆ–é™„ä»¶ï¼Œä»¥ç¡®ä¿ç”¨æˆ·å¯ä»¥å°½å¿«ä½¿ç”¨æ–°é›†ç¾¤ã€‚</p><p>æˆ‘ä»¬ä»¥ Kublr ä¸ºä¾‹ã€‚å®ƒä»¥ Kubernetes ä¸ºæ ¸å¿ƒï¼Œä¸»è¦æ†ç»‘äº†æ¥è‡ªä¾›åº”å±‚ã€è¿è¡Œæ—¶å±‚ã€ç¼–æ’ç®¡ç†å±‚çš„å·¥å…·ã€‚æ‰€æœ‰æ¨¡å—éƒ½é¢„å…ˆé…ç½®äº†ä¸€äº›é€‰é¡¹å¹¶ä¸”å¼€ç®±å³ç”¨ã€‚ä¸åŒçš„å¹³å°èšç„¦ä¸åŒçš„åŠŸèƒ½ã€‚å°± Kublr è€Œè¨€ï¼Œé‡ç‚¹æ˜¯åœ¨è¿ç»´æ–¹é¢ï¼Œè€Œå…¶ä»–å¹³å°åˆ™å¯èƒ½èšç„¦åœ¨å¼€å‘å·¥å…·ä¸Šã€‚</p><p>æ­¤ç±»åˆ«ä¸­æœ‰å¾ˆå¤šå·¥å…·é€‰é¡¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¼ä¸šå¯ä»¥é€‰æ‹©å’Œä¾›åº”å•†è¾¾æˆæŠ€æœ¯åˆä½œï¼Œæ¯”å¦‚å›½å¤–çš„ Canonicalã€VMwareã€Mirantisã€SUSEï¼Œå›½å†…çš„ç½‘æ˜“ã€ç«å±±å¼•æ“å’Œäº¬ä¸œï¼Œå®ƒä»¬éƒ½å¯ä»¥æä¾›å‡ºè‰²çš„å¼€æºå’Œå•†ä¸šå·¥å…·ï¼Œå»ºè®®åœ¨è¯„ä¼°å‘è¡Œç‰ˆæ—¶ä»”ç»†è€ƒè™‘è‡ªå·±çš„éœ€æ±‚ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093404009-2021-07-01-fNGqFM.png" alt></p><h3><span id="æ‰˜ç®¡-kubernetes">æ‰˜ç®¡ Kubernetes</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>æ‰˜ç®¡ Kubernetes æ˜¯ç”± Amazon Web Servicesï¼ˆAWSï¼‰ã€DigitalOceanã€Azure æˆ– Google ç­‰åŸºç¡€è®¾æ–½æä¾›å•†ï¼ˆäº‘å‚å•†ï¼‰æä¾›çš„æœåŠ¡ï¼Œå…è®¸å®¢æˆ·æŒ‰éœ€å¯åŠ¨ Kubernetes é›†ç¾¤ã€‚äº‘å‚å•†è´Ÿè´£ç®¡ç† Kubernetes é›†ç¾¤çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸ç§°ä¸ºæ§åˆ¶å¹³é¢ã€‚æ‰˜ç®¡ Kubernetes æœåŠ¡ä¸å‘è¡Œç‰ˆç›¸ä¼¼ï¼Œä½†ç”±äº‘å‚å•†åœ¨å…¶åŸºç¡€æ¶æ„ä¸Šè¿›è¡Œç®¡ç†ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>æ‰˜ç®¡ Kubernetes ä½¿å›¢é˜Ÿåªéœ€åœ¨äº‘å‚å•†å¼€è®¾ä¸€ä¸ªè´¦æˆ·å³å¯å¼€å§‹ä½¿ç”¨ Kubernetesã€‚å®ƒè§£å†³äº† Kubernetes å…¥é—¨äº”ä¸ªè¿‡ç¨‹ä¸­çš„â€œäº” Wâ€é—®é¢˜ï¼š</p><ul><li><p>Whoï¼šäº‘å‚å•†ï¼›</p></li><li><p>Whatï¼šä»–ä»¬æ‰˜ç®¡çš„ Kubernetes äº§å“ï¼›</p></li><li><p>Whenï¼šç°åœ¨ï¼›</p></li><li><p>Whereï¼šäº‘å‚å•†çš„åŸºç¡€æ¶æ„ä¸Šï¼›</p></li><li><p>Whyï¼šç”±ä½ å†³å®šã€‚</p></li></ul><p><strong>å¦‚ä½•è§£å†³</strong></p><p>ç”±äº Kuberentes æ‰˜ç®¡æœåŠ¡æä¾›å•†è´Ÿè´£ç®¡ç†æ‰€æœ‰ç»†èŠ‚ï¼Œå› æ­¤æ‰˜ç®¡çš„ Kubernetes æœåŠ¡æ˜¯å¼€å§‹äº‘åŸç”Ÿä¹‹è·¯çš„æœ€ç®€å•æ–¹æ³•ã€‚ç”¨æˆ·æ‰€éœ€è¦åšçš„å°±æ˜¯å¼€å‘è‡ªå·±çš„åº”ç”¨ç¨‹åºå¹¶å°†å…¶éƒ¨ç½²åœ¨æ‰˜ç®¡çš„ Kubernetes æœåŠ¡ä¸Šï¼Œè¿™éå¸¸æ–¹ä¾¿ã€‚æ‰˜ç®¡äº§å“å…è®¸ç”¨æˆ·å¯åŠ¨ Kubernetes é›†ç¾¤å¹¶ç«‹å³å¼€å§‹ï¼ŒåŒæ—¶å¯¹é›†ç¾¤å¯ç”¨æ€§æ‰¿æ‹…ä¸€äº›è´£ä»»ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æœåŠ¡çš„é¢å¤–ä¾¿åˆ©æ€§ä¼šé€ æˆçµæ´»æ€§çš„é™ä½ï¼šæ‰˜ç®¡çš„ Kubernetes æœåŠ¡å’Œäº‘å‚å•†ç»‘å®šï¼Œä¸”ç”¨æˆ·æ— æ³•è®¿é—® Kubernetes æ§åˆ¶å¹³é¢ï¼Œå› æ­¤æŸäº›é…ç½®é€‰é¡¹ä¼šå—åˆ°é™åˆ¶ã€‚</p><p>AWS çš„ EKS ç•¥æœ‰ä¾‹å¤–ï¼Œå› ä¸ºå®ƒè¿˜è¦æ±‚ç”¨æˆ·é‡‡å–ä¸€äº›å…¶ä»–æ­¥éª¤æ¥å‡†å¤‡é›†ç¾¤ã€‚</p><p><strong>å¯¹åº”çš„å·¥å…·</strong></p><p>æ‰˜ç®¡ Kubernetes æ˜¯ç”±ä¾›åº”å•†ï¼ˆé€šå¸¸æ˜¯åŸºç¡€æ¶æ„æ‰˜ç®¡æä¾›å•†ï¼‰æä¾›çš„æŒ‰éœ€ä½¿ç”¨çš„ Kubernetes é›†ç¾¤ï¼Œä¾›åº”å•†è´Ÿè´£é…ç½®ç¾¤é›†å’Œç®¡ç† Kubernetes æ§åˆ¶å¹³é¢ã€‚å†æ¬¡è¯´æ˜ï¼Œå€¼å¾—æ³¨æ„çš„ä¾‹å¤–æ˜¯ EKSï¼Œå…¶ä¸Šçš„å•ä¸ªèŠ‚ç‚¹é…ç½®ç”±å®¢æˆ·ç«¯å†³å®šã€‚</p><p>æ‰˜ç®¡ Kubernetes æœåŠ¡ä½¿ç»„ç»‡å¯ä»¥å°†åŸºç¡€æ¶æ„ç»„ä»¶ç®¡ç†å¤–åŒ…å‡ºå»ï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿé…ç½®æ–°é›†ç¾¤å¹¶é™ä½è¿è¥é£é™©ã€‚ä¸»è¦çš„æƒè¡¡å–èˆåœ¨äºå¯èƒ½éœ€è¦ä¸ºæ§åˆ¶å¹³é¢ç®¡ç†ä»˜è´¹ï¼Œå¹¶ä¸”ç”¨æˆ·çš„ç®¡ç†æƒé™æœ‰é™ã€‚ä¸è‡ªå·±æ­å»º Kubernetes ç¾¤é›†ç›¸æ¯”ï¼Œæ‰˜ç®¡æœåŠ¡åœ¨é…ç½® Kubernetes ç¾¤é›†æ–¹é¢æœ‰æ›´ä¸¥æ ¼çš„é™åˆ¶ã€‚</p><p>åœ¨è¿™ä¸ªé¢†åŸŸä¸­æœ‰è®¸å¤šä¾›åº”å•†å’Œé¡¹ç›®ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œå°šæ—  CNCF é¡¹ç›®ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093412427-2021-07-01-87PjDr.png" alt></p><h3><span id="kubernetes-å®‰è£…ç¨‹åº">Kubernetes å®‰è£…ç¨‹åº</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>Kubernetes å®‰è£…ç¨‹åºå¯å¸®åŠ©ä½ åœ¨æœºå™¨ä¸Šå®‰è£… Kubernetesï¼Œå®ƒä»¬å¯è‡ªåŠ¨åŒ– Kubernetes çš„å®‰è£…å’Œé…ç½®è¿‡ç¨‹ï¼Œç”šè‡³å¯ä»¥å¸®åŠ©å‡çº§ã€‚Kubernetes å®‰è£…ç¨‹åºé€šå¸¸ä¸ Kubernetes å‘è¡Œç‰ˆæˆ–æ‰˜ç®¡ Kubernetes äº§å“ç»“åˆä½¿ç”¨æˆ–ç”±å®ƒä»¬ä½¿ç”¨ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>ä¸ Kubernetes å‘è¡Œç‰ˆç›¸ä¼¼ï¼ŒKubernetes å®‰è£…ç¨‹åºå¯ç®€åŒ– Kubernetes çš„ä¸Šæ‰‹è¿‡ç¨‹ã€‚å¼€æºçš„ Kubernetes ä¾èµ–äº kubeadm ä¹‹ç±»çš„å®‰è£…ç¨‹åºã€‚æˆªè‡³æœ¬æ–‡æ’°å†™ä¹‹æ—¶ï¼Œkubeadm å¯ç”¨äºå¯åŠ¨å’Œè¿è¡Œ Kubernetes é›†ç¾¤ï¼Œæ˜¯ CKAï¼ˆKubernetes ç®¡ç†å‘˜è®¤è¯ï¼‰ æµ‹è¯•çš„ä¸€éƒ¨åˆ†ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>Kubernetes å®‰è£…ç¨‹åºç®€åŒ–äº† Kubernetes çš„å®‰è£…è¿‡ç¨‹ã€‚åƒå‘è¡Œç‰ˆä¸€æ ·ï¼Œå®ƒä»¬ä¸ºæºä»£ç å’Œç‰ˆæœ¬æä¾›ç»è¿‡å®¡æ ¸çš„æºã€‚å®ƒä»¬è¿˜ç»å¸¸è‡ªå¸¦ Kubernetes ç¯å¢ƒé…ç½®ã€‚åƒ kind ï¼ˆDocker ä¸­çš„ Kubernetesï¼‰è¿™æ ·çš„ Kubernetes å®‰è£…ç¨‹åºå…è®¸é€šè¿‡å•ä¸ªå‘½ä»¤è·å¾— Kubernetes é›†ç¾¤ã€‚</p><p><strong>å¯¹åº”çš„å·¥å…·</strong></p><p>æ— è®ºæ˜¯åœ¨ Docker ä¸Šæœ¬åœ°å®‰è£… Kubernetesï¼Œå¯åŠ¨å’Œé…ç½®æ–°çš„è™šæ‹Ÿæœºï¼Œè¿˜æ˜¯å‡†å¤‡æ–°çš„ç‰©ç†æœåŠ¡å™¨ï¼Œéƒ½éœ€è¦ä¸€ä¸ªå·¥å…·æ¥å¤„ç†å„ç§ Kubernetes ç»„ä»¶çš„å‡†å¤‡å·¥ä½œã€‚</p><p>Kubernetes å®‰è£…ç¨‹åºå¯ç®€åŒ–è¯¥è¿‡ç¨‹ã€‚æœ‰äº›å¤„ç†èŠ‚ç‚¹å¯åŠ¨ï¼Œè¿˜æœ‰ä¸€äº›ä»…é…ç½®å·²ä¾›åº”çš„èŠ‚ç‚¹ã€‚å®ƒä»¬éƒ½æä¾›ä¸åŒç¨‹åº¦çš„è‡ªåŠ¨åŒ–ï¼Œå¹¶ä¸”é€‚åˆä¸åŒçš„ç”¨ä¾‹ã€‚å¼€å§‹ä½¿ç”¨ Kubernetes å®‰è£…ç¨‹åºæ—¶ï¼Œåº”å…ˆäº†è§£è‡ªå·±çš„éœ€æ±‚ï¼Œç„¶åé€‰æ‹©å¯ä»¥æ»¡è¶³è¿™äº›éœ€æ±‚çš„å®‰è£…ç¨‹åºã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒkubeadmÂ æ˜¯ Kubernetes ç”Ÿæ€ç³»ç»Ÿä¸­è‡³å…³é‡è¦çš„å·¥å…·ï¼Œå·²åŒ…å«åœ¨ CKA æµ‹è¯•ä¸­ã€‚Minikubeã€kindã€kopsÂ å’ŒÂ kubesprayÂ éƒ½æ˜¯ CNCF ä¸­çš„ Kubernetes å®‰è£…ç¨‹åºé¡¹ç›®ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093420040-2021-07-01-E21xtN.png" alt></p><h3><span id="paaså®¹å™¨æœåŠ¡">PaaS/å®¹å™¨æœåŠ¡</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>PaaSï¼ˆå¹³å°å³æœåŠ¡ï¼‰æ˜¯ä¸€ç§ç¯å¢ƒï¼Œå…è®¸ç”¨æˆ·è¿è¡Œåº”ç”¨ç¨‹åºè€Œä¸å¿…äº†è§£åº•å±‚è®¡ç®—èµ„æºã€‚æ­¤ç±»åˆ«ä¸­çš„ PaaS å’Œå®¹å™¨æœåŠ¡æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå¯ä¸ºå¼€å‘äººå‘˜æ‰˜ç®¡ PaaS æˆ–æ‰˜ç®¡ä»–ä»¬å¯ä»¥ä½¿ç”¨çš„æœåŠ¡ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†æœ‰å…³â€œäº‘åŸç”Ÿâ€çš„å·¥å…·å’ŒæŠ€æœ¯ã€‚PaaS è¿æ¥äº†æ­¤é¢†åŸŸä¸­çš„è®¸å¤šæŠ€æœ¯ï¼Œå¯ä¸ºå¼€å‘äººå‘˜æä¾›ç›´æ¥ä»·å€¼ã€‚å®ƒå›ç­”äº†ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><p>æˆ‘å¦‚ä½•åœ¨å„ç§ç¯å¢ƒä¸­è¿è¡Œåº”ç”¨ç¨‹åºï¼Ÿ</p></li><li><p>ä¸€æ—¦åº”ç”¨ç¨‹åºè¿è¡Œèµ·æ¥ï¼Œæˆ‘çš„å›¢é˜Ÿå’Œç”¨æˆ·å°†å¦‚ä½•ä¸å®ƒä»¬äº¤äº’ï¼Ÿ</p></li></ul><p><strong>å¦‚ä½•è§£å†³</strong></p><p>PaaS ä¸ºç»„åˆè¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„å¼€æºå’Œé—­æºå·¥å…·æä¾›äº†é€‰æ‹©ã€‚è®¸å¤š PaaS äº§å“åŒ…å«å¤„ç† PaaS å®‰è£…å’Œå‡çº§çš„å·¥å…·ï¼Œä»¥åŠå°†åº”ç”¨ç¨‹åºä»£ç è½¬æ¢ä¸ºæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„æœºåˆ¶ã€‚æ­¤å¤–ï¼ŒPaaS å¯ä»¥å¤„ç†åº”ç”¨ç¨‹åºå®ä¾‹çš„è¿è¡Œæ—¶éœ€æ±‚ï¼ŒåŒ…æ‹¬æŒ‰éœ€æ‰©å±•å•ä¸ªç»„ä»¶ä»¥åŠå¯è§†åŒ–å•ä¸ªåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ—¥å¿—æ¶ˆæ¯ã€‚</p><p><strong>å¯¹åº”çš„å·¥å…·</strong></p><p>ç»„ç»‡æ­£åœ¨é‡‡ç”¨äº‘åŸç”ŸæŠ€æœ¯æ¥å®ç°ç‰¹å®šçš„ä¸šåŠ¡æˆ–ç›®æ ‡ã€‚ä¸æ„å»ºè‡ªå®šä¹‰åº”ç”¨ç¨‹åºå¹³å°ç›¸æ¯”ï¼ŒPaaS å¯å¿«é€Ÿè®©ç»„ç»‡å®ç°ä»·å€¼ã€‚HerokuÂ æˆ–Â Cloud Foundry Application RuntimeÂ ä¹‹ç±»çš„å·¥å…·å¯å¸®åŠ©ç»„ç»‡å¿«é€Ÿå¯åŠ¨å¹¶è¿è¡Œæ–°çš„åº”ç”¨ç¨‹åºï¼Œå®ƒä»¬å¯æä¾›è¿è¡Œäº‘åŸç”Ÿåº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥å…·ã€‚ä»»ä½• PaaS éƒ½æœ‰è‡ªèº«çš„é™åˆ¶ã€‚å¤§å¤šæ•°åªæ”¯æŒä¸€ç§è¯­è¨€æˆ–ä¸€éƒ¨åˆ†åº”ç”¨ç¨‹åºç±»å‹ï¼Œå…¶è‡ªå¸¦çš„ä¸€äº›å·¥å…·é€‰é¡¹å¯èƒ½å¹¶ä¸é€‚åˆä½ çš„éœ€æ±‚ã€‚æ— çŠ¶æ€åº”ç”¨ç¨‹åºé€šå¸¸åœ¨ PaaS ä¸­è¡¨ç°å‡ºè‰²ï¼Œè€Œæ•°æ®åº“ç­‰æœ‰çŠ¶æ€åº”ç”¨ç¨‹åºé€šå¸¸ä¸å¤ªé€‚åˆ PaaSã€‚ç›®å‰åœ¨è¿™ä¸ªé¢†åŸŸæ²¡æœ‰ CNCF é¡¹ç›®ï¼Œä½†æ˜¯å¤§å¤šæ•°äº§å“éƒ½æ˜¯å¼€æºçš„ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093426736-2021-07-01-ggxJ1v.png" alt></p><p><strong>å°ç»“</strong></p><p>å¦‚æ–‡ä¸­æ‰€ä»‹ç»ï¼Œæœ‰å¤šç§å·¥å…·å¯å¸®åŠ©ç®€åŒ– Kubernetes çš„é‡‡ç”¨ã€‚Kubernetes å‘è¡Œç‰ˆã€æ‰˜ç®¡ Kubernetes æœåŠ¡ã€Kubernetes å®‰è£…ç¨‹åºä»¥åŠ PaaS éƒ½æ‰¿æ‹…äº†ä¸€äº›å®‰è£…å’Œé…ç½®çš„å·¥ä½œï¼Œå¯è¿›è¡Œé¢„æ‰“åŒ…ã€‚æ¯ä¸ªè§£å†³æ–¹æ¡ˆéƒ½æœ‰å…¶è‡ªå·±çš„ç‰¹ç‚¹ã€‚</p><p>åœ¨é‡‡ç”¨ä¸Šè¿°ä»»ä½•ä¸€ç§æ–¹æ³•ä¹‹å‰ï¼Œéœ€è¦è¿›è¡Œä¸€äº›ç ”ç©¶ï¼Œä»¥ç¡®å®šé€‚åˆè‡ªå·±éœ€æ±‚çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚ä½ å¯èƒ½éœ€è¦è€ƒè™‘ï¼š</p><ul><li><p>æˆ‘ä¼šé‡åˆ°ä¸€äº›éœ€è¦æŒæ§æ§åˆ¶å¹³é¢çš„åœºæ™¯å—ï¼Ÿå¦‚æœæœ‰ï¼Œæ‰˜ç®¡è§£å†³æ–¹æ¡ˆå¯èƒ½ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p></li><li><p>æˆ‘æœ‰æ²¡æœ‰ä¸€ä¸ªå°å‹å›¢é˜Ÿæ¥ç®¡ç†â€œæ ‡å‡†â€å·¥ä½œè´Ÿè½½ï¼Œå¹¶éœ€è¦åˆ†æµå°½å¯èƒ½å¤šçš„æ“ä½œä»»åŠ¡ï¼Ÿå¦‚æœæœ‰ï¼Œæ‰˜ç®¡è§£å†³æ–¹æ¡ˆå¯èƒ½éå¸¸åˆé€‚ä½ ã€‚</p></li><li><p>ä¾¿æºæ€§å¯¹æˆ‘æ¥è¯´é‡è¦å—ï¼Ÿ</p></li><li><p>ç”Ÿäº§å°±ç»ªæƒ…å†µå¦‚ä½•ï¼Ÿ</p></li></ul><p>è¿˜æœ‰æ›´å¤šé—®é¢˜éœ€è¦è€ƒè™‘ã€‚æ²¡æœ‰ä¸€ä¸ªâ€œæœ€ä½³å·¥å…·â€ï¼Œä½†æ˜¯å¯¹äºä½ çš„ç‰¹å®šéœ€æ±‚ï¼Œè‚¯å®šå¯ä»¥é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆå·¥å…·ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ å°†æœç´¢èŒƒå›´ç¼©å°åˆ°æ­£ç¡®çš„åŒºåŸŸã€‚</p><h2><span id="å¯è§‚å¯Ÿæ€§æ˜¯ä»€ä¹ˆæœ‰å“ªäº›ç›¸å…³å·¥å…·">å¯è§‚å¯Ÿæ€§æ˜¯ä»€ä¹ˆï¼Œæœ‰å“ªäº›ç›¸å…³å·¥å…·</span></h2><p>ç»ˆäºæˆ‘ä»¬æ¥åˆ°äº†äº‘åŸç”Ÿå…¨æ™¯å›¾è¯¦è§£çš„æœ€åä¸€ç« èŠ‚ã€‚æœ¬ç« èŠ‚å°†å‘å¤§å®¶ä»‹ç»äº‘åŸç”Ÿå…¨æ™¯å›¾ä¸­çš„å¯è§‚å¯Ÿæ€§å’Œåˆ†æè¿™ä¸€â€œåˆ—â€ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093432994-2021-07-01-uGBbn0.png" alt></p><p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸‹å¯è§‚å¯Ÿæ€§å’Œåˆ†æï¼ˆObservability &amp; analysis)ã€‚å¯è§‚å¯Ÿæ€§æ˜¯ä¸€ç§ç³»ç»Ÿç‰¹æ€§ï¼Œæè¿°äº†é€šè¿‡å¤–éƒ¨è¾“å‡ºå¯ä»¥ç†è§£ç³»ç»Ÿçš„ç¨‹åº¦ã€‚é€šè¿‡è¡¡é‡Â CPU æ—¶é—´ã€å†…å­˜ã€ç£ç›˜ç©ºé—´ã€å»¶è¿Ÿã€errorÂ ç­‰æŒ‡æ ‡ï¼Œå¯ä»¥æˆ–å¤šæˆ–å°‘åœ°è§‚å¯Ÿåˆ°è®¡ç®—æœºç³»ç»Ÿçš„çŠ¶æ€ã€‚åˆ†æåˆ™æ˜¯å°è¯•ç†è§£è¿™äº›å¯ç”¨äºè§‚å¯Ÿçš„æ•°æ®ã€‚</p><p>ä¸ºäº†ç¡®ä¿æœåŠ¡ä¸ä¼šä¸­æ–­ï¼Œæˆ‘ä»¬éœ€è¦è§‚å¯Ÿå’Œåˆ†æåº”ç”¨ç¨‹åºçš„å„ä¸ªæ–¹é¢ï¼Œä»¥ä¾¿ç«‹å³å‘ç°å¹¶ä¿®å¤å¼‚å¸¸æƒ…å†µã€‚è¿™å°±æ˜¯å¯è§‚å¯Ÿæ€§å’Œåˆ†æè¿™ä¸ªç±»åˆ«è¦åšçš„äº‹æƒ…ã€‚å®ƒè´¯ç©¿å¹¶è§‚å¯Ÿæ‰€æœ‰å±‚ï¼Œå› æ­¤åœ¨æ•´ä¸ªå…¨æ™¯å›¾çš„ä¾§é¢è€Œä¸æ˜¯åµŒåœ¨æŸä¸€å±‚ã€‚</p><p>æ­¤ç±»åˆ«ä¸­çš„å·¥å…·åŒ…æ‹¬æ—¥å¿—è®°å½•Â (logging)ã€ç›‘æ§Â (monitoring)ã€è¿½è¸ªï¼ˆtracing) å’Œæ··æ²Œå·¥ç¨‹ï¼ˆchaos engineering)ã€‚è™½ç„¶æ··æ²Œå·¥ç¨‹åœ¨è¿™é‡Œåˆ—å‡ºï¼Œä½†å®ƒæ›´å¤šçš„æ˜¯ä¸€ç§å¯é æ€§å·¥å…·ï¼Œè€Œä¸æ˜¯å¯è§‚å¯Ÿæ€§æˆ–åˆ†æå·¥å…·ã€‚</p><h3><span id="æ—¥å¿—è®°å½•">æ—¥å¿—è®°å½•</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>åº”ç”¨ç¨‹åºä¼šè¾“å‡ºç¨³å®šçš„æ—¥å¿—æ¶ˆæ¯æµï¼Œä»¥æè¿°è‡ªèº«åœ¨ä½•æ—¶åšäº†ä»€ä¹ˆã€‚è¿™äº›æ—¥å¿—æ¶ˆæ¯ä¼šæ•è·ç³»ç»Ÿä¸­å‘ç”Ÿçš„å„ç§äº‹ä»¶ï¼Œä¾‹å¦‚å¤±è´¥æˆ–æˆåŠŸçš„æ“ä½œã€å®¡è®¡ä¿¡æ¯æˆ–è¿è¡ŒçŠ¶å†µã€‚æ—¥å¿—è®°å½•å·¥å…·å°†æ”¶é›†ã€å­˜å‚¨å’Œåˆ†æè¿™äº›æ¶ˆæ¯ï¼Œä»¥è¿½æº¯é”™è¯¯æŠ¥å‘Šå’Œç›¸å…³æ•°æ®ã€‚æ—¥å¿—è®°å½•ï¼ˆlogingï¼‰ã€åº¦é‡ï¼ˆmetrics)ã€è¿½è¸ªï¼ˆtracing) æ˜¯å¯è§‚å¯Ÿæ€§çš„ä¸‰å¤§æ”¯æŸ±ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>æ”¶é›†ã€å­˜å‚¨å’Œåˆ†ææ—¥å¿—æ˜¯æ„å»ºç°ä»£å¹³å°çš„å…³é”®éƒ¨åˆ†ï¼Œæ—¥å¿—è®°å½•å¯å¸®åŠ©æ‰§è¡Œè¿™å…¶ä¸­çš„æŸä¸€é¡¹æˆ–å…¨éƒ¨ä»»åŠ¡ã€‚ä¸€äº›å·¥å…·å¯å¤„ç†ä»æ”¶é›†åˆ°åˆ†æå…¨æ–¹ä½çš„å·¥ä½œï¼Œè¿˜æœ‰ä¸€äº›å·¥å…·åˆ™ä¸“æ³¨äºå•ä¸ªä»»åŠ¡ï¼ˆä¾‹å¦‚æ”¶é›†ï¼‰ã€‚æ‰€æœ‰æ—¥å¿—è®°å½•å·¥å…·éƒ½æ—¨åœ¨å¸®åŠ©ç»„ç»‡æ›´å¥½åœ°æ§åˆ¶æ—¥å¿—æ¶ˆæ¯ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>åœ¨æ”¶é›†ã€å­˜å‚¨å’Œåˆ†æåº”ç”¨ç¨‹åºçš„æ—¥å¿—æ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬å°†äº†è§£åº”ç”¨ç¨‹åºåœ¨ä»»ä½•ç»™å®šæ—¶é—´çš„é€šä¿¡å†…å®¹ã€‚ä½†è¯·æ³¨æ„ï¼Œæ—¥å¿—ä»£è¡¨åº”ç”¨ç¨‹åºæœ‰æ„è¾“å‡ºçš„æ¶ˆæ¯ï¼Œå®ƒä»¬ä¸ä¸€å®šèƒ½æŸ¥æ˜ç»™å®šé—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚å°½ç®¡å¦‚æ­¤ï¼Œéšæ—¶æ”¶é›†å’Œä¿ç•™æ—¥å¿—æ¶ˆæ¯æ˜¯ä¸€é¡¹éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå°†å¸®åŠ©å›¢é˜Ÿè¯Šæ–­é—®é¢˜å¹¶æ»¡è¶³åˆè§„æ€§è¦æ±‚ã€‚</p><p><strong>å¸¸ç”¨å·¥å…·</strong></p><p>å°½ç®¡æ”¶é›†ã€å­˜å‚¨å’Œå¤„ç†æ—¥å¿—æ¶ˆæ¯ä¸æ˜¯ä»€ä¹ˆæ–°é²œäº‹ï¼Œä½†äº‘åŸç”Ÿæ¨¡å¼å’Œ Kubernetes çš„å‡ºç°æå¤§åœ°æ”¹å˜äº†æˆ‘ä»¬å¤„ç†æ—¥å¿—çš„æ–¹å¼ã€‚é€‚ç”¨äºè™šæ‹Ÿæœºå’Œç‰©ç†æœºçš„ä¼ ç»Ÿæ—¥å¿—è®°å½•æ–¹æ³•ï¼ˆä¾‹å¦‚å°†æ—¥å¿—å†™å…¥æ–‡ä»¶ï¼‰ä¸é€‚ç”¨äºå®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºï¼Œå› ä¸ºåœ¨è¿™äº›å®¹å™¨åŒ–åº”ç”¨ç¨‹åºä¸­ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½å¹¶ä¸ä¼šæ¯”åº”ç”¨ç¨‹åºæŒä¹…ã€‚åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œè¯¸å¦‚ Fluentd ä¹‹ç±»çš„æ—¥å¿—æ”¶é›†å·¥å…·ä¸åº”ç”¨ç¨‹åºå®¹å™¨ä¸€èµ·è¿è¡Œï¼Œå¹¶ç›´æ¥ä»åº”ç”¨ç¨‹åºæ”¶é›†æ¶ˆæ¯ï¼Œç„¶åå°†æ¶ˆæ¯è½¬å‘åˆ°ä¸­å¤®æ—¥å¿—å­˜å‚¨ä»¥è¿›è¡Œæ±‡æ€»å’Œåˆ†æã€‚</p><p>CNCF ä¸­çš„æ—¥å¿—è®°å½•å·¥å…·åªæœ‰ Fluentdã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093439248-2021-07-01-7kMmtk.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093444220-2021-07-01-SXtfQd.png" alt></p><h3><span id="ç›‘æ§">ç›‘æ§</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>ç›‘æ§æ˜¯æŒ‡å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæ£€æµ‹ï¼Œæ”¶é›†ã€èšåˆå’Œåˆ†ææ—¥å¿—å’ŒæŒ‡æ ‡ï¼Œä»¥å¢è¿›æˆ‘ä»¬å¯¹åº”ç”¨ç¨‹åºè¡Œä¸ºçš„ç†è§£ã€‚æ—¥å¿—æè¿°äº†ç‰¹å®šçš„äº‹ä»¶ï¼Œè€ŒæŒ‡æ ‡åˆ™æ˜¯åœ¨ç»™å®šæ—¶é—´ç‚¹å¯¹ç³»ç»Ÿçš„åº¦é‡ã€‚æ—¥å¿—å’Œ metrics æ˜¯ä¸¤ç§ä¸åŒçš„äº‹ç‰©ï¼Œä½†æ˜¯è¦å…¨é¢äº†è§£ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µï¼ŒäºŒè€…éƒ½æ˜¯å¿…éœ€çš„ã€‚ç›‘æ§çš„å†…å®¹åŒ…æ‹¬è§‚å¯Ÿç£ç›˜ç©ºé—´ã€CPU ä½¿ç”¨ç‡ã€å•ä¸ªèŠ‚ç‚¹ä¸Šçš„å†…å­˜æ¶ˆè€—ï¼Œä»¥åŠæ‰§è¡Œè¯¦ç»†çš„ç»¼åˆäº‹åŠ¡ä»¥æŸ¥çœ‹ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºæ˜¯å¦æ­£ç¡®ä¸”åŠæ—¶åœ°è¿›è¡Œäº†å“åº”ç­‰ã€‚æœ‰è®¸å¤šä¸åŒçš„æ–¹æ³•å¯ç”¨æ¥ç›‘æ§ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>åœ¨è¿è¡Œåº”ç”¨ç¨‹åºæˆ–å¹³å°æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒå®Œæˆæ—¢å®šçš„ä»»åŠ¡ï¼Œå¹¶ç¡®ä¿åªæœ‰è¢«æˆæƒçš„ç”¨æˆ·æ‰èƒ½è®¿é—®ã€‚é€šè¿‡ç›‘æ§ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“åº”ç”¨ç¨‹åº/å¹³å°æ˜¯å¦åœ¨æ­£å¸¸ã€å®‰å…¨ä¸”é«˜æ•ˆåœ°è¿è¡Œï¼Œæ˜¯å¦ä»…æœ‰è¢«æˆæƒçš„ç”¨æˆ·å¯ä»¥è®¿é—®ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>è‰¯å¥½çš„ç›‘æ§æ–¹æ³•ä½¿è¿ç»´äººå‘˜èƒ½å¤Ÿåœ¨å‘ç”Ÿäº‹æ•…æ—¶è¿…é€Ÿåšå‡ºå“åº”ï¼Œç”šè‡³å¯ä»¥è‡ªåŠ¨å“åº”ã€‚ç›‘æ§å¯ä»¥è®©æˆ‘ä»¬æ´å¯Ÿç³»ç»Ÿå½“å‰è¿è¡Œçš„çŠ¶å†µï¼Œç›‘æµ‹åˆ°é—®é¢˜è¿›è¡Œä¿®å¤ã€‚å®ƒèƒ½è·Ÿè¸ªåº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶å†µã€ç”¨æˆ·è¡Œä¸ºç­‰å†…å®¹ï¼Œæ˜¯æœ‰æ•ˆè¿è¡Œåº”ç”¨ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p><p><strong>å¸¸ç”¨å·¥å…·</strong></p><p>äº‘åŸç”Ÿç¯å¢ƒä¸­çš„ç›‘æ§å’Œä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„ç›‘æ§ç±»ä¼¼ã€‚æˆ‘ä»¬éœ€è¦è·Ÿè¸ªæŒ‡æ ‡ã€æ—¥å¿—å’Œäº‹ä»¶ä»¥äº†è§£åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µã€‚ä¸»è¦åŒºåˆ«åœ¨äºäº‘åŸç”Ÿç¯å¢ƒä¸­çš„æŸäº›æ‰˜ç®¡å¯¹è±¡æ˜¯ä¸´æ—¶çš„ï¼Œå®ƒä»¬å¯èƒ½ä¸ä¼šæŒä¹…ï¼Œå› æ­¤å°†ç›‘æ§ç³»ç»Ÿä¸è‡ªåŠ¨ç”Ÿæˆçš„èµ„æºåç§°è”ç³»åœ¨ä¸€èµ·å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ç­–ç•¥ã€‚CNCF ä¸­æœ‰è®¸å¤šç›‘æ§å·¥å…·ï¼Œæœ€ä¸»è¦çš„æ˜¯ Prometheusï¼ˆå·²ç»ä» CNCF æ¯•ä¸šï¼‰ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093449905-2021-07-01-2e77yb.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093455255-2021-07-01-H2Vq8G.png" alt></p><h3><span id="è¿½è¸ª">è¿½è¸ª</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡ä¹‹é—´ä¸æ–­é€šè¿‡ç½‘ç»œç›¸äº’é€šä¿¡ã€‚è¿½è¸ªæ˜¯æ—¥å¿—è®°å½•çš„ä¸€ç§ä¸“é—¨ç”¨æ³•ï¼Œå¯ä»¥è·Ÿè¸ªè¯·æ±‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç§»åŠ¨çš„è·¯å¾„ã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>äº†è§£å¾®æœåŠ¡åº”ç”¨ç¨‹åºåœ¨æŸä¸ªæ—¶é—´ç‚¹çš„è¡Œä¸ºæ˜¯ä¸€é¡¹æå…·æŒ‘æˆ˜çš„ä»»åŠ¡ã€‚å°½ç®¡æœ‰è®¸å¤šå·¥å…·å¯ä»¥æä¾›æœåŠ¡è¡Œä¸ºç›¸å…³çš„æ´å¯Ÿï¼Œä½†æˆ‘ä»¬å¯èƒ½éš¾ä»¥é€šè¿‡å•ä¸ªæœåŠ¡çš„è¡Œä¸ºæ¥ç†è§£æ•´ä¸ªåº”ç”¨ç¨‹åºçš„è¿è¡Œæƒ…å†µã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>è¿½è¸ªå¯¹åº”ç”¨ç¨‹åºå‘é€çš„æ¶ˆæ¯æ·»åŠ å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯è§£å†³ä¸Šè¿°é—®é¢˜ã€‚è¯¥å”¯ä¸€æ ‡è¯†ç¬¦å¯ä»¥è·Ÿéš/è¿½è¸ªå„ä¸ªäº‹åŠ¡åœ¨ç³»ç»Ÿä¸­ç§»åŠ¨çš„è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡è¿½è¸ªçš„ä¿¡æ¯äº†è§£åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µï¼Œä»¥åŠè°ƒè¯•æœ‰é—®é¢˜çš„å¾®æœåŠ¡æˆ–è¡Œä¸ºã€‚</p><p><strong>å¸¸ç”¨å·¥å…·</strong></p><p>è¿½è¸ªæ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥å¯¹åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„è¡Œä¸ºè¿›è¡Œæ•…éšœæ’é™¤å’Œ fine-tuneã€‚è¦å®ç°è¿½è¸ªä¹Ÿéœ€è¦ä¸€äº›æˆæœ¬ï¼Œæ¯”å¦‚éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åºä»£ç ä»¥å‘å‡ºè·Ÿè¸ªæ•°æ®ï¼Œå¹¶ä¸”æ‰€æœ‰ Span éƒ½éœ€è¦ç”±åº”ç”¨ç¨‹åºæ•°æ®è·¯å¾„ä¸­çš„åŸºç¡€æ¶æ„ç»„ä»¶ä¼ æ’­ã€‚CNCF ä¸­çš„è¿½è¸ªå·¥å…·æœ‰ Jaeger å’Œ Open Tracingã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093502109-2021-07-01-JAr0k7.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093506710-2021-07-01-WuBCTJ.png" alt></p><h3><span id="æ··æ²Œå·¥ç¨‹">æ··æ²Œå·¥ç¨‹</span></h3><p><strong>æ˜¯ä»€ä¹ˆ</strong></p><p>æ··æ²Œå·¥ç¨‹ï¼ˆchaos engineeringï¼‰æ˜¯æŒ‡æœ‰æ„å°†æ•…éšœå¼•å…¥ç³»ç»Ÿä»¥åˆ›å»ºæ›´å…·å¼¹æ€§çš„åº”ç”¨ç¨‹åºå’Œå·¥ç¨‹å›¢é˜Ÿçš„å®è·µã€‚æ··ä¹±å·¥ç¨‹å·¥å…·ä»¥ä¸€ç§å¯æ§çš„æ–¹å¼åœ¨ç³»ç»Ÿä¸­å¼•å…¥æ•…éšœï¼Œå¹¶é’ˆå¯¹åº”ç”¨ç¨‹åºçš„ç‰¹å®šå®ä¾‹è¿è¡Œç‰¹å®šçš„å®éªŒã€‚</p><p><strong>è§£å†³çš„é—®é¢˜</strong></p><p>å¤æ‚çš„ç³»ç»Ÿä¼šå‡ºç°æ•…éšœã€‚æ•…éšœçš„åŸå› æœ‰å¤šç§ï¼Œç»™åˆ†å¸ƒå¼ç³»ç»Ÿå¸¦æ¥çš„åæœä¹Ÿå¾ˆéš¾é¢„æµ‹ã€‚ä¸€äº›ç»„ç»‡å·²ç»æ¥å—äº†è¿™ä¸€ç‚¹ï¼Œä»–ä»¬æ„¿æ„é‡‡ç”¨æ··æ²Œå·¥ç¨‹æŠ€æœ¯ï¼Œä¸å»è¯•å›¾é˜²æ­¢æ•…éšœçš„å‘ç”Ÿï¼Œè€Œæ˜¯è®¾æ³•ç»ƒä¹ ä»æ•…éšœä¸­æ¢å¤ã€‚è¿™è¢«ç§°ä¸ºä¼˜åŒ–å¹³å‡ä¿®å¤æ—¶é—´ï¼ˆMTTRï¼‰ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong></p><p>åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»åŠ¨æ€é€‚åº”æ•…éšœâ€”â€”è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„æ¦‚å¿µã€‚è¿™æ„å‘³ç€å½“å‡ºç°æ•…éšœæ—¶ï¼Œç³»ç»Ÿä¸ä¼šå®Œå…¨å´©æºƒï¼Œè€Œæ˜¯å¯ä»¥ä¼˜é›…åœ°é™çº§æˆ–æ¢å¤ã€‚æ··æ²Œå·¥ç¨‹å·¥å…·å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒçš„ç³»ç»Ÿä¸Šè¿›è¡Œå®éªŒï¼Œä»¥ç¡®ä¿åœ¨å‘ç”ŸçœŸæ­£çš„æ•…éšœæ—¶ç³»ç»Ÿä¹Ÿèƒ½åº”å¯¹ã€‚</p><p>ç®€è¨€ä¹‹ï¼Œå¯¹ä¸€ä¸ªç³»ç»Ÿè¿›è¡Œæ··æ²Œå·¥ç¨‹å®éªŒï¼Œæ˜¯ä¸ºäº†ç¡®ä¿è¯¥ç³»ç»Ÿå¯ä»¥æ‰¿å—æ„å¤–æƒ…å†µã€‚ä½¿ç”¨æ··æ²Œå·¥ç¨‹å·¥å…·ï¼Œä¸å¿…ç­‰å¾…æ•…éšœå‘ç”Ÿåå†è¿›è¡Œåº”å¯¹ï¼Œè€Œæ˜¯å¯ä»¥åœ¨å¯æ§æ¡ä»¶ä¸‹ä¸ºç³»ç»Ÿæ³¨å…¥æ•…éšœï¼Œä»¥å‘ç°æ¼æ´å¹¶åœ¨å˜æ›´è¦†ç›–è¿™äº›æ¼æ´ä¹‹å‰åŠ ä»¥ä¿®å¤ã€‚</p><p><strong>å¸¸ç”¨å·¥å…·</strong></p><p>æ··æ²Œå·¥ç¨‹å·¥å…·å’Œå®è·µå¯¹äºåº”ç”¨ç¨‹åºçš„é«˜å¯ç”¨è‡³å…³é‡è¦ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿé€šå¸¸è¿‡äºå¤æ‚ï¼Œè€Œä¸”ä»»ä½•å˜æ›´è¿‡ç¨‹éƒ½æ— æ³•å®Œå…¨ç¡®å®šå…¶å¯¹ç¯å¢ƒçš„å½±å“ã€‚é€šè¿‡æœ‰æ„å¼•å…¥æ··æ²Œå·¥ç¨‹å®è·µï¼Œå›¢é˜Ÿå¯ä»¥ç»ƒä¹ ä»æ•…éšœä¸­æ¢å¤ï¼Œå¹¶å°†è¿™ä¸ªè¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚CNCF ä¸­çš„æ··æ²Œå·¥ç¨‹å·¥å…·æœ‰ Chaos Mesh å’Œ Litmus Chaosã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å¼€æºå’Œé—­æºçš„æ··æ²Œå·¥ç¨‹å·¥å…·ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093512020-2021-07-01-CnD3uw.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/640-20210701093517172-2021-07-01-JULM6r.png" alt></p><p><strong>å°ç»“</strong></p><p>å¯è§‚å¯Ÿæ€§å’Œåˆ†æè¿™ä¸€åˆ—çš„å·¥å…·å¯ç”¨äºäº†è§£ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µï¼Œå¹¶ç¡®ä¿ç³»ç»Ÿå³ä½¿åœ¨æ¶åŠ£çš„æ¡ä»¶ä¸‹ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚æ—¥å¿—è®°å½•å·¥å…·å¯æ•è·åº”ç”¨ç¨‹åºå‘å‡ºçš„äº‹ä»¶æ¶ˆæ¯ï¼Œç›‘æ§å·¥å…·å¯ç›‘æµ‹æ—¥å¿—å’ŒæŒ‡æ ‡ï¼Œè¿½è¸ªå·¥å…·å¯è·Ÿè¸ªå•ä¸ªè¯·æ±‚çš„è·¯å¾„ã€‚ç»“åˆä½¿ç”¨è¿™äº›å·¥å…·ï¼Œç†æƒ³æƒ…å†µä¸‹å¯ä»¥ 360 åº¦å…¨æ–¹ä½æŸ¥çœ‹ç³»ç»Ÿä¸­æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚æ··æ²Œå·¥ç¨‹æä¾›äº†ä¸€ç§å®‰å…¨çš„æ–¹æ³•æ¥ä¿è¯ç³»ç»Ÿå¯ä»¥æ‰¿å—æ„å¤–äº‹ä»¶ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç¡®ä¿ç³»ç»Ÿçš„å¥åº·è¿è¡Œã€‚</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ K8sMeetupç¤¾åŒº ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/2t79rh7m" target="_blank" rel="noopener">https://tinyurl.com/2t79rh7m</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¸¦ä½ äº†è§£äº‘åŸç”ŸæŠ€æœ¯å›¾è°±&quot;&gt;å¸¦ä½ äº†è§£äº‘åŸç”ŸæŠ€æœ¯å›¾è°±&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ ç ”ç©¶è¿‡äº‘åŸç”Ÿåº”ç”¨ç¨‹åºå’Œç›¸å…³æŠ€æœ¯ï¼Œå¤§æ¦‚ç‡ä½ é‡åˆ°è¿‡ CNCF çš„äº‘åŸç”Ÿå…¨æ™¯å›¾ã€‚è¿™å¼ å…¨æ™¯å›¾æŠ€æœ¯ä¹‹å¤šè§„æ¨¡ä¹‹å¤§æ— ç–‘ä¼šè®©äººæ„Ÿåˆ°éœ‡æƒŠï¼Œè¯¥å¦‚ä½•å»ç†è§£è¿™å¼ å›¾å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœæŠŠå®ƒæ‹†å¼€æ¥ä¸€æ¬¡åªåˆ†æä¸€å°å—å†…å®¹ï¼Œä½ ä¼šå‘ç°æ•´ä¸ªå…¨æ™¯å›¾æ²¡æœ‰é‚£ä¹ˆå¤æ‚ã€‚äº‹å®ä¸Šï¼Œè¯¥å…¨æ™¯å›¾æŒ‰ç…§åŠŸèƒ½æœ‰åºåœ°ç»„ç»‡åœ¨ä¸€èµ·ï¼Œä¸€æ—¦ä½ äº†è§£äº†æ¯ä¸ªç±»åˆ«ä»£è¡¨çš„å†…å®¹ï¼Œä½ å°±å¯ä»¥è½»æ¾æ¸¸èµ°äºå…¨æ™¯å›¾ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç« èŠ‚æˆ‘ä»¬å°†æŠŠæ•´ä¸ªå…¨æ™¯å›¾æ‹†è§£å¼€æ¥ï¼Œå¹¶å¯¹æ•´ä¸ªå…¨æ™¯å›¾è¿›è¡Œç»¼è¿°ã€‚åœ¨åç»­ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†èšç„¦åœ¨æ¯ä¸€å±‚ï¼ˆor æ¯ä¸€åˆ—ï¼‰ï¼Œå¯¹æ¯ä¸ªç±»åˆ«è§£å†³çš„é—®é¢˜å’ŒåŸç†è¿›è¡Œæ›´ä¸ºè¯¦ç»†çš„è§£è¯»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.hi-linux.com/staticfile/640-20210701092946955-2021-07-01-NjRgpd.png&quot; alt=&quot;äº‘åŸç”Ÿå…¨æ™¯å›¾çš„ 4 å±‚&quot;&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å‰¥ç¦»æ‰æ‰€æœ‰å•ä¸ªçš„æŠ€æœ¯ï¼Œä»…æŸ¥çœ‹ç±»åˆ«ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚å›¾ä¸­æœ‰ä¸åŒçš„â€œè¡Œâ€ï¼Œåƒå»ºç­‘çš„ä¸åŒå±‚ï¼Œæ¯å±‚éƒ½æœ‰è‡ªå·±çš„å­ç±»åˆ«ã€‚æœ€åº•å±‚æä¾›äº†æ„å»ºäº‘åŸç”ŸåŸºç¡€è®¾æ–½çš„å·¥å…·ã€‚å¾€ä¸Šï¼Œä½ å¯ä»¥å¼€å§‹æ·»åŠ è¿è¡Œå’Œç®¡ç†åº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥å…·ï¼Œæ¯”å¦‚è¿è¡Œæ—¶å’Œè°ƒåº¦å±‚ã€‚åœ¨æœ€ä¸Šå±‚ï¼Œæœ‰å®šä¹‰å’Œå¼€å‘åº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œæ¯”å¦‚æ•°æ®åº“ã€é•œåƒæ„å»ºå’Œ CI/CD å·¥å…·ï¼ˆæˆ‘ä»¬å°†åœ¨åæ–‡è®¨è®ºï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.hi-linux.com/staticfile/640-20210701092955887-2021-07-01-CCKzaW.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¥½äº†ï¼Œç°åœ¨ä½ åº”è¯¥è®°ä½äº†äº‘åŸç”Ÿå…¨æ™¯å›¾å§‹äºåŸºç¡€è®¾æ–½ï¼Œå¾€ä¸Šçš„æ¯ä¸€å±‚éƒ½æ›´æ¥è¿‘å®é™…çš„åº”ç”¨ç¨‹åºã€‚è¿™å°±æ˜¯æ¯å±‚ä»£è¡¨çš„æ„æ€ï¼ˆåé¢æˆ‘ä»¬ä¼šè®¨è®ºä¸Šå›¾å³è¾¹çš„ä¸¤â€œåˆ—â€ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä»æœ€åº•å±‚å¼€å§‹ï¼Œé€å±‚è¿›è¡Œè§£æã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/categories/kubernetes/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="äº‘åŸç”Ÿ" scheme="https://www.hi-linux.com/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/"/>
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes å®˜æ–¹å‡ºå“è°ƒè¯•å·¥å…·ä¸Šæ‰‹æŒ‡å—(æ— éœ€å®‰è£…ï¼Œå¼€ç®±å³ç”¨)</title>
    <link href="https://www.hi-linux.com/posts/48532.html"/>
    <id>https://www.hi-linux.com/posts/48532.html</id>
    <published>2021-06-29T01:00:00.000Z</published>
    <updated>2021-06-29T05:38:45.659Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>æœ¬æ–‡ä»‹ç»äº† Kubectl debug å’Œä¸´æ—¶å®¹å™¨ç­‰è°ƒè¯•æ–¹æ³•ã€‚</p><blockquote><p>ä½œè€…ï¼šMartin Heinz</p><p>ç¿»è¯‘ï¼šBach (K8sMeetup)</p><p>æ ¡å¯¹ï¼šæ˜Ÿç©ºä¸‹çš„æ–‡ä»”</p></blockquote><p>è°ƒè¯•å®¹å™¨åŒ–å·¥ä½œè´Ÿè½½å’Œ Pod æ˜¯æ¯ä½ä½¿ç”¨ Kubernetes çš„å¼€å‘äººå‘˜å’Œ DevOps å·¥ç¨‹å¸ˆçš„æ—¥å¸¸ä»»åŠ¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç®€å•åœ°ä½¿ç”¨ <code>kubectl logs</code> æˆ–è€… <code>kubectl describe pod</code> ä¾¿è¶³ä»¥æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œä½†æœ‰æ—¶å€™ï¼Œä¸€äº›é—®é¢˜ä¼šç‰¹åˆ«éš¾æŸ¥ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¤§å®¶å¯èƒ½ä¼šå°è¯•ä½¿ç”¨ <code>kubectl exec</code>ï¼Œä½†æœ‰æ—¶å€™è¿™æ ·ä¹Ÿè¿˜ä¸è¡Œï¼Œå› ä¸º Distroless ç­‰å®¹å™¨ç”šè‡³ä¸å…è®¸é€šè¿‡ SSH è¿›å…¥ shellã€‚é‚£ä¹ˆï¼Œå¦‚æœä»¥ä¸Šæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥äº†ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåŠï¼Ÿ</p><h2><span id="æ›´å¥½çš„æ–¹æ³•">æ›´å¥½çš„æ–¹æ³•</span></h2><p>å…¶å®æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æ›´åˆé€‚çš„å·¥å…·ã€‚<strong>å¦‚æœåœ¨ Kubernetes ä¸Šè°ƒè¯•å·¥ä½œè´Ÿè½½ï¼Œé‚£ä¹ˆåˆé€‚çš„å·¥å…·å°±æ˜¯ <code>kubectl debug</code>ã€‚</strong> è¿™æ˜¯ä¸ä¹…å‰æ·»åŠ çš„ä¸€ä¸ªæ–°å‘½ä»¤ï¼ˆv1.18ï¼‰ï¼Œå…è®¸è°ƒè¯•æ­£åœ¨è¿è¡Œçš„ podã€‚å®ƒä¼šå°†åä¸º EphemeralContainerï¼ˆä¸´æ—¶å®¹å™¨ï¼‰çš„ç‰¹æ®Šå®¹å™¨æ³¨å…¥åˆ°é—®é¢˜ Pod ä¸­ï¼Œè®©æˆ‘ä»¬æŸ¥çœ‹å¹¶æ’é™¤æ•…éšœã€‚<code>kubectl debug</code> çœ‹èµ·æ¥éå¸¸ä¸é”™ï¼Œä½†è¦ä½¿ç”¨å®ƒéœ€è¦ä¸´æ—¶å®¹å™¨ï¼Œä¸´æ—¶å®¹å™¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>ä¸´æ—¶å®¹å™¨å…¶å®æ˜¯ Pod ä¸­çš„å­èµ„æºï¼Œç±»ä¼¼æ™®é€š <code>container</code>ã€‚ä½†ä¸æ™®é€šå®¹å™¨ä¸åŒçš„æ˜¯ï¼Œä¸´æ—¶å®¹å™¨ä¸ç”¨äºæ„å»ºåº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯ç”¨äºæ£€æŸ¥ã€‚</strong> æˆ‘ä»¬ä¸ä¼šåœ¨åˆ›å»º Pod æ—¶å®šä¹‰å®ƒä»¬ï¼Œè€Œä½¿ç”¨ç‰¹æ®Šçš„ API å°†å…¶æ³¨å…¥åˆ°è¿çš„è¡Œ Pod ä¸­ï¼Œæ¥è¿è¡Œå‘½ä»¤å¹¶æ£€æŸ¥ Pod ç¯å¢ƒã€‚é™¤äº†è¿™äº›ä¸åŒï¼Œä¸´æ—¶å®¹å™¨è¿˜ç¼ºå°‘ä¸€äº›åŸºæœ¬å®¹å™¨çš„å­—æ®µï¼Œä¾‹å¦‚ <code>ports</code>ã€<code>resources</code>ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨åŸºæœ¬å®¹å™¨ï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¸èƒ½å‘ Pod æ·»åŠ åŸºæœ¬å®¹å™¨ï¼Œå®ƒä»¬åº”è¯¥æ˜¯ä¸€æ¬¡æ€§çš„ï¼ˆéœ€è¦éšæ—¶åˆ é™¤æˆ–é‡æ–°åˆ›å»ºï¼‰ï¼Œè¿™ä¼šå¯¼è‡´éš¾ä»¥é‡ç°é—®é¢˜ Pod çš„é”™è¯¯ï¼Œæ’é™¤æ•…éšœä¹Ÿä¼šå¾ˆéº»çƒ¦ã€‚è¿™å°±æ˜¯å°†ä¸´æ—¶å®¹å™¨æ·»åŠ åˆ° API çš„åŸå› â€”â€”å®ƒä»¬å…è®¸æˆ‘ä»¬å°†ä¸´æ—¶å®¹å™¨æ·»åŠ åˆ°ç°æœ‰ Podï¼Œä»è€Œæ£€æŸ¥æ­£åœ¨è¿è¡Œçš„ Podã€‚</p><p>è™½ç„¶ä¸´æ—¶å®¹å™¨æ˜¯ä½œä¸º Kubernetes æ ¸å¿ƒçš„ Pod è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œä½†å¾ˆå¤šäººå¯èƒ½è¿˜æ²¡æœ‰å¬è¯´è¿‡ã€‚è¿™æ˜¯å› ä¸ºä¸´æ—¶å®¹å™¨å¤„äºæ—©æœŸ Alpha é˜¶æ®µï¼Œè¿™æ„å‘³ç€é»˜è®¤æƒ…å†µä¸‹ä¸å¯ç”¨ã€‚Alpha é˜¶æ®µçš„èµ„æºå’ŒåŠŸèƒ½å¯èƒ½ä¼šå‡ºç°é‡å¤§å˜åŒ–ï¼Œæˆ–è€…åœ¨ Kubernetes çš„æŸä¸ªæœªæ¥ç‰ˆæœ¬ä¸­è¢«å®Œå…¨åˆ é™¤ã€‚<strong>å› æ­¤ï¼Œè¦ä½¿ç”¨å®ƒä»¬å¿…é¡»åœ¨ kubelet ä¸­ä½¿ç”¨Feature Gateï¼ˆåŠŸèƒ½é—¨ï¼‰æ˜¾å¼å¯ç”¨ã€‚</strong></p><a id="more"></a><h2><span id="configuring-feature-gates">Configuring Feature Gates</span></h2><p><strong>ç°åœ¨å¦‚æœç¡®å®šè¦è¯•ç”¨ <code>kubectl debug</code>ï¼Œé‚£ä¹ˆå¦‚ä½•å¯ç”¨ä¸´æ—¶å®¹å™¨çš„åŠŸèƒ½é—¨ï¼Ÿè¿™å–å†³äºé›†ç¾¤è®¾ç½®ã€‚</strong> ä¾‹å¦‚ï¼Œç°åœ¨ä½¿ç”¨kubeadmå¯åŠ¨åˆ›å»ºé›†ç¾¤ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é›†ç¾¤é…ç½®æ¥å¯ç”¨ä¸´æ—¶å®¹å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: kubeadm.k8s.io&#x2F;v1beta2</span><br><span class="line">kind: ClusterConfiguration</span><br><span class="line">kubernetesVersion: v1.20.2</span><br><span class="line">apiServer:</span><br><span class="line">  extraArgs:</span><br><span class="line">    feature-gates: EphemeralContainers&#x3D;true</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä¸ºäº†ç®€å•å’Œæµ‹è¯•ç›®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ KinDï¼ˆDocker ä¸­çš„ Kubernetesï¼‰é›†ç¾¤ï¼Œè¿™å…è®¸æˆ‘ä»¬æŒ‡å®šè¦å¯ç”¨çš„åŠŸèƒ½é—¨ã€‚åˆ›å»ºæˆ‘ä»¬çš„æµ‹è¯•é›†ç¾¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># File: config.yaml</span><br><span class="line"># Run:  kind create cluster --config .&#x2F;config.yaml --name kind --image&#x3D;kindest&#x2F;node:v1.20.2</span><br><span class="line">kind: Cluster</span><br><span class="line">apiVersion: kind.x-k8s.io&#x2F;v1alpha4</span><br><span class="line">featureGates:</span><br><span class="line">  EphemeralContainers: true</span><br><span class="line">nodes:</span><br><span class="line">- role: control-plane</span><br></pre></td></tr></table></figure><p>éšç€é›†ç¾¤çš„è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦éªŒè¯å…¶æœ‰æ•ˆæ€§ã€‚æœ€ç®€å•æ–¹æ³•æ˜¯æ£€æŸ¥ Pod APIï¼Œå®ƒç°åœ¨åº”è¯¥åŒ…å«ä¸´æ—¶å®¹å™¨éƒ¨åˆ†ä»¥åŠé€šå¸¸å®¹å™¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl explain pod.spec.ephemeralContainers</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line"></span><br><span class="line">RESOURCE: ephemeralContainers &lt;[]Object&gt;</span><br><span class="line"></span><br><span class="line">DESCRIPTION:</span><br><span class="line">     List of ephemeral containers run in this pod....</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ç°åœ¨éƒ½æœ‰äº†ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨ <code>kubectl debug</code>ã€‚ä»ç®€å•çš„ä¾‹å­å¼€å§‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl run some-app --image&#x3D;k8s.gcr.io&#x2F;pause:3.1 --restart&#x3D;Never</span><br><span class="line">~ $ kubectl debug -it some-app --image&#x3D;busybox --target&#x3D;some-app</span><br><span class="line">Defaulting debug container name to debugger-tfqvh.</span><br><span class="line">If you don&#39;t see a command prompt, try pressing enter.</span><br><span class="line">&#x2F; #</span><br><span class="line"># From other terminal...</span><br><span class="line">~ $ kubectl describe pod some-app</span><br><span class="line">...</span><br><span class="line">Containers:</span><br><span class="line">  some-app:</span><br><span class="line">    Container ID:   containerd:&#x2F;&#x2F;60cc537eee843cb38a1ba295baaa172db8344eea59de4d75311400436d4a5083</span><br><span class="line">    Image:          k8s.gcr.io&#x2F;pause:3.1</span><br><span class="line">    Image ID:       k8s.gcr.io&#x2F;pause@sha256:f78411e19d84a252e53bff71a4407a5686c46983a2c2eeed83929b888179acea</span><br><span class="line">...</span><br><span class="line">Ephemeral Containers:</span><br><span class="line">  debugger-tfqvh:</span><br><span class="line">    Container ID:   containerd:&#x2F;&#x2F;12efbbf2e46bb523ae0546b2369801b51a61e1367dda839ce0e02f0e5c1a49d6</span><br><span class="line">    Image:          busybox</span><br><span class="line">    Image ID:       docker.io&#x2F;library&#x2F;busybox@sha256:ce2360d5189a033012fbad1635e037be86f23b65cfd676b436d0931af390a2ac</span><br><span class="line">    Port:           &lt;none&gt;</span><br><span class="line">    Host Port:      &lt;none&gt;</span><br><span class="line">    State:          Running</span><br><span class="line">      Started:      Mon, 15 Mar 2021 20:33:51 +0100</span><br><span class="line">    Ready:          False</span><br><span class="line">    Restart Count:  0</span><br><span class="line">    Environment:    &lt;none&gt;</span><br><span class="line">    Mounts:         &lt;none&gt;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é¦–å…ˆå¯åŠ¨ä¸€ä¸ªåä¸º <code>some-app</code> çš„ Pod æ¥è¿›è¡Œâ€œè°ƒè¯•â€ã€‚ç„¶åé’ˆå¯¹è¿™ä¸ª Pod è¿è¡Œ <code>kubectl debug</code>ï¼ŒæŒ‡å®š <code>busybox</code> ä¸ºä¸´æ—¶å®¹å™¨çš„é•œåƒï¼Œå¹¶ä½œä¸ºåŸå§‹å®¹å™¨çš„ç›®æ ‡ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦åŒ…æ‹¬ <code>-it</code> å‚æ•°ï¼Œä»¥ä¾¿æˆ‘ä»¬ç«‹å³é™„åŠ åˆ°å®¹å™¨è·å¾— shell ä¼šè¯ã€‚</p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ Pod ä¸Šè¿è¡Œ kubectl debug åå¯¹å…¶è¿›è¡Œæè¿°ï¼Œé‚£ä¹ˆå®ƒçš„æè¿°å°†åŒ…æ‹¬å…·æœ‰ä¹‹å‰æŒ‡å®šä¸ºå‘½ä»¤é€‰é¡¹å€¼çš„ä¸´æ—¶å®¹å™¨éƒ¨åˆ†ã€‚</p><h2><span id="process-namespace-sharing">Process Namespace Sharing</span></h2><p><code>kubectl debug</code> æ˜¯éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œä½†æœ‰æ—¶å‘ Pod æ·»åŠ ä¸€ä¸ªå®¹å™¨è¿˜ä¸è¶³ä»¥è·å– Pod çš„å¦ä¸€ä¸ªå®¹å™¨ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºç›¸å…³ä¿¡æ¯ã€‚å½“æ•…éšœå®¹å™¨ä¸åŒ…æ‹¬å¿…è¦çš„è°ƒè¯•å·¥å…·ç”šè‡³ shell æ—¶ï¼Œå¯èƒ½å°±æ˜¯è¿™ç§æƒ…å†µã€‚<strong>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Process Sharingï¼ˆè¿›ç¨‹å…±äº«ï¼‰æ¥ä½¿ç”¨æ³¨å…¥çš„ä¸´æ—¶å®¹å™¨æ£€æŸ¥ Pod çš„åŸæœ‰å®¹å™¨ã€‚</strong></p><p>è¿›ç¨‹å…±äº«çš„ä¸€ä¸ªé—®é¢˜æ˜¯å®ƒä¸èƒ½åº”ç”¨äºç°æœ‰çš„ Podï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–° Podï¼Œå°†å…¶ <code>spec.shareProcessNamespace</code> è®¾ç½®ä¸º <code>true</code>ï¼Œå¹¶å°†ä¸€ä¸ªä¸´æ—¶å®¹å™¨æ³¨å…¥å…¶ä¸­ã€‚è¿™æ ·æœ‰ç‚¹éº»çƒ¦ï¼Œå°¤å…¶æ˜¯éœ€è¦è°ƒè¯•å¤šä¸ª Pod æˆ–å®¹å™¨ï¼Œäº¦æˆ–è€…éœ€è¦é‡å¤æ‰§è¡Œè¯¥æ“ä½œæ—¶ã€‚å¹¸è¿çš„æ˜¯ï¼Œ<code>kubectl debug</code> å¯ä»¥ä½¿ç”¨ <code>--share-processes</code> åšåˆ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl run some-app --image&#x3D;nginx --restart&#x3D;Never</span><br><span class="line">~ $ kubectl debug -it some-app --image&#x3D;busybox --share-processes --copy-to&#x3D;some-app-debug</span><br><span class="line">Defaulting debug container name to debugger-tkwst.</span><br><span class="line">If you don&#39;t see a command prompt, try pressing enter.</span><br><span class="line">&#x2F; # ps ax</span><br><span class="line">PID   USER     TIME  COMMAND</span><br><span class="line">    1 root      0:00 &#x2F;pause</span><br><span class="line">    8 root      0:00 nginx: master process nginx -g daemon off;</span><br><span class="line">   38 101       0:00 nginx: worker process</span><br><span class="line">   39 root      0:00 sh</span><br><span class="line">   46 root      0:00 ps ax</span><br><span class="line">~ $ cat &#x2F;proc&#x2F;8&#x2F;root&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;default.conf </span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    listen  [::]:80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç è¡¨æ˜ï¼Œé€šè¿‡è¿›ç¨‹å…±äº«ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Pod ä¸­å¦ä¸€ä¸ªå®¹å™¨å†…çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬å…¶è¿›ç¨‹å’Œæ–‡ä»¶ï¼Œè¿™å¯¹äºè°ƒè¯•æ¥è¯´éå¸¸æ–¹ä¾¿ã€‚å¦å¤–ï¼Œé™¤äº† <code>--share-processes</code> è¿˜åŒ…æ‹¬äº† <code>--copy-to=new-pod-name</code>ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ Podï¼Œå…¶åç§°ç”±è¯¥ flag æŒ‡å®šã€‚å¦‚æœæˆ‘ä»¬ä»å¦ä¸€ä¸ªç»ˆç«¯åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„ Podï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># From other terminal:</span><br><span class="line">~ $ kubectl get pods</span><br><span class="line">NAME             READY   STATUS    RESTARTS   AGE</span><br><span class="line">some-app         1&#x2F;1     Running   0          23h</span><br><span class="line">some-app-debug   2&#x2F;2     Running   0          20s</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯æˆ‘ä»¬åœ¨åŸå§‹åº”ç”¨ç¨‹åº Pod ä¸Šçš„æ–°è°ƒè¯• Podã€‚ä¸åŸå§‹å®¹å™¨ç›¸æ¯”ï¼Œå®ƒæœ‰ 2 ä¸ªå®¹å™¨ï¼Œå› ä¸ºå®ƒè¿˜åŒ…æ‹¬ä¸´æ—¶å®¹å™¨ã€‚æ­¤å¤–ï¼Œå¦‚æœæƒ³åœ¨ä»»ä½•æ—¶å€™éªŒè¯ Pod ä¸­æ˜¯å¦å…è®¸è¿›ç¨‹å…±äº«ï¼Œé‚£ä¹ˆå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl get pod some-app-debug -o json  | jq .spec.shareProcessNamespace</span><br><span class="line">true</span><br></pre></td></tr></table></figure><h2><span id="å¥½å¥½ä½¿ç”¨">å¥½å¥½ä½¿ç”¨</span></h2><p><strong>æ—¢ç„¶æˆ‘ä»¬å·²ç»å¯ç”¨äº†åŠŸèƒ½å¹¶ä¸”çŸ¥é“å‘½ä»¤æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œé‚£å°±è¯•ç€ä½¿ç”¨å®ƒå¹¶è°ƒè¯•ä¸€äº›åº”ç”¨ç¨‹åºã€‚</strong> æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯â€”â€”æˆ‘ä»¬æœ‰ä¸€ä¸ªé—®é¢˜åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®ƒçš„å®¹å™¨ä¸­å¯¹ç½‘ç»œç›¸å…³çš„é—®é¢˜è¿›è¡Œæ•…éšœæ’é™¤ã€‚è¯¥åº”ç”¨ç¨‹åºæ²¡æœ‰æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„å¿…è¦çš„ç½‘ç»œ CLI å·¥å…·ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ <code>kubectl debug</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl run distroless-python --image&#x3D;martinheinz&#x2F;distroless-python --restart&#x3D;Never</span><br><span class="line">~ $ kubectl exec -it distroless-python -- &#x2F;bin&#x2F;sh</span><br><span class="line"># id</span><br><span class="line">&#x2F;bin&#x2F;sh: 1: id: not found</span><br><span class="line"># ls</span><br><span class="line">&#x2F;bin&#x2F;sh: 2: ls: not found</span><br><span class="line"># env</span><br><span class="line">&#x2F;bin&#x2F;sh: 3: env: not found</span><br><span class="line">#</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">kubectl debug -it distroless-python --image&#x3D;praqma&#x2F;network-multitool --target&#x3D;distroless-python -- sh</span><br><span class="line">Defaulting debug container name to debugger-rvtd4.</span><br><span class="line">If you don&#39;t see a command prompt, try pressing enter.</span><br><span class="line">&#x2F; # ping localhost</span><br><span class="line">PING localhost(localhost (::1)) 56 data bytes</span><br><span class="line">64 bytes from localhost (::1): icmp_seq&#x3D;1 ttl&#x3D;64 time&#x3D;0.025 ms</span><br><span class="line">64 bytes from localhost (::1): icmp_seq&#x3D;2 ttl&#x3D;64 time&#x3D;0.044 ms</span><br><span class="line">64 bytes from localhost (::1): icmp_seq&#x3D;3 ttl&#x3D;64 time&#x3D;0.027 ms</span><br></pre></td></tr></table></figure><p>åœ¨å¯åŠ¨ä¸€ä¸ª Pod ä¹‹åï¼Œæˆ‘ä»¬é¦–å…ˆå°è¯•å°† shell ä¼šè¯æ”¾å…¥å®ƒçš„å®¹å™¨ä¸­ï¼Œè¿™çœ‹èµ·æ¥æœ‰æ•ˆï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬å°è¯•è¿è¡Œä¸€äº›åŸºæœ¬å‘½ä»¤æ—¶ï¼Œå°†çœ‹åˆ°é‚£é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ <code>praqma/network-multitool</code> å°†ä¸´æ—¶å®¹å™¨æ³¨å…¥åˆ° Pod ä¸­ï¼Œè¯¥é•œåƒåŒ…å«äº† <code>curl</code>ã€<code>ping</code>ã€<code>telnet</code> ç­‰å·¥å…·ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ‰€æœ‰å¿…è¦çš„æ•…éšœæ’é™¤ã€‚</p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¿›å…¥ Pod çš„å¦ä¸€ä¸ªå®¹å™¨ä¸­å°±è¶³å¤Ÿäº†ã€‚ä½†æœ‰æ—¶å¯èƒ½éœ€è¦ç›´æ¥æŸ¥çœ‹æœ‰é—®é¢˜çš„å®¹å™¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·ä½¿ç”¨è¿›ç¨‹å…±äº«ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl run distroless-python --image&#x3D;martinheinz&#x2F;distroless-python --restart&#x3D;Never</span><br><span class="line">~ $ kubectl debug -it distroless-python --image&#x3D;busybox --share-processes --copy-to&#x3D;distroless-python-debug</span><br><span class="line">Defaulting debug container name to debugger-l692h.</span><br><span class="line">If you don&#39;t see a command prompt, try pressing enter.</span><br><span class="line">&#x2F; # ps ax</span><br><span class="line">PID   USER     TIME  COMMAND</span><br><span class="line">    1 root      0:00 &#x2F;pause</span><br><span class="line">    8 root      0:00 &#x2F;usr&#x2F;bin&#x2F;python3.5 sleep.py  # Original container is just sleeping forever</span><br><span class="line">   14 root      0:00 sh</span><br><span class="line">   20 root      0:00 ps ax</span><br><span class="line">&#x2F; # cat &#x2F;proc&#x2F;8&#x2F;root&#x2F;app&#x2F;sleep.py </span><br><span class="line">import time</span><br><span class="line">print(&quot;sleeping for 1 hour&quot;)</span><br><span class="line">time.sleep(3600)</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡Œä½¿ç”¨ Distroless é•œåƒçš„å®¹å™¨ã€‚æˆ‘ä»¬æ— æ³•åœ¨å®ƒçš„ shell ä¸­åšä»»ä½•äº‹æƒ…ã€‚æˆ‘ä»¬è¿è¡Œ <code>kubectl debug</code> ä»¥åŠ <code>--share-processes --copy-to=...</code>ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Podï¼Œå¸¦æœ‰é¢å¤–çš„ä¸´æ—¶å®¹å™¨ï¼Œå¯ä»¥è®¿é—®æ‰€æœ‰è¿›ç¨‹ã€‚å½“æˆ‘ä»¬åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ—¶ï¼Œèƒ½çœ‹åˆ°åº”ç”¨ç¨‹åºå®¹å™¨çš„è¿›ç¨‹æœ‰ PID 8ï¼Œå¯ä»¥ç”¨å®ƒæ¥æ¢ç´¢æ–‡ä»¶å’Œç¯å¢ƒã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <code>/proc/&lt;PID&gt;/...</code> ç›®å½•ï¼Œè¿™ä¸ªä¾‹å­ä¸­æ˜¯ <code>/proc/8/root/app/...</code>ã€‚</p><p>å¦ä¸€ç§å¸¸è§æƒ…å†µæ˜¯åº”ç”¨ç¨‹åºåœ¨å®¹å™¨å¯åŠ¨æ—¶ä¸æ–­å´©æºƒï¼Œè¿™è®©è°ƒè¯•éå¸¸å›°éš¾ï¼Œå› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´å°† shell ä¼šè¯å¯¼å…¥å®¹å™¨å¹¶è¿è¡Œæ•…éšœæ’é™¤å‘½ä»¤ã€‚<strong>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºå…·æœ‰ä¸åŒå…¥å£ç‚¹ã€å‘½ä»¤çš„å®¹å™¨ï¼Œè¿™å¯ä»¥é˜»æ­¢åº”ç”¨ç¨‹åºç«‹å³å´©æºƒå¹¶å…è®¸æˆ‘ä»¬è°ƒè¯•ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl get pods</span><br><span class="line">NAME                READY   STATUS             RESTARTS   AGE</span><br><span class="line">crashing-app        0&#x2F;1     CrashLoopBackOff   1          8s</span><br><span class="line"></span><br><span class="line">~ $ kubectl debug crashing-app -it --copy-to&#x3D;crashing-app-debug --container&#x3D;crashing-app -- sh</span><br><span class="line">If you don&#39;t see a command prompt, try pressing enter.</span><br><span class="line"># id</span><br><span class="line">uid&#x3D;0(root) gid&#x3D;0(root) groups&#x3D;0(root)</span><br><span class="line">#</span><br><span class="line">...</span><br><span class="line"># From another terminal</span><br><span class="line">~ $ kubectl get pods</span><br><span class="line">NAME                READY   STATUS             RESTARTS   AGE</span><br><span class="line">crashing-app        0&#x2F;1     CrashLoopBackOff   3          2m7s</span><br><span class="line">crashing-app-debug  1&#x2F;1     Running            0          16s</span><br></pre></td></tr></table></figure><h2><span id="è°ƒè¯•é›†ç¾¤èŠ‚ç‚¹">è°ƒè¯•é›†ç¾¤èŠ‚ç‚¹</span></h2><p>æœ¬æ–‡ä¸»è¦å…³æ³¨ Pod åŠå…¶å®¹å™¨çš„è°ƒè¯•ï¼Œä½†ä»»ä½•é›†ç¾¤ç®¡ç†å‘˜éƒ½çŸ¥é“å¸¸å¸¸éœ€è¦è°ƒè¯•çš„æ˜¯èŠ‚ç‚¹è€Œä¸æ˜¯ Podã€‚å¹¸è¿çš„æ˜¯ï¼Œ<code>kubectl debug</code> å…è®¸é€šè¿‡åˆ›å»º Pod æ¥è°ƒè¯•èŠ‚ç‚¹ï¼Œè¯¥ Pod å°†åœ¨æŒ‡å®šèŠ‚ç‚¹ä¸Šè¿è¡Œï¼ŒèŠ‚ç‚¹çš„æ ¹æ–‡ä»¶ç³»ç»Ÿå®‰è£…åœ¨ <code>/root</code> ç›®å½•ä¸­ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥ç”¨ <code>chroot</code> è®¿é—®ä¸»æœºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™æœ¬è´¨ä¸Šå……å½“äº†èŠ‚ç‚¹çš„ SSH è¿æ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">~ $ kubectl get nodes</span><br><span class="line">NAME                 STATUS   ROLES                  AGE   VERSION</span><br><span class="line">kind-control-plane   Ready    control-plane,master   25h   v1.20.2</span><br><span class="line"></span><br><span class="line">~ $ kubectl debug node&#x2F;kind-control-plane -it --image&#x3D;ubuntu</span><br><span class="line">Creating debugging pod node-debugger-kind-control-plane-hvljt with container debugger on node kind-control-plane.</span><br><span class="line">If you don&#39;t see a command prompt, try pressing enter.</span><br><span class="line">root@kind-control-plane:&#x2F;# chroot &#x2F;host</span><br><span class="line"># head kind&#x2F;kubeadm.conf</span><br><span class="line">apiServer:</span><br><span class="line">  certSANs:</span><br><span class="line">  - localhost</span><br><span class="line">  - 127.0.0.1</span><br><span class="line">  extraArgs:</span><br><span class="line">    feature-gates: EphemeralContainers&#x3D;true</span><br><span class="line">    runtime-config: &quot;&quot;</span><br><span class="line">apiVersion: kubeadm.k8s.io&#x2F;v1beta2</span><br><span class="line">clusterName: kind</span><br><span class="line">controlPlaneEndpoint: kind-control-plane:6443</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆç¡®å®šäº†æƒ³è¦è°ƒè¯•çš„èŠ‚ç‚¹ï¼Œç„¶åä½¿ç”¨ <code>node/...</code> ä½œä¸ºå‚æ•°æ˜¾å¼è¿è¡Œ <code>kubectl debug</code> ä»¥è®¿é—®æˆ‘ä»¬é›†ç¾¤çš„èŠ‚ç‚¹ã€‚åœ¨é‚£ä¹‹åï¼Œå½“è¿æ¥åˆ°Podåï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>chroot /host</code> çªç ´ <code>chroot</code>ï¼Œå¹¶å®Œå…¨è¿›å…¥ä¸»æœºã€‚æœ€åï¼Œä¸ºäº†éªŒè¯æ˜¯å¦çœŸçš„å¯ä»¥çœ‹åˆ°ä¸»æœºä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬äº†æŸ¥çœ‹ä¸€éƒ¨åˆ†çš„ <code>kubeadm.conf</code>ï¼Œæœ€ç»ˆçœ‹åˆ°æˆ‘ä»¬åœ¨æ–‡ç« å¼€å¤´é…ç½®çš„å†…å®¹ <code>feature-gates: EphemeralContainers=true</code>ã€‚</p><h2><span id="å°ç»“">å°ç»“</span></h2><p><strong>èƒ½å¤Ÿå¿«é€Ÿæœ‰æ•ˆåœ°è°ƒè¯•åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒèƒ½æå¤§åœ°å¸®åŠ©è§£å†³é‚£äº›å¦‚æœä¸ç«‹å³è§£å†³å¯èƒ½æœ€ç»ˆä¼šèŠ±è´¹å¤§é‡èµ„é‡‘çš„é—®é¢˜ã€‚</strong> è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ kubectl debug ä¹‹ç±»çš„å·¥å…·èƒ½éšæ„ä½¿ç”¨éå¸¸é‡è¦ï¼Œå³ä½¿å®ƒä»¬å°šæœªæ­£å¼å‘å¸ƒæˆ–é»˜è®¤å¯ç”¨ã€‚å¦‚æœå¯ç”¨ä¸´æ—¶å®¹å™¨ä¸æ˜¯ä¸€ç§é€‰æ‹©ï¼Œé‚£ä¹ˆå°è¯•æ›¿ä»£è°ƒè¯•æ–¹æ³•å¯èƒ½æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä¾‹å¦‚ä½¿ç”¨åŒ…å«æ•…éšœæ’é™¤å·¥å…·çš„åº”ç”¨ç¨‹åºé•œåƒçš„è°ƒè¯•ç‰ˆæœ¬ï¼›æˆ–ä¸´æ—¶æ›´æ”¹ Pod çš„å®¹å™¨å‘½ä»¤ä»¥é˜»æ­¢å…¶å´©æºƒã€‚</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://towardsdatascience.com/the-easiest-way-to-debug-kubernetes-workloads-ff2ff5e3cc75" target="_blank" rel="noopener">https://towardsdatascience.com/the-easiest-way-to-debug-kubernetes-workloads-ff2ff5e3cc75</a></p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ K8sMeetupç¤¾åŒº ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/5bp67tpm" target="_blank" rel="noopener">https://tinyurl.com/5bp67tpm</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä»‹ç»äº† Kubectl debug å’Œä¸´æ—¶å®¹å™¨ç­‰è°ƒè¯•æ–¹æ³•ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼šMartin Heinz&lt;/p&gt;
&lt;p&gt;ç¿»è¯‘ï¼šBach (K8sMeetup)&lt;/p&gt;
&lt;p&gt;æ ¡å¯¹ï¼šæ˜Ÿç©ºä¸‹çš„æ–‡ä»”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è°ƒè¯•å®¹å™¨åŒ–å·¥ä½œè´Ÿè½½å’Œ Pod æ˜¯æ¯ä½ä½¿ç”¨ Kubernetes çš„å¼€å‘äººå‘˜å’Œ DevOps å·¥ç¨‹å¸ˆçš„æ—¥å¸¸ä»»åŠ¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç®€å•åœ°ä½¿ç”¨ &lt;code&gt;kubectl logs&lt;/code&gt; æˆ–è€… &lt;code&gt;kubectl describe pod&lt;/code&gt; ä¾¿è¶³ä»¥æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œä½†æœ‰æ—¶å€™ï¼Œä¸€äº›é—®é¢˜ä¼šç‰¹åˆ«éš¾æŸ¥ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¤§å®¶å¯èƒ½ä¼šå°è¯•ä½¿ç”¨ &lt;code&gt;kubectl exec&lt;/code&gt;ï¼Œä½†æœ‰æ—¶å€™è¿™æ ·ä¹Ÿè¿˜ä¸è¡Œï¼Œå› ä¸º Distroless ç­‰å®¹å™¨ç”šè‡³ä¸å…è®¸é€šè¿‡ SSH è¿›å…¥ shellã€‚é‚£ä¹ˆï¼Œå¦‚æœä»¥ä¸Šæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥äº†ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;æ›´å¥½çš„æ–¹æ³•&quot;&gt;æ›´å¥½çš„æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;å…¶å®æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æ›´åˆé€‚çš„å·¥å…·ã€‚&lt;strong&gt;å¦‚æœåœ¨ Kubernetes ä¸Šè°ƒè¯•å·¥ä½œè´Ÿè½½ï¼Œé‚£ä¹ˆåˆé€‚çš„å·¥å…·å°±æ˜¯ &lt;code&gt;kubectl debug&lt;/code&gt;ã€‚&lt;/strong&gt; è¿™æ˜¯ä¸ä¹…å‰æ·»åŠ çš„ä¸€ä¸ªæ–°å‘½ä»¤ï¼ˆv1.18ï¼‰ï¼Œå…è®¸è°ƒè¯•æ­£åœ¨è¿è¡Œçš„ podã€‚å®ƒä¼šå°†åä¸º EphemeralContainerï¼ˆä¸´æ—¶å®¹å™¨ï¼‰çš„ç‰¹æ®Šå®¹å™¨æ³¨å…¥åˆ°é—®é¢˜ Pod ä¸­ï¼Œè®©æˆ‘ä»¬æŸ¥çœ‹å¹¶æ’é™¤æ•…éšœã€‚&lt;code&gt;kubectl debug&lt;/code&gt; çœ‹èµ·æ¥éå¸¸ä¸é”™ï¼Œä½†è¦ä½¿ç”¨å®ƒéœ€è¦ä¸´æ—¶å®¹å™¨ï¼Œä¸´æ—¶å®¹å™¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸´æ—¶å®¹å™¨å…¶å®æ˜¯ Pod ä¸­çš„å­èµ„æºï¼Œç±»ä¼¼æ™®é€š &lt;code&gt;container&lt;/code&gt;ã€‚ä½†ä¸æ™®é€šå®¹å™¨ä¸åŒçš„æ˜¯ï¼Œä¸´æ—¶å®¹å™¨ä¸ç”¨äºæ„å»ºåº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯ç”¨äºæ£€æŸ¥ã€‚&lt;/strong&gt; æˆ‘ä»¬ä¸ä¼šåœ¨åˆ›å»º Pod æ—¶å®šä¹‰å®ƒä»¬ï¼Œè€Œä½¿ç”¨ç‰¹æ®Šçš„ API å°†å…¶æ³¨å…¥åˆ°è¿çš„è¡Œ Pod ä¸­ï¼Œæ¥è¿è¡Œå‘½ä»¤å¹¶æ£€æŸ¥ Pod ç¯å¢ƒã€‚é™¤äº†è¿™äº›ä¸åŒï¼Œä¸´æ—¶å®¹å™¨è¿˜ç¼ºå°‘ä¸€äº›åŸºæœ¬å®¹å™¨çš„å­—æ®µï¼Œä¾‹å¦‚ &lt;code&gt;ports&lt;/code&gt;ã€&lt;code&gt;resources&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨åŸºæœ¬å®¹å™¨ï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¸èƒ½å‘ Pod æ·»åŠ åŸºæœ¬å®¹å™¨ï¼Œå®ƒä»¬åº”è¯¥æ˜¯ä¸€æ¬¡æ€§çš„ï¼ˆéœ€è¦éšæ—¶åˆ é™¤æˆ–é‡æ–°åˆ›å»ºï¼‰ï¼Œè¿™ä¼šå¯¼è‡´éš¾ä»¥é‡ç°é—®é¢˜ Pod çš„é”™è¯¯ï¼Œæ’é™¤æ•…éšœä¹Ÿä¼šå¾ˆéº»çƒ¦ã€‚è¿™å°±æ˜¯å°†ä¸´æ—¶å®¹å™¨æ·»åŠ åˆ° API çš„åŸå› â€”â€”å®ƒä»¬å…è®¸æˆ‘ä»¬å°†ä¸´æ—¶å®¹å™¨æ·»åŠ åˆ°ç°æœ‰ Podï¼Œä»è€Œæ£€æŸ¥æ­£åœ¨è¿è¡Œçš„ Podã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ä¸´æ—¶å®¹å™¨æ˜¯ä½œä¸º Kubernetes æ ¸å¿ƒçš„ Pod è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œä½†å¾ˆå¤šäººå¯èƒ½è¿˜æ²¡æœ‰å¬è¯´è¿‡ã€‚è¿™æ˜¯å› ä¸ºä¸´æ—¶å®¹å™¨å¤„äºæ—©æœŸ Alpha é˜¶æ®µï¼Œè¿™æ„å‘³ç€é»˜è®¤æƒ…å†µä¸‹ä¸å¯ç”¨ã€‚Alpha é˜¶æ®µçš„èµ„æºå’ŒåŠŸèƒ½å¯èƒ½ä¼šå‡ºç°é‡å¤§å˜åŒ–ï¼Œæˆ–è€…åœ¨ Kubernetes çš„æŸä¸ªæœªæ¥ç‰ˆæœ¬ä¸­è¢«å®Œå…¨åˆ é™¤ã€‚&lt;strong&gt;å› æ­¤ï¼Œè¦ä½¿ç”¨å®ƒä»¬å¿…é¡»åœ¨ kubelet ä¸­ä½¿ç”¨Feature Gateï¼ˆåŠŸèƒ½é—¨ï¼‰æ˜¾å¼å¯ç”¨ã€‚&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/categories/kubernetes/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>HTTP æ•…éšœå›¾è§£æŒ‡å—</title>
    <link href="https://www.hi-linux.com/posts/28200.html"/>
    <id>https://www.hi-linux.com/posts/28200.html</id>
    <published>2021-06-28T01:00:00.000Z</published>
    <updated>2021-06-28T01:47:12.544Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>ç½‘é¡µæ‰“å¼€æŸä¸ªç½‘ç«™ï¼Œå¯ä»¥çœ‹åˆ°æ­£å¸¸çš„å†…å®¹ï¼Œè¿™ä¸ª <code>HTTP Status code</code> æ˜¯ <code>200</code>ï¼Œæ²¡æœ‰æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p><p>ä½†æ˜¯å¶å°”ä¼šçœ‹åˆ°æ•´é¡µç™½åº•ï¼Œä½†æ˜¯ä¸Šé¢å†™ <code>400</code>ã€<code>403</code>ã€<code>500</code>ï¼Œæˆ–è€…ç”»é¢æ¯”è¾ƒå¥½çœ‹çš„ <code>404</code> æ­¤é¡µé¢æ‰¾ä¸åˆ°ç­‰ç­‰ï¼Œé‚£è¿™äº›ä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>åšä¸ºä¸€ä¸ªè¿ç»´å·¥ç¨‹å¸ˆï¼Œé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ åˆåº”è¯¥æ€ä¹ˆåˆ¤æ–­æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†å‘¢ï¼Ÿ</p><a id="more"></a><h2><span id="http-çŠ¶æ€ä»£ç å†³ç­–å›¾">HTTP çŠ¶æ€ä»£ç å†³ç­–å›¾</span></h2><p>å¯¹äºè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆåˆç§° HTTP çŠ¶æ€ä»£ç ï¼‰ï¼Œä»£ç çš„ç¬¬ä¸€ä¸ªæ•°å­—è¡¨ç¤ºäº”ç±»å“åº”ä¸­çš„ä¸€ç±»ã€‚HTTP å®¢æˆ·ç«¯è‡³å°‘è¦è®¤è¯†è¿™äº”ç±»ã€‚</p><p>ç¬¬ä¸€ç±»ä»£ç æ˜¯ä¿¡æ¯æ€§çš„ï¼Œè¡¨ç¤ºåœ¨ç»§ç»­å¤„ç†æ—¶çš„ä¸´æ—¶å“åº”ã€‚<br>ç¬¬äºŒç±»çŠ¶æ€ä»£ç ä¼ è¾¾äº†å®¢æˆ·çš„è¯·æ±‚è¢«æ¥æ”¶å¹¶æˆåŠŸå¤„ç†ã€‚<br>ç¬¬ä¸‰ç±» HTTP çŠ¶æ€ä»£ç è¡¨æ˜ï¼Œä¸ºäº†å®Œæˆè¯·æ±‚ï¼Œéœ€è¦ä»£è¡¨å®¢æˆ·é‡‡å–è¿›ä¸€æ­¥çš„è¡ŒåŠ¨ï¼Œå¦‚ URL é‡å®šå‘ã€‚<br>ç¬¬å››ç±»ä»£ç æ˜¯åœ¨å®¢æˆ·å‡ºé”™æ—¶ä½¿ç”¨çš„ã€‚<br>ç¬¬äº”ç±»çŠ¶æ€ä»£ç è¡¨ç¤ºæœåŠ¡å™¨å‡ºäº†é”™è¯¯ï¼Œæ— æ³•å®Œæˆä¸€ä¸ªæ˜æ˜¾æœ‰æ•ˆçš„è¯·æ±‚ã€‚</p><table><thead><tr><th style="text-align:left">1xx Informational</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">100 - Continue</td><td style="text-align:left">The server has received the initial request, and the client should continue sending the remainder of the request.</td></tr><tr><td style="text-align:left">101 - Switching Protocols</td><td style="text-align:left">The server is acknowledging that it is switching protocols based on the requesterÃ•s instructions.</td></tr><tr><td style="text-align:left">102 - Processing Request (WebDAV; RFC 2518)</td><td style="text-align:left">To avoid timing out, the server acknowledges that a request has been received and is being processed, though no response is available.</td></tr><tr><td style="text-align:left">103 - Checkpoint</td><td style="text-align:left">Resumes aborted PUT or POST requests in Resumable HTTP Requests Proposal.</td></tr><tr><td style="text-align:left">122 - Too Long</td><td style="text-align:left">An IE7-only code that indicates that the URI is longer than the maximum 2,083 characters.</td></tr><tr><td style="text-align:left">200 - OK</td><td style="text-align:left">The standard response for successful HTTP requests. Varies according to request method. For GET requests, responses contain an entity corresponding to the requested resource. For POST requests, responses contain an entity describing or containing the result of the action.</td></tr><tr><td style="text-align:left">201 - Created</td><td style="text-align:left">The request has been fulfilled, resulting in the creation of a new resource.</td></tr><tr><td style="text-align:left">202 - Accepted</td><td style="text-align:left">The request has been accepted, but processing is still pending. Upon processing, the request might be disallowed, meaning it might or might not actually be acted upon.</td></tr><tr><td style="text-align:left">203 - Non-Authoritative Information (since HTTP/1.1)</td><td style="text-align:left">The request has been successfully processed by the server, but the information being returned may be from another source.</td></tr><tr><td style="text-align:left">204 - No Content</td><td style="text-align:left">The request has been successfully processed by the server, but no content is being returned. Often a successful delete request.</td></tr><tr><td style="text-align:left">205 - Reset Content</td><td style="text-align:left">Though the request was successfully processed, no content is being returned and the requester must reset the document view.</td></tr><tr><td style="text-align:left">206 - Partial Content (RFC 7233)</td><td style="text-align:left">Because of the range header sent by the client, only part of the resource is being delivered by the server.</td></tr><tr><td style="text-align:left">207 - Multi-Status (WebDAV; RFC 4918)</td><td style="text-align:left">Depending on the number of sub-requests made by the client, the XML message that follows might contain multiple separate response codes.</td></tr><tr><td style="text-align:left">208 - Already Reported (WebDAV; RFC 5842)</td><td style="text-align:left">The results have been included in a previous reply and are not being returned again.</td></tr><tr><td style="text-align:left">226 - IM Used (RFC 3229)</td><td style="text-align:left">A request for this resource has been fulfilled by the server. The response represents the result of one or more instance manipulations for the current instance.</td></tr><tr><td style="text-align:left">2xx Success</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">300 - Multiple Choices</td><td style="text-align:left">Indicates multiple options for the resource delivered, such as format options for video or list files with different extensions. The user can select preferred representation and redirect the request to that location.</td></tr><tr><td style="text-align:left">301 - Moved Permanently</td><td style="text-align:left">This request and all future ones should be directed to the given URI.</td></tr><tr><td style="text-align:left">302 - Found</td><td style="text-align:left">Indicates that the requested resource can be found temporarily via an alternative URI. Because many popular user agent implementations treat 302 responses similar to 303 responses, both status codes 303 and 307 were added to allow servers more specificity.</td></tr><tr><td style="text-align:left">303 - See Other (since HTTP/1.1)</td><td style="text-align:left">Indicates the response to the request can be found via alternative URI using GET method. Many pre-HTTP/1.1 user agents do not recognize 303, in which case the 302 status code can be used instead.</td></tr><tr><td style="text-align:left">304 - Not Modified (RFC 7232)</td><td style="text-align:left">Indicates that the resource has not been modified since last requested, and there is no need to retransmit as the client has a previously downloaded copy.</td></tr><tr><td style="text-align:left">305 - Use Proxy (since HTTP/1.1)</td><td style="text-align:left">Requested resource is located elsewhere and can be accessed through a proxy provided in the response. For security reasons, HTTP clients like Firefox and Internet Explorer do not correctly handle 305 responses.</td></tr><tr><td style="text-align:left">306 - Switch Proxy</td><td style="text-align:left">Originally indicated that subsequent requests should use the proxy specified. This status code is no longer used.</td></tr><tr><td style="text-align:left">307 - Temporary Redirect (since HTTP/1.1)</td><td style="text-align:left">Indicates that the request should be repeated with a different URI as specified, but future requests should use the original URI.</td></tr><tr><td style="text-align:left">308 - Permanent Redirect (RFC 7538)</td><td style="text-align:left">This and all future requests should be repeated using a different URI as specified. Unlike 301 and 302, with 307 and 308 status codes the HTTP method should not change.</td></tr><tr><td style="text-align:left">3xx Redirection</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">400 - Bad Request</td><td style="text-align:left">The request cannot be processed by the server because of a client error such as syntax, framing, or routing.</td></tr><tr><td style="text-align:left">401 - Unauthorized</td><td style="text-align:left">Indicates that authentication is required and was either not provided or has failed. If the request already included authorization credentials, then the 401 status code indicates that those credentials were not accepted.</td></tr><tr><td style="text-align:left">402 - Payment Required</td><td style="text-align:left">Reserved for future use. Originally intended to be part of a digital cash or micropayment model, this code is not currently widely used.</td></tr><tr><td style="text-align:left">403 - Forbidden</td><td style="text-align:left">Indicates that though the request was valid, the server refuses to respond to it. Unlike the 401 status code, providing authentication will not change the outcome.</td></tr><tr><td style="text-align:left">404 - Not Found</td><td style="text-align:left">Indicates that the requested resource could not be found but may be available in the future.</td></tr><tr><td style="text-align:left">405 - Method Not Allowed</td><td style="text-align:left">The request method is not supported by the resource requested, as when using GET on a form that requires data to be presented via POST.</td></tr><tr><td style="text-align:left">406 - Not Acceptable</td><td style="text-align:left">The requested content is not acceptable according to the requestÃ•s Accept headers.</td></tr><tr><td style="text-align:left">407 - Proxy Authentication Required (RFC 7235)</td><td style="text-align:left">The client must first authenticate itself with the proxy.</td></tr><tr><td style="text-align:left">408 - Request Timeout</td><td style="text-align:left">Indicates that the server timed out while waiting for the request, though the client may repeat the request without modifications.</td></tr><tr><td style="text-align:left">409 - Conflict</td><td style="text-align:left">There is a conflict in the request that prevents it from being processedÃ‘for example, an edit conflict in the case of multiple updates.</td></tr><tr><td style="text-align:left">410 - Gone</td><td style="text-align:left">The requested resource is no longer available and will not be available again, as when a resource has been intentionally removed and should be purged. The client should not request the resource again.</td></tr><tr><td style="text-align:left">411 - Length Required</td><td style="text-align:left">The request did not specify the length of its content, though length is required by the requested source.</td></tr><tr><td style="text-align:left">412 - Precondition Failed (RFC 7232)</td><td style="text-align:left">Indicates that the server does not meet the request preconditions as specified by requester.</td></tr><tr><td style="text-align:left">413 - Request Entity Too Large</td><td style="text-align:left">Indicates that the request is larger than the server can or will process.</td></tr><tr><td style="text-align:left">414 - Request-URI Too Long</td><td style="text-align:left">The provided URI was too long to be processed by the server. When resulting from too much data encoded as GET request query-string, convert to a POST request.</td></tr><tr><td style="text-align:left">415 - Unsupported Media Type</td><td style="text-align:left">The server does not support the media type included by the request entity.</td></tr><tr><td style="text-align:left">416 - Requested Range Not Satisfiable (RFC 7233)</td><td style="text-align:left">Indicates that the client has requested a portion of the file that the server is unable to provide, such as a part of the file that lies beyond the end of the file.</td></tr><tr><td style="text-align:left">417 - Expectation Failed</td><td style="text-align:left">Indicates that the server is unable to meet the requirements of Expect request-header field.</td></tr><tr><td style="text-align:left">418 - Iâ€™m a teapot (RFC 2324)</td><td style="text-align:left">Defined in 1998 as a traditional IETF April FoolÃ•s joke and is not expected to be implemented by actual HTTP servers. The RFC specifies that this code should be returned by teapots requested to brew coffee.</td></tr><tr><td style="text-align:left">419 - Authentication Timeout (not in RFC 2616)</td><td style="text-align:left">Indicates that previously valid authentication has expired. Though not a part of the HTTP standard, the 419 status code is used as an alternative to 401 to differentiate from unauthorized clients being denied access.</td></tr><tr><td style="text-align:left">420 - Enhance Your Calm (Twitter)</td><td style="text-align:left">Returned by version 1 of the Twitter Search and Trends API when the client is being rate limited. Not a part of the HTTP standard.</td></tr><tr><td style="text-align:left">420 - Method Failure (Spring Framework)</td><td style="text-align:left">Defined by Spring in the HttpStatus class to be used when a method fails. Not a part of the HTTP standard, this status code is deprecated by Spring.</td></tr><tr><td style="text-align:left">421 - Misdirected Request (HTTP/2)</td><td style="text-align:left">Indicates that the request is directed at a server that is unable to produce a response.</td></tr><tr><td style="text-align:left">422 - Unprocessable Entity (WebDAV; RFC 4918)</td><td style="text-align:left">Indicates that the request is unable to be followed due to semantic errors.</td></tr><tr><td style="text-align:left">423 - Locked (WebDAV; RFC 4918)</td><td style="text-align:left">Indicates that the resource that is being accessed is locked.</td></tr><tr><td style="text-align:left">424 - Failed Dependency (WebDAV; RFC 4918)</td><td style="text-align:left">Indicates that the request failed because of the failure of a previous request.</td></tr><tr><td style="text-align:left">426 - Upgrade Required</td><td style="text-align:left">Indicates that the client should switch to a different protocol as specified in the Upgrade header field.</td></tr><tr><td style="text-align:left">428 - Precondition Required (RFC 6585)</td><td style="text-align:left">Indicates that origin server requires the request to be conditional to prevent the Ã’lost updateÃ“ problem.</td></tr><tr><td style="text-align:left">429 - Too Many Requests (RFC 6585)</td><td style="text-align:left">Occurs when the user has sent too many requests in a given amount of time. For use with rate limiting.</td></tr><tr><td style="text-align:left">431 - Request Header Fields Too Large (RFC 6585)</td><td style="text-align:left">Indicates that the request cannot be processed by the server because a single header field or all headers are collectively too large.</td></tr><tr><td style="text-align:left">440 - Login Timeout (Microsoft)</td><td style="text-align:left">Microsoft extension indicating that the session has expired.</td></tr><tr><td style="text-align:left">444 - No Response (Nginx)</td><td style="text-align:left">In Nginx logs as a malware deterrent, indicates that the server returned no information and closed the connection.</td></tr><tr><td style="text-align:left">449 - Retry With (Microsoft)</td><td style="text-align:left">Microsoft extension indicating that the request should be retried after performing a specific action.</td></tr><tr><td style="text-align:left">450 - Blocked by Windows Parental Controls (Microsoft)</td><td style="text-align:left">Microsoft extension indicating that Windows Parental Controls are turned on and blocking access to the page in question.</td></tr><tr><td style="text-align:left">451 - Redirect (Microsoft)</td><td style="text-align:left">In Exchange ActiveSync, used when there is a more efficient server or the server cannot access the clientÃ•s mailbox. Client should re-run the HTTP Autodiscovery protocol to find a better suited server.</td></tr><tr><td style="text-align:left">451 - Unavailable For Legal Reasons (Internet draft)</td><td style="text-align:left">Indicates that resource access has been denied for legal reasons such as censorship or government-mandated blocked access. Defined in the Internet draft as â€œA New HTTP Status Code for Legally-restricted Resources.â€ References the dystopian novel Fahrenheit 451 (1953), in which books are outlawed.</td></tr><tr><td style="text-align:left">494 - Request Header Too Large (Nginx)</td><td style="text-align:left">Similar to 431, Nginx internal code earlier in version 0.9.4.</td></tr><tr><td style="text-align:left">495 - Cert Error (Nginx)</td><td style="text-align:left">Nginx internal code indicating that SSL client certificate error has occurred</td></tr><tr><td style="text-align:left">496 - No Cert (Nginx)</td><td style="text-align:left">Nginx internal code indicating that the client didnâ€™t provide certificate.</td></tr><tr><td style="text-align:left">497 - HTTP to HTTPS (Nginx)</td><td style="text-align:left">Nginx internal code indicating that plain HTTP requests were sent to HTTPS port.</td></tr><tr><td style="text-align:left">498 - Token Expired/Invalid (Esri)</td><td style="text-align:left">Returned by ArcGIS for Server when token is expired or otherwise invalid.</td></tr><tr><td style="text-align:left">499 - Client Closed Request (Nginx)</td><td style="text-align:left">In Nginx logs, indicates that the connection has been closed by the client while the server is still processing its request, in which case the server is unable to send a status code back.</td></tr><tr><td style="text-align:left">499 - Token Required (Esri)</td><td style="text-align:left">Returned by ArcGIS for Server when a token is required but was not submitted.</td></tr><tr><td style="text-align:left">4xx Client Error</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">500 - Internal Server Error</td><td style="text-align:left">Generic error message for when there is no suitable specific information. Indicates an unexpected condition.</td></tr><tr><td style="text-align:left">501 - Not Implemented</td><td style="text-align:left">Indicates that the server does not recognize the method or is unable to fulfill it. Can indicate future availability.</td></tr><tr><td style="text-align:left">502 - Bad Gateway</td><td style="text-align:left">Indicates that server, when acting as gateway or proxy, received an invalid response from the upstream server.</td></tr><tr><td style="text-align:left">503 - Service Unavailable</td><td style="text-align:left">Indicates that the server is temporarily unavailable, often because of maintenance or overloading.</td></tr><tr><td style="text-align:left">504 - Gateway Timeout</td><td style="text-align:left">Indicates that the server, when acting as gateway or proxy, did not receive a timely response from the upstream server.</td></tr><tr><td style="text-align:left">505 - HTTP Version Not Supported</td><td style="text-align:left">Occurs when the server does not support the requestÃ•s HTTP protocol version.</td></tr><tr><td style="text-align:left">506 - Variant Also Negotiates (RFC 2295)</td><td style="text-align:left">Indicates that transparent content negotiation for the request is causing a circular reference.</td></tr><tr><td style="text-align:left">507 - Insufficient Storage (WebDAV; RFC 4918)</td><td style="text-align:left">Occurs when the server cannot store the representation necessary for completing the request.</td></tr><tr><td style="text-align:left">508 - Loop Detected (WebDAV; RFC 5842)</td><td style="text-align:left">Indicates that the server detected an infinite loop while processing the request.</td></tr><tr><td style="text-align:left">509 - Bandwidth Limit Exceeded (Apache BW/Limited Extension)</td><td style="text-align:left">Use unknown. Status code not specified by any RFCs.</td></tr><tr><td style="text-align:left">510 - Not Extended (RFC 2774)</td><td style="text-align:left">Indicates that the server requires further extensions in order to fulfill the request.</td></tr><tr><td style="text-align:left">511 - Network Authentication Required (RFC 6585)</td><td style="text-align:left">Client must authenticate in order to gain network access. Often used by proxies that control network access such as Wi-Fi hotspots.</td></tr><tr><td style="text-align:left">598 - Network Read Timeout Error (Unknown)</td><td style="text-align:left">Used by Microsoft HTTP proxies to indicate a network read time-out behind the proxy to a client in front of the proxy. Not specified in any RFCs.</td></tr><tr><td style="text-align:left">599 - Network connect timeout error (Unknown)</td><td style="text-align:left">Used by Microsoft HTTP proxies to indicate a network connect time-out behind the proxy to a client in front of the proxy. Not specified in any RFCs.</td></tr><tr><td style="text-align:left">5xx server error</td><td style="text-align:left"></td></tr></tbody></table><p>ä¸ºäº†æ›´ç›´è§‚çš„å¿«é€Ÿå®šä½é—®é¢˜ï¼Œæœ‰å¤§ç¥å°†è¿™äº”ç±» HTTP çŠ¶æ€ç åšæˆä¸€ä¸ªå†³ç­–å›¾ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çœ‹åˆ° HTTP çŠ¶æ€ç”± <code>1xx ~ 5xx</code> çš„å«ä¹‰ï¼Œå¹¶æä¾›äº†å¸¸ç”¨è§£å†³æ€è·¯ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/http-decision-diagram-2021-06-23-HqYYCV.png" alt></p><p>æœ‰äº†è¿™å¼ å›¾åï¼Œæ˜¯ä¸æ˜¯å½“ä½ å†é‡åˆ° <code>HTTP</code> æŠ¥é”™æ—¶ï¼Œå°±å¯ä»¥æ„‰å¿«çš„<strong>å°†é”…æ‰”ç»™å¼€å‘äº†</strong>å‘¢ï¼Œå“ˆå“ˆï¼æ›´å¤š HTTP æ’é”™æŒ‡å—å¯å‚è€ƒï¼š <a href="https://documentation.solarwinds.com/en/success_center/loggly/content/admin/troubleshooting-http.htm" target="_blank" rel="noopener">Troubleshooting HTTP</a>ã€‚</p><p><strong>å¦‚éœ€ã€ HTTP æ•…éšœå›¾è§£æŒ‡å— ã€ é«˜æ¸…ç‰ˆï¼Œå¯åœ¨å…¬ä¼—å·å¯¹è¯æ¡†å›å¤å…³é”®å­—ï¼šã€Œ<code>HTTPTroubleshoot</code>ã€å…è´¹è·å–ã€‚</strong></p><h2><span id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</span></h2><ul><li><a href="https://tinyurl.com/srs4z5vj" target="_blank" rel="noopener">https://tinyurl.com/srs4z5vj</a></li><li><a href="https://www.loggly.com/blog/http-status-code-diagram/" target="_blank" rel="noopener">https://www.loggly.com/blog/http-status-code-diagram/</a></li><li><a href="https://documentation.solarwinds.com/en/success_center/loggly/content/admin/troubleshooting-http.htm" target="_blank" rel="noopener">https://documentation.solarwinds.com/en/success_center/loggly/content/admin/troubleshooting-http.htm</a></li></ul></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘é¡µæ‰“å¼€æŸä¸ªç½‘ç«™ï¼Œå¯ä»¥çœ‹åˆ°æ­£å¸¸çš„å†…å®¹ï¼Œè¿™ä¸ª &lt;code&gt;HTTP Status code&lt;/code&gt; æ˜¯ &lt;code&gt;200&lt;/code&gt;ï¼Œæ²¡æœ‰æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¶å°”ä¼šçœ‹åˆ°æ•´é¡µç™½åº•ï¼Œä½†æ˜¯ä¸Šé¢å†™ &lt;code&gt;400&lt;/code&gt;ã€&lt;code&gt;403&lt;/code&gt;ã€&lt;code&gt;500&lt;/code&gt;ï¼Œæˆ–è€…ç”»é¢æ¯”è¾ƒå¥½çœ‹çš„ &lt;code&gt;404&lt;/code&gt; æ­¤é¡µé¢æ‰¾ä¸åˆ°ç­‰ç­‰ï¼Œé‚£è¿™äº›ä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åšä¸ºä¸€ä¸ªè¿ç»´å·¥ç¨‹å¸ˆï¼Œé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ åˆåº”è¯¥æ€ä¹ˆåˆ¤æ–­æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†å‘¢ï¼Ÿ&lt;/p&gt;
    
    </summary>
    
    
      <category term="HTTP" scheme="https://www.hi-linux.com/categories/HTTP/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="HTTP" scheme="https://www.hi-linux.com/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>CentOS ä¹‹çˆ¶åˆ›é€ çš„ Rocky Linux 8.4 æ­£å¼ç‰ˆå‘å¸ƒäº†ï¼(å†…é™„é•œåƒä¸‹è½½åœ°å€ï¼‰</title>
    <link href="https://www.hi-linux.com/posts/24084.html"/>
    <id>https://www.hi-linux.com/posts/24084.html</id>
    <published>2021-06-25T01:00:00.000Z</published>
    <updated>2021-06-25T01:51:52.060Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><blockquote><p>è·Ÿéšä¸Šä¸ªæœˆçš„ Red Hat Enterprise Linux 8.4 ç‰ˆæœ¬çš„å‘å¸ƒï¼Œå†åˆ°åæ¥çš„åŸºäº RHEL 8.4 çš„ Alma Linuxã€Oracle Linux å’Œ CentOS 8çš„æ›´æ–°ï¼ŒRockyLinux ä»Šå¤©çš„ v8.4 ç‰ˆæœ¬å·²ç»å…¨é¢ä¸Šçº¿ã€‚<strong>Rocky Linux æ˜¯CentOSåˆ›å§‹äººGreg Kurtzerç­‰äººç„å‡†çš„å…è´¹ RHELæ›¿ä»£å“ã€‚</strong></p></blockquote><p>Rocky Linux 8.4 ç°å·²æ­£å¼å‘å¸ƒã€‚Rocky Linux æ˜¯ä¸€ä¸ªç¤¾åŒºç‰ˆçš„ä¼ä¸šæ“ä½œç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ Red Hat Enterprise Linux 8.4 å®ç° 100% çš„ bug-for-bug å…¼å®¹ã€‚å®˜æ–¹è¡¨ç¤ºï¼Œç”±äºè¿™æ˜¯ Rocky Linux çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥å‘å¸ƒè¯´æ˜åªåæ˜ äº†å„ç‰ˆæœ¬ä¹‹é—´ä¸Šæ¸¸åŠŸèƒ½çš„å˜åŒ–ã€‚ä¸”ä¸æ”¯æŒä» Rocky Linux 8.3 RC1ã€Rocky Linux 8.4 RC1 æˆ–ä»»ä½•å…¶ä»–å€™é€‰ç‰ˆæœ¬è¿ç§»åˆ° Rocky Linux 8.4ã€‚</p><p>Rocky Linux å›¢é˜Ÿæä¾›äº† migrate2rocky å·¥å…·ç”¨äºå¸®åŠ©ä½¿ç”¨è€…ä»å…¶ä»–ä¼ä¸š Linux ç³»ç»Ÿè¿ç§»åˆ° Rocky Linux 8.4ã€‚æ­¤å·¥å…·å·²ç»è¿‡æµ‹è¯•å¹¶ä¸”å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†ä½¿ç”¨æ—¶éœ€è‡ªæ‹…é£é™©ã€‚</p><h2><span id="æ–°æ¨¡å—">æ–°æ¨¡å—</span></h2><p>Rocky Linux 8.4 ä¸­å…¨æ–°çš„ module streams åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>Python 3.9</li><li>SWIG 4.0</li><li>Subversion 1.14</li><li>Redis 6</li><li>PostgreSQL 13</li><li>MariaDB 10.5</li></ul><a id="more"></a><h2><span id="ä¸»è¦å˜åŒ–">ä¸»è¦å˜åŒ–</span></h2><p>Rocky Linux 8.4 çš„ä¸»è¦å˜åŒ–ä½“ç°åœ¨å®‰å…¨ã€ç½‘ç»œã€å†…æ ¸å’Œé«˜å¯ç”¨ä»¥åŠé›†ç¾¤ç­‰æ–¹é¢ã€‚</p><h3><span id="å®‰å…¨">å®‰å…¨</span></h3><ul><li>Libreswan æä¾›çš„ IPsec VPN ç°åœ¨æ”¯æŒ IKEv2 çš„ TCP å°è£…å’Œå®‰å…¨æ ‡ç­¾</li><li>scap-security-guide å·²æ›´æ–°åˆ°åˆ° 0.1.54 ï¼ŒOpenSCAP å·²æ›´æ–°åˆ° 1.3.4ã€‚è¿™æ›´æ–°æä¾›äº†å®è´¨æ€§çš„æ”¹è¿›ï¼ŒåŒ…æ‹¬ä¼˜åŒ–å†…å­˜ç®¡ç†</li><li>fapolicyd æ¡†æ¶ç°åœ¨æä¾›å®Œæ•´æ€§æ£€æŸ¥ï¼Œå¹¶ä¸” RPM æ’ä»¶æ³¨å†Œç”± YUM åŒ…ç®¡ç†å™¨æˆ– RPM åŒ…ç®¡ç†å™¨æ›´æ–°</li></ul><h3><span id="ç½‘ç»œ">ç½‘ç»œ</span></h3><ul><li>å®Œå…¨æ”¯æŒ Nmstateï¼ˆä¸»æœºçš„ç½‘ç»œ APIï¼‰ï¼Œè¿™äº› nmstate åŒ…æä¾›äº†ä¸€ä¸ªåº“å’Œ nmstatectl å‘½ä»¤è¡Œï¼Œä»¥å£°æ˜æ–¹å¼ç®¡ç†ä¸»æœºç½‘ç»œè®¾ç½®</li><li>æ”¯æŒ MPLSï¼ˆå¤šåè®®æ ‡ç­¾äº¤æ¢ï¼‰</li><li>iproute2 å¼•å…¥äº†ä¸‰ä¸ªæ–°çš„æµé‡æ§åˆ¶ (tc) æ“ä½œï¼š<code>mac_push</code>, <code>push_eth</code>, å’Œ<code>pop_eth</code>ï¼Œå¹¶æ·»åŠ  MPLS æ ‡ç­¾</li></ul><h3><span id="å†…æ ¸">å†…æ ¸</span></h3><ul><li>ä¸»åŠ¨å‹ç¼©åŠŸèƒ½ï¼šåœ¨å‘å‡ºåˆ†é…è¯·æ±‚ä¹‹å‰å®šæœŸå¯åŠ¨å†…å­˜å‹ç¼©å·¥ä½œã€‚å› æ­¤ï¼Œé™ä½äº†ç‰¹å®šå†…å­˜åˆ†é…è¯·æ±‚çš„å»¶è¿Ÿã€‚</li><li>æä¾›äº†ç”¨äºæ§åˆ¶ç»„æŠ€æœ¯çš„å¹³æ¿å†…å­˜æ§åˆ¶å™¨ã€‚Slab å†…å­˜æ§åˆ¶å™¨ä¼˜åŒ–äº†å†…å­˜çš„åˆ©ç”¨ç‡ï¼Œå¹¶ä¸”èƒ½å¤Ÿå°†å†…å­˜è®°å¸ä»é¡µé¢çº§åˆ«è½¬ç§»åˆ°å¯¹è±¡çº§åˆ«ã€‚å› æ­¤ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ€»å†…æ ¸å†…å­˜å ç”¨é‡æ˜¾è‘—ä¸‹é™ï¼Œå¹¶æ”¹å–„äº†å†…å­˜ç¢ç‰‡æƒ…å†µã€‚</li><li>æ—¶é—´å‘½åç©ºé—´åŠŸèƒ½ï¼šæ­¤åŠŸèƒ½é€‚ç”¨äºæ›´æ”¹ Linux å®¹å™¨å†…çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ç°åœ¨ä¹Ÿå¯ä»¥åœ¨æ£€æŸ¥ç‚¹æ¢å¤åè¿›è¡Œå®¹å™¨å†…æ—¶é’Ÿçš„è°ƒæ•´ã€‚</li><li>æ”¯æŒç¬¬ 8ã€ 9 ä»£è‹±ç‰¹å°”é…·ç¿å¤„ç†å™¨ä¸­è®¾ç½®çš„é”™è¯¯æ£€æµ‹å’Œçº æ­£ (EDAC) å†…æ ¸æ¨¡å—ã€‚</li></ul><h3><span id="é«˜å¯ç”¨å’Œé›†ç¾¤">é«˜å¯ç”¨å’Œé›†ç¾¤</span></h3><ul><li>ç»´æŠ¤çŠ¶æ€æ•°æ®çš„æŒä¹…æ€§ï¼šPacemaker èµ„æºä»£ç†å¯ä»¥å¼‚æ­¥æ£€æµ‹æ•…éšœå¹¶ç«‹å³å°†æ•…éšœæ³¨å…¥ Pacemakerï¼Œè€Œæ— éœ€ç­‰å¾…ä¸‹ä¸€ä¸ªç›‘æ§é—´éš”ã€‚æŒä¹…æ€§èµ„æºä»£ç†è¿˜å¯ä»¥åŠ å¿«å…·æœ‰é«˜çŠ¶æ€å¼€é”€çš„æœåŠ¡çš„é›†ç¾¤å“åº”æ—¶é—´ï¼Œå› ä¸ºç»´æŠ¤çŠ¶æ€æ•°æ®å¯ä»¥é€šè¿‡ä¸ä¸ºæ¯ä¸ªæ“ä½œå•ç‹¬è°ƒç”¨çŠ¶æ€æ¥å‡å°‘é›†ç¾¤æ“ä½œï¼ˆä¾‹å¦‚å¯åŠ¨ã€åœæ­¢å’Œç›‘æ§ï¼‰çš„çŠ¶æ€å¼€é”€ã€‚</li></ul><h3><span id="ç¼–è¯‘å™¨å’Œå¼€å‘å·¥å…·">ç¼–è¯‘å™¨å’Œå¼€å‘å·¥å…·</span></h3><p>ä»¥ä¸‹ç¼–è¯‘å™¨å·¥å…·é›†å·²æ›´æ–°ï¼š</p><ul><li>GCC Toolset 10</li><li>LLVM Toolset 11.0.0</li><li>Rust Toolset 1.49.0</li><li>Go Toolset 1.15.7</li></ul><h3><span id="èº«ä»½ç®¡ç†">èº«ä»½ç®¡ç†</span></h3><ul><li>Rocky Linux 8.4 æä¾›äº† Ansible æ¨¡å—ï¼Œç”¨äºè‡ªåŠ¨åŒ–ç®¡ç†èº«ä»½ç®¡ç†ï¼ˆIdMï¼‰ä¸­åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼Œä¸€ä¸ª Ansible role ç”¨äºå¤‡ä»½å’Œæ¢å¤ IdM æœåŠ¡å™¨ï¼Œä»¥åŠä¸€ä¸ª Ansible æ¨¡å—ç”¨äºä½ç½®ç®¡ç†ã€‚</li></ul><p>æ›´å¤šè¯¦æƒ…å¯æŸ¥çœ‹ï¼š<a href="https://docs.rockylinux.org/zh_CN/release_notes/8.4/" target="_blank" rel="noopener">https://docs.rockylinux.org/zh_CN/release_notes/8.4/</a></p><p><strong>Rocky Linux 8.4 æ­£å¼ç‰ˆå®˜æ–¹ä¸‹è½½åœ°å€ï¼š</strong> <a href="https://rockylinux.org/download/" target="_blank" rel="noopener">https://rockylinux.org/download/</a></p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ å¼€æºä¸­å›½ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/3b2p5mv3" target="_blank" rel="noopener">https://tinyurl.com/3b2p5mv3</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è·Ÿéšä¸Šä¸ªæœˆçš„ Red Hat Enterprise Linux 8.4 ç‰ˆæœ¬çš„å‘å¸ƒï¼Œå†åˆ°åæ¥çš„åŸºäº RHEL 8.4 çš„ Alma Linuxã€Oracle Linux å’Œ CentOS 8çš„æ›´æ–°ï¼ŒRockyLinux ä»Šå¤©çš„ v8.4 ç‰ˆæœ¬å·²ç»å…¨é¢ä¸Šçº¿ã€‚&lt;strong&gt;Rocky Linux æ˜¯CentOSåˆ›å§‹äººGreg Kurtzerç­‰äººç„å‡†çš„å…è´¹ RHELæ›¿ä»£å“ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Rocky Linux 8.4 ç°å·²æ­£å¼å‘å¸ƒã€‚Rocky Linux æ˜¯ä¸€ä¸ªç¤¾åŒºç‰ˆçš„ä¼ä¸šæ“ä½œç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ Red Hat Enterprise Linux 8.4 å®ç° 100% çš„ bug-for-bug å…¼å®¹ã€‚å®˜æ–¹è¡¨ç¤ºï¼Œç”±äºè¿™æ˜¯ Rocky Linux çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥å‘å¸ƒè¯´æ˜åªåæ˜ äº†å„ç‰ˆæœ¬ä¹‹é—´ä¸Šæ¸¸åŠŸèƒ½çš„å˜åŒ–ã€‚ä¸”ä¸æ”¯æŒä» Rocky Linux 8.3 RC1ã€Rocky Linux 8.4 RC1 æˆ–ä»»ä½•å…¶ä»–å€™é€‰ç‰ˆæœ¬è¿ç§»åˆ° Rocky Linux 8.4ã€‚&lt;/p&gt;
&lt;p&gt;Rocky Linux å›¢é˜Ÿæä¾›äº† migrate2rocky å·¥å…·ç”¨äºå¸®åŠ©ä½¿ç”¨è€…ä»å…¶ä»–ä¼ä¸š Linux ç³»ç»Ÿè¿ç§»åˆ° Rocky Linux 8.4ã€‚æ­¤å·¥å…·å·²ç»è¿‡æµ‹è¯•å¹¶ä¸”å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†ä½¿ç”¨æ—¶éœ€è‡ªæ‹…é£é™©ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ–°æ¨¡å—&quot;&gt;æ–°æ¨¡å—&lt;/h2&gt;
&lt;p&gt;Rocky Linux 8.4 ä¸­å…¨æ–°çš„ module streams åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Python 3.9&lt;/li&gt;
&lt;li&gt;SWIG 4.0&lt;/li&gt;
&lt;li&gt;Subversion 1.14&lt;/li&gt;
&lt;li&gt;Redis 6&lt;/li&gt;
&lt;li&gt;PostgreSQL 13&lt;/li&gt;
&lt;li&gt;MariaDB 10.5&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="CentOS" scheme="https://www.hi-linux.com/categories/CentOS/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/tags/Kubernetes/"/>
    
      <category term="CentOS" scheme="https://www.hi-linux.com/tags/CentOS/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€æ–‡è¯»æ‡‚ eBPF å¯¹ Kubernetes å¯è§‚æµ‹çš„é‡è¦æ€§</title>
    <link href="https://www.hi-linux.com/posts/14561.html"/>
    <id>https://www.hi-linux.com/posts/14561.html</id>
    <published>2021-06-23T01:00:00.000Z</published>
    <updated>2021-06-23T04:32:40.108Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><blockquote><p>ä½œè€…ï¼šLavanya Chockalingamï¼ŒNew Relic é«˜çº§äº§å“è¥é”€ç»ç†ã€‚æœ€åˆå‘è¡¨åœ¨ <strong>New Relic çš„åšå®¢[1]</strong>ã€‚</p></blockquote><p>åœ¨ Linux å†…æ ¸ä¸­å·¥ä½œæ˜¯å®ç°å®‰å…¨æ€§ã€ç½‘ç»œå’Œå¯è§‚å¯Ÿæ€§ç‰¹æ€§çš„ç†æƒ³é€‰æ‹©ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯æ²¡æœ‰æŒ‘æˆ˜ã€‚æ— è®ºæ˜¯ä¿®æ”¹å†…æ ¸æºä»£ç ï¼Œè¿˜æ˜¯æ·»åŠ æ¨¡å—ï¼Œå¼€å‘äººå‘˜ä¼ ç»Ÿä¸Šå‘ç°ä»–ä»¬è¦ä¸éš¾ä»¥è°ƒè¯•çš„å¤æ‚åŸºç¡€è®¾æ–½å’ŒæŠ½è±¡å±‚ä½œæ–—äº‰ã€‚<strong>Extended BPF</strong>[2]ï¼ˆeBPFï¼‰è§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>Extended Berkeley Packet Filterï¼ˆeBPFï¼‰æ˜¯ä¸€ç§å†…æ ¸æŠ€æœ¯ï¼ˆä» Linux 4.x å¼€å§‹ï¼‰ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨æ— éœ€æ›´æ”¹å†…æ ¸æºä»£ç ï¼Œæˆ–æ·»åŠ é¢å¤–æ¨¡å—çš„æƒ…å†µä¸‹è¿è¡Œã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸º Linux å†…æ ¸ä¸­çš„è½»é‡çº§æ²™ç®±è™šæ‹Ÿæœºï¼ˆVMï¼‰ï¼Œç¨‹åºå‘˜å¯ä»¥åœ¨å…¶ä¸­è¿è¡Œ BPF å­—èŠ‚ç ï¼Œä»è€Œåˆ©ç”¨ç‰¹å®šçš„å†…æ ¸èµ„æºã€‚</p><p>ä½¿ç”¨ eBPF æ¶ˆé™¤äº†æ›´æ”¹å†…æ ¸æºä»£ç çš„éœ€è¦ï¼Œå¹¶ç®€åŒ–äº†è½¯ä»¶åˆ©ç”¨ç°æœ‰å±‚çš„èƒ½åŠ›ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ä¸€é¡¹å¼ºå¤§çš„æŠ€æœ¯ï¼Œæœ‰å¯èƒ½ä»æ ¹æœ¬ä¸Šæ”¹å˜ç½‘ç»œã€å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§ç­‰æœåŠ¡çš„äº¤ä»˜æ–¹å¼ã€‚</p><p>ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹å®ƒæ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠä½•æ—¶è€ƒè™‘å®æ–½å®ƒã€‚</p><a id="more"></a><h2><span id="ebpf-æ˜¯å¦‚ä½•å·¥ä½œ">eBPF æ˜¯å¦‚ä½•å·¥ä½œ</span></h2><p>eBPF ç¨‹åºæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œå¹¶é™„åŠ åˆ°ä»£ç è·¯å¾„ä¸Šã€‚ä»£ç è·¯å¾„åŒ…å«ç‰¹å®šçš„è§¦å‘å™¨ï¼ˆç§°ä¸ºé’©å­ï¼‰ï¼Œè¿™äº›è§¦å‘å™¨åœ¨ä¼ é€’é™„åŠ çš„ eBPF ç¨‹åºæ—¶æ‰§è¡Œå®ƒä»¬ã€‚é’©å­çš„ä¸€äº›ä¾‹å­åŒ…æ‹¬ç½‘ç»œäº‹ä»¶ã€ç³»ç»Ÿè°ƒç”¨ã€å‡½æ•°é¡¹å’Œå†…æ ¸è¿½è¸ªç‚¹ã€‚</p><p>å½“è§¦å‘æ—¶ï¼Œä»£ç é¦–å…ˆè¢«ç¼–è¯‘ä¸º BPF å­—èŠ‚ç ã€‚ç„¶åï¼Œå­—èŠ‚ç åœ¨è¿è¡Œä¹‹å‰ä¼šè¢«éªŒè¯ï¼Œä»¥ç¡®ä¿å®ƒä¸ä¼šåˆ›å»ºå¾ªç¯ã€‚è¿™ä¸ªæ­¥éª¤å¯ä»¥é˜²æ­¢ç¨‹åºæ— æ„æˆ–æ•…æ„æŸå®³ Linux å†…æ ¸ã€‚</p><p>åœ¨é’©å­ä¸Šè§¦å‘ç¨‹åºä¹‹åï¼Œå®ƒå°±ä¼šè¿›è¡ŒåŠ©æ‰‹è°ƒç”¨ã€‚è¿™äº›åŠ©æ‰‹è°ƒç”¨æ˜¯ä¸º eBPF é…å¤‡è®¸å¤šç”¨äºè®¿é—®å†…å­˜çš„ç‰¹æ€§çš„å‡½æ•°ã€‚åŠ©æ‰‹è°ƒç”¨éœ€è¦ç”±å†…æ ¸é¢„å…ˆå®šä¹‰ï¼Œä½†æ˜¯å­˜åœ¨çš„å‡½æ•°åˆ—è¡¨åœ¨<strong>ä¸æ–­å¢é•¿</strong>[3]ã€‚</p><p>eBPF æœ€åˆè¢«ç”¨ä½œè¿‡æ»¤ç½‘ç»œæ•°æ®åŒ…æ—¶ï¼Œæé«˜å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§çš„ä¸€ç§æ–¹æ³•ã€‚ç„¶è€Œï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒæˆä¸ºäº†ä¸€ç§ä½¿ç”¨æˆ·æä¾›çš„ä»£ç å®ç°æ›´å®‰å…¨ã€æ›´æ–¹ä¾¿å’Œæ€§èƒ½æ›´å¥½çš„æ–¹æ³•ã€‚</p><h2><span id="ebpf-çš„ä¼˜ç‚¹">eBPF çš„ä¼˜ç‚¹</span></h2><p>eBPF é€šå¸¸ç”¨äº<strong>è¿½è¸ª</strong>[4]ç”¨æˆ·ç©ºé—´è¿›ç¨‹ï¼Œå®ƒçš„ä¼˜ç‚¹åœ¨è¿™é‡Œå¾ˆæ˜æ˜¾ã€‚è¿™æ˜¯ä¸€ä¸ªå®‰å…¨å’Œæœ‰ç”¨çš„æ–¹æ³•æ¥ç¡®ä¿ï¼š</p><ul><li>é€Ÿåº¦å’Œæ€§èƒ½ã€‚eBPF å¯ä»¥å°†åŒ…å¤„ç†ä»å†…æ ¸ç©ºé—´è½¬ç§»åˆ°ç”¨æˆ·ç©ºé—´ã€‚åŒæ ·ï¼ŒeBPF æ˜¯å³æ—¶ï¼ˆJITï¼‰ç¼–è¯‘å™¨ã€‚ç¼–è¯‘å­—èŠ‚ç åï¼Œå°†è°ƒç”¨ eBPFï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæ–¹æ³•è°ƒç”¨å­—èŠ‚ç çš„æ–°è§£é‡Šã€‚</li><li>ä½ä¾µå…¥æ€§ã€‚å½“ä½œä¸ºè°ƒè¯•å™¨ä½¿ç”¨æ—¶ï¼ŒeBPF ä¸éœ€è¦åœæ­¢ç¨‹åºæ¥è§‚å¯Ÿå…¶çŠ¶æ€ã€‚</li><li>å®‰å…¨ã€‚ç¨‹åºå®é™…ä¸Šæ˜¯æ²™ç®±åŒ–çš„ï¼Œè¿™æ„å‘³ç€å†…æ ¸æºä»£ç ä»ç„¶å—åˆ°ä¿æŠ¤å¹¶ä¸”æ²¡æœ‰æ”¹å˜ã€‚éªŒè¯æ­¥éª¤ç¡®ä¿èµ„æºä¸ä¼šè¢«è¿è¡Œæ— é™å¾ªç¯çš„ç¨‹åºå µå¡ã€‚</li><li>æ–¹ä¾¿ã€‚åˆ›å»ºé’©å­å†…æ ¸å‡½æ•°çš„ä»£ç æ¯”æ„å»ºå’Œç»´æŠ¤å†…æ ¸æ¨¡å—çš„å·¥ä½œè¦å°‘ã€‚</li><li>ç»Ÿä¸€çš„è¿½è¸ªã€‚eBPF ä¸ºä½ æä¾›äº†ä¸€ä¸ªç”¨äºè¿½è¸ªæµç¨‹çš„å•ä¸€ã€å¼ºå¤§ä¸”å¯è®¿é—®çš„æ¡†æ¶ã€‚è¿™å¢åŠ äº†å¯è§æ€§å’Œå®‰å…¨æ€§ã€‚</li><li>å¯ç¼–ç¨‹æ€§ã€‚ä½¿ç”¨ eBPF æœ‰åŠ©äºå¢åŠ ç¯å¢ƒçš„ç‰¹æ€§ä¸°å¯Œåº¦ï¼Œè€Œæ— éœ€æ·»åŠ é¢å¤–çš„å±‚ã€‚åŒæ ·ï¼Œç”±äºä»£ç ç›´æ¥åœ¨å†…æ ¸ä¸­è¿è¡Œï¼Œå› æ­¤å¯ä»¥åœ¨ eBPF äº‹ä»¶ä¹‹é—´å­˜å‚¨æ•°æ®ï¼Œè€Œä¸åƒå…¶ä»–è¿½è¸ªç¨‹åºé‚£æ ·è½¬å‚¨æ•°æ®ã€‚</li><li>è¡¨è¾¾èƒ½åŠ›ã€‚eBPF å…·æœ‰è¡¨è¾¾æ€§ï¼Œèƒ½å¤Ÿæ‰§è¡Œé€šå¸¸åªèƒ½åœ¨é«˜çº§è¯­è¨€ä¸­æ‰¾åˆ°çš„åŠŸèƒ½ã€‚</li></ul><h2><span id="ebpf-çš„æœ€ä½³å®è·µ">eBPF çš„æœ€ä½³å®è·µ</span></h2><p>ç”±äº eBPF æ˜¯ä¸€é¡¹å¦‚æ­¤æ–°çš„æŠ€æœ¯ï¼Œè®¸å¤šä¸œè¥¿ä»æœªè¢«æ¢ç´¢ã€‚éšç€æŠ€æœ¯çš„å‘å±•ï¼Œå›´ç»• eBPF çš„æœ€ä½³å®è·µä»åœ¨ä¸æ–­å‘å±•ã€‚è™½ç„¶æ²¡æœ‰æ˜ç¡®çš„æœ€ä½³å®è·µé›†å­˜åœ¨ï¼Œä½†ä½ å¯ä»¥åšä¸€äº›äº‹æƒ…æ¥ç¡®ä¿æœ‰æ•ˆã€é«˜æ•ˆçš„ç¨‹åºã€‚</p><p>å¦‚æœä½ æ­£åœ¨ä¸ºä½ çš„ç”Ÿæ€ç³»ç»Ÿä½¿ç”¨ eBPFï¼Œæˆ‘ä»¬å»ºè®®ä½ ï¼š</p><ul><li>ä½¿ç”¨<strong>LLVM Clang</strong>[5]å°† C ç¼–è¯‘æˆå­—èŠ‚ç ã€‚å½“ eBPF é¦–æ¬¡å‡ºç°æ—¶ï¼Œéœ€è¦æ‰‹å·¥ç¼–å†™å’Œç»„è£…ç¨‹åºã€‚ç„¶åï¼Œå¼€å‘äººå‘˜ä½¿ç”¨å†…æ ¸çš„æ±‡ç¼–ç¨‹åºç”Ÿæˆå­—èŠ‚ç ã€‚å¹¸è¿çš„æ˜¯ï¼Œç°åœ¨ä¸å†éœ€è¦è¿™æ ·åšäº†ã€‚Clang æä¾›äº† C è¯­è¨€çš„å‰ç«¯åŸºç¡€è®¾æ–½å’Œå·¥å…·ã€‚</li><li>ç¼–å†™ BPF ç¨‹åºæ—¶è¯·ä½¿ç”¨ BCC å·¥å…·åŒ…ã€‚<strong>BPF Compiler Collection</strong>[6]ï¼ˆBCCï¼‰æ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼Œå¯ä»¥å¸®åŠ©ä½ åˆ›å»ºé«˜æ•ˆçš„å†…æ ¸è¿½è¸ªå’Œæ“ä½œç¨‹åºã€‚å®ƒç‰¹åˆ«é€‚åˆäºæ€§èƒ½åˆ†æå’Œç½‘ç»œæµé‡æ§åˆ¶ç›¸å…³çš„ä»»åŠ¡ã€‚</li></ul><h2><span id="ebpf-çš„ç¼ºç‚¹">eBPF çš„ç¼ºç‚¹</span></h2><p>å°½ç®¡ eBPF åŠŸèƒ½å¼ºå¤§ï¼Œä½†å®ƒå¹¶ä¸æ˜¯é€‚åˆæ¯ä¸ªé¡¹ç›®æˆ–ç”Ÿæ€ç³»ç»Ÿçš„çµä¸¹å¦™è¯ã€‚eBPF ç¡®å®æœ‰ä¸€äº›æ˜æ˜¾çš„ç¼ºç‚¹ï¼Œè¿™å¯èƒ½ä¼šä½¿å®ƒåœ¨æŸäº›å®ä¾‹ä¸­å·¥ä½œèµ·æ¥ä»¤äººæ²®ä¸§ã€‚ä¸€äº›å¼€å‘äººå‘˜å¯èƒ½ä¼šå‘ç° eBPF ä¸é€‚åˆä½¿ç”¨ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><ul><li>å®ƒä»…é™äº Linux å’Œä¸€ä¸ªæœ€æ–°çš„å†…æ ¸ã€‚eBPF æ˜¯åœ¨ Linux å†…æ ¸ä¸­å¼€å‘çš„ï¼Œå¹¶ä¸”æ˜¯å®Œå…¨é¢å‘ Linux å†…æ ¸çš„ã€‚è¿™ä½¿å¾—å®ƒæ¯”å…¶ä»–è¿½è¸ªå™¨æ›´éš¾æºå¸¦ã€‚æ­¤å¤–ï¼Œä½ éœ€è¦ä¸€ä¸ªç›¸å½“æ–°çš„å†…æ ¸ã€‚å¦‚æœä½ è¿è¡Œçš„æ˜¯æ¯” v4.13 æ›´è€çš„ç‰ˆæœ¬ï¼Œä½ å°†æ— æ³•ä½¿ç”¨å®ƒã€‚</li><li>æ²™ç®±ç¨‹åºæ˜¯æœ‰é™çš„ã€‚eBPF é€šè¿‡é™åˆ¶ç¨‹åºå¯ä»¥è®¿é—®çš„èµ„æºæ¥æé«˜å®‰å…¨æ€§ã€‚ç„¶è€Œï¼Œé€šè¿‡é™åˆ¶ç¨‹åºå¯ä»¥è®¿é—®çš„æ“ä½œç³»ç»Ÿéƒ¨åˆ†ï¼ŒåŠŸèƒ½ä¹Ÿå¯èƒ½å—åˆ°é™åˆ¶ã€‚</li></ul><h2><span id="ebpf-çš„å¸¸ç”¨æƒ…å†µ">eBPF çš„å¸¸ç”¨æƒ…å†µ</span></h2><p>eBPF åœ¨<strong>äº‘åŸç”Ÿåº”ç”¨</strong>[7]ä¸­æ­£è¿…é€Ÿè·å¾—å…³æ³¨ã€‚å› æ­¤ï¼ŒeBPF æœ€å¸¸ç”¨äºä¸¤ç§æƒ…å†µï¼š</p><ul><li>éœ€è¦ä½¿ç”¨å†…æ ¸è¿½è¸ªå®ç°å¯è§‚å¯Ÿæ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒeBPF æ›´å¿«ã€æ›´å‡†ç¡®ã€‚è¿™é‡Œä¸æ¶‰åŠ<strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>[8]ï¼Œè€Œä¸” eBPF ç¨‹åºæ˜¯åŸºäºäº‹ä»¶çš„ï¼Œå› æ­¤æ²¡æœ‰ç‰¹å®šçš„è§¦å‘å™¨å°±ä¸ä¼šè¿è¡Œä»»ä½•ç¨‹åºâ€”â€”ä½ ä¸ä¼šé”™è¿‡ä»»ä½•äº‹ä»¶ã€‚</li><li>ä¼ ç»Ÿçš„å®‰å…¨ç›‘æ§ä¸èµ·ä½œç”¨ã€‚eBPF åœ¨åˆ†å¸ƒå¼å’ŒåŸºäºå®¹å™¨çš„ç¯å¢ƒä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼ŒåŒ…æ‹¬<strong>Kubernetes</strong>[9]ã€‚åœ¨è¿™äº›ç¯å¢ƒä¸­ï¼ŒeBPF å¯ä»¥ç¼©å°å¯è§æ€§å·®è·ï¼Œå› ä¸ºå®ƒå¯ä»¥æä¾›å¯¹ HTTP é€šä¿¡çš„å¯è§æ€§ã€‚</li></ul><p>ä½ å¯èƒ½è¿˜ä¼šå‘ç° eBPF è¢«éƒ¨ç½²ç”¨äºå…¶ä»–å®‰å…¨æªæ–½ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>é˜²ç«å¢™</li><li>è®¾å¤‡é©±åŠ¨ç¨‹åº</li><li>ç½‘ç»œæ€§èƒ½ç›‘æ§</li></ul><h2><span id="new-relic-å’Œ-ebpf">New Relic å’Œ eBPF</span></h2><p><strong>Pixie</strong>[10]ï¼ˆæ—©å‰è¢« New Relic æ”¶è´­äº†ï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ kubernetes-native-in-cluster å¯è§‚å¯Ÿå¹³å°ï¼Œå®ƒæä¾›äº† Kubernetes å·¥ä½œè´Ÿè½½çš„å³æ—¶å¯è§æ€§ï¼Œæ— éœ€æ‰‹åŠ¨æ£€æµ‹ã€‚eBPF æä¾›äº† Pixie å¹³å°èƒŒåçš„å¤§éƒ¨åˆ†é­”åŠ›ã€‚å¦‚å‰æ‰€è¿°ï¼ŒeBPF å…è®¸åœ¨è§¦å‘äº‹ä»¶æ—¶è¿è¡Œå—é™åˆ¶çš„ä»£ç ã€‚è¿™ä¸ªäº‹ä»¶å¯ä»¥æ˜¯å†…æ ¸ç©ºé—´ï¼ˆkprobesï¼‰æˆ–ç”¨æˆ·ç©ºé—´ï¼ˆuprobesï¼‰ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚Pixie åŒæ—¶ä½¿ç”¨ uprobes å’Œ kprobes æ¥æ”¯æŒè·¨æœåŠ¡å’Œåº”ç”¨ç¨‹åºçš„å¯è§‚å¯Ÿæ€§ã€‚</p><p>Pixie åˆ©ç”¨ eBPF è‡ªåŠ¨è·å–é¥æµ‹æ•°æ®ï¼Œå…¶è¾¹ç¼˜æœºæ™ºèƒ½å°†è¿™äº›æ•°æ®ä¸ Kubernetes å…ƒæ•°æ®è¿æ¥èµ·æ¥ï¼Œåœ¨ä¿æŒæ•°æ®å±€éƒ¨æ€§çš„åŒæ—¶æä¾›å¯è§æ€§ã€‚è¿™ç§å¯è§æ€§è¡¥å……äº† New Relic å¼ºå¤§çš„ Kubernetes å¯è§‚æµ‹æ€§è§£å†³æ–¹æ¡ˆã€‚ä» 5 æœˆåº•å¼€å§‹ï¼Œä½ å°†èƒ½å¤Ÿå°† Pixie ç”Ÿæˆçš„é¥æµ‹æ•°æ®å‘é€åˆ° New Relic Oneï¼Œè·å¾—å¯æ‰©å±•çš„ç•™å­˜ç‡ã€å¼ºå¤§çš„å¯è§†åŒ–ã€é«˜çº§å…³è”å’Œæ™ºèƒ½è­¦æŠ¥åŠŸèƒ½ã€‚</p><h2><span id="ebpf-æ˜¯æœ‰æ•ˆçš„å¯è§‚å¯Ÿæ€§">eBPF æ˜¯æœ‰æ•ˆçš„å¯è§‚å¯Ÿæ€§</span></h2><p>eBPF æ˜¯ä¸€ç§æ–°æŠ€æœ¯ï¼Œå®ƒæ”¹è¿›äº† Linux å†…æ ¸ä¸­çš„å¯è§‚å¯Ÿæ€§ã€è”ç½‘å’Œå®‰å…¨æ€§ã€‚å®ƒæ¶ˆé™¤äº†æ›´æ”¹å†…æ ¸æºä»£ç æˆ–æ·»åŠ æ¨¡å—çš„éœ€è¦ï¼Œå› æ­¤ä½ å¯ä»¥åˆ›å»ºæ›´ä¸°å¯Œçš„åŸºç¡€è®¾æ–½æ¥æ”¯æŒä½ çš„ç³»ç»Ÿï¼Œè€Œä¸ä¼šä½¿å…¶è¿‡äºå¤æ‚ã€‚</p><h2><span id="æ€»ç»“">æ€»ç»“</span></h2><p>æˆ‘ä»¬äº†è§£äº† eBPF æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­å¦‚æ­¤æœ‰ç”¨ã€‚é€šè¿‡ä»å†…æ ¸å±‚è¿›è¡Œç›‘æ§ï¼Œè®¸å¤šä¸äº‘ä¸­çš„å¯è§‚æµ‹æ€§ç›¸å…³çš„æŒ‘æˆ˜éƒ½å¾—åˆ°äº†è§£å†³ã€‚ä½ å¯ä»¥åœ¨æ•°æ®ä¸­äº«å—æ›´æ·±å…¥çš„å¯è§æ€§ã€æ›´å¤šçš„ä¸Šä¸‹æ–‡å’Œæ›´å‡†ç¡®çš„ä¿¡æ¯ã€‚</p><h3><span id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</span></h3><ol><li>New Relic çš„åšå®¢: <a href="https://newrelic.com/blog/best-practices/what-is-ebpf" target="_blank" rel="noopener">https://newrelic.com/blog/best-practices/what-is-ebpf</a></li><li>Extended BPF: <a href="https://www.kernel.org/doc/html/latest/bpf/index.html" target="_blank" rel="noopener">https://www.kernel.org/doc/html/latest/bpf/index.html</a></li><li>ä¸æ–­å¢é•¿: <a href="https://man7.org/linux/man-pages/man7/bpf-helpers.7.html" target="_blank" rel="noopener">https://man7.org/linux/man-pages/man7/bpf-helpers.7.html</a></li><li>è¿½è¸ª: <a href="https://blog.pixielabs.ai/ebpf-function-tracing/post/" target="_blank" rel="noopener">https://blog.pixielabs.ai/ebpf-function-tracing/post/</a></li><li>LLVM Clang: <a href="https://clang.llvm.org/" target="_blank" rel="noopener">https://clang.llvm.org/</a></li><li>BPF Compiler Collection: <a href="https://github.com/iovisor/bcc" target="_blank" rel="noopener">https://github.com/iovisor/bcc</a></li><li>äº‘åŸç”Ÿåº”ç”¨: <a href="https://newrelic.com/solutions/cloud-native" target="_blank" rel="noopener">https://newrelic.com/solutions/cloud-native</a></li><li>ä¸Šä¸‹æ–‡åˆ‡æ¢: <a href="https://www.quora.com/What-is-context-switching-in-Linux" target="_blank" rel="noopener">https://www.quora.com/What-is-context-switching-in-Linux</a></li><li>Kubernetes: <a href="https://kubernetes.io/blog/2017/12/using-ebpf-in-kubernetes/" target="_blank" rel="noopener">https://kubernetes.io/blog/2017/12/using-ebpf-in-kubernetes/</a></li><li>Pixie: <a href="http://pixielabs.ai/" target="_blank" rel="noopener">http://pixielabs.ai/</a></li></ol><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ  CNCF ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/ymz2kh4j" target="_blank" rel="noopener">https://tinyurl.com/ymz2kh4j</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼šLavanya Chockalingamï¼ŒNew Relic é«˜çº§äº§å“è¥é”€ç»ç†ã€‚æœ€åˆå‘è¡¨åœ¨ &lt;strong&gt;New Relic çš„åšå®¢[1]&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ Linux å†…æ ¸ä¸­å·¥ä½œæ˜¯å®ç°å®‰å…¨æ€§ã€ç½‘ç»œå’Œå¯è§‚å¯Ÿæ€§ç‰¹æ€§çš„ç†æƒ³é€‰æ‹©ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯æ²¡æœ‰æŒ‘æˆ˜ã€‚æ— è®ºæ˜¯ä¿®æ”¹å†…æ ¸æºä»£ç ï¼Œè¿˜æ˜¯æ·»åŠ æ¨¡å—ï¼Œå¼€å‘äººå‘˜ä¼ ç»Ÿä¸Šå‘ç°ä»–ä»¬è¦ä¸éš¾ä»¥è°ƒè¯•çš„å¤æ‚åŸºç¡€è®¾æ–½å’ŒæŠ½è±¡å±‚ä½œæ–—äº‰ã€‚&lt;strong&gt;Extended BPF&lt;/strong&gt;[2]ï¼ˆeBPFï¼‰è§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;Extended Berkeley Packet Filterï¼ˆeBPFï¼‰æ˜¯ä¸€ç§å†…æ ¸æŠ€æœ¯ï¼ˆä» Linux 4.x å¼€å§‹ï¼‰ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨æ— éœ€æ›´æ”¹å†…æ ¸æºä»£ç ï¼Œæˆ–æ·»åŠ é¢å¤–æ¨¡å—çš„æƒ…å†µä¸‹è¿è¡Œã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸º Linux å†…æ ¸ä¸­çš„è½»é‡çº§æ²™ç®±è™šæ‹Ÿæœºï¼ˆVMï¼‰ï¼Œç¨‹åºå‘˜å¯ä»¥åœ¨å…¶ä¸­è¿è¡Œ BPF å­—èŠ‚ç ï¼Œä»è€Œåˆ©ç”¨ç‰¹å®šçš„å†…æ ¸èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ eBPF æ¶ˆé™¤äº†æ›´æ”¹å†…æ ¸æºä»£ç çš„éœ€è¦ï¼Œå¹¶ç®€åŒ–äº†è½¯ä»¶åˆ©ç”¨ç°æœ‰å±‚çš„èƒ½åŠ›ã€‚å› æ­¤ï¼Œå®ƒæ˜¯ä¸€é¡¹å¼ºå¤§çš„æŠ€æœ¯ï¼Œæœ‰å¯èƒ½ä»æ ¹æœ¬ä¸Šæ”¹å˜ç½‘ç»œã€å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§ç­‰æœåŠ¡çš„äº¤ä»˜æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹å®ƒæ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠä½•æ—¶è€ƒè™‘å®æ–½å®ƒã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/categories/kubernetes/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/tags/Kubernetes/"/>
    
      <category term="eBPF" scheme="https://www.hi-linux.com/tags/eBPF/"/>
    
  </entry>
  
  <entry>
    <title>å†è§ Teamviewerï¼Œæ˜¯æ—¶å€™æ‹¥æŠ±ä¸‹ä¸€ä»£è¿œç¨‹æ§åˆ¶å·¥å…· RustDesk äº†ï¼</title>
    <link href="https://www.hi-linux.com/posts/23378.html"/>
    <id>https://www.hi-linux.com/posts/23378.html</id>
    <published>2021-06-22T01:00:00.000Z</published>
    <updated>2021-06-22T01:15:28.032Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>å¯¹å¾ˆå¤š Mac ç”¨æˆ·æ¥è¯´ï¼Œæƒ³ç”¨è¿œç¨‹æ§åˆ¶è¯·æ•™ä¸‹å¤§ä½¬ï¼Œå¤ªéš¾äº†ã€‚</p><p>åœ¨ Windows ä¸Šä¸€ä¸ª QQ å°±èƒ½æå®šçš„äº‹ï¼Œè€Œ Mac ç”¨æˆ·å‡ ä¹åªèƒ½ä¾èµ– Teamviewerã€‚</p><p>Teamviewer è¿˜é­åˆ°ä¸å°‘åæ§½ï¼šå ç”¨é«˜ã€æ‰“å¼€æ…¢ï¼Œæœ‰æ—¶è¿˜å› ä¸ºè¢«è¯†åˆ«ä¸ºå•†ç”¨è€Œæ”¶è´¹â€¦â€¦</p><p>ç°åœ¨ï¼Œä½ ä¸å¿…å†å’Œå®ƒè¾ƒåŠ²äº†ã€‚</p><a id="more"></a><p>è¿™æ¬¾åå« <strong>RustDesk</strong> çš„è¿œç¨‹æ¡Œé¢è½¯ä»¶ç«äº†ï¼å·²ç»åœ¨ Github ä¸Šè·å¾—äº† <strong>6.1k</strong> é¢—æ˜Ÿã€‚</p><p><img src="https://img.hi-linux.com/staticfile/image-20210618093429673-2021-06-18-XpQTXT.png" alt></p><p>è¿™ä¸ªåå­—å·²ç» â€œæš´éœ²â€ äº†å®ƒï¼Œæ²¡é”™ï¼Œè¿™æ¬¾è½¯ä»¶çš„å¼€å‘è¯­è¨€æ­£æ˜¯ <strong>Rust</strong>ã€‚</p><p>RustDesk æ”¯æŒå¤šä¸ªå¹³å°ï¼Œå¹¶ä¸” â€œå®‰è£…åŒ…â€ åªæœ‰ 8~9MBï¼Œç›¸å½“<strong>è½»é‡</strong>äº†ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/image-20210618093608925-2021-06-18-t14cEh.png" alt></p><p>è€Œä¸”ï¼Œè¿™æ¬¾è½¯ä»¶å±äºåŠä¾¿æºå¼ï¼Œæ— éœ€å®‰è£…å’Œé…ç½®ï¼Œ<strong>å¼€ç®±å³ç”¨</strong>ã€‚ç”¨æˆ·ç•Œé¢ä¹Ÿæ˜¯éå¸¸ç›´è§‚ã€ç®€å•ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/113112362-ae4deb80-923b-11eb-957d-ff88daad4f06-2021-06-18-5qp5lD.png" alt></p><p>RustDesk é‡‡ç”¨çš„æ˜¯<strong>åŠ å¯†ç›´è¿</strong>ï¼Œå…ˆå°è¯•æ‰“æ´ç›´è¿ï¼Œå¸®åŠ©ä¸¤è€…å»ºç«‹è¿æ¥ï¼Œå¦‚æœå¤±è´¥å†é€šè¿‡æœåŠ¡å™¨è½¬å‘ã€‚</p><p>å®ƒæ”¯æŒ<strong>è·¨å¹³å°ä¼ è¾“</strong>æ–‡ä»¶ã€‚æ¯”å¦‚ï¼ŒMac å’Œ Windows ç”µè„‘ä¹‹é—´è¿›è¡Œæ–‡ä»¶ä¼ è¾“æ—¶ï¼Œç•Œé¢é•¿è¿™æ ·ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/113112857-3fbd5d80-923c-11eb-9836-768325faf906-2021-06-18-GlY6Fx.png" alt></p><p>RustDesk å¼€å‘è€…è¿˜æ˜¯ä¸€ä½<strong>ä¸­å›½ç¨‹åºå‘˜</strong>ï¼Œå½“ç„¶è½¯ä»¶ä¹Ÿæ”¯æŒä¸­æ–‡ç‰ˆã€‚</p><p>è‹¦è¿œç¨‹ä¹…çŸ£çš„æˆ‘ï¼Œä¸Šæ‰‹è¯•äº†ä¸€ä¸‹ï½</p><p>é€‰æ‹© Mac å’Œ Android æ‰‹æœºå®¢æˆ·ç«¯ï¼Œä¸‹è½½å®‰è£…ä¸€æ°”å‘µæˆã€‚</p><p>æ‰“å¼€åï¼Œç•Œé¢çš„ç¡®éå¸¸æ¸…çˆ½ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/image-20210618094901549-2021-06-18-UW6X7G.png" alt></p><p><img src="https://img.hi-linux.com/staticfile/113112619-f705a480-923b-11eb-911d-97e984ef52b6-20210618101248945-2021-06-18-6mxGk1.png" alt></p><blockquote><p>æ³¨æ„ï¼šå…¬å…±æœåŠ¡å™¨ç›®å‰æ˜¯<strong>ä¸æ”¯æŒ</strong>ä¿®æ”¹ ID çš„ã€‚</p></blockquote><p>ä»å»å¹´å¼€å§‹ï¼Œä½œè€…å·²ç»å¼€å§‹ä¸æ–­æ›´æ–°è½¯ä»¶ç‰ˆæœ¬ã€‚æœ‰ä¸å°‘ç½‘å‹è¡¨ç¤ºï¼šè½¯ä»¶ä½“ç§¯å°ã€ç•Œé¢ç®€æ´ï¼Œæ¯” Teamviewer é¦™ï½</p><p>ä¸è¿‡ä¹Ÿæœ‰äººåŸºäºå®‰å…¨æ€§æå‡ºè´¨ç–‘ã€‚</p><p>ä½œè€…åœ¨ V2EX ä¸Šè¡¨ç¤ºï¼Œå·²ç»åœ¨ GitHub ä¸Šå¼€æºäº† 90% çš„ä»£ç ï¼ˆç®—ä¸Šæ€»ä»£ç é‡ï¼‰ï¼Œä½†æ˜¯ä¿ç•™äº†æœåŠ¡å™¨ä»£ç ä»¥åŠç§»åŠ¨ç«¯ã€‚</p><p>æ­¤å¤–ï¼Œç”±äºå­˜åœ¨å†…ç½‘ç©¿é€å¤±è´¥è€Œè¿æ¥å¾ˆæ…¢çš„æƒ…å†µï¼ŒRustDesk è¿˜æ”¯æŒ<strong>è‡ªå»ºä¸­ç»§æœåŠ¡å™¨</strong>ï¼Œå¹¶ä¸”æä¾›äº†æ•™ç¨‹ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/image-20210618095504045-2021-06-18-lxFYtq.png" alt></p><p>æƒ³è¦äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œå¯æˆ³ä¸‹æ–¹é“¾æ¥ï½</p><p>ä¼ é€é—¨ï¼š</p><ul><li><a href="https://rustdesk.com/zh/" target="_blank" rel="noopener">https://rustdesk.com/zh/</a></li><li><a href="https://github.com/rustdesk/rustdesk" target="_blank" rel="noopener">https://github.com/rustdesk/rustdesk</a></li><li><a href="https://gitee.com/rustdesk" target="_blank" rel="noopener">https://gitee.com/rustdesk</a></li><li><a href="https://gitee.com/rustdesk/rustdesk-server/blob/master/id-relay-set.md" target="_blank" rel="noopener">https://gitee.com/rustdesk/rustdesk-server/blob/master/id-relay-set.md</a></li></ul><p>å‚è€ƒé“¾æ¥ï¼š</p><ul><li><a href="https://www.v2ex.com/t/772047" target="_blank" rel="noopener">https://www.v2ex.com/t/772047</a></li><li><a href="https://www.v2ex.com/t/712086?p=1" target="_blank" rel="noopener">https://www.v2ex.com/t/712086?p=1</a></li><li><a href="https://juejin.cn/post/6881056112909500430" target="_blank" rel="noopener">https://juejin.cn/post/6881056112909500430</a></li></ul><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ é‡å­ä½ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/p6msym8h" target="_blank" rel="noopener">https://tinyurl.com/p6msym8h</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹å¾ˆå¤š Mac ç”¨æˆ·æ¥è¯´ï¼Œæƒ³ç”¨è¿œç¨‹æ§åˆ¶è¯·æ•™ä¸‹å¤§ä½¬ï¼Œå¤ªéš¾äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Windows ä¸Šä¸€ä¸ª QQ å°±èƒ½æå®šçš„äº‹ï¼Œè€Œ Mac ç”¨æˆ·å‡ ä¹åªèƒ½ä¾èµ– Teamviewerã€‚&lt;/p&gt;
&lt;p&gt;Teamviewer è¿˜é­åˆ°ä¸å°‘åæ§½ï¼šå ç”¨é«˜ã€æ‰“å¼€æ…¢ï¼Œæœ‰æ—¶è¿˜å› ä¸ºè¢«è¯†åˆ«ä¸ºå•†ç”¨è€Œæ”¶è´¹â€¦â€¦&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œä½ ä¸å¿…å†å’Œå®ƒè¾ƒåŠ²äº†ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="RustDesk" scheme="https://www.hi-linux.com/categories/RustDesk/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="å·¥å…·" scheme="https://www.hi-linux.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="RustDesk" scheme="https://www.hi-linux.com/tags/RustDesk/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ Kube-Vip éƒ¨ç½²ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„é«˜å¯ç”¨ Kubernetes é›†ç¾¤</title>
    <link href="https://www.hi-linux.com/posts/13616.html"/>
    <id>https://www.hi-linux.com/posts/13616.html</id>
    <published>2021-06-21T01:00:00.000Z</published>
    <updated>2021-06-21T01:37:47.488Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p><code>kube-vip</code> å¯ä»¥åœ¨ä½ çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šæä¾›ä¸€ä¸ª Kubernetes åŸç”Ÿçš„ HA è´Ÿè½½å‡è¡¡ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†åœ¨å¤–éƒ¨è®¾ç½® HAProxy å’Œ Keepalived æ¥å®ç°é›†ç¾¤çš„é«˜å¯ç”¨äº†ã€‚</p><p><code>kube-vip</code> æ˜¯ä¸€ä¸ªä¸º Kubernetes é›†ç¾¤å†…éƒ¨å’Œå¤–éƒ¨æä¾›é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡çš„å¼€æºé¡¹ç›®ï¼Œåœ¨ Vmware çš„ Tanzu é¡¹ç›®ä¸­å·²ç»ä½¿ç”¨ kube-vip æ›¿æ¢äº†ç”¨äº vSphere éƒ¨ç½²çš„ HAProxy è´Ÿè½½å‡è¡¡å™¨ï¼Œæœ¬æ–‡æˆ‘ä»¬å°†å…ˆæ¥äº†è§£ kube-vip å¦‚ä½•ç”¨äº Kubernetes æ§åˆ¶å¹³é¢çš„é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</p><h2><span id="ç‰¹ç‚¹">ç‰¹ç‚¹</span></h2><p>Kube-Vip æœ€åˆæ˜¯ä¸º Kubernetes æ§åˆ¶å¹³é¢æä¾› HA è§£å†³æ–¹æ¡ˆè€Œåˆ›å»ºçš„ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒå·²ç»å‘å±•ä¸ºå°†ç›¸åŒçš„åŠŸèƒ½åˆå¹¶åˆ° Kubernetes çš„ LoadBalancer ç±»å‹çš„ Service ä¸­äº†ã€‚</p><ul><li>VIP åœ°å€å¯ä»¥æ˜¯ IPv4 æˆ– IPv6</li><li>å¸¦æœ‰ ARPï¼ˆç¬¬2å±‚ï¼‰æˆ– BGPï¼ˆç¬¬3å±‚ï¼‰çš„æ§åˆ¶å¹³é¢</li><li>ä½¿ç”¨é¢†å¯¼é€‰ä¸¾æˆ– raft æ§åˆ¶å¹³é¢</li><li>å¸¦æœ‰ kubeadmï¼ˆé™æ€ Podï¼‰çš„æ§åˆ¶å¹³é¢ HA</li><li>å¸¦æœ‰ K3s/å’Œå…¶ä»–ï¼ˆDaemonSetsï¼‰çš„æ§åˆ¶å¹³é¢ HA</li><li>ä½¿ç”¨ ARP é¢†å¯¼è€…é€‰ä¸¾çš„ Service LoadBalancerï¼ˆç¬¬ 2 å±‚ï¼‰</li><li>é€šè¿‡ BGP ä½¿ç”¨å¤šä¸ªèŠ‚ç‚¹çš„ Service LoadBalancer</li><li>æ¯ä¸ªå‘½åç©ºé—´æˆ–å…¨å±€çš„ Service LoadBalancer åœ°å€æ± </li><li>Service LoadBalancer åœ°å€é€šè¿‡ UPNP æš´éœ²ç»™ç½‘å…³</li></ul><a id="more"></a><h2><span id="haproxy-å’Œ-kube-vip-çš„-ha-é›†ç¾¤">HAProxy å’Œ kube-vip çš„ HA é›†ç¾¤</span></h2><p>åœ¨ä»¥å‰æˆ‘ä»¬åœ¨ç§æœ‰ç¯å¢ƒä¸‹åˆ›å»º Kubernetes é›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ªç¡¬ä»¶/è½¯ä»¶çš„è´Ÿè½½å‡è¡¡å™¨æ¥åˆ›å»ºå¤šæ§åˆ¶é¢é›†ç¾¤ï¼Œæ›´å¤šçš„æƒ…å†µä¸‹æˆ‘ä»¬ä¼šé€‰æ‹©ä½¿ç”¨ HAProxy + Keepalived æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åˆ›å»º2ä¸ªè´Ÿè½½å‡è¡¡å™¨çš„è™šæ‹Ÿæœºï¼Œç„¶ååˆ†é…ä¸€ä¸ª VIPï¼Œç„¶åä½¿ç”¨ VIP ä¸ºè´Ÿè½½å‡è¡¡å™¨æä¾›æœåŠ¡ï¼Œé€šè¿‡ VIP å°†æµé‡é‡å®šå‘åˆ°åç«¯çš„æŸä¸ª Kubernetes æ§åˆ¶å™¨å¹³é¢èŠ‚ç‚¹ä¸Šã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-2021-06-17-heYabg.jpg" alt></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚æœæˆ‘ä»¬ä½¿ç”¨ kube-vip çš„è¯ä¼šæ€æ ·å‘¢ï¼Ÿ</p><p><img src="https://img.hi-linux.com/staticfile/640-20210617164455474-2021-06-17-weRMv3.jpg" alt></p><p>kube-vip å¯ä»¥é€šè¿‡é™æ€ pod è¿è¡Œåœ¨æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šï¼Œè¿™äº› pod é€šè¿‡ARP å¯¹è¯æ¥è¯†åˆ«æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„å…¶ä»–ä¸»æœºï¼Œæ‰€ä»¥éœ€è¦åœ¨ hosts æ–‡ä»¶ä¸­è®¾ç½®æ¯ä¸ªèŠ‚ç‚¹çš„ IP åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© BGP æˆ– ARP æ¥è®¾ç½®è´Ÿè½½å¹³è¡¡å™¨ï¼Œè¿™ä¸ Metal LB æ¯”è¾ƒç±»ä¼¼ã€‚è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰ BGP æœåŠ¡ï¼Œåªæ˜¯æƒ³å¿«é€Ÿæµ‹è¯•ä¸€ä¸‹ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ ARP ä¸é™æ€ pod çš„æ–¹å¼ã€‚</p><h2><span id="kube-vip-æ¶æ„">kube-vip æ¶æ„</span></h2><p>kube-vip æœ‰è®¸å¤šåŠŸèƒ½è®¾è®¡é€‰æ‹©æä¾›é«˜å¯ç”¨æ€§æˆ–ç½‘ç»œåŠŸèƒ½ï¼Œä½œä¸ºVIP/è´Ÿè½½å¹³è¡¡è§£å†³æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†ã€‚</p><h3><span id="cluster">Cluster</span></h3><p>kube-vip å»ºç«‹äº†ä¸€ä¸ªå¤šèŠ‚ç‚¹æˆ–å¤šæ¨¡å—çš„é›†ç¾¤æ¥æä¾›é«˜å¯ç”¨æ€§ã€‚åœ¨ ARP æ¨¡å¼ä¸‹ï¼Œä¼šé€‰å‡ºä¸€ä¸ªé¢†å¯¼è€…ï¼Œè¿™ä¸ªèŠ‚ç‚¹å°†ç»§æ‰¿è™šæ‹Ÿ IP å¹¶æˆä¸ºé›†ç¾¤å†…è´Ÿè½½å‡è¡¡çš„é¢†å¯¼è€…ï¼Œè€Œåœ¨ BGP æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šé€šçŸ¥ VIP åœ°å€ã€‚</p><p>å½“ä½¿ç”¨ ARP æˆ– layer2 æ—¶ï¼Œå®ƒå°†ä½¿ç”¨é¢†å¯¼è€…é€‰ä¸¾ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ raft é›†ç¾¤æŠ€æœ¯ï¼Œä½†è¿™ç§æ–¹æ³•åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå·²ç»è¢«é¢†å¯¼è€…é€‰ä¸¾æ‰€å–ä»£ï¼Œç‰¹åˆ«æ˜¯åœ¨é›†ç¾¤ä¸­è¿è¡Œæ—¶ã€‚</p><h3><span id="è™šæ‹Ÿip">è™šæ‹ŸIP</span></h3><p>é›†ç¾¤ä¸­çš„é¢†å¯¼è€…å°†åˆ†é… vipï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°é…ç½®ä¸­å£°æ˜çš„é€‰å®šæ¥å£ä¸Šã€‚å½“é¢†å¯¼è€…æ”¹å˜æ—¶ï¼Œå®ƒå°†é¦–å…ˆæ’¤é”€ vipï¼Œæˆ–è€…åœ¨å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œvip å°†ç›´æ¥ç”±ä¸‹ä¸€ä¸ªå½“é€‰çš„é¢†å¯¼è€…åˆ†é…ã€‚</p><p>å½“ vip ä»ä¸€ä¸ªä¸»æœºç§»åŠ¨åˆ°å¦ä¸€ä¸ªä¸»æœºæ—¶ï¼Œä»»ä½•ä½¿ç”¨ vip çš„ä¸»æœºå°†ä¿ç•™ä»¥å‰çš„ <code>vip &lt;-&gt; MAC</code> åœ°å€æ˜ å°„ï¼Œç›´åˆ° ARP è¿‡æœŸï¼ˆé€šå¸¸æ˜¯30ç§’ï¼‰å¹¶æ£€ç´¢åˆ°ä¸€ä¸ªæ–°çš„ <code>vip &lt;-&gt; MAC</code> æ˜ å°„ï¼Œè¿™å¯ä»¥é€šè¿‡ä½¿ç”¨æ— å¿çš„ ARP å¹¿æ’­æ¥ä¼˜åŒ–ã€‚</p><h3><span id="arp">ARP</span></h3><p>kube-vipå¯ä»¥è¢«é…ç½®ä¸ºå¹¿æ’­ä¸€ä¸ªæ— å¿çš„ arpï¼ˆå¯é€‰ï¼‰ï¼Œé€šå¸¸ä¼šç«‹å³é€šçŸ¥æ‰€æœ‰æœ¬åœ°ä¸»æœº <code>vip &lt;-&gt; MAC</code> åœ°å€æ˜ å°„å·²ç»æ”¹å˜ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ ARP å¹¿æ’­è¢«æ¥æ”¶æ—¶ï¼Œæ•…éšœè½¬ç§»é€šå¸¸åœ¨å‡ ç§’é’Ÿå†…å®Œæˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">64 bytes from 192.168.0.75: icmp_seq&#x3D;146 ttl&#x3D;64 time&#x3D;0.258 ms</span><br><span class="line">64 bytes from 192.168.0.75: icmp_seq&#x3D;147 ttl&#x3D;64 time&#x3D;0.240 ms</span><br><span class="line">92 bytes from 192.168.0.70: Redirect Host(New addr: 192.168.0.75)</span><br><span class="line">Vr HL TOS  Len   ID Flg  off TTL Pro  cks      Src      Dst</span><br><span class="line"> 4  5  00 0054 bc98   0 0000  3f  01 3d16 192.168.0.95  192.168.0.75</span><br><span class="line"></span><br><span class="line">Request timeout for icmp_seq 148</span><br><span class="line">92 bytes from 192.168.0.70: Redirect Host(New addr: 192.168.0.75)</span><br><span class="line">Vr HL TOS  Len   ID Flg  off TTL Pro  cks      Src      Dst</span><br><span class="line"> 4  5  00 0054 75ff   0 0000  3f  01 83af 192.168.0.95  192.168.0.75</span><br><span class="line"></span><br><span class="line">Request timeout for icmp_seq 149</span><br><span class="line">92 bytes from 192.168.0.70: Redirect Host(New addr: 192.168.0.75)</span><br><span class="line">Vr HL TOS  Len   ID Flg  off TTL Pro  cks      Src      Dst</span><br><span class="line"> 4  5  00 0054 2890   0 0000  3f  01 d11e 192.168.0.95  192.168.0.75</span><br><span class="line"></span><br><span class="line">Request timeout for icmp_seq 150</span><br><span class="line">64 bytes from 192.168.0.75: icmp_seq&#x3D;151 ttl&#x3D;64 time&#x3D;0.245 ms</span><br></pre></td></tr></table></figure><h2><span id="ä½¿ç”¨-kube-vip">ä½¿ç”¨ kube-vip</span></h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä½¿ç”¨ kube-vip æ­å»ºä¸€ä¸ªé«˜å¯ç”¨çš„ Kubernetes é›†ç¾¤ã€‚å…ˆå‡†å¤‡6ä¸ªèŠ‚ç‚¹ï¼š</p><ul><li>3ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹</li><li>3ä¸ª worker èŠ‚ç‚¹</li></ul><p><img src="https://img.hi-linux.com/staticfile/640-20210617164502472-2021-06-17-q1QUur.jpg" alt></p><p>é¦–å…ˆåœ¨å®¿ä¸»æœºä¸Šé¢å®‰è£…ç›¸å…³ä¾èµ–ï¼ŒåŒ…æ‹¬ kubeadmã€kubeletã€kubectl ä»¥åŠä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ containerdã€‚</p><p>è·å– kube-vip çš„ docker é•œåƒï¼Œå¹¶åœ¨ <code>/etc/kuberentes/manifests</code> ä¸­è®¾ç½®é™æ€ pod çš„ yaml èµ„æºæ¸…å•æ–‡ä»¶ï¼Œè¿™æ · Kubernetes å°±ä¼šè‡ªåŠ¨åœ¨æ¯ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šéƒ¨ç½² kube-vip çš„ pod äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># è®¾ç½®VIPåœ°å€</span><br><span class="line">$ export VIP&#x3D;192.168.0.100</span><br><span class="line">$ export INTERFACE&#x3D;eth0</span><br><span class="line">$ ctr image pull docker.io&#x2F;plndr&#x2F;kube-vip:0.3.1</span><br><span class="line">$ ctr run --rm --net-host docker.io&#x2F;plndr&#x2F;kube-vip:0.3.1 vip \</span><br><span class="line">&#x2F;kube-vip manifest pod \</span><br><span class="line">--interface $INTERFACE \</span><br><span class="line">--vip $VIP \</span><br><span class="line">--controlplane \</span><br><span class="line">--services \</span><br><span class="line">--arp \</span><br><span class="line">--leaderElection | tee  &#x2F;etc&#x2F;kubernetes&#x2F;manifests&#x2F;kube-vip.yaml</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥é…ç½® kubeadm äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; ~&#x2F;init_kubelet.yaml &lt;&lt;EOF</span><br><span class="line">apiVersion: kubeadm.k8s.io&#x2F;v1beta2</span><br><span class="line">kind: InitConfiguration</span><br><span class="line">bootstrapTokens:</span><br><span class="line">- token: &quot;9a08jv.c0izixklcxtmnze7&quot;</span><br><span class="line">description: &quot;kubeadm bootstrap token&quot;</span><br><span class="line">ttl: &quot;24h&quot;</span><br><span class="line">nodeRegistration:</span><br><span class="line">criSocket: &quot;&#x2F;var&#x2F;run&#x2F;containerd&#x2F;containerd.sock&quot;</span><br><span class="line">---</span><br><span class="line">apiVersion: kubeadm.k8s.io&#x2F;v1beta2</span><br><span class="line">kind: ClusterConfiguration</span><br><span class="line">controlPlaneEndpoint: &quot;192.168.0.100:6443&quot;</span><br><span class="line">---</span><br><span class="line">apiVersion: kubelet.config.k8s.io&#x2F;v1beta1</span><br><span class="line">kind: KubeletConfiguration</span><br><span class="line">cgroupDriver: &quot;systemd&quot;</span><br><span class="line">protectKernelDefaults: true</span><br><span class="line">EOF</span><br><span class="line">$ kubeadm init --config init_kubelet.yaml --upload-certs</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£… CNIï¼Œæ¯”å¦‚æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ Ciliumã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ curl https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;helm&#x2F;helm&#x2F;master&#x2F;scripts&#x2F;get-helm-3 | bash</span><br><span class="line">$ helm repo add cilium https:&#x2F;&#x2F;helm.cilium.io&#x2F;</span><br><span class="line">$ helm install cilium cilium&#x2F;cilium --version 1.9.4 \</span><br><span class="line">--namespace kube-system</span><br></pre></td></tr></table></figure><p>åœ¨ç¬¬ä¸€ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹å‡†å¤‡å¥½åï¼Œè®©å…¶ä»–èŠ‚ç‚¹åŠ å…¥ä½ çš„é›†ç¾¤ã€‚å¯¹äºå…¶ä»–æ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ kubeadm join 192.168.0.100:6443 --token hash.hash\</span><br><span class="line">     --discovery-token-ca-cert-hash sha256:hash \</span><br><span class="line">     --control-plane --certificate-key key</span><br></pre></td></tr></table></figure><p>å¯¹äºå·¥ä½œèŠ‚ç‚¹ï¼Œè¿è¡Œç±»ä¼¼å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubeadm join 192.168.0.100:6443 --token hash.hash\</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:hash</span><br></pre></td></tr></table></figure><p>æ­£å¸¸æ‰§è¡Œå®Œæˆåé›†ç¾¤å°±å¯ä»¥å¯åŠ¨èµ·æ¥äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get node -o wide</span><br><span class="line">NAME           STATUS   ROLES                  AGE    VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME</span><br><span class="line">k8s-master-0   Ready    control-plane,master   121m   v1.20.2   192.168.0.201   &lt;none&gt;        Ubuntu 20.04.2 LTS   5.4.0-45-generic   containerd:&#x2F;&#x2F;1.4.3</span><br><span class="line">k8s-master-1   Ready    control-plane,master   114m   v1.20.2   192.168.0.202   &lt;none&gt;        Ubuntu 20.04.2 LTS   5.4.0-45-generic   containerd:&#x2F;&#x2F;1.4.3</span><br><span class="line">k8s-master-2   Ready    control-plane,master   113m   v1.20.2   192.168.0.203   &lt;none&gt;        Ubuntu 20.04.2 LTS   5.4.0-45-generic   containerd:&#x2F;&#x2F;1.4.3</span><br><span class="line">k8s-worker-0   Ready    &lt;none&gt;                 114m   v1.20.2   192.168.0.204   &lt;none&gt;        Ubuntu 20.04.2 LTS   5.4.0-45-generic   containerd:&#x2F;&#x2F;1.4.3</span><br><span class="line">k8s-worker-1   Ready    &lt;none&gt;                 114m   v1.20.2   192.168.0.205   &lt;none&gt;        Ubuntu 20.04.2 LTS   5.4.0-45-generic   containerd:&#x2F;&#x2F;1.4.3</span><br><span class="line">k8s-worker-2   Ready    &lt;none&gt;                 112m   v1.20.2   192.168.0.206   &lt;none&gt;        Ubuntu 20.04.2 LTS   5.4.0-45-generic   containerd:&#x2F;&#x2F;1.4.3</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ§åˆ¶é¢çš„ç«¯ç‚¹æ˜¯ 192.168.0.100ï¼Œæ²¡æœ‰å…¶ä»–é¢å¤–çš„èŠ‚ç‚¹ï¼Œæ˜¯ä¸æ˜¯éå¸¸æ–¹ä¾¿ã€‚</p><p>å‚è€ƒæ–‡æ¡£ï¼š <a href="https://inductor.medium.com/say-good-bye-to-haproxy-and-keepalived-with-kube-vip-on-your-ha-k8s-control-plane-bb7237eca9fc" target="_blank" rel="noopener">https://inductor.medium.com/say-good-bye-to-haproxy-and-keepalived-with-kube-vip-on-your-ha-k8s-control-plane-bb7237eca9fc</a></p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ k8s æŠ€æœ¯åœˆ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/f66ejhbc" target="_blank" rel="noopener">https://tinyurl.com/f66ejhbc</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;kube-vip&lt;/code&gt; å¯ä»¥åœ¨ä½ çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šæä¾›ä¸€ä¸ª Kubernetes åŸç”Ÿçš„ HA è´Ÿè½½å‡è¡¡ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†åœ¨å¤–éƒ¨è®¾ç½® HAProxy å’Œ Keepalived æ¥å®ç°é›†ç¾¤çš„é«˜å¯ç”¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kube-vip&lt;/code&gt; æ˜¯ä¸€ä¸ªä¸º Kubernetes é›†ç¾¤å†…éƒ¨å’Œå¤–éƒ¨æä¾›é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡çš„å¼€æºé¡¹ç›®ï¼Œåœ¨ Vmware çš„ Tanzu é¡¹ç›®ä¸­å·²ç»ä½¿ç”¨ kube-vip æ›¿æ¢äº†ç”¨äº vSphere éƒ¨ç½²çš„ HAProxy è´Ÿè½½å‡è¡¡å™¨ï¼Œæœ¬æ–‡æˆ‘ä»¬å°†å…ˆæ¥äº†è§£ kube-vip å¦‚ä½•ç”¨äº Kubernetes æ§åˆ¶å¹³é¢çš„é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç‰¹ç‚¹&quot;&gt;ç‰¹ç‚¹&lt;/h2&gt;
&lt;p&gt;Kube-Vip æœ€åˆæ˜¯ä¸º Kubernetes æ§åˆ¶å¹³é¢æä¾› HA è§£å†³æ–¹æ¡ˆè€Œåˆ›å»ºçš„ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒå·²ç»å‘å±•ä¸ºå°†ç›¸åŒçš„åŠŸèƒ½åˆå¹¶åˆ° Kubernetes çš„ LoadBalancer ç±»å‹çš„ Service ä¸­äº†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VIP åœ°å€å¯ä»¥æ˜¯ IPv4 æˆ– IPv6&lt;/li&gt;
&lt;li&gt;å¸¦æœ‰ ARPï¼ˆç¬¬2å±‚ï¼‰æˆ– BGPï¼ˆç¬¬3å±‚ï¼‰çš„æ§åˆ¶å¹³é¢&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨é¢†å¯¼é€‰ä¸¾æˆ– raft æ§åˆ¶å¹³é¢&lt;/li&gt;
&lt;li&gt;å¸¦æœ‰ kubeadmï¼ˆé™æ€ Podï¼‰çš„æ§åˆ¶å¹³é¢ HA&lt;/li&gt;
&lt;li&gt;å¸¦æœ‰ K3s/å’Œå…¶ä»–ï¼ˆDaemonSetsï¼‰çš„æ§åˆ¶å¹³é¢ HA&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ ARP é¢†å¯¼è€…é€‰ä¸¾çš„ Service LoadBalancerï¼ˆç¬¬ 2 å±‚ï¼‰&lt;/li&gt;
&lt;li&gt;é€šè¿‡ BGP ä½¿ç”¨å¤šä¸ªèŠ‚ç‚¹çš„ Service LoadBalancer&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå‘½åç©ºé—´æˆ–å…¨å±€çš„ Service LoadBalancer åœ°å€æ± &lt;/li&gt;
&lt;li&gt;Service LoadBalancer åœ°å€é€šè¿‡ UPNP æš´éœ²ç»™ç½‘å…³&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/categories/kubernetes/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/tags/Kubernetes/"/>
    
      <category term="æ•™ç¨‹" scheme="https://www.hi-linux.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>ç§‘æ™® | æŠ–éŸ³æœåŠ¡å™¨å¸¦å®½æœ‰å¤šå¤§ï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿä¾›ä¸Šäº¿ç”¨æˆ·åŒæ—¶åˆ·ï¼Ÿ</title>
    <link href="https://www.hi-linux.com/posts/58624.html"/>
    <id>https://www.hi-linux.com/posts/58624.html</id>
    <published>2021-06-20T01:00:00.000Z</published>
    <updated>2021-06-20T12:20:43.394Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><blockquote><p>æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„æé—®ï¼šæŠ–éŸ³æœåŠ¡å™¨å¸¦å®½æœ‰å¤šå¤§ï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿä¾›é‚£ä¹ˆå¤šäººåŒæ—¶åˆ·ï¼Ÿä»Šå¤©æ¥ç»™å¤§å®¶ç§‘æ™®ä¸€ä¸‹ã€‚</p></blockquote><p>æŠ–éŸ³ï¼Œç™¾åº¦ï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯éƒ½æ˜¯è‡ªå»ºçš„æ•°æ®ä¸­å¿ƒï¼Œéƒ½æ˜¯ T çº§åˆ«å‡ºå£å¸¦å®½ï¼ˆæ€»å‡ºå£å¸¦å®½ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¾¾åˆ° 1T=1024G/s çš„å‡ºå£å¸¦å®½ï¼ŒæœåŠ¡å™¨æ€»æ•°åŸºæœ¬éƒ½åœ¨ 20 ä¸‡å°ä»¥ä¸Šï¼Œç”šè‡³é˜¿é‡Œäº‘éƒ½è¶…è¿‡äº† 100 ä¸‡å°ã€‚</p><p>å­—èŠ‚è·³åŠ¨çš„æ•°æ®ä¸­å¿ƒæ€»å¸¦å®½ï¼Œå¯èƒ½åœ¨ 10TB çº§åˆ«å·¦å³ï¼Œé¢„æœŸçªç ´ 15TB çº§åˆ«ä¸è¿œäº†ã€‚</p><a id="more"></a><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼šæ€»å‡ºå£å¸¦å®½ 1TBï¼Œå®é™…æœºæˆ¿å‡ºå£å¸¦å®½å¯èƒ½åªæœ‰ 100G ä¸Šä¸‹ï¼Œè¿™æ˜¯é‡‡ç”¨åŒï¼ˆå¤šï¼‰é“¾è·¯è®¾è®¡ï¼ŒåŒå‡ºå£å®ç°åŠ¨æ€æµé‡åˆ†æ‹…ï¼Œæ€»çš„å‡ºå£å¸¦å®½å¯ä»¥è¾¾åˆ° T çº§åˆ«ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210618125403552-2021-06-18-Ast4Xn.jpg" alt="å¤§å‹æ•°æ®ä¸­å¿ƒ"></p><p>æƒ³è¦åŒä¸€æ—¶é—´æœ‰æ•°äº¿äººåœ¨çº¿ï¼ŒTB çº§åˆ«å¸¦å®½ï¼ŒCDN åŠ é€Ÿå’Œå¤šèŠ‚ç‚¹ï¼Œè´Ÿè½½å‡è¡¡ç­‰ç­‰æŠ€æœ¯ç¼ºä¸€ä¸å¯ã€‚ï¼ˆè¿™ä¸ªè®¾è®¡æŠ€æœ¯è¿‡äºå¤æ‚ï¼Œæœ‰ç›¸å…³ä¸“ä¸šæœ‹å‹ï¼Œå¯ä»¥è¯„è®ºç®€è¦æ¦‚è¿°ï¼‰</p><p><img src="https://img.hi-linux.com/staticfile/640-20210618132137982-2021-06-18-SKL3gf.jpg" alt="CDN åŠ é€Ÿ"></p><h2><span id="å­—èŠ‚è·³åŠ¨æœ‰å¤šå°‘å°æœåŠ¡å™¨">å­—èŠ‚è·³åŠ¨æœ‰å¤šå°‘å°æœåŠ¡å™¨ï¼Ÿ</span></h2><p>æ ¹æ®ç½‘ç»œæ•°æ®æ•´ç†ï¼Œ2017 å¹´ 2-3 ä¸‡å°æœåŠ¡å™¨ï¼Œè¿™ä¸ªæ—¶å€™ä¸»è¦æ˜¯ç§Ÿç”¨æœåŠ¡å™¨ä¸ºä¸»ã€‚</p><p>2018 å¹´ï¼Œå­—èŠ‚è·³åŠ¨è‡ªå·±å»ºè®¾äº†æ•°æ®ä¸­å¿ƒï¼Œæœ€å¤§çš„æ•°æ®ä¸­å¿ƒåœ¨æ²³åŒ—æ€€æ¥å®˜å…æ¹–æ–°åª’ä½“äº§ä¸šå›­ï¼Œä¸€æœŸ 5 ä¸‡å°æœåŠ¡å™¨ï¼ŒäºŒæœŸ 9 ä¸‡å°æœåŠ¡å™¨ã€‚</p><p>2018 å¹´ï¼Œç§Ÿç”¨+è‡ªå»ºçš„æœåŠ¡å™¨æ•°é‡è¾¾åˆ° 17 ä¸‡å°æœåŠ¡å™¨ã€‚</p><p>2020 å¹´ï¼Œæ ¹æ®å­—èŠ‚è·³åŠ¨æ‹›è˜å…¬å‘Šçš„æ•°æ®ï¼Œæ˜¾ç¤ºæœ‰ 42 ä¸‡å°æœåŠ¡å™¨ã€‚æ¯” 2018 å¹´å¢é•¿äº† 1.5 å€ã€‚ï¼ˆæ•°æ®æ¥è‡ªç½‘ç»œï¼‰</p><p><img src="https://img.hi-linux.com/staticfile/640-20210618132143644-2021-06-18-yYrcJJ.jpg" alt="ä¸€ä¸ªæœºæŸœä¸­ 10-20 å°æœåŠ¡å™¨"></p><p>è¿™éƒ¨åˆ†æœåŠ¡å™¨éƒ½æ˜¯ç»™ä¸­å›½åŒºåŸŸä½¿ç”¨ï¼Œä¸»è¦åº”ç”¨å›½å†…çš„æŠ–éŸ³ï¼Œè¥¿ç“œè§†é¢‘ï¼Œä»Šæ—¥å¤´æ¡ï¼Œé£ä¹¦ç­‰äº§å“ã€‚</p><p>åœ¨ç¾å›½çš„ TIKTOK æ˜¯ç‹¬ç«‹å‡ºæ¥çš„è¿è¥ï¼Œæ•°æ®åœ¨ç¾å›½å½“åœ°å­˜å‚¨å’Œåˆ†å‘ã€‚2020 å¹´ Tiktok åœ¨ç¾å›½ä¹Ÿç§Ÿç”¨äº†è¿‘ 10 ä¸‡å°æœåŠ¡å™¨</p><p>æ® Business Insider å…¬å¸ƒæ•°æ®ï¼Œ2020 å¹´ä¸ŠåŠå¹´ï¼Œå­—èŠ‚è·³åŠ¨åœ¨ç¾å›½å¼—å‰å°¼äºšå·åŒ—éƒ¨ç§Ÿç”¨äº†èƒ½è€—è¾¾ 53 å…†ç“¦çš„æ•°æ®ä¸­å¿ƒã€‚å¯ä»¥å®¹çº³æ•°åä¸‡å°æœåŠ¡å™¨ï¼Œå åœ°é¢ç§¯å¯è¾¾æ•°åä¸‡å¹³æ–¹è‹±å°ºã€‚</p><p>Tiktok åœ¨å°åº¦ï¼Œæ–°åŠ å¡éƒ½åœ¨æŠ•èµ„å»ºè®¾æ•°æ®ä¸­å¿ƒã€‚</p><h2><span id="å­—èŠ‚è·³åŠ¨å¤§å‹çš„æ•°æ®ä¸­å¿ƒå‡ºå£å¸¦å®½æ˜¯å¤šå°‘">å­—èŠ‚è·³åŠ¨å¤§å‹çš„æ•°æ®ä¸­å¿ƒå‡ºå£å¸¦å®½æ˜¯å¤šå°‘ï¼Ÿ</span></h2><p>èŠå®Œäº†æœåŠ¡å™¨æ•°é‡ï¼Œé‚£ä¹ˆå’±ä»¬æ¥ç‚¹ç¡¬æ ¸çš„ä¸œè¥¿ï¼šå­—èŠ‚è·³åŠ¨å¤§å‹çš„æ•°æ®ä¸­å¿ƒå‡ºå£å¸¦å®½æ˜¯å¤šå°‘ï¼Ÿ</p><blockquote><p>çŸ¥è¯†ç‚¹ï¼šæ‰€è°“çš„å‡ºå£å¸¦å®½ï¼Œå…¶å®å°±æ˜¯å’±ä»¬æ™®é€šäººæ‰€è¯´çš„ä¸‹è½½å¸¦å®½ã€‚å°±æ˜¯æœåŠ¡å™¨ç»™æ¯ä¸€ä¸ªæ‰‹æœºåˆ†å‘æ•°æ®æ€»é€Ÿåº¦ã€‚</p></blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°å‹çš„ IDC å…¬å¸è‡ªå»ºæœºæˆ¿ï¼Œæ¯”å¦‚ä¸€äº›ç½‘ç«™å…¬å¸ï¼Œç§Ÿç”¨è”é€šï¼Œç§»åŠ¨ï¼Œç”µä¿¡çš„æœºæˆ¿ï¼Œå¯èƒ½æ€»ä½“å‡ºå£å¸¦å®½åªæœ‰ 5Gã€‚è¶…è¿‡ 30G é‚£éƒ½æ˜¯å…·å¤‡ä¸€å®šè§„æ¨¡çš„ä¼ä¸šã€‚ç½‘ç»œå…¬å¸è¥æ”¶å°‘è¯´ä¹Ÿæ˜¯å‡ åƒä¸‡çš„ä¼ä¸šã€‚</p><p>æ‰€ä»¥ï¼Œç»å¸¸èƒ½å¤Ÿçœ‹åˆ°ï¼Œä¸€äº›è§„æ¨¡è¿˜ä¸é”™çš„ä¼ä¸šï¼ŒåŸºæœ¬ä¸Šéƒ½ä¸å†è‡ªå»ºæœºæˆ¿ï¼Œéƒ½æ˜¯ä½¿ç”¨äº‘ä¸»æœºã€‚ä¾‹å¦‚é˜¿é‡Œäº‘çš„ ECSï¼Œè…¾è®¯äº‘ï¼Œç™¾åº¦äº‘ï¼ŒAWSï¼ˆäºšé©¬é€Šï¼‰ã€‚</p><p>ä¸€èˆ¬ä¸€ä¸ªä¼ä¸šç½‘ç«™ï¼ˆä¼ä¸šå®˜ç½‘ï¼‰ï¼Œ20M å¸¦å®½ï¼Œ4G å†…å­˜ï¼Œ100G ç¡¬ç›˜ï¼Œä¸€å¹´ä»·æ ¼ä¹Ÿå°± 4000-5000 å—é’±å°±è¶³å¤Ÿäº†ï¼Œèµ¶ä¸Šåšæ´»åŠ¨ä»·æ ¼å¯èƒ½æ›´ä¾¿å®œã€‚</p><p>è¿™é‡Œé¢å°±æ˜¯å¸¦å®½æœ€è´µï¼Œå½“ç„¶å¢åŠ å¸¦å®½ï¼Œè¾¾åˆ°ä¸€å®šç­‰çº§ï¼Œä¾‹å¦‚è®¿é—®é‡å¢å¤§ï¼Œå¿…é¡»è¦å¢åŠ å†…å­˜å’Œç¡¬ç›˜ã€‚</p><p>ç›¸æ¯”æ¥è¯´ï¼Œå¸¦å®½å¢åŠ çš„è¯ï¼Œè´¹ç”¨æ›´è´µä¸€äº›ã€‚è¿™é‡Œå°±è·Ÿä½ è¯´æ˜ä¸€ä¸‹ï¼šå¸¦å®½æ¯”è¾ƒæ˜‚è´µï¼Œå±äºç¨€ç¼ºèµ„æºã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸­å›½ç§»åŠ¨çš„ä¸€ä¸ªæœºæˆ¿ï¼Œä¸­å›½ç§»åŠ¨ï¼ˆæ²³åŒ—çŸ³å®¶åº„ï¼‰æ•°æ®ä¸­å¿ƒçš„æ•°æ®ï¼šå åœ°é¢ç§¯ 174 äº©ï¼Œæ€»å»ºç­‘é¢ç§¯ 13 ä¸‡å¹³æ–¹ç±³ï¼Œè§„åˆ’ 10 æ ‹å•ä½“å»ºç­‘ï¼Œå…¨éƒ¨å»ºæˆåå¯æä¾›çº¦ 3 ä¸‡ä¸ªæœºæ¶çš„è£…æœºèƒ½åŠ›ã€‚</p><p>3 ä¸ª IDC æœºæˆ¿å…±å¯æä¾› 3.1 ä¸‡æ¶æœºæŸœï¼Œ15T å¸¦å®½èµ„æºã€‚ä¸€ä¸ªæœºæŸœï¼Œå…¨ 1U è®¾å¤‡éƒ¨ç½²æ•°é‡ä¸€èˆ¬ä¸è¶…è¿‡ 16 å°ï¼Œå…¨ 2U è®¾å¤‡ä¸€èˆ¬ä¸è¶…è¿‡ 12 å°ï¼Œå…¨ 4U è®¾å¤‡ä¸€èˆ¬ 4 åˆ° 7 å°ã€‚</p><p>æˆ‘ä»¬å–é«˜æ€§èƒ½çš„ 2U å’Œ 4U æœåŠ¡å™¨è¿›è¡Œå¹³å‡æŠ˜ä¸­ï¼Œå„ç®—ä¸€åŠï¼ˆæ¯•ç«Ÿç§»åŠ¨ä¹Ÿç®—æ˜¯æœ‰é’±çš„å¤§æˆ·ï¼Œä¸èƒ½ä¹°ä½ç«¯çš„ 1U è®¾å¤‡ï¼‰ã€‚</p><p>é‚£ä¹ˆ 3.1 ä¸‡æ¶æœºæŸœå°±å¯ä»¥å®‰è£…ï¼Œæœ€å¤š 21-36 ä¸‡å°æœåŠ¡å™¨ã€‚è¿™é‡Œç²—ç•¥å–ä¸€ä¸ªå¹³å‡å€¼ï¼š30 ä¸‡å°æœåŠ¡å™¨ã€‚</p><p>äº«å— 15T çš„å‡ºå£å¸¦å®½èµ„æºã€‚å½“ç„¶ä½œä¸ºç”µä¿¡çš„å¹²è·¯ç½‘ï¼Œç§»åŠ¨æ‹¿å¸¦å®½èµ„æºè‚¯å®šæ˜¯è¦æ¯”å­—èŠ‚è·³åŠ¨æ›´æœ‰ä¼˜åŠ¿çš„ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç²—ç•¥åœ°ä¼°è®¡å­—èŠ‚è·³åŠ¨è‡ªå»ºçš„ 17 ä¸‡å°æœåŠ¡å™¨çš„æ•°æ®ä¸­å¿ƒã€‚æ€»å‡ºå£å¸¦å®½å¯èƒ½åœ¨ 7Tb-10TB ä¸Šä¸‹ã€‚</p><p>åŸºæœ¬ä¸Šè‚¯å®šä¼šé‡‡ç”¨åŒå‡ºå£æµé‡è®¾è®¡ï¼Œå†åŠ ä¸Šå¤šé“¾è·¯çš„éƒ¨ç½²æ–¹å¼ï¼šå¯ä»¥åšåˆ°å®é™…å‡ºå£å¸¦å®½åœ¨ 800G-1TG å°±å¯ä»¥å®ç° 10T å·¦å³çš„æ€»å‡ºå£å¸¦å®½ã€‚ã€è¿™æ˜¯æŠ€æœ¯æ–¹å¼ã€‘</p><p><img src="https://img.hi-linux.com/staticfile/640-20210618125403637-2021-06-18-0b9MmZ.jpg" alt="å­—èŠ‚è·³åŠ¨ 2018 å¹´æ²³åŒ—æ€€åŒ–æ•°æ®ä¸­å¿ƒ"></p><p>T çº§åˆ«å‡ºå£å¸¦å®½æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Œå¦‚æœæˆ‘å‘Šè¯‰ä½  2009 å¹´ï¼Œæ•´ä¸ªä¸Šæµ·çš„å‡ºå£å¸¦å®½æ‰ 1140Gï¼Œä¹Ÿå°±æ˜¯åˆšåˆšè¾¾åˆ° 1TBã€‚</p><p>åœ¨çŸ­çŸ­çš„ 10 å¹´åï¼Œä¸€ä¸ªä¼ä¸šçš„æ•°æ®ä¸­å¿ƒçš„å‡ºå£å¸¦å®½å°±è¶…è¿‡ 1TBï¼Œè¿™ä¸ªé€Ÿåº¦çœŸçš„ä¸å¯æƒ³è±¡ã€‚</p><p>è¦çŸ¥é“ 2009 å¹´ï¼Œè™½ç„¶æ™ºèƒ½æ‰‹æœºä¸å‘è¾¾ï¼Œä½†æ˜¯ä¸ªäºº PC é”€é‡å·²ç»éå¸¸åºå¤§äº†ã€‚</p><p>CDN åŠ é€Ÿï¼Œè®©å¤§ä¼—åˆ·æŠ–éŸ³ï¼Œçœ‹è§†é¢‘éƒ½ä¸å†å¡ã€‚</p><blockquote><p>çŸ¥è¯†ç‚¹ï¼šCDNï¼ˆContent Delivery Networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ã€‚</p></blockquote><p>å°†æœåŠ¡ç«¯çš„å†…å®¹å‘å¸ƒåˆ°æœ€æ¥è¿‘ç”¨æˆ·çš„è¾¹ç¼˜èŠ‚ç‚¹ï¼Œä½¿ç”¨æˆ·å¯ä»¥å°±è¿‘å–å¾—æ‰€éœ€çš„å†…å®¹ã€‚</p><p>è§£å†³ Internet ç½‘ç»œæ‹¥å¡çŠ¶å†µï¼Œæé«˜ç”¨æˆ·è®¿é—®ç½‘ç«™çš„å“åº”é€Ÿåº¦ã€‚å¤šç§åŠ é€Ÿçš„æ–¹æ¡ˆé›†åˆã€‚</p><p><strong>ç”¨é€šä¿—çš„è¯è§£é‡Š CDN å°±æ˜¯ï¼š</strong> ä¼šæŠŠä¸€äº›é¡µé¢ï¼Œä¸“é—¨å‹ç¼©ï¼Œæœ‰çš„å‹ç¼©ä¸ºé™æ€é¡µé¢ï¼Œé™æ€é¡µé¢ç›´æ¥åˆ†å‘é€Ÿåº¦å¿«ã€‚ç”¨æˆ·å¯ä»¥åœ¨ 2s å†…çœ‹åˆ°å†…å®¹ï¼Œä½“éªŒæ„Ÿæ›´å¥½ã€‚ã€è¿™æ˜¯é™æ€ä¼ è¾“ã€‘</p><p>å¯¹äºåŠ¨æ€è§†é¢‘ï¼Œé¦–å…ˆé€šè¿‡æ™ºèƒ½è·¯ç”±ï¼Œå¯»æ‰¾æœ€ä½³è·¯å¾„ï¼Œç„¶ååè®®ä¼˜åŒ–å°†é•¿è¿æ¥ï¼Œå†…å®¹è¿›è¡Œå‹ç¼©ï¼Œå»é™¤å†—ä½™ã€‚ã€è¿™å°±æ˜¯åŠ¨æ€å‹ç¼©ã€‘</p><p>ç»™ä½ ä»¬çœ‹ä¸€ä¸‹ 2015 å¹´è…¾è®¯ 5 äº¿æ—¥æ´»ï¼Œé›†åˆäº†éŸ³ä¹ï¼Œå³æ—¶é€šè®¯ç­‰ç­‰äº§å“çš„ CDN çš„çº§åˆ«ï¼Œè¾¾åˆ°äº† 10TB å¸¦å®½ã€‚æ¯å¤©è¯·æ±‚ä¸‡äº¿æ¬¡ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/640-20210618132155242-2021-06-18-RoPW9i.jpg" alt="2015 å¹´è…¾è®¯ CDN çš„çº§åˆ«"></p><p>å› æ­¤ï¼Œæˆ‘è¿™é‡Œè¯´å­—èŠ‚è·³åŠ¨æ•´ä½“æœåŠ¡å™¨æœ‰ 10TB åº”è¯¥åªå°‘ä¸å¤šã€‚æ¯•ç«ŸæŠ–éŸ³æ—¥æ´»æœ‰ 6 äº¿ï¼Œè¥¿ç“œè§†é¢‘+ä»Šæ—¥å¤´æ¡æˆ‘ä»¬ç²—ç•¥ç®—æ˜¯ 2 äº¿ï¼Œæ€»è®¡æœ‰ 8 äº¿çš„æ—¥æ´»ã€‚</p><p>å°±æ˜¯è¿™ä¹ˆå¤§çš„å¸¦å®½å’ŒæŠ€æœ¯å®åŠ›ï¼Œæ‰èƒ½è®©æˆ‘ä»¬çœ‹è§†é¢‘è¿™ä¹ˆé¡ºç•…ã€‚</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ æ–°æµª ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/khheksc5" target="_blank" rel="noopener">https://tinyurl.com/khheksc5</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„æé—®ï¼šæŠ–éŸ³æœåŠ¡å™¨å¸¦å®½æœ‰å¤šå¤§ï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿä¾›é‚£ä¹ˆå¤šäººåŒæ—¶åˆ·ï¼Ÿä»Šå¤©æ¥ç»™å¤§å®¶ç§‘æ™®ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŠ–éŸ³ï¼Œç™¾åº¦ï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯éƒ½æ˜¯è‡ªå»ºçš„æ•°æ®ä¸­å¿ƒï¼Œéƒ½æ˜¯ T çº§åˆ«å‡ºå£å¸¦å®½ï¼ˆæ€»å‡ºå£å¸¦å®½ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¾¾åˆ° 1T=1024G/s çš„å‡ºå£å¸¦å®½ï¼ŒæœåŠ¡å™¨æ€»æ•°åŸºæœ¬éƒ½åœ¨ 20 ä¸‡å°ä»¥ä¸Šï¼Œç”šè‡³é˜¿é‡Œäº‘éƒ½è¶…è¿‡äº† 100 ä¸‡å°ã€‚&lt;/p&gt;
&lt;p&gt;å­—èŠ‚è·³åŠ¨çš„æ•°æ®ä¸­å¿ƒæ€»å¸¦å®½ï¼Œå¯èƒ½åœ¨ 10TB çº§åˆ«å·¦å³ï¼Œé¢„æœŸçªç ´ 15TB çº§åˆ«ä¸è¿œäº†ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="ç½‘ç»œ" scheme="https://www.hi-linux.com/tags/%E7%BD%91%E7%BB%9C/"/>
    
      <category term="æŠ–éŸ³" scheme="https://www.hi-linux.com/tags/%E6%8A%96%E9%9F%B3/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨ Yadm ä¼˜é›…ç®¡ç†ä½ çš„åº”ç”¨é…ç½®å’Œæ•°æ®</title>
    <link href="https://www.hi-linux.com/posts/64799.html"/>
    <id>https://www.hi-linux.com/posts/64799.html</id>
    <published>2021-06-18T01:00:00.000Z</published>
    <updated>2021-06-18T01:16:59.484Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><blockquote><p><strong>å¼€å§‹ï¼Œå¼€å§‹ï¼Œå¼€å§‹ä½¿ç”¨å§ï¼</strong></p></blockquote><h2><span id="1-åŠŸèƒ½ç®€ä»‹">1. åŠŸèƒ½ç®€ä»‹</span></h2><blockquote><p><strong>User-specific app config is stored in so called dotfiles</strong></p></blockquote><p>æ‚¨å¼€å§‹å°è¯•å¯¹é…ç½®è¿›è¡Œæ–°çš„æ›´æ”¹ï¼Œç°åœ¨ä¸€åˆ‡éƒ½è¢«ç ´åäº†ã€‚<code>yadm</code> å¯ä»¥å¸®åŠ©ä½ å†³å®šä»€ä¹ˆæ”¹å˜äº†ï¼Œæˆ–è€…ç®€å•åœ°æ¢å¤ä½ æ‰€æœ‰çš„æ”¹å˜ã€‚</p><ul><li><strong>Yadm å¯ä»¥æ¢å¤ä½ çš„é…ç½®</strong></li></ul><p>æ‚¨å·²ç»èŠ±è´¹äº†æ—¶é—´è°ƒæ•´æ‚¨çš„è®¡ç®—ç¯å¢ƒã€‚ä¸€åˆ‡éƒ½æŒ‰ç…§ä½ æƒ³è¦çš„æ–¹å¼è¿ä½œã€‚å¤ªæ£’äº†ï¼ç„¶åä½ çš„ç¡¬ç›˜å‡ºäº†æ•…éšœï¼Œç”µè„‘éœ€è¦é‡å»ºã€‚</p><ul><li><strong>Yadm å¯ä»¥å¸®ä½ åè°ƒæœºå™¨ä¹‹é—´çš„é…ç½®</strong></li></ul><p>ä½ å¾—åˆ°äº†ä¸€å°æ–°ç”µè„‘ï¼Œä½ æƒ³è¦é‡æ–°åˆ›å»ºé‚£ä¸ªç¯å¢ƒã€‚æ‚¨å¯èƒ½å¸Œæœ›ä¸¤å°æœºå™¨çš„é…ç½®ä¿æŒåŒæ­¥ã€‚</p><a id="more"></a><h2><span id="2-å·¥ä½œæ–¹å¼">2. å·¥ä½œæ–¹å¼</span></h2><blockquote><p><strong>Yet Another Dotfiles Manager</strong></p></blockquote><p><code>yadm</code> å°±åƒæœ‰ä¸€ä¸ªç‰ˆæœ¬çš„ <code>Git</code>ï¼Œå®ƒåªåœ¨ä½ çš„ <code>dotfiles</code> ä¸Šè¿è¡Œã€‚å¦‚æœä½ çŸ¥é“å¦‚ä½•ä½¿ç”¨ <code>Git</code> å·¥å…·çš„è¯ï¼Œä½ å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨ <code>yadm</code> äº†ã€‚</p><ol><li>å¦‚æœæ‚¨çš„å·¥ä½œç›®å½•æ˜¯å¦ä¸€ä¸ª <code>Git</code> ç®¡ç†çš„å­˜å‚¨åº“ï¼Œè¿™å¹¶ä¸é‡è¦ã€‚</li><li>ä¸å¿…ç§»åŠ¨ <code>dotfiles</code> æˆ–è€…å°†å®ƒä»¬ä»å¦ä¸€ä¸ªä½ç½®ç¬¦å·é“¾æ¥èµ·æ¥ã€‚</li><li><code>Yadm</code> è‡ªåŠ¨ç»§æ‰¿äº† <code>Git</code> çš„æ‰€æœ‰ç‰¹æ€§ï¼Œå…è®¸ä½ åˆ†æ”¯ã€åˆå¹¶ã€é‡å»ºã€ä½¿ç”¨å­æ¨¡å—ç­‰ã€‚</li></ol><p>å®é™…ä¸Š <code>yadm</code> åº•å±‚ä¾æ—§æ˜¯ä½¿ç”¨ <code>Git</code> æ¥åšç®¡ç†çš„ï¼Œå³ <code>yadm</code> åœ¨ç®¡ç† <code>dotfiles</code> çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯ç”¨ <code>Git</code> æ¥è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€è¿œç¨‹åŒæ­¥ç­‰æ“ä½œçš„ã€‚ä½†æ˜¯ï¼Œ<code>yadm</code> åœ¨ <code>Git</code> å·¥å…·åŠŸèƒ½çš„åŸºç¡€ä¹‹ä¸Šï¼Œè¿›è¡Œäº†åˆç†çš„åŠŸèƒ½æ‹“å±•ã€‚</p><ol><li>ä½¿ç”¨å•ä¸€å­˜å‚¨åº“</li><li>å‡ ä¹æ²¡æœ‰ä»»ä½•ä¾èµ–</li><li>èƒ½å¤Ÿä½¿ç”¨åŸºäºæ“ä½œç³»ç»Ÿæˆ–ä¸»æœºçš„å¤‡ç”¨æ–‡ä»¶</li><li>èƒ½å¤ŸåŠ å¯†å’Œè·Ÿè¸ªæœºå¯†æ–‡ä»¶</li></ol><h2><span id="3-å®‰è£…æ–¹å¼">3. å®‰è£…æ–¹å¼</span></h2><blockquote><p><strong>å®‰è£…æ–¹å¼åŸæ¥å¾ˆç®€å•</strong></p></blockquote><ul><li><strong>OSX</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install yadm</span><br></pre></td></tr></table></figure><ul><li><strong>Ubuntu/Debian</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install -y yadm</span><br></pre></td></tr></table></figure><ul><li><strong>Download</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -fLo /usr/<span class="built_in">local</span>/bin/yadm https://github.com/TheLocehiliosan/yadm/raw/master/yadm</span><br><span class="line">$ chmod a+x /usr/<span class="built_in">local</span>/bin/yadm</span><br></pre></td></tr></table></figure><h2><span id="4-å¿«é€Ÿå¼€å§‹">4. å¿«é€Ÿå¼€å§‹</span></h2><blockquote><p><strong>åªéœ€è¦ç®€å•å‡ ä¸ªæ­¥éª¤ï¼Œ</strong></p></blockquote><ul><li><strong>[1] åˆ›å»ºä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“</strong></li></ul><p>åœ¨ <code>Github</code> ä¸Šé¢åˆ›å»ºä¸€ä¸ªç©ºçš„ä»“åº“ï¼Œæ¨èä½¿ç”¨ç§æœ‰ä»“åº“ï¼Œå†µä¸”ç°åœ¨ç§æœ‰ä»“åº“å·²ç»å…è´¹å¼€æ”¾äº†ã€‚ä¸ç„¶ï¼Œä¸€æ—¦å°†ç§æœ‰çš„å†…å®¹åŒæ­¥ä¸Šå»çš„è¯ï¼Œé‚£å°±éå¸¸å°´å°¬ä¸”å±é™©äº†ã€‚ä¹‹åï¼Œå†æˆ‘ä»¬çš„å®¶ç›®å½•(<code>~/</code>)ä¸‹é¢è¿›è¡Œåˆå§‹åŒ–å¹¶æ·»åŠ åˆ°ä»“åº“é‡Œé¢è¿›è¡Œç®¡ç†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–yadmä»“åº“</span></span><br><span class="line">$ yadm init</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨yadmæ·»åŠ æ–‡ä»¶æˆ–ç›®å½•</span></span><br><span class="line">$ yadm add &lt;file/dir&gt;</span><br><span class="line">$ yadm commit -m <span class="string">"info"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ yadm remote add origin &lt;github url&gt;</span><br><span class="line">$ yadm push -u origin master</span><br></pre></td></tr></table></figure><ul><li><strong>[2] å·²ç»æœ‰äº†è¿œç¨‹å­˜å‚¨åº“</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›´æ¥ä½¿ç”¨</span></span><br><span class="line">$ yadm <span class="built_in">clone</span> &lt;github url&gt;</span><br><span class="line">$ yadm status</span><br></pre></td></tr></table></figure><p>ä»æ­¤å¼€å§‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>yadm</code> æ¥ä¸“å±ç®¡ç†æˆ‘ä»¬åˆ†æ•£åœ¨ç³»ç»Ÿä¸­å„ä¸ªåœ°æ–¹çš„é…ç½®æ–‡ä»¶æˆ–è€…é‡è¦ç›®å½•äº†ï¼Œå³ä¸“å±çš„ <code>Dotfiles</code> ç®¡å®¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ä½¿ç”¨yadmç®¡ç†çš„Dotfilesåˆ—è¡¨</span></span><br><span class="line">$ yadm list | head -2</span><br><span class="line">.tmux.conf</span><br><span class="line">.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ¯ä¸ªDotfilesæ–‡ä»¶çš„ä¿®æ”¹æƒ…å†µ</span></span><br><span class="line">$ yadm status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is up to date with <span class="string">'origin/master'</span></span><br><span class="line">nothing to commit (use -u to show untracked files)</span><br></pre></td></tr></table></figure><h2><span id="5-å‘½ä»¤ä½¿ç”¨">5. å‘½ä»¤ä½¿ç”¨</span></h2><blockquote><p><strong>å…ˆæ¥æŒæ¡ä¸‹ yadm å‘½ä»¤çš„ä½¿ç”¨å§ï¼</strong></p></blockquote><table><thead><tr><th style="text-align:left">ç¼–å·</th><th style="text-align:left">Yadm å‘½ä»¤å‚æ•°</th><th style="text-align:left">å‚æ•°å¯¹åº”å«ä¹‰è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left">1</td><td style="text-align:left"><strong><code>yadm status</code></strong></td><td style="text-align:left">æŸ¥çœ‹çŠ¶æ€</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left"><strong><code>yadm fetch</code></strong></td><td style="text-align:left">è¿œç¨‹è·å–</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left"><strong><code>yadm push</code></strong></td><td style="text-align:left">æ¨é€é…ç½®</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left"><strong><code>yadm diff</code></strong></td><td style="text-align:left">å¯¹æ¯”å·®å¼‚</td></tr><tr><td style="text-align:left">5</td><td style="text-align:left"><strong><code>yadm diff --cached</code></strong></td><td style="text-align:left">å¯¹æ¯”å·®å¼‚</td></tr><tr><td style="text-align:left">6</td><td style="text-align:left"><strong><code>yadm list</code></strong></td><td style="text-align:left">ç®¡ç†åˆ—è¡¨</td></tr><tr><td style="text-align:left">7</td><td style="text-align:left"><strong><code>yadm list -a</code></strong></td><td style="text-align:left">ç®¡ç†åˆ—è¡¨</td></tr><tr><td style="text-align:left">8</td><td style="text-align:left"><strong><code>yadm clone</code></strong></td><td style="text-align:left">å…‹éš†é¡¹ç›®</td></tr><tr><td style="text-align:left">9</td><td style="text-align:left"><strong><code>yadm clone --bootstrap</code></strong></td><td style="text-align:left">å…‹éš†é¡¹ç›®</td></tr><tr><td style="text-align:left">10</td><td style="text-align:left"><strong><code>yadm checkout</code></strong></td><td style="text-align:left">çŠ¶æ€è¿å‡º</td></tr><tr><td style="text-align:left">11</td><td style="text-align:left"><strong><code>yadm checkout -b</code></strong></td><td style="text-align:left">çŠ¶æ€è¿å‡º</td></tr><tr><td style="text-align:left">12</td><td style="text-align:left"><strong><code>yadm encrypt</code></strong></td><td style="text-align:left">æ–‡ä»¶è§£å¯†</td></tr><tr><td style="text-align:left">13</td><td style="text-align:left"><strong><code>yadm decrypt</code></strong></td><td style="text-align:left">æ–‡ä»¶è§£å¯†</td></tr><tr><td style="text-align:left">14</td><td style="text-align:left"><strong><code>yadm decrypt -l</code></strong></td><td style="text-align:left">æ–‡ä»¶åŠ å¯†</td></tr><tr><td style="text-align:left">15</td><td style="text-align:left"><strong><code>yadm commit --amend</code></strong></td><td style="text-align:left">ç”¨æ–°çš„æäº¤æ›¿æ¢ä¸Šæ¬¡æäº¤</td></tr><tr><td style="text-align:left">16</td><td style="text-align:left"><strong><code>yadm alt</code></strong></td><td style="text-align:left">åˆ›å»ºç¬¦å·é“¾æ¥</td></tr><tr><td style="text-align:left">17</td><td style="text-align:left"><strong><code>yadm remote -v</code></strong></td><td style="text-align:left">æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€</td></tr></tbody></table><h2><span id="6-è‡ªåŠ¨é…ç½®">6. è‡ªåŠ¨é…ç½®</span></h2><blockquote><p><strong>ä½¿ç”¨ Yadm æ¥è‡ªåŠ¨é…ç½®ç¯å¢ƒ</strong></p></blockquote><ul><li>å’³å’³å’³ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>yadm</code> å·¥å…·ä¸å…‰å…‰æ˜¯å¯ä»¥ç®¡ç†æˆ‘ä»¬çš„ <code>Dotfiles</code> æ–‡ä»¶æˆ–è€…ç›®å½•ï¼Œè€Œä¸”è¿˜å¯ä»¥ä½¿ç”¨å®ƒçš„ <code>bootstrap</code> åŠŸèƒ½æ¥å®Œæˆåˆå§‹åŒ–ç”µè„‘æ—¶è®¸å¤šå·¥å…·çš„å®‰è£…ã€‚</li><li>ä½¿ç”¨ <code>bootstrap</code> åŠŸèƒ½å¯ä»¥è‡ªåŠ¨å°†ä»»åŠ¡è„šæœ¬çš„æ‰§è¡Œ <code>hook</code> åœ¨ <code>yadm</code> å…‹éš†ä¹‹åï¼Œæ¥å®Œæˆç¯å¢ƒçš„å…¨è‡ªåŠ¨éƒ¨ç½²ã€‚è¿™é‡Œä¸è®ºæ˜¯ <code>Bash</code> è„šæœ¬ã€<code>Python</code> è„šæœ¬è¿˜æ˜¯ä»€ä¹ˆåˆ«çš„ï¼Œåªè¦æ˜¯å¯æ‰§è¡Œæ–‡ä»¶å°±å¯ä»¥ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤ä½ç½®</span></span><br><span class="line"><span class="variable">$HOME</span>/.config/yadm/bootstrap/</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºå’Œå‡†å¤‡å¥½ä¸‹è¿°è„šæœ¬ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œ <code>yadm bootstrap</code> å‘½ä»¤æ¥æ‰‹åŠ¨æ‰§è¡Œæ£€æµ‹ä¸€ä¸‹äº†ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ç¼–å†™çš„ <code>bootstrap</code> æ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ <code>yadm</code> å·¥å…·æ¥è¿›è¡Œç®¡ç†çš„ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">system_type=$(uname -s)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">is_command</span></span>() &#123;</span><br><span class="line">    <span class="built_in">command</span> -v <span class="string">"<span class="variable">$1</span>"</span> &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;system_type&#125;</span> = <span class="string">"Darwin"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> ! is_command zsh; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Installing zsh..."</span></span><br><span class="line">        brew install zsh</span><br><span class="line">        <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"All packages are installed."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"Install zsh error."</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p><img src="https://img.hi-linux.com/staticfile/use-yadm-manager-dotfiles-01-2021-01-26-gdrSJR.png" alt></p><h2><span id="7-éšç§ä¿æŠ¤">7. éšç§ä¿æŠ¤</span></h2><blockquote><p><strong>ä½¿ç”¨ Yadm æ¥éšç§ä¿æŠ¤</strong></p></blockquote><ul><li>å¯¹æ•æ„Ÿæ–‡ä»¶(æ¯”å¦‚ <code>SSH</code> å¯†é’¥)è¿›è¡ŒåŠ å¯†ã€è§£å¯†ï¼Œæä¾›ç§æœ‰ä»“åº“ä»¥å¤–çš„é¢å¤–ä¸€å±‚ä¿æŠ¤ï¼Œéå¸¸æœ‰ç”¨ä¸”é‡è¦ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšä¼šå°†çº¯æ–‡æœ¬æ•°æ®æ”¾å…¥ <code>Git</code> å­˜å‚¨åº“ï¼Œåè€…é€šå¸¸é©»ç•™åœ¨å…¬å…±ç³»ç»Ÿä¸­ã€‚</li><li>ç„¶è€Œ <code>yadm</code> å®ç°äº†ä¸€ä¸ªç‰¹æ€§ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å¯¹ä¸€ç»„æ–‡ä»¶è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œè¿™æ ·åŠ å¯†åçš„ç‰ˆæœ¬å°±å¯ä»¥ä¿å­˜åœ¨ <code>Git</code> ä»“åº“ä¸­ã€‚è¿™ä¸ªç‰¹æ€§åªæœ‰åœ¨ <code>gpg</code> å‘½ä»¤å¯ç”¨çš„æƒ…å†µä¸‹æ‰èƒ½å·¥ä½œã€‚å»ºè®®æ‚¨åœ¨ä¿å­˜æœºå¯†æ–‡ä»¶æ—¶ä½¿ç”¨ç§æœ‰å­˜å‚¨åº“ï¼Œå³ä½¿è¿™äº›æ–‡ä»¶æ˜¯åŠ å¯†çš„ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤ä½ç½®</span></span><br><span class="line"><span class="variable">$HOME</span>/.config/yadm/encrypt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å¯†åä½ç½®</span></span><br><span class="line"><span class="variable">$HOME</span>/.config/yadm/files.gpg</span><br></pre></td></tr></table></figure><ul><li>è¦ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªæ¨¡å¼åˆ—è¡¨ï¼Œä¿å­˜å¯¹åº”å†…å®¹åˆ°ä¸Šè¿°çš„é»˜è®¤é…ç½®æ–‡ä»¶ä¸­å³å¯ã€‚è¿™æ · <code>yadm</code> åŠ å¯†å‘½ä»¤ä¼šæ‰¾åˆ°æ‰€æœ‰ä¸æ¨¡å¼åŒ¹é…çš„æ–‡ä»¶ï¼Œå¹¶æç¤ºè¾“å…¥å¯†ç ã€‚ä¸€æ—¦ç¡®è®¤äº†å¯†ç ï¼ŒåŒ¹é…çš„æ–‡ä»¶å°†è¢«åŠ å¯†å¹¶ä¿å­˜ä¸º <code>files.gpg</code> æ–‡ä»¶ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat <span class="variable">$HOME</span>/.config/yadm/encrypt</span><br><span class="line">.ssh/*.key</span><br></pre></td></tr></table></figure><ul><li>æ¥ä¸‹æ¥éœ€è¦åšçš„å°±æ˜¯å’Œæ™®é€šæ·»åŠ æ–‡ä»¶æˆ–ç›®å½•æ“ä½œä¸€è‡´ï¼Œå³ä½¿ç”¨ <code>yadm</code> æäº¤åˆ°è¿œç¨‹ä»“åº“ä¸­å»ã€‚ä»¥åè¦è§£å¯†è¿™äº›æ–‡ä»¶ï¼Œæˆ–è€…åœ¨å¦ä¸€ä¸ªç³»ç»Ÿä¸Šè¿è¡Œ <code>yadm</code> è§£å¯†å¹¶æä¾›æ­£ç¡®çš„å¯†ç ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»»ä½•è§£å¯†æ–‡ä»¶éƒ½ä¼šè¢«åˆ é™¤å…¶ <strong>â€œgroupâ€</strong> å’Œ <strong>â€œothersâ€</strong> æƒé™ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ æ–‡ä»¶å¹¶æäº¤</span></span><br><span class="line">$ yadm add .config/yadm/encrypt</span><br><span class="line">$ yadm add .config/yadm/files.gpg</span><br></pre></td></tr></table></figure><ul><li>é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯å¯¹ç§°åŠ å¯†ï¼Œä½†ä½¿ç”¨ <code>yadm.gpg-receiver</code> é…ç½®å¯ä»¥å¯ç”¨éå¯¹ç§°åŠ å¯†ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯·è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ã€‚ä¸ºæ­¤ï¼Œæ¥æ”¶è€…åœ°å€ä¸­å¿…é¡»å­˜åœ¨ <code>gpg</code> çš„ç§˜é’¥æ‰å¯ä»¥ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éå¯¹ç§°åŠ å¯†</span></span><br><span class="line">$ yadm config yadm.gpg-recipient &lt;recipient-address&gt;</span><br></pre></td></tr></table></figure><h2><span id="8-é…ç½®åˆ†ç±»">8. é…ç½®åˆ†ç±»</span></h2><blockquote><p><strong>ä½¿ç”¨ Yadm æ¥é…ç½®åˆ†ç±»</strong></p></blockquote><p>å¦‚æœå¯èƒ½çš„è¯ï¼Œæœ€å¥½åœ¨æ‰€æœ‰ç³»ç»Ÿä¸Šä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›åœºåˆæ‚¨éœ€è¦ä¸åŒçš„æ–‡ä»¶ã€‚å³é’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿã€ä¸åŒçš„ç¯å¢ƒï¼Œéœ€è¦ç»´æŠ¤ä¸åŒç§ç±»çš„åŒä¸€è½¯ä»¶æˆ–æ’ä»¶çš„ <code>dotfile</code> æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ’ä»¶æ¥è§£å†³ã€‚</p><ul><li><a href="https://yadm.io/docs/templates" target="_blank" rel="noopener">yadm Docs - Templates</a></li><li><a href="https://yadm.io/docs/alternates" target="_blank" rel="noopener">yadm Docs - Alternate Files</a></li></ul><blockquote><p><strong>Alternate Files</strong></p></blockquote><ul><li>ä½¿ç”¨ä¸Šè¿°çš„ <code>Alternate Files</code> åŠŸèƒ½æ—¶ï¼Œ<code>Yadm</code> ä¸ºä¸åŒçš„æ“ä½œç³»ç»Ÿã€ä¸»æœºã€ç”¨æˆ·ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥åˆ°é€‚å½“çš„æ–‡ä»¶ç‰ˆæœ¬ä¸Šï¼Œä¸€ä¸ªæœ‰æ•ˆçš„åç¼€è¢«é™„åŠ åˆ°æ–‡ä»¶åï¼Œå³åç¼€ä¸­åŒ…å«ä½¿ç”¨è¯¥æ–‡ä»¶å¿…é¡»æ»¡è¶³çš„æ¡ä»¶ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">##&lt;condition&gt;[,&lt;condition&gt;,â€¦]</span></span><br></pre></td></tr></table></figure><ul><li>æ¯ä¸ªæ¡ä»¶éƒ½æ˜¯ä¸€ä¸ª <strong>å±æ€§/å€¼</strong> å¯¹ï¼Œç”±ä¸€ä¸ªå¥ç‚¹åˆ†éš”ã€‚æœ‰äº›æ¡ä»¶ä¸éœ€è¦ <strong>â€œå€¼â€</strong>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥çœç•¥å¥ç‚¹å’Œå€¼ï¼Œä¸”å¤§å¤šæ•°å±æ€§å¯ä»¥ç¼©å†™ä¸ºä¸€ä¸ªå•ç‹¬çš„å­—æ¯ã€‚</li></ul><table><thead><tr><th style="text-align:left">Attribute</th><th style="text-align:left">Meaning</th></tr></thead><tbody><tr><td style="text-align:left"><code>template</code>, <code>t</code></td><td style="text-align:left">Valid when the value matches a supported template processor. See the <a href="https://yadm.io/docs/templates" target="_blank" rel="noopener">Templates</a> section for more details.</td></tr><tr><td style="text-align:left"><code>user</code>, <code>u</code></td><td style="text-align:left">Valid if the value matches the current user. Current user is calculated by running <code>id â€‘u â€‘n</code>.</td></tr><tr><td style="text-align:left"><code>distro</code>, <code>d</code></td><td style="text-align:left">Valid if the value matches the distro. Distro is calculated by running <code>lsb_release â€‘si</code> or inspecting <code>/etc/os-release</code></td></tr><tr><td style="text-align:left"><code>os</code>, <code>o</code></td><td style="text-align:left">Valid if the value matches the OS. OS is calculated by running <code>uname â€‘s</code>.</td></tr><tr><td style="text-align:left"><code>class</code>, <code>c</code></td><td style="text-align:left">Valid if the value matches the local.class configuration. Class must be manually set using <code>yadm config local.class &lt;class&gt;</code>.</td></tr><tr><td style="text-align:left"><code>hostname</code>, <code>h</code></td><td style="text-align:left">Valid if the value matches the short hostname. Hostname is calculated by running <code>hostname</code>, and trimming off any domain.</td></tr><tr><td style="text-align:left"><code>default</code></td><td style="text-align:left">Valid when no other alternate is valid.</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹æ¼”ç¤º</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##default</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##class.Work</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##os.Darwin</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##os.Darwin,hostname.host1</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##os.Darwin,hostname.host2</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##os.Linux</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##os.Linux,hostname.host1</span></span><br><span class="line"><span class="variable">$HOME</span>/path/example.txt<span class="comment">##os.Linux,hostname.host2</span></span><br></pre></td></tr></table></figure><ul><li>æ¨¡æ¿æ˜¯å¦ä¸€ä¸ªåœ¨æ¯ä¸ªä¸»æœºä¸Šåˆ›å»ºæ›¿ä»£å†…å®¹çš„å¼ºå¤§å·¥å…·ï¼Œä½ åº”è¯¥å°è¯•åœ¨æ¯ä¸ªç³»ç»Ÿä¸Šä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .vimrc</span></span><br><span class="line"><span class="built_in">let</span> OS=substitute(system(<span class="string">'uname -s'</span>),<span class="string">"\n"</span>,<span class="string">""</span>,<span class="string">""</span>)</span><br><span class="line"><span class="keyword">if</span> (OS == <span class="string">"Darwin"</span>)</span><br><span class="line">    <span class="string">" do something that only makes sense on a Mac</span></span><br><span class="line"><span class="string">endif</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># . bash_profile</span></span><br><span class="line">system_type=$(uname -s)</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$system_type</span>"</span> = <span class="string">"Darwin"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">eval</span> $(gdircolors <span class="variable">$HOME</span>/.dir_colors)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">eval</span> $(dircolors -b <span class="variable">$HOME</span>/.dir_colors)</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>Templates</strong></p></blockquote><ul><li>æ¨¡æ¿æ˜¯ä¸€ç§ç‰¹æ®Šçš„ <code>alternate</code> æ–‡ä»¶ï¼Œæ¨¡æ¿å†…å®¹å’Œä¸»æœºç‰¹å®šçš„æ•°æ®ç»“åˆèµ·æ¥ä½œä¸ºè¾“å…¥åˆ°ä¸€ä¸ªæ¨¡æ¿å¤„ç†æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ä½œä¸ºå…¶è¾“å‡ºã€‚å¦‚æœä½ éœ€è¦æ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„ä¸€å°éƒ¨åˆ†ï¼Œè¿™ä¼šéå¸¸æœ‰ç”¨ï¼Œä½†æ˜¯å®ƒä¸æ”¯æŒä»»ä½•ç±»å‹çš„å¤´æ–‡ä»¶ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">##template.&lt;template processor&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>æ”¯æŒçš„æ¨¡æ¿å¤„ç†å™¨</strong></li></ul><table><thead><tr><th style="text-align:left">Processor</th><th style="text-align:left">Suffixes</th><th style="text-align:left">Dependencies</th></tr></thead><tbody><tr><td style="text-align:left">default</td><td style="text-align:left"><code>##template</code>, <code>##template.default</code></td><td style="text-align:left"><code>awk</code> must be installed. (This should be installed on all linux systems)</td></tr><tr><td style="text-align:left">esh</td><td style="text-align:left"><code>##template.esh</code></td><td style="text-align:left"><code>esh</code> must be installed.</td></tr><tr><td style="text-align:left">j2cli</td><td style="text-align:left"><code>##template.j2</code>, <code>##template.j2cli</code></td><td style="text-align:left"><code>j2cli</code> must be installed.</td></tr><tr><td style="text-align:left">envtpl</td><td style="text-align:left"><code>##template.j2</code>, <code>##template.envtpl</code></td><td style="text-align:left"><code>envtpl</code> must be installed.</td></tr></tbody></table><ul><li><strong>å†…ç½®æŒ‡ä»¤é›†</strong></li></ul><table><thead><tr><th style="text-align:left">Default (built-in)</th><th style="text-align:left">Jinja or ESH</th><th style="text-align:left">Description</th><th style="text-align:left">Source</th></tr></thead><tbody><tr><td style="text-align:left"><code>yadm.class</code></td><td style="text-align:left"><code>YADM_CLASS</code></td><td style="text-align:left">Locally defined yadm class</td><td style="text-align:left"><code>yadm config local.class</code></td></tr><tr><td style="text-align:left"><code>yadm.distro</code></td><td style="text-align:left"><code>YADM_DISTRO</code></td><td style="text-align:left">Distribution</td><td style="text-align:left"><code>lsb_release â€‘si</code></td></tr><tr><td style="text-align:left">or <code>/etc/os-release</code></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>yadm.hostname</code></td><td style="text-align:left"><code>YADM_HOSTNAME</code></td><td style="text-align:left">Hostname</td><td style="text-align:left"><code>hostname</code> (without domain)</td></tr><tr><td style="text-align:left"><code>yadm.os</code></td><td style="text-align:left"><code>YADM_OS</code></td><td style="text-align:left">Operating system</td><td style="text-align:left"><code>uname â€‘s</code></td></tr><tr><td style="text-align:left"><code>yadm.user</code></td><td style="text-align:left"><code>YADM_USER</code></td><td style="text-align:left">Current user</td><td style="text-align:left"><code>id â€‘u â€‘n</code></td></tr><tr><td style="text-align:left"><code>yadm.source</code></td><td style="text-align:left"><code>YADM_SOURCE</code></td><td style="text-align:left">Template filename</td><td style="text-align:left">(fully qualified path)</td></tr></tbody></table><ul><li><strong>å®ä¾‹æ¼”ç¤º</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> yadm.os == <span class="string">"Darwin"</span> %&#125;</span><br><span class="line">This block is included <span class="keyword">for</span> MacOS</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">This block is included <span class="keyword">for</span> any other OS</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h2><span id="9-æ‰©å±•é…åˆ">9. æ‰©å±•é…åˆ</span></h2><blockquote><p><strong>ç®¡ç† $HOME ä»¥å¤–çš„æ–‡ä»¶</strong></p></blockquote><ul><li>åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œ<code>yadm</code> å·¥å…·ä»…ä»…åªä¼šç®¡ç† <code>$HOME</code> ä¸‹çš„æ–‡ä»¶å’Œç›®å½•ï¼Œè¿™å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿæ˜¯å®Œå…¨åˆç†ä»¥åŠå¿…è¦çš„ã€‚å³æˆ‘ä»¬å®¶ç›®å½•ä¸‹é¢çš„æ–‡ä»¶ï¼Œå¹¶ä¸ä¼šç®¡ç†å…¶ä»–çš„ç›®å½•å±‚çº§ï¼Œæ¯”å¦‚ <code>/etc/</code> ç­‰ã€‚</li><li>ä½†æ˜¯ï¼Œæˆ‘ä»¬è¦æƒ³ç®¡ç† <code>$HOME</code> ä»¥å¤–çš„æ–‡ä»¶ï¼Œå³æ‰©å¤§æ–‡ä»¶æ ‘çš„ç®¡ç†èŒƒå›´ï¼Œå°±è¦å¯¹å…¶è¿›è¡Œä¸€äº›å¿…è¦çš„æ”¹é€ ã€‚é¦–å…ˆï¼Œéœ€è¦ç®¡ç†çš„åŒºåŸŸè¦æœ‰å¯è¯»å†™çš„æƒé™ã€‚ç„¶åï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œå³å¯ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨.yadmä½œä¸ºyadmçš„ç³»ç»Ÿæ–‡ä»¶ç®¡ç†ç›®å½•</span></span><br><span class="line">$ <span class="built_in">alias</span> sysyadm=<span class="string">"sudo yadm -Y <span class="variable">$HOME</span>/.yadm"</span></span><br></pre></td></tr></table></figure><ul><li>é…ç½®å¥½ä¸Šé¢çš„å‘½ä»¤åˆ«åä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>sysyadm</code> å‘½ä»¤åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„è¿œç¨‹ä»“åº“ï¼Œæ¥å•ç‹¬ç®¡ç†ç³»ç»Ÿæ–‡ä»¶ã€‚å³æˆ‘ä»¬å•ç‹¬ä½¿ç”¨ <code>sysyadm</code> å‘½ä»¤æ¥ç®¡ç†ç³»ç»Ÿé…ç½®ï¼Œå’Œä¸Šé¢æˆ‘ä»¬ç®¡ç†å®¶ç›®å½•çš„äº’ä¸å¹²æ‰°ï¼Œå„å¸å…¶èŒã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†/ç›®å½•åˆå§‹åŒ–ä¸ºsysyadmçš„æ–‡ä»¶æ ‘</span></span><br><span class="line">$ sysyadm init -w /</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ–‡ä»¶ã€ç­¾å…¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€åŒæ­¥è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ sysyadm add /etc/nginx/nginx.conf</span><br><span class="line">$ sysyadm commit -m <span class="string">"add nginx config"</span></span><br><span class="line">$ yadm push</span><br></pre></td></tr></table></figure><h2><span id="10-å‚è€ƒæ–‡æ¡£">10. å‚è€ƒæ–‡æ¡£</span></h2><ul><li><a href="https://github.com/TheLocehiliosan/yadm" target="_blank" rel="noopener">Yadm çš„ GitHub åœ°å€</a></li><li><a href="https://yadm.io/" target="_blank" rel="noopener">Yadm çš„å®˜æ–¹æ–‡æ¡£åœ°å€</a></li><li><a href="https://blog.spencerwoo.com/2020/07/how-i-manage-my-dotfiles/" target="_blank" rel="noopener">æˆ‘æ˜¯å¦‚ä½•åŒæ­¥å¹¶ç®¡ç†æˆ‘çš„ Dotfiles çš„</a></li></ul><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ Escape çš„åšå®¢ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/y4r6d5fu%EF%BC%8C%E7%89%88%E6%9D%83%E5%BD%92%E5%8E%9F%E4%BD%9C%E8%80%85%E6%89%80%E6%9C%89%E3%80%82%E6%AC%A2%E8%BF%8E%E6%8A%95%E7%A8%BF%EF%BC%8C%E6%8A%95%E7%A8%BF%E9%82%AE%E7%AE%B1:" target="_blank" rel="noopener">https://tinyurl.com/y4r6d5fuï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±:</a> <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¼€å§‹ï¼Œå¼€å§‹ï¼Œå¼€å§‹ä½¿ç”¨å§ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;1-åŠŸèƒ½ç®€ä»‹&quot;&gt;1. åŠŸèƒ½ç®€ä»‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;User-specific app config is stored in so called dotfiles&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‚¨å¼€å§‹å°è¯•å¯¹é…ç½®è¿›è¡Œæ–°çš„æ›´æ”¹ï¼Œç°åœ¨ä¸€åˆ‡éƒ½è¢«ç ´åäº†ã€‚&lt;code&gt;yadm&lt;/code&gt; å¯ä»¥å¸®åŠ©ä½ å†³å®šä»€ä¹ˆæ”¹å˜äº†ï¼Œæˆ–è€…ç®€å•åœ°æ¢å¤ä½ æ‰€æœ‰çš„æ”¹å˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Yadm å¯ä»¥æ¢å¤ä½ çš„é…ç½®&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‚¨å·²ç»èŠ±è´¹äº†æ—¶é—´è°ƒæ•´æ‚¨çš„è®¡ç®—ç¯å¢ƒã€‚ä¸€åˆ‡éƒ½æŒ‰ç…§ä½ æƒ³è¦çš„æ–¹å¼è¿ä½œã€‚å¤ªæ£’äº†ï¼ç„¶åä½ çš„ç¡¬ç›˜å‡ºäº†æ•…éšœï¼Œç”µè„‘éœ€è¦é‡å»ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Yadm å¯ä»¥å¸®ä½ åè°ƒæœºå™¨ä¹‹é—´çš„é…ç½®&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¾—åˆ°äº†ä¸€å°æ–°ç”µè„‘ï¼Œä½ æƒ³è¦é‡æ–°åˆ›å»ºé‚£ä¸ªç¯å¢ƒã€‚æ‚¨å¯èƒ½å¸Œæœ›ä¸¤å°æœºå™¨çš„é…ç½®ä¿æŒåŒæ­¥ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/categories/Linux/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Yadm" scheme="https://www.hi-linux.com/tags/Yadm/"/>
    
  </entry>
  
  <entry>
    <title>å·§ç”¨ Docker Buildx æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„é•œåƒ</title>
    <link href="https://www.hi-linux.com/posts/58027.html"/>
    <id>https://www.hi-linux.com/posts/58027.html</id>
    <published>2021-06-17T01:00:00.000Z</published>
    <updated>2021-06-17T01:23:31.834Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>Docker Buildx æ˜¯ä¸€ä¸ª Docker CLI æ’ä»¶ï¼Œå…¶æ‰©å±•äº† Docker å‘½ä»¤ï¼Œæ”¯æŒ Moby BuildKit æä¾›çš„åŠŸèƒ½ã€‚æä¾›äº†ä¸ Docker Build ç›¸åŒçš„ç”¨æˆ·ä½“éªŒï¼Œå¹¶å¢åŠ äº†è®¸å¤šæ–°åŠŸèƒ½ã€‚</p><p>BuildKit æ˜¯ä¸‹ä¸€ä»£çš„é•œåƒæ„å»ºç»„ä»¶ï¼Œä¸»è¦ç‰¹ç‚¹æœ‰å¾ˆå¤šï¼Œæœ¬æ–‡ä¸»è¦ä½¿ç”¨å…¶å¯ä»¥ç¼–è¯‘å¤šç§ç³»ç»Ÿæ¶æ„çš„ç‰¹æ€§ã€‚</p><blockquote><p>ç½‘å€ï¼š<a href="https://github.com/moby/buildkit" target="_blank" rel="noopener">https://github.com/moby/buildkit</a></p></blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥åŠŸèƒ½ä»…é€‚ç”¨äº Docker v19.03+ ç‰ˆæœ¬ã€‚</p><p>æœ¬æ–‡å°†è®²è§£å¦‚ä½•ä½¿ç”¨ Buildx æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„çš„é•œåƒã€‚</p><a id="more"></a><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå·²ç»é»˜è®¤ä½ åœ¨ Linux ç³»ç»Ÿï¼ˆå„å¤§å‘è¡Œç‰ˆï¼‰ä¸‹å®‰è£…å¥½äº† 64 ä½çš„ Dockerã€‚</p><p>åœ¨å†™æœ¬æ–‡æ—¶ï¼ŒDocker æœ€æ–°ç‰ˆæœ¬å·æ˜¯ 19.03.13ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.13</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.15</span><br><span class="line"> Git commit:        4484c46d9d</span><br><span class="line"> Built:             Wed Sep 16 17:03:45 2020</span><br><span class="line"> OS&#x2F;Arch:           linux&#x2F;amd64</span><br><span class="line"> Experimental:      true</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.13</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.15</span><br><span class="line">  Git commit:       4484c46d9d</span><br><span class="line">  Built:            Wed Sep 16 17:02:21 2020</span><br><span class="line">  OS&#x2F;Arch:          linux&#x2F;amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.3.7</span><br><span class="line">  GitCommit:        8fba4e9a7d01810a393d5d25a3621dc101981175</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br></pre></td></tr></table></figure><h2><span id="1-å¯ç”¨-buildx">1. å¯ç”¨ Buildx</span></h2><p>buildx å‘½ä»¤å±äºå®éªŒç‰¹æ€§ï¼Œå› æ­¤é¦–å…ˆéœ€è¦å¼€å¯è¯¥ç‰¹æ€§ã€‚</p><p>ä¸Šé¢çš„æŸ¥çœ‹ Docker ç‰ˆæœ¬è¿”å›çš„å†…å®¹ä¸­ï¼Œå¦‚æœå‡ºç° <code>Experimental: true</code> å­—æ ·å°±ä»£è¡¨å·²ç»å¼€å¯è¯¥ç‰¹æ€§äº†ã€‚ä¸‹é¢çš„è¿™ä¸€æ­¥éª¤å°±å¯ä»¥çœç•¥ã€‚</p><p>ç¼–è¾‘ <code>~/.docker/config.json</code> æ–‡ä»¶ï¼Œæ–°å¢å¦‚ä¸‹å†…å®¹ï¼ˆä»¥ä¸‹çš„æ¼”ç¤ºé€‚ç”¨äºäº‹å…ˆä¸å­˜åœ¨ .docker ç›®å½•çš„æƒ…å†µä¸‹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~&#x2F;.docker</span><br><span class="line">$ cat &gt; ~&#x2F;.docker&#x2F;config.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">&quot;experimental&quot;: &quot;enabled&quot;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>Linux/macOS ä¸‹å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼å¯ç”¨ï¼ˆä¸æ¨èï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ export DOCKER_CLI_EXPERIMENTAL&#x3D;enabled</span><br></pre></td></tr></table></figure><h2><span id="2-æ–°å»º-builder-å®ä¾‹">2. æ–°å»º Builder å®ä¾‹</span></h2><p>åœ¨ Docker 19.03+ ç‰ˆæœ¬ä¸­å¯ä»¥ä½¿ç”¨ <code>docker buildx build</code> å‘½ä»¤ä½¿ç”¨ BuildKit æ„å»ºé•œåƒã€‚è¯¥å‘½ä»¤æ”¯æŒ <code>--platform</code> å‚æ•°å¯ä»¥åŒæ—¶æ„å»ºæ”¯æŒå¤šç§ç³»ç»Ÿæ¶æ„çš„ Docker é•œåƒï¼Œå¤§å¤§ç®€åŒ–äº†æ„å»ºæ­¥éª¤ã€‚</p><p>ç”±äº Docker é»˜è®¤çš„ builder å®ä¾‹ä¸æ”¯æŒåŒæ—¶æŒ‡å®šå¤šä¸ª <code>--platform</code> ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ Builder å®ä¾‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker buildx create --name mybuilder --driver docker-container</span><br></pre></td></tr></table></figure><p>è¿”å›æ–°çš„ Builder å®ä¾‹åï¼Œä¸ºã€Œmybuilderã€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mybuilder</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–°åˆ›å»ºå¥½çš„ Builder å®ä¾‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker buildx use mybuilder</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·²æœ‰çš„ Builder å®ä¾‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker buildx ls</span><br><span class="line">NAME&#x2F;NODE    DRIVER&#x2F;ENDPOINT             STATUS   PLATFORMS</span><br><span class="line">mybuilder *  docker-container</span><br><span class="line">  mybuilder0 unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock inactive </span><br><span class="line">default      docker</span><br><span class="line">  default    default                     running  linux&#x2F;amd64, linux&#x2F;386</span><br></pre></td></tr></table></figure><p>Docker åœ¨ Linux/AMD64 ç³»ç»Ÿæ¶æ„ä¸‹æ˜¯ä¸æ”¯æŒ ARM æ¶æ„é•œåƒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿è¡Œä¸€ä¸ªæ–°çš„å®¹å™¨ï¼ˆEmulatorï¼‰è®©å…¶æ”¯æŒè¯¥ç‰¹æ€§ï¼ŒDocker æ¡Œé¢ç‰ˆåˆ™æ— éœ€è¿›è¡Œæ­¤é¡¹è®¾ç½®ã€‚</p><ul><li>æ–¹æ³•ä¸€ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm --privileged docker&#x2F;binfmt:a7996909642ee92942dcd6cff44b9b95f08dad64</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šdocker/binfmt å¯ä»¥å‚è€ƒç½‘å€ï¼š<a href="https://hub.docker.com/r/docker/binfmt/tags" target="_blank" rel="noopener">https://hub.docker.com/r/docker/binfmt/tags</a> è·å–æœ€æ–°é•œåƒ</p></blockquote><ul><li>æ–¹æ³•äºŒï¼ˆæ¨èï¼‰</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --rm --privileged tonistiigi&#x2F;binfmt --install all</span><br></pre></td></tr></table></figure><blockquote><p>å¯å‚è€ƒç½‘å€ï¼š<a href="https://hub.docker.com/r/tonistiigi/binfmt" target="_blank" rel="noopener">https://hub.docker.com/r/tonistiigi/binfmt</a> è·å–æœ€æ–°é•œåƒã€‚ç›®å‰ï¼ˆ2021/04/20 æ›´æ–°ï¼‰çš„ <code>Qemu version: 5.0.0</code></p></blockquote><h2><span id="3-æ–°å»º-dockerfile-æ–‡ä»¶">3. æ–°å»º Dockerfile æ–‡ä»¶</span></h2><p>è¦æƒ³æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„çš„é•œåƒï¼Œè¿˜éœ€è¦ä¸€ä¸ªæ”¯æŒçš„ Dockerfile æ–‡ä»¶ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹çš„ Dockerfile æ–‡ä»¶ã€‚</p><blockquote><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://github.com/teddysun/across/blob/master/docker/kms/Dockerfile.architecture" target="_blank" rel="noopener">https://github.com/teddysun/across/blob/master/docker/kms/Dockerfile.architecture</a></p></blockquote><p>è¯¥ Dockerfile æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">FROM --platform&#x3D;$TARGETPLATFORM alpine:latest AS builder</span><br><span class="line">WORKDIR &#x2F;root</span><br><span class="line">RUN apk add --no-cache git make build-base &amp;&amp; \</span><br><span class="line">    git clone --branch master --single-branch https:&#x2F;&#x2F;github.com&#x2F;Wind4&#x2F;vlmcsd.git &amp;&amp; \</span><br><span class="line">    cd vlmcsd&#x2F; &amp;&amp; \</span><br><span class="line">    make</span><br><span class="line"></span><br><span class="line">FROM --platform&#x3D;$TARGETPLATFORM alpine:latest</span><br><span class="line">LABEL maintainer&#x3D;&quot;Teddysun &lt;i@teddysun.com&gt;&quot;</span><br><span class="line"></span><br><span class="line">COPY --from&#x3D;builder &#x2F;root&#x2F;vlmcsd&#x2F;bin&#x2F;vlmcsd &#x2F;usr&#x2F;bin&#x2F;vlmcsd</span><br><span class="line">EXPOSE 1688</span><br><span class="line">CMD [ &quot;vlmcsd&quot;, &quot;-D&quot;, &quot;-e&quot; ]</span><br></pre></td></tr></table></figure><p><code>$TARGETPLATFORM</code> æ˜¯å†…ç½®å˜é‡ï¼Œç”± <code>--platform</code> å‚æ•°æ¥æŒ‡å®šå…¶å€¼ã€‚</p><p>ç”±äºæ˜¯åŸºäº <a href="https://hub.docker.com/_/alpine" target="_blank" rel="noopener">alpine çš„é•œåƒ</a>æ¥åˆ¶ä½œçš„ï¼Œè€Œ <a href="https://hub.docker.com/_/alpine?tab=tags" target="_blank" rel="noopener">alpine</a> æ˜¯æ”¯æŒä»¥ä¸‹ 7 ç§ç³»ç»Ÿæ¶æ„çš„ï¼Œå› æ­¤æˆ‘ä»¬åˆ¶ä½œçš„é•œåƒä¹Ÿå°±è·Ÿç€æ”¯æŒè¿™ 7 ç§ç³»ç»Ÿæ¶æ„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linux&#x2F;amd64, linux&#x2F;arm&#x2F;v6, linux&#x2F;arm&#x2F;v7, linux&#x2F;arm64, linux&#x2F;386, linux&#x2F;ppc64le, linux&#x2F;s390x</span><br></pre></td></tr></table></figure><p>æ›´å‹å¥½ä¸€ç‚¹çš„æ¶æ„åç§°å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">amd64, arm32v6, arm32v7, arm64v8, i386, ppc64le, s390x</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç©¿æ’ä¸€å¥åæ§½ã€‚ç®€å•ç»Ÿè®¡äº†ä¸€ä¸‹ï¼ŒARM çš„ç³»ç»Ÿæ¶æ„æœ‰å¦‚ä¸‹å„ç§ç®€ç§°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arm64, armv8l, arm64v8, aarch64</span><br><span class="line">arm, arm32, arm32v7, armv7, armv7l, armhf</span><br><span class="line">arm32v6, armv6, armv6l, arm32v5, armv5,  armv5l, armel, aarch32</span><br></pre></td></tr></table></figure><p>çœ‹å®Œäº†æ˜¯ä¸æ˜¯å¾ˆæƒ³æ‰“äººï¼Ÿ</p><p>è€Œå¯¹æ¯” Intel å’Œ AMD çš„å°±ç®€å•å¤šäº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x86, 386, i386, i686</span><br><span class="line">x86_64, x64, amd64</span><br></pre></td></tr></table></figure><h2><span id="4-æ„å»ºé•œåƒ">4. æ„å»ºé•œåƒ</span></h2><p>å…ˆæ¥æœ¬åœ°æ„å»ºä¸€ä¸ªã€‚</p><p><code>git clone</code> åˆšæ‰çš„ç¤ºä¾‹ Dockerfile æ–‡ä»¶ï¼Œå¹¶è¿›å…¥å…¶ç›®å½•ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~ &amp;&amp; git clone https:&#x2F;&#x2F;github.com&#x2F;teddysun&#x2F;across.git &amp;&amp; cd across&#x2F;docker&#x2F;kms&#x2F;</span><br></pre></td></tr></table></figure><p>åœ¨æœ¬åœ°æ„å»ºæ”¯æŒ 7 ç§ Platform çš„é•œåƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker buildx build --platform linux&#x2F;amd64,linux&#x2F;arm&#x2F;v6,linux&#x2F;arm&#x2F;v7,linux&#x2F;arm64,linux&#x2F;ppc64le,linux&#x2F;s390x,linux&#x2F;386 -t teddysun&#x2F;kms -o type&#x3D;local,dest&#x3D;.docker -f .&#x2F;Dockerfile.architecture .</span><br></pre></td></tr></table></figure><p>docker buildx build çš„å…·ä½“å‚æ•°å«ä¹‰ï¼Œå‚è€ƒä¸‹é¢çš„å®˜æ–¹æ–‡æ¡£:</p><blockquote><p><a href="https://docs.docker.com/engine/reference/commandline/buildx_build/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/buildx_build/</a></p></blockquote><p>åšå®Œä¸Šé¢çš„é‚£ä¸€æ­¥ï¼Œå®é™…ä¸Šæ˜¯æŠŠæ„å»ºå¥½çš„é•œåƒæ”¾åœ¨äº†æœ¬åœ°è·¯å¾„ä¸‹ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬å†æ¥æŸ¥çœ‹ä¸€ä¸‹å·²æœ‰çš„ builder å®ä¾‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker buildx ls</span><br><span class="line">NAME&#x2F;NODE    DRIVER&#x2F;ENDPOINT             STATUS  PLATFORMS</span><br><span class="line">mybuilder *  docker-container                    </span><br><span class="line">  mybuilder0 unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock running linux&#x2F;amd64, linux&#x2F;arm64, linux&#x2F;riscv64, linux&#x2F;ppc64le, linux&#x2F;s390x, linux&#x2F;386, linux&#x2F;arm&#x2F;v7, linux&#x2F;arm&#x2F;v6</span><br><span class="line">default      docker                              </span><br><span class="line">  default    default                     running linux&#x2F;amd64, linux&#x2F;386</span><br></pre></td></tr></table></figure><p>ä½ ä¼šå‘ç° mybuilder ä¸‹å­˜åœ¨ 8 ç§æ”¯æŒçš„æ¶æ„ï¼ˆriscv64 ç›®å‰è¿˜ç”¨ä¸ä¸Šï¼Œä½†æ˜¯å·²ç»æ”¯æŒï¼‰ã€‚</p><p>æ­¤æ—¶æŸ¥çœ‹ä¸€ä¸‹ docker image çš„è¿è¡Œæƒ…å†µï¼Œä¼šå‘ç°å­˜åœ¨ä¸€ä¸ªåä¸º <code>buildx_buildkit_mybuilder0</code> çš„å®¹å™¨åœ¨è¿è¡Œã€‚</p><p>è¿™æ˜¯åˆšæ‰åœ¨æœ¬åœ°æ„å»ºæ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºçš„ï¼Œåˆ‡è®°ä¸è¦å°†å…¶åœæ­¢ï¼Œä¹Ÿä¸è¦åˆ é™¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps -as</span><br><span class="line">CONTAINER ID        IMAGE                           COMMAND           CREATED             STATUS              PORTS             NAMES                        SIZE</span><br><span class="line">be753fa16090        moby&#x2F;buildkit:buildx-stable-1   &quot;buildkitd&quot;       15 minutes ago      Up 15 minutes                         buildx_buildkit_mybuilder0   0B (virtual 78.6MB)</span><br></pre></td></tr></table></figure><p>å†æ¥æ„å»ºä¸€ä¸ªå¤šç³»ç»Ÿæ¶æ„é•œåƒï¼Œå¹¶å°†æ„å»ºå¥½çš„é•œåƒæ¨é€åˆ° Docker ä»“åº“ï¼ˆä¹Ÿå°±æ˜¯ <a href="https://hub.docker.com/" target="_blank" rel="noopener">hub.docker.com</a>ï¼‰ã€‚</p><p>åœ¨æ­¤æ“ä½œä¹‹å‰ï¼Œä½ éœ€è¦äº‹å…ˆæ³¨å†Œä¸€ä¸ªè´¦å·ï¼ˆæ¼”ç¤ºè¿‡ç¨‹çœç•¥ï¼‰ï¼Œå¹¶ç™»å½•ã€‚ç™»å½•å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker login</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä½ çš„ç”¨æˆ·åå’Œå¯†ç å³å¯ç™»å½•ã€‚</p><blockquote><p>æ³¨æ„ï¼Œä»¥ä¸‹æ¼”ç¤ºçš„å‘½ä»¤ä¸­ tag çš„å‰é¢æ˜¯æˆ‘çš„ç”¨æˆ·å <code>teddysun</code>ï¼Œå¦‚æœä½ æƒ³åˆ¶ä½œè‡ªå·±çš„é•œåƒï¼Œè¯·è‡ªè¡Œæ›¿æ¢ä¸ºä½ è‡ªå·±çš„ç”¨æˆ·åã€‚</p></blockquote><p>ä½¿ç”¨ <code>--push</code> å‚æ•°æ„å»ºå¥½çš„é•œåƒæ¨é€åˆ° Docker ä»“åº“ã€‚</p><p>æ­¤æ—¶ä»ç„¶æ˜¯åœ¨åˆšæ‰çš„ <code>~/across/docker/kms</code> ç›®å½•ä¸‹ï¼Œæ–‡ä»¶ <code>Dockerfile.architecture</code> æ˜¯ä¸ºå¤šç³»ç»Ÿæ¶æ„æ„å»ºå‡†å¤‡çš„ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker buildx build --platform linux&#x2F;386,linux&#x2F;amd64,linux&#x2F;arm&#x2F;v6,linux&#x2F;arm&#x2F;v7,linux&#x2F;arm64,linux&#x2F;ppc64le,linux&#x2F;s390x -t teddysun&#x2F;kms --push -f .&#x2F;Dockerfile.architecture .</span><br></pre></td></tr></table></figure><p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä½ å°±ä¼šåœ¨ Docker Hub çœ‹åˆ°ä½ ä¸Šä¼ çš„é•œåƒå•¦ã€‚ç¤ºä¾‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://img.hi-linux.com/staticfile/kms_docker_hub-20210429161527270-2021-04-29-vT9VO3.png" alt></p><h2><span id="5-å†™åœ¨æœ€å">5. å†™åœ¨æœ€å</span></h2><p>åœ¨åˆ¶ä½œå¤šç³»ç»Ÿæ¶æ„çš„ Docker é•œåƒæ—¶ï¼Œå»ºè®®ä½¿ç”¨ CPU æ¯”è¾ƒå¼ºæˆ–è€…å¤šæ ¸å¿ƒçš„ VPS æ¥æ„å»ºï¼Œå¦åˆ™ä¼šéå¸¸è€—æ—¶ã€‚</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œç§‹æ°´é€¸å†°ã€ï¼ŒåŸæ–‡ï¼š<a href="https://teddysun.com/581.html" target="_blank" rel="noopener">https://teddysun.com/581.html</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Docker Buildx æ˜¯ä¸€ä¸ª Docker CLI æ’ä»¶ï¼Œå…¶æ‰©å±•äº† Docker å‘½ä»¤ï¼Œæ”¯æŒ Moby BuildKit æä¾›çš„åŠŸèƒ½ã€‚æä¾›äº†ä¸ Docker Build ç›¸åŒçš„ç”¨æˆ·ä½“éªŒï¼Œå¹¶å¢åŠ äº†è®¸å¤šæ–°åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;BuildKit æ˜¯ä¸‹ä¸€ä»£çš„é•œåƒæ„å»ºç»„ä»¶ï¼Œä¸»è¦ç‰¹ç‚¹æœ‰å¾ˆå¤šï¼Œæœ¬æ–‡ä¸»è¦ä½¿ç”¨å…¶å¯ä»¥ç¼–è¯‘å¤šç§ç³»ç»Ÿæ¶æ„çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç½‘å€ï¼š&lt;a href=&quot;https://github.com/moby/buildkit&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/moby/buildkit&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥åŠŸèƒ½ä»…é€‚ç”¨äº Docker v19.03+ ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å°†è®²è§£å¦‚ä½•ä½¿ç”¨ Buildx æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„çš„é•œåƒã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Docker" scheme="https://www.hi-linux.com/categories/docker/"/>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Docker" scheme="https://www.hi-linux.com/tags/Docker/"/>
    
      <category term="æ•™ç¨‹" scheme="https://www.hi-linux.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>4 ç§ä¼˜é›…çš„åœ¨ Kubernetes ä¸­è°ƒè¯•ç½‘ç»œæµé‡çš„æ–¹å¼</title>
    <link href="https://www.hi-linux.com/posts/22651.html"/>
    <id>https://www.hi-linux.com/posts/22651.html</id>
    <published>2021-06-17T01:00:00.000Z</published>
    <updated>2021-06-17T01:29:36.606Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><h2><span id="å‰è¨€">å‰è¨€</span></h2><p>åœ¨å½“ä»Šä¸–ç•Œ, åˆ†å¸ƒå¼ç³»ç»Ÿ, å¾®æœåŠ¡/SOAæ¶æ„éåœ°, æœåŠ¡ä¹‹é—´çš„è®¸å¤šäº¤äº’å’Œé€šä¿¡éƒ½ä¸å†æ˜¯åŒä¸€ä¸»æœºçš„ä¸åŒçº¿ç¨‹æˆ–è¿›ç¨‹, è€Œæ˜¯è·¨ä¸»æœº, ç”šè‡³è·¨ç½‘ç»œåŒºåŸŸ. é‚£ä¹ˆä¸€æ—¦ç›¸å…³æœåŠ¡å‡ºç°é—®é¢˜, æˆ‘ä»¬å°±ä¼šéœ€è¦è°ƒè¯•æœåŠ¡é—´çš„é€šè®¯, ä¸»æœºé—´çš„ç½‘ç»œâ€¦</p><p><img src="https://img.hi-linux.com/staticfile/smartscape-complex-environment-572-9c4b25ca16-2021-04-08-u3bMoJ.png" alt="å¤æ‚çš„ç½‘ç»œæ¶æ„"></p><p>Kubernetes ä¸­çš„åº”ç”¨å‡ºäº†é—®é¢˜, å¾€å¾€éœ€è¦è¿›è¡Œç½‘ç»œæŠ“åŒ…åˆ†æ. æœ¬æ–‡ä»‹ç»äº†åœ¨ Kubernetes ä¸­ç½‘ç»œè°ƒè¯•åˆ†æçš„4ç§æ–¹æ³•.</p><ol><li>ä½¿ç”¨ sidecar</li><li>ä½¿ç”¨ <a href="https://github.com/nicolaka/netshoot" target="_blank" rel="noopener">netshoot</a> - ä¸€ä¸ª Docker + Kubernetesç½‘ç»œæ•…éšœæ’é™¤çš„ç‘å£«å†›åˆ€å®¹å™¨</li><li>åˆ©ç”¨Network Namespace</li><li>ä½¿ç”¨ kubectl æ’ä»¶ - <code>ksniff</code></li></ol><a id="more"></a><h2><span id="æ–¹æ³•ä¸€-ä½¿ç”¨-sidecar">æ–¹æ³•ä¸€ ä½¿ç”¨ Sidecar</span></h2><p>åœ¨åˆ†å¸ƒå¼è®¡ç®—ã€å®¹å™¨å’Œå¾®æœåŠ¡çš„ä¸–ç•Œä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„è®¸å¤šäº¤äº’å’Œé€šä¿¡éƒ½æ˜¯é€šè¿‡ RESTful Api å®Œæˆçš„ã€‚åœ¨å¼€å‘è¿™äº› Api å’ŒæœåŠ¡ä¹‹é—´çš„äº¤äº’æ—¶ï¼Œæˆ‘ç»å¸¸éœ€è¦è°ƒè¯•æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œç‰¹åˆ«æ˜¯å½“äº‹æƒ…çœ‹èµ·æ¥ä¸åƒé¢„æœŸçš„é‚£æ ·å·¥ä½œæ—¶ã€‚</p><p>åœ¨å®¹å™¨å‡ºç°ä¹‹å‰ï¼Œæˆ‘åªéœ€å°†æœåŠ¡éƒ¨ç½²åˆ°æœ¬åœ°æœºå™¨ä¸Šï¼Œå¯åŠ¨ Wiresharkï¼Œæ‰§è¡Œæµ‹è¯•ï¼Œå¹¶åˆ†ææœåŠ¡ä¹‹é—´çš„HTTPé€šä¿¡ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç§å¿«é€Ÿåˆ†æè½¯ä»¶ä¸­é€šä¿¡é—®é¢˜çš„ç®€å•è€Œæœ‰æ•ˆçš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œè¿™ç§è°ƒè¯•æ–¹æ³•åœ¨ä¸€ä¸ªå®¹å™¨åŒ–çš„ä¸–ç•Œä¸­å¹¶ä¸é€‚ç”¨ã€‚</p><p>é¦–å…ˆï¼Œå®¹å™¨å¾ˆå¯èƒ½åœ¨æ‚¨çš„æœºå™¨æ— æ³•ç›´æ¥è®¿é—®çš„å†…éƒ¨å®¹å™¨å¹³å°ç½‘ç»œä¸Šè¿è¡Œã€‚ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼ŒæŒ‰ç…§å®¹å™¨è®¾è®¡æœ€ä½³å®è·µï¼Œå®¹å™¨åªåŒ…å«æ‰§è¡Œå…¶ä»»åŠ¡æ‰€éœ€çš„æœ€å°åº”ç”¨ç¨‹åºå’Œåº“é›†ã€‚è¿™æ„å‘³ç€åƒ Tcpdump è¿™æ ·çš„å·¥å…·é€šå¸¸åœ¨å®¹å™¨ä¸­ä¸å¯ç”¨ã€‚è¿™ä½¿å¾—è°ƒè¯•å’Œåˆ†æå®¹å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡å˜å¾—æ›´åŠ å›°éš¾ï¼Œä»è€Œä½¿å¾—è°ƒè¯•å¾®æœåŠ¡é—´çš„é€šä¿¡æ¯”åœ¨éå®¹å™¨ç¯å¢ƒä¸­æ›´åŠ å›°éš¾ã€‚æœ¬æ–‡å±•ç¤ºäº†ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</p><h3><span id="sidecar-å‰æ¥æ•‘æ´">Sidecar å‰æ¥æ•‘æ´</span></h3><p><img src="https://img.hi-linux.com/staticfile/sidecar-20210408104152197-2021-04-08-aw0bbq.jpg" alt="Sidecar"></p><p>åœ¨è¿‡å»çš„å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘å°è¯•äº†å„ç§æ–¹æ³•æ¥å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œæœ€ç»ˆå½¢æˆäº†æˆ‘å°†åœ¨æœ¬æ–‡ä¸­æ¦‚è¿°çš„æ–¹æ³•ã€‚å®ƒæ˜¯æ•è·Kubernetes/OpenShift Pods ä¹‹é—´çš„ç½‘ç»œæµé‡æ•°æ®çš„ç®€å•æ–¹æ³•ï¼Œå…è®¸å¼€å‘äººå‘˜æ›´å¥½åœ°åˆ†æå’Œè°ƒè¯•å®¹å™¨åŒ–åº”ç”¨ç¨‹åºä¸­çš„é€šä¿¡é—®é¢˜ï¼Œå¹¶æ›´å¿«ã€æ›´æœ‰æ•ˆåœ°è§£å†³é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨ Tcpdump æ•è·ä¸€ä¸ªæ‰€è°“çš„ PCAP(packet capture)æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†åŒ…å« Pod çš„ç½‘ç»œæµé‡ã€‚ç„¶åå¯ä»¥å°†è¿™ä¸ª PCAP æ–‡ä»¶åŠ è½½åˆ° Wireshark ä¹‹ç±»çš„å·¥å…·ä¸­æ¥åˆ†ææµé‡ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œåˆ†æåœ¨ Pod ä¸­è¿è¡Œçš„æœåŠ¡çš„ RESTful é€šä¿¡ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨ Red Hat Process Automation Manager äº§å“çš„ KIE æœåŠ¡å™¨(æ‰§è¡ŒæœåŠ¡å™¨)ä½œä¸ºç¤ºä¾‹ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•åº”è¯¥é€‚ç”¨äºä»»ä½•ç±»å‹çš„å®¹å™¨åŒ–åº”ç”¨ç¨‹åºã€‚</p><p>è¦å…‹æœçš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ Kubernetes Pod ä¸­ Tcpdump å‘½ä»¤çš„å¯ç”¨æ€§ã€‚KIE æœåŠ¡å™¨å®¹å™¨æ˜ åƒæ²¡æœ‰å®‰è£…Tcpdumpã€‚å…¶æ¬¡ï¼Œå®¹å™¨ä¸æä¾›ä» Red Hat å­˜å‚¨åº“å®‰è£… Tcpdump çš„å®ç”¨ç¨‹åºã€‚ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† â€œSidecar å®¹å™¨â€ çš„æ¦‚å¿µã€‚</p><h4><span id="sidecar-æ¦‚å¿µ">Sidecar æ¦‚å¿µ</span></h4><p>Sidecar å®¹å™¨æ˜¯ä¸å®é™…æœåŠ¡/åº”ç”¨ç¨‹åºè¿è¡Œåœ¨ç›¸åŒ Pod ä¸­çš„å®¹å™¨ï¼Œèƒ½å¤Ÿä¸ºæœåŠ¡/åº”ç”¨ç¨‹åºæä¾›é™„åŠ åŠŸèƒ½ã€‚<strong>Sidecar å®¹å™¨çš„ä¸€ä¸ªä¾‹å­æ˜¯ Istio çš„ Envoy sidecarï¼Œå®ƒä½¿podæˆä¸ºæœåŠ¡ç½‘æ ¼çš„ä¸€éƒ¨åˆ†</strong> ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ª Sidecar å®¹å™¨ï¼Œè¯¥å®¹å™¨æä¾› Tcpdump å®ç”¨ç¨‹åºã€‚ç”±äº <strong>podä¸­çš„å¤šä¸ªå®¹å™¨å…±äº«ç›¸åŒçš„ç½‘ç»œå±‚</strong> ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Sidecar æ¥æ•è·è¿›å‡º KIE æœåŠ¡å™¨çš„ç½‘ç»œæµé‡ã€‚</p><h3><span id="éƒ¨ç½²-sidecar">éƒ¨ç½² Sidecar</span></h3><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘éƒ¨ç½²äº†<a href="https://github.com/jbossdemocentral/rhpam7-mortgage-demo" target="_blank" rel="noopener">Red Hat Process Automation Manager 7 Mortgage Demo</a>ï¼Œå®ƒå°†åœ¨æˆ‘çš„ OpenShift namespace ä¸­åˆ›å»ºä¸¤ä¸ª Podã€‚ä¸€ä¸ª Pod è¿è¡Œ Business Central workbenchï¼Œå¦ä¸€ä¸ª Pod æ˜¯æ‰§è¡ŒæœåŠ¡å™¨çš„ Podã€‚è¿™ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡ REST å®Œæˆçš„ï¼Œè¿™æ˜¯æˆ‘ä»¬å°†è¦æ•è·çš„æµé‡ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/Screenshot-2019-02-20-at-09.04.48-20210408103149938-2021-04-08-ZXh8d2.png" alt="OpenShift Namespace Overview"></p><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ•è· KIE æœåŠ¡å™¨ Pod ä¸Šçš„ç½‘ç»œæµé‡ï¼Œä»¥ä¾¿åˆ†æ Business Central Workbench å‘é€ç»™ KIE æœåŠ¡å™¨çš„ RESTful å‘½ä»¤ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦é™„åŠ  (attach)ä¸€ä¸ª Sidecar åˆ° KIE æœåŠ¡å™¨çš„ Pod.</p><ol><li><p>åœ¨ Overview é¡µé¢ä¸­ï¼Œå•å‡»è¦åˆ†æçš„ Pod çš„åç§°ã€‚è¿™å°†æ‰“å¼€ <em>éƒ¨ç½²é…ç½®(Deployment Config, ç®€ç§°DC)</em> é¡µé¢ã€‚</p></li><li><p>åœ¨ <em>éƒ¨ç½²é…ç½®</em> å±å¹•çš„å³ä¸Šè§’ï¼Œå•å‡» Actions -&gt; Edit YAMLã€‚è¿™å°†æ‰“å¼€ DC çš„ YAMLé…ç½®ã€‚</p></li></ol><p><img src="https://img.hi-linux.com/staticfile/Screenshot-2019-02-20-at-09.08.55-2021-04-08-XCDrsY.png" alt></p><ol start="3"><li>å‘ä¸‹æ»šåŠ¨ï¼Œç›´åˆ°çœ‹åˆ°å•è¯ <code>containers</code>ã€‚æˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªé¢å¤–çš„å®¹å™¨ï¼Œå®‰è£…äº† Tcpdump çš„Sidecar åˆ° Pod ä¸­ã€‚ç›´æ¥åœ¨ <code>containers</code> å®šä¹‰ä¸‹æ·»åŠ ä»¥ä¸‹ YAML ç‰‡æ®µ:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- name: tcpdump</span><br><span class="line">   image: corfr&#x2F;tcpdump</span><br><span class="line">   command:</span><br><span class="line">     - &#x2F;bin&#x2F;sleep</span><br><span class="line">     - infinity</span><br></pre></td></tr></table></figure><p><img src="https://img.hi-linux.com/staticfile/Screenshot-2019-02-20-at-09.17.56-2021-04-08-ci10cL.png" alt></p><ol start="4"><li>ä¿å­˜é…ç½®ã€‚è¿™å°†éƒ¨ç½²ä¸€ä¸ªæ–°çš„ Podï¼Œå®ƒç°åœ¨ç”±ä¸¤ä¸ªå®¹å™¨ç»„æˆ: ä¸€ä¸ªå®¹å™¨åŒ…å« KIE æœåŠ¡å™¨ï¼Œå¦ä¸€ä¸ªå®¹å™¨åŒ…å«æˆ‘ä»¬çš„ Tcpdump å·¥å…·ï¼Œå®ƒå°†æ— é™æœŸåœ°æŒç»­è¿è¡Œã€‚</li></ol><h3><span id="æ•è·å’Œåˆ†ææµé‡">æ•è·å’Œåˆ†ææµé‡</span></h3><p>éšç€ Sidecar çš„éƒ¨ç½²å’Œè¿è¡Œï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å¼€å§‹æ•è·æ•°æ®äº†ã€‚æˆ‘å°è¯•çš„æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨ <code>oc rsh</code> å‘½ä»¤è¿œç¨‹æ‰§è¡Œ Sidecar ä¸­çš„ <code>tcpdump</code> å‘½ä»¤ï¼Œå°†ç½‘ç»œæ•°æ®æµè¾“å‡ºåˆ° FIFO æ–‡ä»¶ï¼Œå¹¶å°†æ•°æ®ç›´æ¥å¯¼å…¥ Wiresharkã€‚ç”±äºå„ç§åŸå› ï¼Œè¿™ç§æ–¹æ³•å¤±è´¥äº†ã€‚å…¶ä¸­ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œ<code>tcpdump</code> å‘ <code>stderr</code> å‘é€ä¿¡æ¯æ¶ˆæ¯ï¼Œä½†æ˜¯è¿™äº›æ¶ˆæ¯ä¸ <code>stdout</code> åœ¨ç›¸åŒçš„æµä¸­, å¹¶ä¸”æ˜¯é€šè¿‡ SSH æ¥æ”¶ï¼Œä»è€Œç ´åäº†è¿›å…¥ Wireshark çš„æ•°æ®ã€‚</p><p>æˆ‘æœ€åä½¿ç”¨çš„æ–¹æ³•æ˜¯ç™»å½•åˆ° Sidecar å®¹å™¨ï¼Œå¹¶åœ¨ Sidecar ä¸­è¿è¡Œ <code>tcpdump</code> å‘½ä»¤æ¥åˆ›å»º PCAP æ–‡ä»¶ã€‚å½“æ‚¨æ•è·äº†è¶³å¤Ÿçš„æ•°æ®åï¼Œå°±å¯ä»¥åœæ­¢æ•è·è¿‡ç¨‹å¹¶å°† PCAP æ–‡ä»¶å¤åˆ¶åˆ°æ‚¨å¸Œæœ›ä½¿ç”¨ Wireshark è¿›è¡Œç½‘ç»œæµé‡åˆ†æçš„æœºå™¨ä¸Šã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹:</p><ol><li>åœ¨æ‚¨çš„å¼€å‘æœºå™¨ä¸Šï¼Œç”¨ <code>oc</code> å®¢æˆ·ç«¯è¿æ¥åˆ° OpenShift å®ä¾‹ï¼Œå¹¶æ¿€æ´»æ­£ç¡®çš„é¡¹ç›®( project, å³namespace)ï¼Œè¿è¡Œ <code>oc get pods</code> å‘½ä»¤æ¥åˆ—å‡ºæ‚¨çš„ Pods:</li></ol><p><img src="https://img.hi-linux.com/staticfile/Screenshot-2019-02-20-at-09.26.30-2021-04-08-Xyw4s5.png" alt></p><ol start="2"><li><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç™»å½•åˆ°æˆ‘ä»¬çš„ KIE æœåŠ¡å™¨ Pod çš„ tcpdump å®¹å™¨ä¸­: <code>oc rsh -c tcpdump rhpam7-mortgage-kieserver-2-zcpsn</code></p></li><li><p>åœ¨ <code>tcpdump</code> å®¹å™¨ä¸­ï¼Œè¿è¡Œæ­¤å‘½ä»¤ä»¥å¯åŠ¨ç½‘ç»œæµé‡æ•è·è¿‡ç¨‹: <code>tcpdump -s 0 -n -w /tmp/kieserver.pcap</code></p></li><li><p>è¿è¡Œè¦åˆ†æçš„ç½‘ç»œæµé‡çš„æµ‹è¯•ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘å°†ä» Business Central workbench ä¸­å¯åŠ¨ä¸€ä¸ªä¸šåŠ¡æµç¨‹ï¼Œå®ƒå°†å‘ KIE æœåŠ¡å™¨å‘é€ä¸€ä¸ª RESTful è¯·æ±‚ã€‚</p></li><li><p>æ•è·è¶³å¤Ÿçš„æ•°æ®åï¼Œåœ¨ <code>tcpdump</code> å®¹å™¨ä¸­ä½¿ç”¨ <code>Ctrl+C</code> å®Œæˆæ•è·è¿‡ç¨‹ã€‚</p></li><li><p>å›åˆ°æœ¬åœ°æœºå™¨ã€‚å°† PCAP æ–‡ä»¶ä» Pod å¤åˆ¶åˆ°æœ¬åœ°æœºå™¨: <code>oc cp -c tcpdump rhpam7-mortgage-kieserver-2-zcpsn:tmp/kieserver.pcap kieserver.pcap</code></p></li><li><p>ç”¨ Wireshark æ‰“å¼€ PCAP æ–‡ä»¶å¹¶åˆ†æç½‘ç»œæµé‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘æ­£åœ¨åˆ†ææˆ‘çš„ HTTP POST æ–¹æ³•ï¼Œå®ƒåˆ›å»ºäº† Mortgage è¿›ç¨‹çš„ä¸€ä¸ªæ–°å®ä¾‹:</p></li></ol><p><img src="https://img.hi-linux.com/staticfile/Screenshot-2019-02-20-at-09.45.47-2021-04-08-FBOqZz.png" alt="Wireshark åˆ†æ"></p><h3><span id="æ€»ç»“">æ€»ç»“</span></h3><p>åœ¨å®¹å™¨ç¯å¢ƒ(å¦‚ Kubernetes å’Œ/æˆ– OpenShift )ä¸­åˆ†æ Pod ä¹‹é—´çš„ç½‘ç»œé€šä¿¡å¯èƒ½æ¯”åœ¨éå®¹å™¨ç¯å¢ƒä¸­æ›´å›°éš¾ä¸€äº›ã€‚ç„¶è€Œï¼ŒSidecar å®¹å™¨çš„æ¦‚å¿µä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§ç®€å•çš„å·¥å…·ï¼Œå¯ä»¥å°†å®¹å™¨è¿åŒæ‰€éœ€çš„å¼€å‘å·¥å…·å’Œå®ç”¨ç¨‹åºé™„åŠ åˆ°å¾®æœåŠ¡podä¸Šã€‚<strong>è¿™é¿å…äº†å¼€å‘äººå‘˜å¿…é¡»åœ¨åº”ç”¨ç¨‹åºå®¹å™¨æ˜ åƒæœ¬èº«ä¸­å®‰è£…è¿™äº›è°ƒè¯•å·¥å…·ï¼Œä»è€Œä¿æŒå®¹å™¨çš„è½»ä¾¿å’Œå¹²å‡€ã€‚</strong> ä½¿ç”¨åƒ <code>oc rsh</code> å’Œ <code>oc cp</code> è¿™æ ·çš„ OpenShift å·¥å…·ï¼Œæˆ‘å±•ç¤ºäº†å¦‚ä½•è½»æ¾åœ°ä» Pod æ•è·ç½‘ç»œæµé‡æ•°æ®å¹¶å°†æ•°æ®å¸¦åˆ°å¼€å‘æœºå™¨è¿›è¡Œåˆ†æã€‚</p><h2><span id="æ–¹æ³•äºŒ-ä½¿ç”¨-netshoot">æ–¹æ³•äºŒ ä½¿ç”¨ netshoot</span></h2><p><a href="https://github.com/nicolaka/netshoot" target="_blank" rel="noopener">Netshoot</a> - Docker + Kubernetesç½‘ç»œæ•…éšœæ’é™¤çš„ç‘å£«å†›åˆ€å®¹å™¨</p><p><img src="https://img.hi-linux.com/staticfile/403141-2021-04-08-17rDoq.jpg" alt="ç‘å£«å†›åˆ€"></p><h3><span id="ç”¨é€”">ç”¨é€”</span></h3><p>Docker å’Œ Kubernetes ç½‘ç»œæ•…éšœæ’é™¤å˜å¾—å¤æ‚ã€‚é€šè¿‡æ­£ç¡®ç†è§£ Docker å’Œ Kubernetes ç½‘ç»œçš„å·¥ä½œæ–¹å¼å’Œæ­£ç¡®çš„å·¥å…·é›†ï¼Œæ‚¨å¯ä»¥æ’é™¤æ•…éšœå¹¶è§£å†³è¿™äº›ç½‘ç»œé—®é¢˜ã€‚netshoot å®¹å™¨æœ‰ä¸€ç»„å¼ºå¤§çš„ç½‘ç»œtroubleshoot å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ’é™¤ Docker ç½‘ç»œé—®é¢˜ã€‚ä¸è¿™äº›å·¥å…·ä¸€èµ·å‡ºç°çš„è¿˜æœ‰ä¸€ç»„ç”¨ä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨çœŸå®åœºæ™¯ä¸­ä½¿ç”¨è¿™ä¸ªå®¹å™¨ã€‚</p><h3><span id="network-namespaces-ç½‘ç»œåç§°ç©ºé—´">Network Namespaces - ç½‘ç»œåç§°ç©ºé—´</span></h3><p>åœ¨å¼€å§‹ä½¿ç”¨è¿™ä¸ªå·¥å…·ä¹‹å‰ï¼Œæœ‰ä¸€ç‚¹å¾ˆé‡è¦:ç½‘ç»œåç§°ç©ºé—´ã€‚ç½‘ç»œåç§°ç©ºé—´æä¾›ä¸ç½‘ç»œç›¸å…³çš„ç³»ç»Ÿèµ„æºçš„éš”ç¦»ã€‚Dockerä½¿ç”¨ç½‘ç»œå’Œå…¶ä»–ç±»å‹çš„åç§°ç©ºé—´(<code>pid</code>ã€<code>mount</code>ã€<code>user</code>â€¦)ä¸ºæ¯ä¸ªå®¹å™¨åˆ›å»ºä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒã€‚ä»æ¥å£ã€è·¯ç”±åˆ° ip çš„æ‰€æœ‰å†…å®¹éƒ½å®Œå…¨éš”ç¦»åœ¨å®¹å™¨çš„ç½‘ç»œåç§°ç©ºé—´ä¸­ã€‚</p><p>Kubernetes ä¹Ÿä½¿ç”¨ç½‘ç»œåç§°ç©ºé—´ã€‚<strong>Kubeletsä¸ºæ¯ä¸ªpodåˆ›å»ºä¸€ä¸ªç½‘ç»œåç§°ç©ºé—´ï¼Œå…¶ä¸­è¯¥ Pod ä¸­çš„æ‰€æœ‰å®¹å™¨å…±äº«ç›¸åŒçš„ç½‘ç»œåç§°ç©ºé—´(ethsã€IPã€tcpå¥—æ¥å­—â€¦â€¦)ã€‚è¿™æ˜¯ Docker å®¹å™¨å’ŒKubernetes podä¹‹é—´çš„å…³é”®åŒºåˆ«ã€‚</strong></p><p>åç§°ç©ºé—´å¾ˆé…·çš„ä¸€ç‚¹æ˜¯æ‚¨å¯ä»¥åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚æ‚¨å¯ä»¥è¾“å…¥ä¸åŒå®¹å™¨çš„ç½‘ç»œåç§°ç©ºé—´ï¼Œä½¿ç”¨ç”šè‡³æ²¡æœ‰å®‰è£…åœ¨è¯¥å®¹å™¨ä¸Šçš„å·¥å…·åœ¨å…¶ç½‘ç»œå †æ ˆä¸Šæ‰§è¡Œä¸€äº›æ•…éšœæ’é™¤ã€‚æ­¤å¤–ï¼Œnetshoot å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œåç§°ç©ºé—´æ¥å¯¹ä¸»æœºæœ¬èº«è¿›è¡Œæ•…éšœæ’é™¤ã€‚è¿™å…è®¸æ‚¨åœ¨ä¸ç›´æ¥åœ¨ä¸»æœºæˆ–åº”ç”¨ç¨‹åºåŒ…ä¸Šå®‰è£…ä»»ä½•æ–°åŒ…çš„æƒ…å†µä¸‹æ‰§è¡Œä»»ä½•æ•…éšœæ’é™¤ã€‚</p><h3><span id="é’ˆå¯¹å®¹å™¨çš„ç”¨æ³•">é’ˆå¯¹å®¹å™¨çš„ç”¨æ³•</span></h3><ul><li><strong>å®¹å™¨çš„ç½‘ç»œåç§°ç©ºé—´</strong> :å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºçš„å®¹å™¨å­˜åœ¨ç½‘ç»œé—®é¢˜ï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·ä½¿ç”¨å®¹å™¨çš„ç½‘ç»œåç§°ç©ºé—´å¯åŠ¨ netshoot: <code>$ docker run -it --net container:&lt;container_name&gt; nicolaka/netshoot</code></li><li><strong>ä¸»æœºçš„ç½‘ç»œåç§°ç©ºé—´</strong> :å¦‚æœæ‚¨è®¤ä¸ºç½‘ç»œé—®é¢˜åœ¨äºä¸»æœºæœ¬èº«ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è¯¥ä¸»æœºçš„ç½‘ç»œåç§°ç©ºé—´å¯åŠ¨ netshootã€‚å‘½ä»¤: <code>$ docker run -it --net host nicolaka/netshoot</code></li><li><strong>ç½‘ç»œçš„ç½‘ç»œåç§°ç©ºé—´</strong> :å¦‚æœè¦å¯¹Dockerç½‘ç»œè¿›è¡Œæ•…éšœæ’é™¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>nsenter</code> è¾“å…¥ç½‘ç»œçš„åç§°ç©ºé—´ã€‚è¿™å°†åœ¨ä¸‹é¢çš„ <code>nsenter</code> éƒ¨åˆ†è¿›è¡Œè§£é‡Šã€‚</li></ul><h3><span id="é’ˆå¯¹-kubernetes-çš„ç”¨æ³•">é’ˆå¯¹ Kubernetes çš„ç”¨æ³•</span></h3><p><strong>Kubernetes</strong>: å¦‚æœä½ æƒ³æ‰“å¼€ä¸€ä¸ªä¸´æ—¶çš„å®¹å™¨æ¥è°ƒè¯•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl run --generator&#x3D;run-pod&#x2F;v1 tmp-shell --rm -i --tty --image nicolaka&#x2F;netshoot -- &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³åœ¨ä¸»æœºçš„ç½‘ç»œåç§°ç©ºé—´ä¸Š spin up ä¸€ä¸ªå®¹å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl run tmp-shell --generator&#x3D;run-pod&#x2F;v1 --rm -i --tty --overrides&#x3D;&#39;&#123;&quot;spec&quot;: &#123;&quot;hostNetwork&quot;: true&#125;&#125;&#39; --image nicolaka&#x2F;netshoot -- &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure><blockquote><p>åŒæ ·çš„åŸç†, <code>netshoot</code> ä¹Ÿå¯ä»¥é€šè¿‡ Sidecar çš„æ–¹å¼è¿›è¡Œä½¿ç”¨.</p></blockquote><h3><span id="ç½‘ç»œé—®é¢˜">ç½‘ç»œé—®é¢˜</span></h3><p>è®¸å¤šç½‘ç»œé—®é¢˜å¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºæ€§èƒ½ä¸‹é™ã€‚å…¶ä¸­ä¸€äº›é—®é¢˜å¯èƒ½ä¸åº•å±‚ç½‘ç»œåŸºç¡€è®¾æ–½æœ‰å…³ã€‚å…¶ä»–é—®é¢˜å¯èƒ½ä¸ä¸»æœºæˆ– Docker çº§åˆ«çš„é…ç½®é”™è¯¯æœ‰å…³ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¸¸è§çš„ç½‘ç»œé—®é¢˜</p><ul><li>å»¶è¿Ÿ(latency)</li><li>è·¯ç”±(routing)</li><li>DNSè§£æ(DNS resolution)</li><li>é˜²ç«å¢™(firewall)</li><li>ä¸å®Œæ•´çš„ ARP(incomplete ARPs)</li></ul><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œ<code>netshoot</code> åŒ…å«äº†ä¸€ç»„å¼ºå¤§çš„å·¥å…·ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p><p><img src="https://img.hi-linux.com/staticfile/netshoot-all-tools-2021-04-08-oPnkeD.png" alt="netshoot å·¥å…·é›†"></p><h3><span id="è¢«åŒ…å«çš„åŒ…">è¢«åŒ…å«çš„åŒ…</span></h3><p>ä»¥ä¸‹åŒ…è¢«åŒ…å«åœ¨ <code>netshoot</code> ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">apache2-utils</span><br><span class="line">bash</span><br><span class="line">bind-tools</span><br><span class="line">bird</span><br><span class="line">bridge-utils</span><br><span class="line">busybox-extras</span><br><span class="line">calicoctl</span><br><span class="line">conntrack-tools</span><br><span class="line">ctop</span><br><span class="line">curl</span><br><span class="line">dhcping</span><br><span class="line">drill</span><br><span class="line">ethtool</span><br><span class="line">file</span><br><span class="line">fping</span><br><span class="line">iftop</span><br><span class="line">iperf</span><br><span class="line">iproute2</span><br><span class="line">ipset</span><br><span class="line">iptables</span><br><span class="line">iptraf-ng</span><br><span class="line">iputils</span><br><span class="line">ipvsadm</span><br><span class="line">libc6-compat</span><br><span class="line">liboping</span><br><span class="line">mtr</span><br><span class="line">net-snmp-tools</span><br><span class="line">netcat-openbsd</span><br><span class="line">netgen</span><br><span class="line">nftables</span><br><span class="line">ngrep</span><br><span class="line">nmap</span><br><span class="line">nmap-nping</span><br><span class="line">openssl</span><br><span class="line">py-crypto</span><br><span class="line">py2-virtualenv</span><br><span class="line">python2</span><br><span class="line">scapy</span><br><span class="line">socat</span><br><span class="line">strace</span><br><span class="line">tcpdump</span><br><span class="line">tcptraceroute</span><br><span class="line">util-linux</span><br><span class="line">vim</span><br></pre></td></tr></table></figure><h2><span id="æ–¹æ³•ä¸‰-åˆ©ç”¨network-namespace">æ–¹æ³•ä¸‰ åˆ©ç”¨Network Namespace</span></h2><p>æ­£å¦‚æ–¹æ³•äºŒä¸­æåˆ°çš„ Network Namespace æ¦‚å¿µ, å®é™…ä¸Š, ä¸åŒçš„å®¹å™¨, <strong>åªæ˜¯åœ¨å®¿ä¸»æœºä¸Šä¸åŒ namespace è¿è¡Œçš„è¿›ç¨‹è€Œå·²</strong> . å› æ­¤è¦åœ¨ä¸åŒçš„å®¹å™¨æŠ“åŒ…å¯ä»¥ç®€å•åœ°ä½¿ç”¨å‘½ä»¤åˆ‡æ¢ Network Namespace å³å¯ï¼Œå¯ä»¥ä½¿ç”¨åœ¨å®¿ä¸»æœºä¸Šçš„ <code>tcpdump</code> ç­‰åº”ç”¨è¿›è¡ŒæŠ“åŒ…ã€‚</p><blockquote><p>å‰ææ¡ä»¶: å®¿ä¸»æœºä¸Šå·²å®‰è£…<code>tcpdump</code></p><p>å‚è€ƒé“¾æ¥: <a href="https://ruofeng.me/2018/09/19/capture-packets-in-kubernetes/" target="_blank" rel="noopener">åœ¨ k8s ä¸­å¯¹æŒ‡å®š Pod è¿›è¡ŒæŠ“åŒ…</a></p></blockquote><p>å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹:</p><ol><li>æŸ¥çœ‹æŒ‡å®š Pod è¿è¡Œåœ¨å“ªä¸ªå®¿ä¸»æœºä¸Š:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubctl describe pod &lt;pod&gt; -n mservice</span><br></pre></td></tr></table></figure><ol start="2"><li>è·å¾—å®¹å™¨çš„ Pid:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect -f &#123;&#123;.State.Pid&#125;&#125; &lt;container&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li>è¿›å…¥è¯¥å®¹å™¨çš„ network namespace:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nsenter --target &lt;PID&gt; -n</span><br></pre></td></tr></table></figure><ol start="4"><li>ä½¿ç”¨å®¿ä¸»æœºçš„ <code>tcpdump</code> æŠ“åŒ…, æŒ‡å®š eth0 ç½‘å¡:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i eth0 tcp and port 80 -vvv</span><br></pre></td></tr></table></figure><ol start="5"><li>æˆ–è€…ç›´æ¥æŠ“åŒ…å¹¶å¯¼å‡ºåˆ°æ–‡ä»¶:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i eth0 -w &#x2F;tmp&#x2F;out.cap</span><br></pre></td></tr></table></figure><ol start="6"><li>ä»è¿œç¨‹ <code>scp</code> åˆ°æœ¬åœ°:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp ipaddr:&#x2F;tmp&#x2F;out.cap .&#x2F;</span><br></pre></td></tr></table></figure><ol start="7"><li>ä¹‹ååœ¨ Wireshark ä¸­å¯ä»¥æ‰“å¼€æ–‡ä»¶éå¸¸ç›´è§‚å¾—æŸ¥çœ‹è¿‡æ»¤æŠ“åˆ°çš„æ•°æ®ã€‚</li></ol><h2><span id="æ–¹æ³•å››-ä½¿ç”¨-kubectl-æ’ä»¶-ksniff">æ–¹æ³•å›› ä½¿ç”¨ kubectl æ’ä»¶ ksniff</span></h2><p>ksniff é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/eldadru/ksniff" target="_blank" rel="noopener">https://github.com/eldadru/ksniff</a></p><h3><span id="é¢˜å¤–è¯-krew-kubectl-æ’ä»¶åŒ…ç®¡ç†å™¨">é¢˜å¤–è¯: krew - kubectl æ’ä»¶åŒ…ç®¡ç†å™¨</span></h3><blockquote><p>å‰ææ¡ä»¶: kubectl v1.12 æˆ–æ›´é«˜.</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/kubernetes-sigs/krew/" target="_blank" rel="noopener">https://github.com/kubernetes-sigs/krew/</a></p></blockquote><p>Krew æ˜¯ kubectl æ’ä»¶çš„åŒ…ç®¡ç†å™¨ã€‚</p><h4><span id="ä»€ä¹ˆæ˜¯-krew">ä»€ä¹ˆæ˜¯ <code>krew</code></span></h4><p>krew æ˜¯ä¸€ä¸ªä½¿ <a href="https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/" target="_blank" rel="noopener">kubectlæ’ä»¶</a> æ˜“äºä½¿ç”¨çš„å·¥å…·ã€‚krew å¸®åŠ©æ‚¨å‘ç°æ’ä»¶ï¼Œå¹¶åœ¨æ‚¨çš„æœºå™¨ä¸Šå®‰è£…å’Œç®¡ç†å®ƒä»¬ã€‚å®ƒç±»ä¼¼äº aptã€dnf æˆ– brew ç­‰å·¥å…·ã€‚</p><ul><li><strong>å¯¹äº kubectl ç”¨æˆ·</strong> : krew å¸®åŠ©æ‚¨ä»¥ä¸€è‡´çš„æ–¹å¼æŸ¥æ‰¾ã€å®‰è£…å’Œç®¡ç† kubectlæ’ä»¶ã€‚</li></ul><p>krew æ˜“äºä½¿ç”¨:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl krew search                 # show all plugins</span><br><span class="line">kubectl krew install view-secret    # install a plugin named &quot;view-secret&quot;</span><br><span class="line">kubectl view-secret                 # use the plugin</span><br><span class="line">kubectl krew upgrade                # upgrade installed plugins</span><br><span class="line">kubectl krew uninstall view-secret  # uninstall a plugin</span><br></pre></td></tr></table></figure><p>è¯¦ç»†æ–‡æ¡£è¯·å‚é˜…<a href="https://krew.sigs.k8s.io/docs/user-guide/" target="_blank" rel="noopener">ç”¨æˆ·æŒ‡å—</a>ã€‚</p><p>æŸ¥çœ‹åœ¨ krew ä¸Š<a href="http://sigs.k8s.io/krew-index/plugins.md" target="_blank" rel="noopener">å¯ç”¨çš„ kubectl æ’ä»¶åˆ—è¡¨</a>ï¼Œæˆ–è€…è¿è¡Œ <code>kubectl krew search</code> æ¥å‘ç°å¯ç”¨çš„æ’ä»¶ã€‚</p><h4><span id="å®‰è£…-krew">å®‰è£… krew</span></h4><p><strong>Bash å’Œ ZSH</strong>:</p><ol><li>ç¡®ä¿ <code>git</code> å·²å®‰è£…;</li><li>è¿è¡Œå¦‚ä¸‹å‘½ä»¤, ä¸‹è½½å¹¶å®‰è£… <code>krew</code></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">  set -x; cd &quot;$(mktemp -d)&quot; &amp;&amp;</span><br><span class="line">  curl -fsSLO &quot;https:&#x2F;&#x2F;github.com&#x2F;kubernetes-sigs&#x2F;krew&#x2F;releases&#x2F;download&#x2F;v0.3.1&#x2F;krew.&#123;tar.gz,yaml&#125;&quot; &amp;&amp;</span><br><span class="line">  tar zxvf krew.tar.gz &amp;&amp;</span><br><span class="line">  .&#x2F;krew-&quot;$(uname | tr &#39;[:upper:]&#39; &#39;[:lower:]&#39;)_amd64&quot; install \</span><br><span class="line">    --manifest&#x3D;krew.yaml --archive&#x3D;krew.tar.gz</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ol><li>æ·»åŠ  <code>$HOME/.krew/bin</code> ç›®å½•åˆ° <code>PATH</code> ç¯å¢ƒå˜é‡. å¦‚ä¸‹: <code>export PATH=&quot;${KREW_ROOT:-$HOME/.krew}/bin:$PATH&quot;</code> å¹¶é‡å¯ä¸‹ Shell ç”Ÿæ•ˆ.</li></ol><h3><span id="å®‰è£…-ksniff">å®‰è£… ksniff</span></h3><p>é€šè¿‡ <code>krew</code>: <code>kubectl krew install sniff</code></p><h3><span id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># kubectl &lt; 1.12:</span><br><span class="line">$ kubectl plugin sniff &lt;POD_NAME&gt; [-n &lt;NAMESPACE_NAME&gt;] [-c &lt;CONTAINER_NAME&gt;] [-i &lt;INTERFACE_NAME&gt;] [-f &lt;CAPTURE_FILTER&gt;] [-o OUTPUT_FILE] [-l LOCAL_TCPDUMP_FILE] [-r REMOTE_TCPDUMP_FILE]</span><br><span class="line"></span><br><span class="line"># kubectl &gt;&#x3D; 1.12:</span><br><span class="line">$ kubectl sniff &lt;POD_NAME&gt; [-n &lt;NAMESPACE_NAME&gt;] [-c &lt;CONTAINER_NAME&gt;] [-i &lt;INTERFACE_NAME&gt;] [-f &lt;CAPTURE_FILTER&gt;] [-o OUTPUT_FILE] [-l LOCAL_TCPDUMP_FILE] [-r REMOTE_TCPDUMP_FILE]</span><br><span class="line"></span><br><span class="line">POD_NAME: Required. the name of the kubernetes pod to start capture it&#39;s traffic.</span><br><span class="line">NAMESPACE_NAME: Optional. Namespace name. used to specify the target namespace to operate on.</span><br><span class="line">CONTAINER_NAME: Optional. If omitted, the first container in the pod will be chosen.</span><br><span class="line">INTERFACE_NAME: Optional. Pod Interface to capture from. If omited, all Pod interfaces will be captured.</span><br><span class="line">CAPTURE_FILTER: Optional. specify a specific tcpdump capture filter. If omitted no filter will be used.</span><br><span class="line">OUTPUT_FILE: Optional. if specified, ksniff will redirect tcpdump output to local file instead of wireshark.</span><br><span class="line">LOCAL_TCPDUMP_FILE: Optional. if specified, ksniff will use this path as the local path of the static tcpdump binary.</span><br><span class="line">REMOTE_TCPDUMP_FILE: Optional. if specified, ksniff will use the specified path as the remote path to upload static tcpdump to.</span><br></pre></td></tr></table></figure><p>ä¸¾ä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl sniff mypod -n myproject -o &#x2F;tmp&#x2F;mypod.pcap</span><br></pre></td></tr></table></figure><h2><span id="æ€»ç»“">æ€»ç»“</span></h2><p>ä¸ºäº†åœ¨å®¹å™¨æˆ– K8S ä¸­è¿›è¡Œç½‘ç»œè°ƒè¯•å’Œåˆ†æ, æœ¬æ–‡åˆ—ä¸¾äº† 4 ç§æ–¹æ³•, ç°åœ¨è¿›è¡Œæ€»ç»“å½’çº³:</p><ol><li><p>ä½¿ç”¨ Sidecar - Sidecar å®¹å™¨æ‰€åœ¨çš„ <strong>Pod ä¸­çš„å¤šä¸ªå®¹å™¨å…±äº«ç›¸åŒçš„ç½‘ç»œå±‚</strong>, ä¸”Sidecar å®¹å™¨å¯ä»¥åŒ…å« <code>tcpdump</code> ç­‰å·¥å…·;</p></li><li><p>åˆ©ç”¨ Network Namespace - ä¸åŒçš„å®¹å™¨, <strong>åªæ˜¯åœ¨å®¿ä¸»æœºä¸Šä¸åŒ namespace è¿è¡Œçš„è¿›ç¨‹è€Œå·²</strong>. å®¹å™¨çš„ç½‘ç»œä¹Ÿæ˜¯å¦‚æ­¤.</p></li><li><p>ä½¿ç”¨ <code>netshoot</code> - <code>netshoot</code> å…¶å®æ˜¯åŒ…å«ä¸€ç³»åˆ—çš„å¸¸ç”¨ç½‘ç»œåˆ†æè°ƒè¯•å·¥å…·é›†çš„å®¹å™¨, çœŸæ­£çš„ä½¿ç”¨æ–¹æ³•å…¶å®è¿˜æ˜¯ä»¥ä¸Š 2 ç§:</p><ol><li>é€šè¿‡ sidecar æŒ‚è½½</li><li>åˆ©ç”¨ Network Namespace åˆ†æè°ƒè¯•</li></ol></li><li><p>ä½¿ç”¨ kubectl æ’ä»¶ - <code>ksniff</code>.</p></li></ol><p>ä»¥ä¸Šè¿™äº›æ–¹æ³•, æœ‰ä¸åŒçš„å‰ææ¡ä»¶å’Œä½¿ç”¨åœºæ™¯, å¸Œæœ›æœ¬æ–‡è¯»å®Œä¼šè®©ä½ çš„ K8S è°ƒè¯•æŠ€èƒ½æœ‰æ‰€æå‡.</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ ä¸ªäººæŠ€æœ¯åˆ†äº« ã€ï¼ŒåŸæ–‡ï¼š<a href="http://t.cn/AimWk1Wl%EF%BC%8C%E7%89%88%E6%9D%83%E5%BD%92%E5%8E%9F%E4%BD%9C%E8%80%85%E6%89%80%E6%9C%89%E3%80%82%E6%AC%A2%E8%BF%8E%E6%8A%95%E7%A8%BF%EF%BC%8C%E6%8A%95%E7%A8%BF%E9%82%AE%E7%AE%B1:" target="_blank" rel="noopener">http://t.cn/AimWk1Wlï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±:</a> <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨å½“ä»Šä¸–ç•Œ, åˆ†å¸ƒå¼ç³»ç»Ÿ, å¾®æœåŠ¡/SOAæ¶æ„éåœ°, æœåŠ¡ä¹‹é—´çš„è®¸å¤šäº¤äº’å’Œé€šä¿¡éƒ½ä¸å†æ˜¯åŒä¸€ä¸»æœºçš„ä¸åŒçº¿ç¨‹æˆ–è¿›ç¨‹, è€Œæ˜¯è·¨ä¸»æœº, ç”šè‡³è·¨ç½‘ç»œåŒºåŸŸ. é‚£ä¹ˆä¸€æ—¦ç›¸å…³æœåŠ¡å‡ºç°é—®é¢˜, æˆ‘ä»¬å°±ä¼šéœ€è¦è°ƒè¯•æœåŠ¡é—´çš„é€šè®¯, ä¸»æœºé—´çš„ç½‘ç»œâ€¦&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img.hi-linux.com/staticfile/smartscape-complex-environment-572-9c4b25ca16-2021-04-08-u3bMoJ.png&quot; alt=&quot;å¤æ‚çš„ç½‘ç»œæ¶æ„&quot;&gt;&lt;/p&gt;
&lt;p&gt;Kubernetes ä¸­çš„åº”ç”¨å‡ºäº†é—®é¢˜, å¾€å¾€éœ€è¦è¿›è¡Œç½‘ç»œæŠ“åŒ…åˆ†æ. æœ¬æ–‡ä»‹ç»äº†åœ¨ Kubernetes ä¸­ç½‘ç»œè°ƒè¯•åˆ†æçš„4ç§æ–¹æ³•.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ sidecar&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;a href=&quot;https://github.com/nicolaka/netshoot&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;netshoot&lt;/a&gt; - ä¸€ä¸ª Docker + Kubernetesç½‘ç»œæ•…éšœæ’é™¤çš„ç‘å£«å†›åˆ€å®¹å™¨&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨Network Namespace&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ kubectl æ’ä»¶ - &lt;code&gt;ksniff&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/categories/kubernetes/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Docker" scheme="https://www.hi-linux.com/tags/Docker/"/>
    
      <category term="Kubernetes" scheme="https://www.hi-linux.com/tags/Kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>å¼¹æŒ‡ä¸€æŒ¥é—´ï¼Œæ­ç§˜è¯ç”Ÿ 30 å‘¨å¹´ Linux æˆåŠŸçš„çœŸæ­£åŸå› </title>
    <link href="https://www.hi-linux.com/posts/43403.html"/>
    <id>https://www.hi-linux.com/posts/43403.html</id>
    <published>2021-06-11T01:00:00.000Z</published>
    <updated>2021-06-11T03:46:46.656Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><ul><li>ä½œè€…ä¸¨ Jeremy Andrews</li><li>è¯‘è€…ä¸¨å± çµ</li><li>ç­–åˆ’ä¸¨è”¡èŠ³èŠ³</li></ul><blockquote><p>Linux è¯ç”Ÿäº 1991 å¹´ï¼Œè·ä»Šå·²ç» 30 å¹´äº†ã€‚è™½ç„¶å®ƒä¸€å¼€å§‹åªæ˜¯ Linus çš„ä¸€ä¸ªä¸ªäººé¡¹ç›®ï¼Œè€Œéå‡ºäºè¦å¼€å‘ä¸€ä¸ªæ–°æ“ä½œç³»ç»Ÿçš„ä¼Ÿå¤§æ¢¦æƒ³ï¼Œä½†å¦‚ä»Šçš„ Linux æ—©å·²æ— å¤„ä¸åœ¨ã€‚</p></blockquote><p>30 å¹´å‰ï¼Œå½“ Linus Torvalds ç¬¬ä¸€æ¬¡å‘å¸ƒ Linux å†…æ ¸æ—¶ï¼Œä»–è¿˜æ˜¯èµ«å°”è¾›åŸºå¤§å­¦çš„ä¸€å 21 å²çš„å­¦ç”Ÿã€‚ä»–å®£å¸ƒè¯´ï¼šâ€œæˆ‘æ­£åœ¨å¼€å‘ä¸€ä¸ªï¼ˆå…è´¹çš„ï¼‰æ“ä½œç³»ç»Ÿï¼ˆè¿™åªæ˜¯ä¸ªçˆ±å¥½ï¼Œä¸ä¼šåšå¾—å¾ˆå¤§ï¼Œä¹Ÿä¸ä¼šå¾ˆä¸“ä¸šâ€¦â€¦ï¼‰â€ã€‚30 å¹´åï¼Œ500 å¼ºè¶…çº§è®¡ç®—æœºå’Œ 70% ä»¥ä¸Šçš„æ™ºèƒ½æ‰‹æœºéƒ½åœ¨è¿è¡Œ Linuxã€‚å¾ˆæ˜¾ç„¶ï¼ŒLinux ä¸ä»…å¤§ï¼Œè€Œä¸”å¾ˆä¸“ä¸šã€‚</p><p>30 å¹´æ¥ï¼ŒLinus Torvalds ä¸€ç›´åœ¨é¢†å¯¼ç€ Linux å†…æ ¸çš„å¼€å‘ï¼Œå¯å‘äº†æ— æ•°å¼€å‘è€…å’Œå¼€æºé¡¹ç›®ã€‚2005 å¹´ï¼ŒLinus å¼€å‘äº† Gitï¼Œç”¨æ¥ç®¡ç†å†…æ ¸å¼€å‘è¿‡ç¨‹ã€‚Git ç°åœ¨å·²ç»æˆä¸ºæœ€æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå—åˆ°æ— æ•°å¼€æºå’Œç§æœ‰é¡¹ç›®çš„ä¿¡ä»»ã€‚</p><p>æ­£å€¼ Linux è¯ç”Ÿ 30 å‘¨å¹´ä¹‹é™…ï¼ŒLinus Torvalds é€šè¿‡ç”µå­é‚®ä»¶å›å¤äº† Tag 1 å’¨è¯¢å…¬å¸çš„åˆ›å§‹åˆä¼™äºº / é¦–å¸­æ‰§è¡Œå®˜ Jeremy Andrews çš„è®¿è°ˆé—®é¢˜ï¼ˆã€ŠAn Interview With Linus Torvalds: Linux and Git - Part 1ã€‹ï¼‰ï¼Œå›é¡¾å¹¶æ€»ç»“äº†è¿‡å»è¿™äº›å¹´ä»–åœ¨é¢†å¯¼å¤§å‹å¼€æºé¡¹ç›®è¿‡ç¨‹ä¸­å¾—åˆ°çš„çœŸçŸ¥ç¼è§ã€‚æœ¬æ–‡ç€é‡ä»‹ç» Linux å†…æ ¸å¼€å‘å’Œ Gitã€‚InfoQ å¯¹è®¿è°ˆå†…å®¹è¿›è¡Œäº†ç¿»è¯‘ï¼Œä»¥é£¨è¯»è€…ã€‚</p><a id="more"></a><h2><span id="linux-å†…æ ¸å¼€å‘">Linux å†…æ ¸å¼€å‘</span></h2><h3><span id="linux-å‘å±•çš„å…³é”®æˆ‘ä¸è®¤è¯†çš„äººéƒ½åœ¨ä½¿ç”¨-linux">Linux å‘å±•çš„å…³é”®ï¼šâ€œæˆ‘ä¸è®¤è¯†çš„äººéƒ½åœ¨ä½¿ç”¨ Linuxâ€</span></h3><p><strong>Jeremy Andrewsï¼šLinux æ— å¤„ä¸åœ¨ï¼Œå®ƒæ˜¯æ•´ä¸ªå¼€æºä¸–ç•Œçš„çµæ„Ÿæºæ³‰ã€‚å½“ç„¶ï¼Œäº‹æƒ…å¹¶ä¸æ˜¯ä»ä¸€å¼€å§‹å°±è¿™æ ·çš„ã€‚1991 å¹´ï¼Œä½ åœ¨ comp.os.minix Usenet æ–°é—»ç»„ä¸­å‘å¸ƒäº†ä¸€ä¸ª Linux å†…æ ¸ã€‚åå¹´åï¼Œä½ å†™äº†ä¸€æœ¬ä¹¦ï¼Œå«ä½œâ€œJust for Fun: The Story of an Accidental Revolutionaryâ€ï¼ˆä¸­è¯‘åï¼šã€Šåªæ˜¯ä¸ºäº†å¥½ç©ï¼šLinux ä¹‹çˆ¶æ—çº³æ–¯è‡ªä¼ ã€‹ï¼‰ï¼Œå¯¹é‚£æ®µå†å²è¿›è¡Œäº†æ·±åº¦å›é¡¾ã€‚ä»Šå¹´ 8 æœˆï¼ŒLinux å°†è¿æ¥å®ƒçš„ 30 å‘¨å¹´çºªå¿µæ—¥ï¼åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™å¼€å§‹æ„è¯†åˆ° Linux å¹¶ä¸ä»…ä»…æ˜¯ä¸€ä¸ªâ€œçˆ±å¥½â€çš„ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šè¿™å¬èµ·æ¥å¯èƒ½æœ‰ç‚¹è’è°¬ï¼Œå®é™…ä¸Šæˆ‘å¾ˆæ—©å°±å¼€å§‹æ„è¯†åˆ°äº†ã€‚åœ¨ 1991 å¹´æœ«ï¼ˆä»¥åŠ 1992 å¹´åˆï¼‰ï¼ŒLinux å·²ç»æ¯”æˆ‘é¢„æƒ³çš„è¦å¤§å¾—å¤šã€‚</p><p>é‚£æ—¶å€™å¯èƒ½åªæœ‰å‡ ç™¾ä¸ªç”¨æˆ·ï¼ˆç¡®åˆ‡åœ°è¯´ä¸æ˜¯â€œç”¨æˆ·â€ï¼Œå› ä¸ºäººä»¬è¿˜è¦ä¸æ–­åœ°å¯¹å®ƒè¿›è¡Œä¿®ä¿®è¡¥è¡¥ï¼‰ï¼Œä»æ²¡æƒ³è¿‡ Linux åæ¥èƒ½å¤Ÿå‘å±•å£®å¤§ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œ<strong>æœ€å¤§çš„è½¬æŠ˜ç‚¹æ˜¯å½“æˆ‘æ„è¯†åˆ°å…¶ä»–äººæ­£åœ¨ä½¿ç”¨å®ƒï¼Œå¹¶å¯¹å®ƒæ„Ÿå…´è¶£ï¼Œå®ƒå¼€å§‹æœ‰äº†è‡ªå·±çš„ç”Ÿå‘½</strong>ã€‚äººä»¬å¼€å§‹å‘é€è¡¥ä¸ï¼Œè¿™ä¸ªç³»ç»Ÿèƒ½åšçš„äº‹æƒ…æ¯”æˆ‘æœ€åˆé¢„æƒ³çš„è¦å¤šå¾—å¤šã€‚</p><p>1992 å¹´ 4 æœˆçš„æŸä¸ªæ—¶å€™ï¼ŒX11 è¢«ç§»æ¤åˆ° Linux ä¸Šï¼ˆå…¶å®æˆ‘ä¹Ÿè®°ä¸å¤ªæ¸…å…·ä½“æ—¶é—´äº†ï¼Œæ¯•ç«Ÿé‚£æ˜¯å¾ˆä¹…ä»¥å‰çš„äº‹äº†ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡å¤§è¿›æ­¥ï¼ŒLinux ç³»ç»Ÿçªç„¶é—´æœ‰äº† GUI å’Œä¸€ç³»åˆ—å…¨æ–°çš„åŠŸèƒ½ã€‚</p><p>æˆ‘ä¸€å¼€å§‹å¹¶æ²¡æœ‰ä»€ä¹ˆå¤§è®¡åˆ’ã€‚è¿™åªæ˜¯ä¸€ä¸ªä¸ªäººé¡¹ç›®ï¼Œå¹¶ä¸æ˜¯å‡ºäºè¦å¼€å‘ä¸€ä¸ªæ–°æ“ä½œç³»ç»Ÿçš„ä¼Ÿå¤§æ¢¦æƒ³ã€‚æˆ‘å½“æ—¶åªæ˜¯æƒ³äº†è§£æˆ‘çš„æ–° PC ç¡¬ä»¶çš„æ¥é¾™å»è„‰ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œå®é™…ä¸Šæ›´å¤šçš„æ˜¯æƒ³â€œçœ‹çœ‹è‡ªå·±éƒ½åšäº†äº›ä»€ä¹ˆâ€ã€‚å½“ç„¶ï¼Œæˆ‘å¸Œæœ›å…¶ä»–äººä¼šè§‰å¾—å®ƒæœ‰è¶£ï¼Œä½†å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„æ“ä½œç³»ç»Ÿã€‚å®ƒæ›´å¤šçš„æ˜¯ä¸€ç§æ¦‚å¿µéªŒè¯ï¼Œè€Œä¸”åªæ˜¯ä¸€ä¸ªæˆ‘åœ¨å½“æ—¶åšäº†å‡ ä¸ªæœˆçš„ä¸ªäººé¡¹ç›®ã€‚</p><p>ä»â€œä¸ªäººé¡¹ç›®â€åˆ°å…¶ä»–äººå¼€å§‹ä½¿ç”¨å®ƒã€ç»™æˆ‘åé¦ˆï¼ˆå’Œ bug æŠ¥å‘Šï¼‰å’Œå‘é€è¡¥ä¸ï¼Œå¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„è½¬å˜ã€‚</p><p>ä¸¾ä¸ªæœ€åŸºæœ¬çš„ä¾‹å­ï¼šæœ€åˆçš„ç‰ˆæƒè®¸å¯æ˜¯â€œä½ å¯ä»¥ä»¥æºä»£ç çš„å½¢å¼å‘å¸ƒå®ƒï¼Œä½†ä¸èƒ½ç”¨å®ƒèµšé’±â€ã€‚</p><p>å¯¹äºå½“æ—¶çš„æˆ‘æ¥è¯´ï¼Œå•†ä¸šç‰ˆ Unix å¤ªè´µäº†ï¼ˆä½œä¸ºç©·å­¦ç”Ÿï¼Œæˆ‘å·²ç»ä¸ºäº†ä¹°æ–° PC èŠ±å…‰äº†æ‰€æœ‰é’±ï¼‰ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›è¿™ä¸ªæ“ä½œç³»ç»Ÿçš„æºä»£ç æ˜¯å…¬å¼€å¯ç”¨çš„ï¼ˆè¿™æ ·äººä»¬å°±å¯ä»¥æä¾›è¡¥ä¸ï¼‰ï¼Œ<strong>æˆ‘å¸Œæœ›å°†å®ƒå¼€æ”¾ç»™åƒæˆ‘è¿™æ ·è´Ÿæ‹…ä¸èµ·æ˜‚è´µç”µè„‘å’Œæ“ä½œç³»ç»Ÿçš„äºº</strong>ã€‚</p><p>1991 å¹´æœ«ï¼ˆæˆ–æ˜¯ 1992 å¹´åˆï¼‰ï¼Œæˆ‘æŠŠè®¸å¯æ”¹ä¸º GPLv2ï¼Œå› ä¸ºæœ‰äººæƒ³æŠŠå®ƒä»¥è½¯ç›˜çš„å½¢å¼åˆ†å‘ç»™æœ¬åœ° Unix ç”¨æˆ·ç»„ï¼Œä½†åˆæƒ³æ”¶å›è½¯ç›˜çš„æˆæœ¬ï¼Œå¹¶è¡¥å¿ä»–ä»¬æ‹·è´è½¯ç›˜æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚æˆ‘è§‰å¾—è¿™å¾ˆåˆç†ï¼Œå› ä¸ºâ€œå…è´¹â€ä¸å¦å¹¶ä¸æ˜¯æœ€é‡è¦çš„ï¼Œæœ€é‡è¦çš„æ˜¯è¦â€œå…¬å¼€æºç â€ã€‚</p><p>æœ€ç»ˆçš„ç»“æœæ˜¯ï¼šäººä»¬ä¸ä»…åœ¨ Unix ç”¨æˆ·ç»„ä¸­å‘å¸ƒå®ƒï¼Œåœ¨å‡ ä¸ªæœˆä¹‹å†…è¿˜å‡ºç°äº† SLS å’Œ Slackware çš„è½¯ç›˜å‘è¡Œç‰ˆã€‚</p><p>ä¸æœ€åˆçš„é‚£äº›æ ¹æœ¬æ€§çš„å˜åŒ–ç›¸æ¯”ï¼Œåæ¥çš„ä¸€åˆ‡éƒ½æ˜¯â€œå¢é‡å¼â€çš„ã€‚å½“ç„¶ï¼Œæœ‰äº›å¢é‡å¼çš„å˜åŒ–ä¹Ÿæ˜¯å¤§è·¨æ­¥ï¼ˆIBM çš„åŠ å…¥ã€Oracle æ•°æ®åº“çš„ç§»æ¤ã€Red Hat çš„é¦–æ¬¡å…¬å¼€å‹Ÿè‚¡ï¼ŒAndroid åœ¨æ‰‹æœºä¸Šçš„åº”ç”¨ï¼Œç­‰ç­‰ï¼‰ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒä»¬ä»ç„¶ä¸å¦‚æœ€åˆçš„â€œæˆ‘ä¸è®¤è¯†çš„äººéƒ½åœ¨ä½¿ç”¨ Linuxâ€é‚£æ ·å…·æœ‰é©å‘½æ€§ã€‚</p><h3><span id="linux-æˆåŠŸçš„é‡è¦åŸå› ä¿®æ”¹å¼€æºè®¸å¯åè®®é‡‡ç”¨-gplv2">Linux æˆåŠŸçš„é‡è¦åŸå› ï¼šä¿®æ”¹å¼€æºè®¸å¯åè®®ï¼Œé‡‡ç”¨ GPLv2</span></h3><p>Jeremy Andrewsï¼šä½ æ˜¯å¦æ›¾ç»åæ‚”ä¿®æ”¹äº†è®¸å¯åè®®ï¼Ÿæˆ–è€…è¯´ï¼Œå…¶ä»–äººæˆ–å…¬å¸ç”¨ä½ å¼€å‘çš„ç³»ç»Ÿèµšäº†å¾ˆå¤šé’±ï¼Œä½ å› æ­¤æ„Ÿåˆ°åæ‚”å—ï¼Ÿ</p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘ä»æ¥æ²¡æœ‰åæ‚”è¿‡ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘è¿‡å¾—è¿˜ä¸é”™ã€‚æˆ‘ä¸æ˜¯ç‰¹åˆ«å¯Œæœ‰ï¼Œä½†æˆ‘æ˜¯ä¸€ä¸ªè–ªæ°´å¾ˆé«˜çš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥åšæˆ‘å–œæ¬¢åšçš„äº‹æƒ…ã€‚</p><p>å…³é”®æ˜¯æˆ‘ç™¾åˆ†ä¹‹ç™¾è®¤ä¸ºè¿™ä¸ªè®¸å¯æ˜¯ Linuxï¼ˆä»¥åŠ Gitï¼‰å–å¾—æˆåŠŸçš„é‡è¦åŸå› ã€‚æˆ‘è®¤ä¸ºï¼Œå½“æ‰€æœ‰äººéƒ½è®¤ä¸ºä»–ä»¬æœ‰å¹³ç­‰çš„æƒåˆ©ï¼Œæ²¡æœ‰äººåœ¨è¿™æ–¹é¢æœ‰ç‰¹æƒçš„æ—¶å€™ï¼Œä»–ä»¬æ‰ä¼šå˜å¾—æ›´å¿«ä¹ã€‚</p><p>æœ‰å¾ˆå¤šé¡¹ç›®é‡‡ç”¨äº†â€œåŒé‡è®¸å¯â€ï¼Œä¸€æ–¹é¢ï¼ŒåŸä½œè€…ä¿ç•™äº†å•†ä¸šè®¸å¯ï¼ˆâ€œåªè¦ä½ æ”¯ä»˜äº†è®¸å¯è´¹ç”¨ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒâ€ï¼‰ï¼Œå¦ä¸€æ–¹é¢ï¼Œé¡¹ç›®ä¹Ÿå¯ä»¥åœ¨ GPL è®¸å¯ä¸‹å¼€æºã€‚</p><p>æˆ‘è®¤ä¸ºè¦åœ¨è¿™ç§æƒ…å†µä¸‹å»ºç«‹å¥½çš„ç¤¾åŒºæ˜¯éå¸¸å›°éš¾çš„ï¼Œå› ä¸ºå¼€æºé‚£ä¸€æ–¹çŸ¥é“è‡ªå·±æ˜¯â€œäºŒç­‰å…¬æ°‘â€ã€‚å¦å¤–ï¼Œä¸ºäº†è®©äº«æœ‰ç‰¹æƒçš„é‚£ä¸€æ–¹ä¸€ç›´äº«æœ‰ç‰¹æ®Šçš„æƒåˆ©ï¼Œéœ€è¦åšå¾ˆå¤šè®¸å¯æ–‡ä¹¦å·¥ä½œï¼Œè¿™ç»™é¡¹ç›®å¸¦æ¥äº†é¢å¤–çš„é˜»åŠ›ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘è§è¿‡å¾ˆå¤šåŸºäº BSDï¼ˆæˆ– MIT ç­‰ç±»ä¼¼çš„è®¸å¯ï¼‰è®¸å¯çš„å¼€æºé¡¹ç›®ï¼Œå½“å®ƒä»¬å˜å¾—è¶³å¤Ÿå¼ºå¤§ï¼Œå¤§åˆ°å…·å¤‡å•†ä¸šä»·å€¼æ—¶ï¼Œå®ƒä»¬å°±å¼€å§‹åˆ†è£‚ï¼Œç›¸å…³çš„å…¬å¸ä¸å¯é¿å…åœ°ä¼šå°†è‡ªå·±çš„é‚£éƒ¨åˆ†å˜æˆä¸“æœ‰çš„ã€‚</p><p>æˆ‘è®¤ä¸º <strong>GPLv2 èƒ½å¤Ÿåœ¨â€œæ¯ä¸ªäººéƒ½å¤„äºç›¸åŒçš„è§„åˆ™ä¹‹ä¸‹â€å’Œâ€œè¦æ±‚äººä»¬å›é¦ˆç¤¾åŒºâ€ä¹‹é—´å–å¾—å®Œç¾çš„å¹³è¡¡</strong>ã€‚æ¯ä¸ªäººéƒ½çŸ¥é“ï¼Œæ‰€æœ‰å‚ä¸è€…éƒ½å—åˆ°ç›¸åŒçš„è§„åˆ™çš„çº¦æŸï¼Œæ‰€ä»¥è¿™æ˜¯éå¸¸å…¬å¹³çš„ã€‚</p><p>å½“ç„¶ï¼Œä½ çš„æŠ•å…¥æ€»ä¼šå¾—åˆ°å›æŠ¥ã€‚å¦‚æœä½ åªæ˜¯æƒ³è½»åº¦å‚ä¸é¡¹ç›®ï¼Œæˆ–è€…åªæ˜¯æƒ³ä½œä¸ºä¸€åç”¨æˆ·ï¼Œé‚£ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å¦‚æœä½ çœŸçš„åªæ˜¯è¿™æ ·ï¼Œå°±ä¹Ÿæ— æ³•æ§åˆ¶è¿™ä¸ªé¡¹ç›®ã€‚å¦‚æœä½ çœŸçš„åªéœ€è¦ä¸€ä¸ªåŸºæœ¬çš„æ“ä½œç³»ç»Ÿï¼Œè€Œ Linux å·²ç»å…·å¤‡ä½ æƒ³è¦çš„æ‰€æœ‰åŠŸèƒ½ï¼Œé‚£ä¹Ÿå®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚ä½†å¦‚æœä½ æœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œæƒ³è¦ä¸ºè¿™ä¸ªé¡¹ç›®åšä¸€ç‚¹äº‹æƒ…ï¼Œé‚£ä¹ˆå”¯ä¸€çš„æ–¹æ³•å°±æ˜¯å‚ä¸å…¶ä¸­ã€‚</p><p>è¿™è®©æ¯ä¸ªäººéƒ½ç§‰æŒè¯šå®çš„æ€åº¦ï¼ŒåŒ…æ‹¬æˆ‘åœ¨å†…ã€‚ä»»ä½•äººéƒ½å¯ä»¥ fork è¿™ä¸ªé¡¹ç›®ï¼Œç”¨ä»–ä»¬è‡ªå·±çš„æ–¹å¼ï¼Œç„¶åè¯´â€œå†è§äº†ï¼ŒLinusï¼Œæˆ‘è¦ç»´æŠ¤è‡ªå·±çš„ Linux ç‰ˆæœ¬â€ã€‚æˆ‘ä¹‹æ‰€ä»¥â€œç‰¹åˆ«â€ï¼Œä»…ä»…æ˜¯å› ä¸ºäººä»¬ç›¸ä¿¡æˆ‘èƒ½æŠŠå·¥ä½œåšå¥½ã€‚</p><p>â€œä»»ä½•äººéƒ½å¯ä»¥ç»´æŠ¤è‡ªå·±çš„ Linux ç‰ˆæœ¬â€ï¼Œè¿™è®©ä¸€äº›äººå¯¹ GPLv2 äº§ç”Ÿäº†æ€€ç–‘ï¼Œä½†æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ç§ä¼˜åŠ¿ï¼Œè€Œä¸æ˜¯åŠ£åŠ¿ã€‚æˆ‘è®¤ä¸ºï¼Œè¿™å®é™…ä¸Šæ˜¯é¿å… Linux å‡ºç°åˆ†è£‚çš„åŸå› ï¼šæ¯ä¸ªäººéƒ½å¯ä»¥åˆ›å»ºè‡ªå·±çš„é¡¹ç›®åˆ†æ”¯ã€‚äº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯â€œGitâ€çš„æ ¸å¿ƒè®¾è®¡åŸåˆ™ä¹‹ä¸€â€”â€”ä»£ç åº“çš„æ¯ä¸€ä¸ªå…‹éš†éƒ½æ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œäººä»¬ï¼ˆå’Œå…¬å¸ï¼‰å† fork å‡ºè‡ªå·±çš„ç‰ˆæœ¬ï¼Œå®Œæˆå¼€å‘å·¥ä½œã€‚</p><p>æ‰€ä»¥ï¼Œåˆ†æ”¯ä¸æ˜¯é—®é¢˜ï¼Œåªè¦ä½ èƒ½æŠŠå¥½çš„éƒ¨åˆ†åˆå¹¶å›æ¥ã€‚è¿™å°±æ˜¯ GPLv2 å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚èƒ½å¤Ÿæ‹‰å–åˆ†æ”¯ï¼Œå¹¶æŒ‰ç…§è‡ªå·±çš„æ–¹å¼ä¿®æ”¹ä»£ç ï¼Œæ‹¥æœ‰è¿™äº›æƒåˆ©å¾ˆé‡è¦ï¼Œä½†å¦ä¸€æ–¹é¢ä¹ŸåŒæ ·é‡è¦â€”â€”å½“ä¸€ä¸ªåˆ†æ”¯è¢«è¯æ˜å–å¾—äº†æˆåŠŸï¼Œæœ‰æƒåˆ©æŠŠå®ƒåˆå¹¶å›å»ã€‚</p><p>å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œé™¤äº†è¦æœ‰æ”¯æŒè¿™ç§å·¥ä½œæµçš„å·¥å…·ï¼Œä¹Ÿè¦æœ‰å¯ä»¥æ”¯æŒå®ƒçš„å¿ƒæ€ã€‚åˆå¹¶åˆ†æ”¯çš„ä¸€å¤§éšœç¢ä¸ä»…æ˜¯è®¸å¯é—®é¢˜ï¼Œè¿˜æœ‰â€œå«Œéš™â€é—®é¢˜ã€‚å¦‚æœåˆ†æ”¯æ˜¯æºäºå¯¹ç«‹ï¼Œé‚£ä¹ˆè¦åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯å°±éå¸¸å›°éš¾â€”â€”ä¸æ˜¯å› ä¸ºè®¸å¯æˆ–æŠ€æœ¯æ–¹é¢çš„åŸå› ï¼Œè€Œæ˜¯å› ä¸ºåˆ†æ”¯ä¹‹é—´å¤ªè¿‡å¯¹ç«‹ã€‚æˆ‘è®¤ä¸º Linux é¿å…äº†è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬ä¸€ç›´è®¤ä¸ºåˆ†æ”¯æ˜¯ä¸€ä»¶å¾ˆè‡ªç„¶çš„äº‹æƒ…ã€‚è€Œä¸”ï¼Œå½“ä¸€äº›å¼€å‘å·¥ä½œè¢«è¯æ˜å–å¾—äº†æˆåŠŸï¼Œå°è¯•å°†å…¶åˆå¹¶å›æ¥ä¹Ÿæ˜¯å¾ˆè‡ªç„¶çš„ã€‚</p><p>è™½ç„¶è¿™ä¸ªç­”æ¡ˆæœ‰ç‚¹åç¦»æ­£é¢˜ï¼Œä½†æˆ‘è®¤ä¸ºå®ƒå¾ˆé‡è¦â€”â€”æˆ‘ä¸åæ‚”ä¿®æ”¹äº†è®¸å¯ï¼Œå› ä¸ºæˆ‘çœŸçš„è®¤ä¸º GPLv2 æ˜¯ Linux å–å¾—æˆåŠŸçš„ä¸€ä¸ªé‡è¦åŸå› ã€‚</p><p>é‡‘é’±ä¸æ˜¯ä¸€ç§å¾ˆå¥½çš„æ¿€åŠ±æ–¹å¼ï¼Œå®ƒæ— æ³•è®©äººä»¬å›¢ç»“åœ¨ä¸€èµ·ã€‚æˆ‘è®¤ä¸ºï¼Œå‚ä¸ä¸€ä¸ªå…±åŒçš„é¡¹ç›®ï¼Œå¹¶æ„Ÿè§‰åˆ°è‡ªå·±å¯ä»¥æˆä¸ºè¿™ä¸ªé¡¹ç›®çš„åˆä½œä¼™ä¼´ï¼Œè¿™æ ·æ‰èƒ½æ¿€åŠ±äººä»¬ã€‚</p><p><strong>Jeremy Andrewsï¼šç°åœ¨ï¼Œäººä»¬åŸºäº GPLv2 å‘å¸ƒæºä»£ç é€šå¸¸æ˜¯å› ä¸º Linuxã€‚ä½ å½“æ—¶æ˜¯æ€ä¹ˆæ‰¾åˆ°è¿™ä¸ªè®¸å¯çš„ï¼Ÿä½ åœ¨è°ƒç ”å…¶ä»–è®¸å¯æ–¹é¢åˆæŠ•å…¥äº†å¤šå°‘æ—¶é—´å’Œç²¾åŠ›å‘¢ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šé‚£ä¸ªæ—¶å€™ï¼Œæœ‰å…³ BSD å’Œ GPL çš„äº‰è®ºéå¸¸æ¿€çƒˆã€‚æˆ‘åœ¨é˜…è¯»å„ç§æ–°é—»ç»„ï¼ˆæ¯”å¦‚ comp.archã€comp.os.minix ç­‰ï¼‰æ—¶çœ‹åˆ°äº†ä¸€äº›æœ‰å…³è®¸å¯çš„è®¨è®ºã€‚</p><p>å…¶ä¸­ä¸¤ä¸ªæœ€ä¸»è¦çš„åŸå› å¯èƒ½æ˜¯ gcc å’Œ Lars Wirzeniusã€‚gcc å¯¹ Linux çš„å‘å±•èµ·åˆ°äº†å¾ˆå¤§ä½œç”¨ï¼Œå› ä¸ºæˆ‘è‚¯å®šéœ€è¦ä¸€ä¸ª C è¯­è¨€ç¼–è¯‘å™¨ã€‚Lars Wirzenius æ˜¯æˆ‘åœ¨å¿µå¤§å­¦æ—¶å¦ä¸€ä¸ªè¯´ç‘å…¸è¯­ï¼ˆç‘å…¸è¯­åœ¨èŠ¬å…°æ˜¯å°è¯­ç§ï¼‰çš„è®¡ç®—æœºç³»å­¦ç”Ÿã€‚</p><p>Lasu æ¯”æˆ‘æ›´å–œæ¬¢è®¨è®ºä¸è®¸å¯ç›¸å…³çš„äº‹æƒ…ã€‚</p><p>åœ¨æˆ‘çœ‹æ¥ï¼Œé€‰æ‹© GPLv2 å¹¶ä¸ç®—æ˜¯ä»€ä¹ˆé‡å¤§çš„æ”¿æ²»é—®é¢˜ï¼Œä¸»è¦æ˜¯å› ä¸ºæˆ‘æœ€åˆåœ¨é€‰æ‹©è®¸å¯æ—¶å¤ªè¿‡ä»“ä¿ƒï¼Œåæ¥éœ€è¦åšå‡ºä¿®æ”¹ã€‚å†µä¸”ï¼Œæˆ‘å¾ˆæ„Ÿæ©æœ‰ gccï¼Œå¹¶ä¸” GPLv2 æ›´ç¬¦åˆæˆ‘å¯¹â€œä½ å¿…é¡»æŠŠæºä»£ç åˆå¹¶å›æ¥â€è¿™ç§æƒ³æ³•çš„æœŸæœ›ã€‚</p><p>å› æ­¤ï¼Œä¸å…¶å¦èµ·ç‚‰ç¶æ–°å»ºä¸€ä¸ªè®¸å¯ï¼Œä¸å¦‚é€‰æ‹©ä¸€ä¸ªäººä»¬å·²ç»çŸ¥é“å¹¶ä¸”æœ‰ä¸€äº›å¾‹å¸ˆå‚ä¸å…¶ä¸­çš„è®¸å¯ã€‚</p><h3><span id="linux-ä¹‹çˆ¶çš„ä¸€å¤©">Linux ä¹‹çˆ¶çš„ä¸€å¤©</span></h3><p><strong>Jeremy Andrewsï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œä½ çš„ä¸€å¤©æ˜¯æ€ä¹ˆè¿‡çš„ï¼Ÿå…¶ä¸­æœ‰å¤šå°‘æ—¶é—´èŠ±åœ¨å†™ä»£ç ä¸Šï¼Œå¤šå°‘èŠ±åœ¨è¯„å®¡ä»£ç ä¸Šï¼Œå¤šå°‘èŠ±åœ¨ç”µå­é‚®ä»¶ä¸Šï¼Ÿä½ å¦‚ä½•å¹³è¡¡ä¸ªäººç”Ÿæ´»å’Œ Linux å†…æ ¸å¼€å‘å·¥ä½œï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘ç°åœ¨å†™çš„ä»£ç å¾ˆå°‘ï¼Œè€Œä¸”å·²ç»å¾ˆä¹…æ²¡å†™äº†ã€‚å†è¦å†™ä»£ç ï¼Œé€šå¸¸æ˜¯å› ä¸ºäººä»¬å¯¹æŸäº›ç‰¹å®šçš„é—®é¢˜å­˜åœ¨äº‰è®®ã€‚æˆ‘ä¿®æ”¹ä»£ç ï¼Œå¹¶å°†å…¶ä½œä¸ºè¡¥ä¸å‘å¸ƒå‡ºå»ï¼Œä½œä¸ºå¯¹è§£å†³æ–¹æ¡ˆçš„è§£é‡Šè¯´æ˜ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œæˆ‘å†™çš„å¤§éƒ¨åˆ†ä»£ç æ›´å¤šçš„æ˜¯ä½œä¸ºè§£å†³æ–¹æ¡ˆçš„ç¤ºä¾‹ï¼Œè€Œè¡¥ä¸æ˜¯ä¸€ç§éå¸¸å…·ä½“çš„ä¾‹å­ã€‚äººä»¬å¾ˆå®¹æ˜“é™·å…¥ç†è®ºè®¨è®ºçš„é™·é˜±ï¼Œè€Œæˆ‘å‘ç°æè¿°è§£å†³æ–¹æ¡ˆæœ€å¥½çš„æ–¹å¼æ˜¯å†™ä»£ç ç‰‡æ®µï¼Œä¸ä¸€å®šè¦å®Œæ•´çš„ç¨‹åºï¼Œåªè¦è®©è§£å†³æ–¹æ¡ˆå…·ä½“åŒ–ä¸€äº›å³å¯ã€‚</p><p>æˆ‘çš„å·¥ä½œæ—¶é—´éƒ½èŠ±åœ¨ç”µå­é‚®ä»¶ä¸Šäº†ã€‚ä¸»è¦æ˜¯æ²Ÿé€šï¼Œè€Œä¸æ˜¯å†™ä»£ç ã€‚äº‹å®ä¸Šï¼Œæˆ‘è®¤ä¸ºè¿™ç§ä¸è®°è€…å’ŒæŠ€æœ¯åšä¸»ä¹‹é—´çš„äº¤æµå°±æ˜¯æˆ‘å·¥ä½œçš„ä¸€éƒ¨åˆ†â€”â€”å®ƒå¯èƒ½æ¯”æŠ€æœ¯è®¨è®ºä¼˜å…ˆçº§ä½ä¸€äº›ï¼Œä½†æˆ‘ä¹ŸèŠ±äº†ç›¸å½“å¤šçš„æ—¶é—´åœ¨è¿™ç±»äº‹æƒ…ä¸Šã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä¹Ÿä¼šèŠ±ä¸€äº›æ—¶é—´åœ¨ä»£ç è¯„å®¡ä¸Šã€‚ä½†è€å®è¯´ï¼Œå½“æˆ‘æ”¶åˆ°ä¸€ä¸ª PR æ—¶ï¼Œæœ‰é—®é¢˜çš„ä»£ç é€šå¸¸å·²ç»è¢«å…¶ä»–äººè¯„å®¡è¿‡äº†ã€‚æ‰€ä»¥ï¼Œè™½ç„¶æˆ‘ä»ç„¶ä¼šçœ‹ä¸€ä¸‹è¡¥ä¸ï¼Œä½†å®é™…ä¸Šä¼šæ›´å¤šåœ°å»å…³æ³¨æ³¨è§£ï¼Œä»¥åŠè¡¥ä¸çš„æ¼”åŒ–è¿‡ç¨‹ã€‚ä½†å¯¹äºé‚£äº›ä¸æˆ‘å…±äº‹å¾ˆä¹…çš„äººï¼Œæˆ‘ä¸ä¼šè¿™ä¹ˆåšï¼šä»–ä»¬æ˜¯è‡ªå·±å­ç³»ç»Ÿçš„ç»´æŠ¤è€…ï¼Œæˆ‘ä¸éœ€è¦å¯¹ä»–ä»¬çš„å·¥ä½œæŒ‡æ‰‹ç”»è„šã€‚</p><p>æ‰€ä»¥ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘çš„ä¸»è¦å·¥ä½œå°±æ˜¯â€œå¾…åœ¨é‚£é‡Œâ€ï¼Œæ‰§è¡Œç®¡ç†å’Œå‘å¸ƒä»»åŠ¡ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘çš„å·¥ä½œé€šå¸¸æ›´å¤šåœ°æ˜¯å…³äºç»´æŠ¤è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯åº•å±‚ä»£ç ã€‚</p><h3><span id="linux-ä¹‹çˆ¶çš„å·¥ä½œç¯å¢ƒ">Linux ä¹‹çˆ¶çš„å·¥ä½œç¯å¢ƒ</span></h3><p>Jeremy Andrewsï¼šä½ çš„å·¥ä½œç¯å¢ƒæ˜¯æ€æ ·çš„ï¼Ÿæ¯”å¦‚ï¼Œä½ æ˜¯å–œæ¬¢é»‘æš—ã€ä¸ä¼šå—äººæ‰“æ‰°çš„æˆ¿é—´ï¼Œè¿˜æ˜¯å–œæ¬¢èƒ½çœ‹åˆ°é£æ™¯çš„æˆ¿é—´ï¼Ÿä½ å–œæ¬¢åœ¨å®‰é™çš„ç¯å¢ƒä¸‹å·¥ä½œï¼Œè¿˜æ˜¯å–œæ¬¢ä¸€è¾¹å¬éŸ³ä¹ä¸€è¾¹å·¥ä½œï¼Ÿä½ é€šå¸¸ä½¿ç”¨å“ªç§ç¡¬ä»¶ï¼Ÿä½ æ˜¯åœ¨ç»ˆç«¯ä¸Šä½¿ç”¨ vi æ¥è¯„å®¡ä»£ç ï¼Œè¿˜æ˜¯ä½¿ç”¨æŸç§å¥‡ç‰¹çš„ IDEï¼Ÿä½ æ˜¯å¦æœ‰åçˆ±çš„ Linux å‘è¡Œç‰ˆä½œä¸ºå¼€å‘ç¯å¢ƒï¼Ÿ</p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘çš„æˆ¿é—´å¹¶ä¸â€œæš—â€ï¼Œä½†æˆ‘ç¡®å®æŠŠæ¡Œå­æ—è¾¹çª—æˆ·ä¸Šçš„ç™¾å¶çª—å…³ä¸Šäº†ï¼Œå› ä¸ºæˆ‘ä¸æƒ³è¦å¼ºçƒˆçš„é˜³å…‰ã€‚æ‰€ä»¥ï¼Œæˆ‘çš„æˆ¿é—´æ²¡æœ‰ä»€ä¹ˆé£æ™¯è§†é‡ï¼Œ<strong>åªæœ‰ä¸€å¼ ï¼ˆå‡Œä¹±çš„ï¼‰æ¡Œå­ï¼Œé…äº†ä¸¤ä¸ª 4k æ˜¾ç¤ºå™¨ï¼Œæ¡Œå­ä¸‹é¢æœ‰ä¸€å°å¼ºåŠ²çš„ç”µè„‘ä¸»æœº</strong>ã€‚è¿˜æœ‰å‡ å°ç¬”è®°æœ¬ç”µè„‘ä¾›æˆ‘æµ‹è¯•å’Œåœ¨è·¯ä¸Šç”¨ã€‚</p><p>æˆ‘å–œæ¬¢å®‰é™åœ°å·¥ä½œã€‚æˆ‘å¾ˆè®¨åŒæœºæ¢°ç¡¬ç›˜çš„æ»´ç­”å£°ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒä»¬æ‰”è¿›äº†åƒåœ¾æ¡¶ï¼Œç°åœ¨åªä½¿ç”¨ SSDã€‚è¿™æ ·å·²ç» 10 å¤šå¹´äº†ã€‚å˜ˆæ‚çš„ CPU é£æ‰‡å£°ä¹Ÿæ˜¯ä¸å¯æ¥å—çš„ã€‚</p><p>ä»£ç è¯„å®¡éƒ½æ˜¯åœ¨ä¼ ç»Ÿçš„ç»ˆç«¯ä¸Šå®Œæˆçš„ï¼Œä¸è¿‡æˆ‘æ²¡æœ‰ä½¿ç”¨ viã€‚æˆ‘ä½¿ç”¨çš„æ˜¯â€œ<strong>micro-emacs</strong>â€è¿™ä¸ªä»¤äººè®¨åŒçš„ä¸œè¥¿ã€‚å®ƒä¸ GNU emacs å®Œå…¨æ²¡æœ‰å…³ç³»ï¼Œåªæ˜¯æœ‰äº›é”®ç»‘å®šä¸å®ƒç›¸ä¼¼ã€‚æˆ‘åœ¨èµ«å°”è¾›åŸºå¤§å­¦æ—¶å°±ä¹ æƒ¯ç”¨å®ƒäº†ï¼Œåˆ°ç°åœ¨è¿˜æ²¡æ”¹æ‰è¿™ä¸ªä¹ æƒ¯ã€‚å‡ å¹´å‰ï¼Œæˆ‘ç»™å®ƒå¢åŠ äº†ï¼ˆéå¸¸æœ‰é™çš„ï¼‰utf-8 æ”¯æŒï¼Œä½†å®ƒç¡®å®å¾ˆè€æ—§äº†ï¼Œæ‰€æœ‰çš„è¿¹è±¡éƒ½è¡¨æ˜å®ƒæ˜¯åœ¨ 80 å¹´ä»£å¼€å‘çš„ï¼Œæˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ä¸€ä¸ªè‡ª 90 å¹´ä»£ä¸­æœŸä»¥æ¥å°±æ²¡æœ‰æ›´æ–°è¿‡çš„åˆ†æ”¯ã€‚</p><p>èµ«å°”è¾›åŸºå¤§å­¦é€‰æ‹©äº†è¿™ä¸ªå·¥å…·ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨ DOSã€VAX/VMS å’Œ Unix ä¸Šè¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¹Ÿä¼šç”¨å®ƒã€‚åˆ°ç°åœ¨ï¼Œæˆ‘çš„æ‰‹æŒ‡å·²ç»å¯¹å®ƒå½¢æˆè‚Œè‚‰è®°å¿†äº†ã€‚æˆ‘çœŸçš„éœ€è¦æ¢ä¸ªæœ‰äººç»´æŠ¤å¹¶æ”¯æŒ utf-8 çš„å·¥å…·ï¼Œåªæ˜¯æˆ‘å¢å¼ºçš„é‚£éƒ¨åˆ†åŠŸèƒ½ç”¨èµ·æ¥è¿˜å¥½ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰å¼ºè¿«æˆ‘çš„æ‰‹æŒ‡å»æ¥å—æ–°çš„å·¥å…·ã€‚</p><p>æˆ‘çš„å·¥ä½œæ¡Œé¢ç›¸å½“ç®€å•ï¼šå‡ ä¸ªæ–‡æœ¬ç»ˆç«¯ï¼Œä¸€ä¸ªæ‰“å¼€äº†ç”µå­é‚®ç®±çš„æµè§ˆå™¨ï¼ˆè¿˜æ‰“å¼€äº†å…¶ä»–å‡ ä¸ªæ ‡ç­¾ï¼Œä¸»è¦æ˜¯æ–°é—»å’Œç§‘æŠ€ç½‘ç«™ï¼‰ã€‚æˆ‘å–œæ¬¢å¤§çš„æ¡Œé¢ç©ºé—´ï¼Œå› ä¸ºæˆ‘ä¹ æƒ¯ä½¿ç”¨å¤§ç»ˆç«¯çª—å£ï¼ˆ100x40 æ˜¯æˆ‘çš„é»˜è®¤åˆå§‹å¤§å°ï¼‰ï¼Œå¹¶ä¸”å¹¶æ’æ‰“å¼€å¥½å‡ ä¸ªã€‚æˆ‘ä½¿ç”¨äº†ä¸¤ä¸ª 4k æ˜¾ç¤ºå™¨ã€‚</p><p>æˆ‘åœ¨æ‰€æœ‰çš„æœºå™¨ä¸Šéƒ½å®‰è£…äº† Fedora å‘è¡Œç‰ˆï¼Œå¹¶ä¸æ˜¯å› ä¸ºæˆ‘åçˆ±å®ƒï¼Œè€Œæ˜¯å› ä¸ºæˆ‘ä¹ æƒ¯äº†ã€‚æˆ‘å¹¶ä¸å¤ªå…³å¿ƒä½¿ç”¨å“ªä¸ªå‘è¡Œç‰ˆâ€”â€”å¯¹äºæˆ‘æ¥è¯´ï¼Œé€‰æ‹©å‘è¡Œç‰ˆåªæ˜¯åœ¨æœºå™¨ä¸Šå®‰è£… Linux å’Œå¼€å‘å·¥å…·çš„ä¸€ç§æ–¹å¼ã€‚</p><h3><span id="å¦‚ä½•å¤„ç†å¤§é‡ç”µå­é‚®ä»¶">å¦‚ä½•å¤„ç†å¤§é‡ç”µå­é‚®ä»¶ï¼Ÿ</span></h3><p><strong>Jeremy Andrewsï¼šLinux å†…æ ¸é‚®ä»¶ç»„ï¼ˆ<a href="https://lore.kernel.org/lkml/%EF%BC%89" target="_blank" rel="noopener">https://lore.kernel.org/lkml/ï¼‰</a> æ˜¯äººä»¬å…¬å¼€äº¤æµå†…æ ¸å¼€å‘çš„åœ°æ–¹ï¼Œæµé‡éå¸¸é«˜ã€‚ä½ æ˜¯æ€ä¹ˆå¤„ç†è¿™ä¹ˆå¤šç”µå­é‚®ä»¶çš„ï¼Ÿä½ å°è¯•è¿‡é‚®ä»¶ç»„ä¹‹å¤–çš„å…¶ä»–åä½œå’Œæ²Ÿé€šè§£å†³æ–¹æ¡ˆå—ï¼Ÿæˆ–è€…è¯´ï¼Œè¿™ç§ç®€å•çš„é‚®ä»¶ç»„å¯¹ä½ çš„å·¥ä½œæ¥è¯´è¶³å¤Ÿå¥½å—ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘æ²¡æœ‰ç›´æ¥é˜…è¯»å†…æ ¸é‚®ä»¶ç»„é‡Œçš„é‚®ä»¶ï¼Œè€Œä¸”å¥½å‡ å¹´éƒ½æ²¡æœ‰ã€‚é‚®ä»¶å¤ªå¤šäº†ã€‚</p><p>å†…æ ¸é‚®ä»¶ç»„é‡Œçš„é‚®ä»¶ä¼šè¢«æŠ„é€åˆ°æ‰€æœ‰çš„è®¨è®ºå½“ä¸­ã€‚å½“æ–°äººåŠ å…¥è®¨è®ºæ—¶ï¼Œä»–ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹å†…æ ¸é‚®ä»¶ç»„æ¥äº†è§£ç›¸å…³çš„å†å²å’ŒèƒŒæ™¯ã€‚</p><p>è¿‡å»æˆ‘ä¼šè®¢é˜…é‚®ä»¶ç»„ï¼Œè®©æ‰€æœ‰æ²¡æœ‰æŠ„é€ç»™æˆ‘çš„ç”µå­é‚®ä»¶è‡ªåŠ¨å½’æ¡£ï¼Œé»˜è®¤ä¸çœ‹å®ƒä»¬ã€‚å½“ä¸€äº›é—®é¢˜éœ€è¦æˆ‘ä»‹å…¥æ—¶ï¼Œæˆ‘å¯ä»¥æ‰¾åˆ°æ‰€æœ‰ç›¸å…³çš„è®¨è®ºï¼Œå› ä¸ºå®ƒä»¬éƒ½åœ¨æˆ‘çš„ç”µå­é‚®ä»¶é‡Œï¼Œåªæ˜¯åœ¨éœ€è¦æ—¶æ‰ä¼šå‡ºç°åœ¨æˆ‘çš„æ”¶ä»¶ç®±é‡Œã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ <a href="http://lore.kernel.org" target="_blank" rel="noopener">lore.kernel.org</a> æä¾›çš„åŠŸèƒ½ï¼Œå› ä¸ºå®ƒå¾ˆå¥½ç”¨ï¼Œè€Œä¸”æˆ‘ä»¬è¿˜åŸºäºå®ƒå¼€å‘äº†ä¸€äº›å·¥å…·ã€‚è¿™æ ·å°±ä¸éœ€è¦è®©é‚®ä»¶è‡ªåŠ¨å½’æ¡£äº†ï¼Œæˆ‘ä»¬æ¢äº†ä¸€ç§è®¨è®ºæ–¹å¼ï¼Œä½†åŸºæœ¬çš„å·¥ä½œæµç¨‹æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä½†å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»ç„¶ä¼šæ”¶åˆ°å¾ˆå¤šé‚®ä»¶â€”â€”ä½†ä»å¾ˆå¤šæ–¹é¢æ¥çœ‹ï¼Œè¿™äº›å¹´æ¥æƒ…å†µå˜å¾—è¶Šæ¥è¶Šå¥½ï¼Œè€Œä¸æ˜¯è¶Šæ¥è¶Šç³Ÿã€‚å…¶ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› æ˜¯ Git å’Œå†…æ ¸å‘å¸ƒæµç¨‹çš„æ”¹è¿›ï¼šæˆ‘ä»¬è¿‡å»åœ¨ä»£ç æµç¨‹å’Œå·¥å…·æ–¹é¢å­˜åœ¨å¾ˆå¤šé—®é¢˜ã€‚åœ¨æœ¬ä¸–çºªåˆæ˜¯æœ€ä¸ºç³Ÿç³•çš„ï¼Œå½“æ—¶æˆ‘ä»¬ä»ç„¶åœ¨å¤„ç†å·¨å¤§çš„è¡¥ä¸ç‚¸å¼¹ï¼Œæˆ‘ä»¬çš„å¼€å‘æµç¨‹å­˜åœ¨ä¸¥é‡çš„å¯ä¼¸ç¼©æ€§é—®é¢˜ã€‚</p><p>é‚®ä»¶ç»„æ¨¡å¼ç¡®å®è¿ä½œå¾—å¾ˆå¥½ï¼Œä½†å¹¶ä¸æ˜¯è¯´äººä»¬å°±ä¸ä½¿ç”¨é™¤ç”µå­é‚®ä»¶ä¹‹å¤–çš„å…¶ä»–æ²Ÿé€šæ–¹å¼äº†ï¼šæœ‰äº›äººå–œæ¬¢å„ç§å®æ—¶èŠå¤©å·¥å…·ï¼ˆæ¯”å¦‚ä¼ ç»Ÿçš„ IRCï¼‰ã€‚è™½ç„¶æˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢è¿™æ ·ï¼Œä½†å¾ˆæ˜¾ç„¶æœ‰äº›äººå–œæ¬¢ç”¨å®ƒä»¬æ¥è¿›è¡Œå¤´è„‘é£æš´ã€‚ä½†è¿™ç§â€œé‚®ä»¶ç»„å­˜æ¡£â€æ¨¡å¼è¿ä½œå¾—éå¸¸å¥½ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ— ç¼åœ°ä¸â€œå¼€å‘è€…ä¹‹é—´ä»¥é‚®ä»¶çš„å½¢å¼å‘é€è¡¥ä¸â€å’Œâ€œä»¥é‚®ä»¶çš„å½¢å¼å‘é€é—®é¢˜æŠ¥å‘Šâ€ç›¸ç»“åˆã€‚</p><p>æ‰€ä»¥ç”µå­é‚®ä»¶ä»ç„¶æ˜¯ä¸»è¦çš„æ²Ÿé€šæ¸ é“ï¼Œå¹¶ä¸”å› ä¸ºé‚®ä»¶ä¸­å¯ä»¥åŒ…å«è¡¥ä¸ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°è®¨è®ºæŠ€æœ¯é—®é¢˜ã€‚è€Œä¸”é‚®ä»¶å¯ä»¥è·¨è¶Šæ—¶åŒºï¼Œå½“å‚ä¸è€…åˆ†å¸ƒåœ¨ä¸åŒåœ°åŒºæ—¶ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚</p><h3><span id="linux-30-ä»¥æ¥å†…æ ¸å¼€å‘çš„æœ‰è¶£äº‹æƒ…">Linux 3.0 ä»¥æ¥ï¼Œå†…æ ¸å¼€å‘çš„æœ‰è¶£äº‹æƒ…</span></h3><p><strong>Jeremy Andrewsï¼šæˆ‘å¯†åˆ‡å…³æ³¨å†…æ ¸å¼€å‘å¤§çº¦æœ‰ 10 å¹´äº†ï¼Œå¹¶åœ¨ KernelTrap ä¸Šå†™ä¸å†…æ ¸æœ‰å…³çš„åšæ–‡ï¼Œå¤§æ¦‚æ˜¯åœ¨ 3.0 å†…æ ¸å‘å¸ƒæ—¶åœæ­¢æ›´æ–°åšå®¢ã€‚3.0 å†…æ ¸çš„å‘å¸ƒä¸ 2.6.x å†…æ ¸çš„å‘å¸ƒç›¸éš”äº† 8 å¹´ã€‚è¯·æ€»ç»“ä¸€ä¸‹è‡ª 3.0 ç‰ˆæœ¬ä»¥æ¥å†…æ ¸å¼€å‘ä¸­å‘ç”Ÿçš„ä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚</strong></p><p><strong>Linus Torvalds</strong>ï¼šé‚£æ˜¯å¾ˆä¹…ä»¥å‰çš„äº‹äº†ï¼Œæˆ‘ä¸çŸ¥é“è¯¥ä»å“ªé‡Œå¼€å§‹æ€»ç»“ã€‚ä» 3.0 ç‰ˆæœ¬åˆ°ç°åœ¨å·²ç» 10 å¹´äº†ï¼Œåœ¨è¿™ 10 å¹´ä¸­å‘ç”Ÿäº†å¾ˆå¤šæŠ€æœ¯ä¸Šçš„å˜åŒ–ã€‚ARM å·²ç»å‘å±•æˆç†Ÿï¼ŒARM64 å·²ç»æˆä¸ºæˆ‘ä»¬çš„ä¸»è¦æ¶æ„ä¹‹ä¸€ï¼Œå¹¶å‡ºç°äº†å¤§é‡æ–°çš„é©±åŠ¨ç¨‹åºå’Œæ ¸å¿ƒåŠŸèƒ½ã€‚</p><p>å¦‚æœè¯´è¿‡å» 10 å¹´æœ‰ä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…ï¼Œé‚£ä¸€å®šæ˜¯æˆ‘ä»¬åŠªåŠ›ä¿æŒå¼€å‘æ¨¡å¼çš„ç¨³å®šï¼Œä»¥åŠé‚£äº›æ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„ä¸œè¥¿ã€‚</p><p>åœ¨è¿‡å»çš„å‡ åå¹´é‡Œï¼Œæˆ‘ä»¬ç»å†äº†å¤šç§ä¸åŒçš„ç‰ˆæœ¬å·æ–¹æ¡ˆå’Œä¸åŒçš„å¼€å‘æ¨¡å¼ï¼Œ3.0 ç‰ˆæœ¬æœ€ç»ˆç¡®å®šäº†åæ¥ä¸€ç›´ä½¿ç”¨çš„æ¨¡å¼ã€‚å®ƒè®©â€œåŸºäºæ—¶é—´å‘å¸ƒï¼Œç‰ˆæœ¬å·åªæ˜¯æ•°å­—ï¼Œä¸ç‰¹æ€§æ— å…³â€è¿™ä¸€è¯´æ³•è½åœ°äº†ã€‚</p><p>åœ¨ 2.6.x ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°±æœ‰äº†åŸºäºæ—¶é—´çš„å‘å¸ƒæ¨¡å¼ï¼Œæ‰€ä»¥å®ƒå¹¶ä¸æ˜¯ä»€ä¹ˆæ–°ä¸œè¥¿ï¼Œä½† 3.0 ç‰ˆæœ¬ç¡®å®æ˜¯è®©è¿™ç§æ¨¡å¼æ¿ä¸Šé’‰é’‰çš„è‡³å…³é‡è¦çš„ä¸€æ­¥ã€‚</p><p>æˆ‘ä»¬ä»¥å‰ä½¿ç”¨éšæœºç¼–å·æ–¹æ¡ˆï¼ˆä¸»è¦æ˜¯åœ¨ 1.0 ç‰ˆæœ¬ä¹‹å‰ï¼‰ï¼Œç„¶åç”¨â€œå¥‡æ•°è¡¨ç¤ºå¼€å‘ç‰ˆå†…æ ¸ï¼Œå¶æ•°è¡¨ç¤ºç¨³å®šçš„ç”Ÿäº§å°±ç»ªç‰ˆå†…æ ¸â€ï¼Œç„¶ååœ¨ 2.6.x ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹è¿›å…¥åŸºäºæ—¶é—´çš„å‘å¸ƒæ¨¡å¼ã€‚ä½†äººä»¬ä»ç„¶å¯¹â€œä»€ä¹ˆæ—¶å€™éœ€è¦å¢åŠ ä¸»ç‰ˆæœ¬å·â€å­˜åœ¨ç–‘é—®ã€‚3.0 ç‰ˆæœ¬æ­£å¼å‘å¸ƒåï¼Œå®£å‘Šäº†ä¸»ç‰ˆæœ¬å·æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œæˆ‘ä»¬å°½é‡ç®€åŒ–æ•°å­—ï¼Œä¸è¦è®©å®ƒä»¬å˜å¾—å¤ªå¤§ã€‚</p><p>å› æ­¤ï¼Œåœ¨è¿‡å»çš„ 10 å¹´é‡Œï¼Œæˆ‘ä»¬åšäº†å·¨å¤§çš„æ”¹å˜ï¼ˆæœ‰äº† Gitï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å¾—åˆ°ä¸€äº›æ•°å­—ç»Ÿè®¡æ•°æ®ï¼šè¶…è¿‡ 1.7 ä¸‡äººæäº¤äº†å¤§çº¦ 75 ä¸‡æ¬¡ä»£ç ï¼‰ï¼Œä½†å¼€å‘æ¨¡å¼ä»ç„¶ç›¸å½“ç¨³å®šã€‚</p><p>ä½†å¹¶éä¸€ç›´éƒ½æ˜¯è¿™æ ·çš„ï¼Œå†…æ ¸å¼€å‘çš„å‰ 20 å¹´ç»å†äº†ç›¸å½“ç—›è‹¦çš„å¼€å‘æ¨¡å¼å˜æ›´ï¼Œåªæ˜¯åœ¨è¿‡å» 10 å¹´ä¸­ï¼Œå‘å¸ƒå¯é¢„æµ‹æ€§æ‰å¾—åˆ°å¤§å¹…æå‡ã€‚</p><h3><span id="linux-å‘å¸ƒæµç¨‹">Linux å‘å¸ƒæµç¨‹</span></h3><p><strong>Jeremy Andrewsï¼šç›®å‰ï¼Œæœ€æ–°çš„ç‰ˆæœ¬æ˜¯ 5.12-rc5ã€‚ç°åœ¨çš„å‘å¸ƒæµç¨‹æ ‡å‡†æ˜¯æ€æ ·çš„ï¼Ÿä¾‹å¦‚ï¼Œ-rc1 å’Œ -rc2 æœ‰ä»€ä¹ˆä¸åŒï¼Ÿä½ ä¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹å†³å®šæ­£å¼å‘å¸ƒå…¶ä¸­ä¸€ä¸ªç»™å®šçš„ç‰ˆæœ¬ï¼Ÿå¦‚æœåœ¨æ­£å¼å‘å¸ƒä¹‹åå‡ºç°äº†å¤§é‡çš„å›å½’ä¼šæ€æ ·ï¼Ÿè¿™ç§æƒ…å†µå‘ç”Ÿçš„é¢‘ç‡æ˜¯æ€æ ·çš„ï¼Ÿè¿™äº›å¹´æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¦‚ä½•æ¼”å˜çš„ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘ä¹‹å‰æåˆ°è¿‡ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ¬èº«æ˜¯å¾ˆæ ‡å‡†çš„ï¼Œå¹¶ä¸”åœ¨è¿‡å»åå¹´é‡Œä¸€ç›´å¦‚æ­¤ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œå®ƒç»å†äº†å‡ æ¬¡æ¼”å˜ï¼Œä½†å®é™…ä¸Šä» 3.0 å¼€å§‹å®ƒå°±åƒæ—¶é’Ÿä¸€æ ·èµ°å¾—å¾ˆç¨³å®šã€‚</p><p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„å‘å¸ƒèŠ‚å¥æ˜¯è¿™æ ·çš„ï¼šå…ˆæ˜¯ä¸¤å‘¨çš„åˆå¹¶æ—¶é—´çª—å£ï¼Œç„¶åæ˜¯å¤§çº¦ 6 åˆ° 8 å‘¨çš„å€™é€‰ç‰ˆæœ¬ï¼Œç„¶åæ˜¯æœ€ç»ˆç‰ˆæœ¬ã€‚è¿™æ ·å­å·®ä¸å¤š 15 å¹´äº†ã€‚</p><p>è§„åˆ™ä¸€ç›´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°½ç®¡å®ƒä»¬å¹¶ä¸æ€»æ˜¯è¢«å®Œå…¨ä¸¥æ ¼æ‰§è¡Œï¼šåˆå¹¶æ—¶é—´çª—å£æ˜¯é’ˆå¯¹é‚£äº›è¢«è®¤ä¸ºå·²ç»â€œç»è¿‡æµ‹è¯•å’Œå‡†å¤‡å°±ç»ªâ€çš„æ–°ä»£ç ï¼Œç„¶ååœ¨æ¥ä¸‹æ¥çš„å¤§çº¦ä¸¤ä¸ªæœˆé‡Œè¿›è¡Œä¿®å¤ï¼Œä»¥ç¡®ä¿æ‰€æœ‰çš„é—®é¢˜éƒ½å¾—åˆ°è§£å†³ã€‚æœ‰æ—¶å€™ï¼Œé‚£äº›æ‰€è°“çš„â€œå°±ç»ªâ€ä»£ç ä¼šåœ¨å‘å¸ƒä¹‹å‰ä¼šè¢«ç¦ç”¨æˆ–å®Œå…¨æ¨ç¿»ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹ä¼šé‡å¤ï¼Œæ‰€ä»¥æˆ‘ä»¬å¤§çº¦æ¯ 10 å‘¨å‘å¸ƒä¸€æ¬¡ã€‚</p><p>è¾¾åˆ°å¯ä»¥å‘å¸ƒçš„æ ‡å‡†æ˜¯æˆ‘å¯¹å€™é€‰ç‰ˆæœ¬æœ‰è¶³å¤Ÿçš„ä¿¡å¿ƒï¼Œè€Œè¿™æ˜¯ä»¥å„ç§é—®é¢˜æŠ¥å‘Šä¸ºåŸºç¡€çš„ã€‚å¦‚æœæŸäº›æ–¹é¢åœ¨ rc åæœŸä»ç„¶ä¼šå‡ºé—®é¢˜ï¼Œæˆ‘å°±æåŠ›æ¨ç¿»è¿™äº›å†…å®¹ï¼Œå¹¶å»ºè®®å°†å…¶æ”¾åœ¨åç»­çš„ç‰ˆæœ¬ä¸­ã€‚ä½†æ€»ä½“è€Œè¨€ï¼Œå¾ˆå°‘ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚</p><p>è¿™æ ·å°±å®Œå…¨æ²¡æœ‰é—®é¢˜äº†å—ï¼Ÿä¸æ˜¯çš„ã€‚ä¸€æ—¦å†…æ ¸å‘å¸ƒäº†ï¼Œå°±ä¼šæœ‰æ–°ç”¨æˆ·ï¼Œä»–ä»¬ä¼šå‘ç°ä¸€äº›åœ¨ rc ç‰ˆæœ¬ä¸­æ²¡æœ‰è¢«å‘ç°çš„é—®é¢˜ã€‚è¿™å‡ ä¹æ˜¯ä¸å¯é¿å…çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦â€œç¨³å®šå†…æ ¸â€æ ‘ã€‚åœ¨å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¿®å¤ä»£ç ã€‚ä¸€äº›ç¨³å®šå†…æ ¸æ¯”å…¶ä»–ç‰ˆæœ¬å†…æ ¸ç»´æŠ¤çš„æ—¶é—´æ›´é•¿ï¼Œè¢«ç§°ä¸º LTSï¼ˆâ€œLong Term Supportâ€ï¼‰ç‰ˆæœ¬ã€‚</p><p>æ‰€æœ‰è¿™äº›åœ¨è¿‡å»åå¹´é‡Œéƒ½æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œå°½ç®¡åæ¥æœ‰äº†æ›´å¤šçš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå†…æ ¸æµ‹è¯•è‡ªåŠ¨åŒ–æ˜¯å¾ˆå›°éš¾çš„â€”â€”å› ä¸ºå¾ˆå¤šå†…æ ¸æ˜¯é©±åŠ¨ç¨‹åºï¼Œååˆ†ä¾èµ–ç¡¬ä»¶çš„å¯ç”¨æ€§ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬æœ‰å‡ ä¸ªæµ‹è¯•åœºåŒæ—¶è¿›è¡Œå¼•å¯¼å’Œæ€§èƒ½æµ‹è¯•ï¼Œä»¥åŠå„ç§éšæœºè´Ÿè½½æµ‹è¯•ã€‚è¿™äº›åœ¨è¿™å‡ å¹´æœ‰äº†å¾ˆå¤§çš„æ”¹å–„ã€‚</p><h3><span id="ä¸€ç›´ç­‰å¾…å¯ç”¨çš„-arm-æœºå™¨">ä¸€ç›´ç­‰å¾…å¯ç”¨çš„ ARM æœºå™¨</span></h3><p><strong>Jeremy Andrewsï¼šå»å¹´ 11 æœˆï¼Œæœ‰äººè¯´ä½ å¯¹è‹¹æœå…¬å¸åœ¨éƒ¨åˆ†æ–°æ¬¾ç”µè„‘ä¸­ä½¿ç”¨çš„ ARM64 èŠ¯ç‰‡ååˆ†æ„Ÿå…´è¶£ã€‚Linux ä¼šæ”¯æŒå®ƒä»¬å—ï¼Ÿæˆ‘çœ‹åˆ°ä¸€äº›ä»£ç è¢«åˆå¹¶åˆ° for-nextã€‚å³å°†åˆ°æ¥çš„ 5.13 å†…æ ¸æœ‰å¯èƒ½åœ¨è‹¹æœ MacBook ä¸Šå¯åŠ¨å—ï¼Ÿä½ æœ‰å¯èƒ½æ˜¯å®ƒçš„æ—©æœŸé‡‡ç”¨è€…å—ï¼ŸARM64 æœ‰ä»€ä¹ˆé‡å¤§çš„æ„ä¹‰ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘å¶å°”ä¼šè·Ÿè¿›ä¸€ä¸‹ï¼Œä½†ç°åœ¨è¯´è¿™äº›è¿˜ä¸ºæ—¶è¿‡æ—©ã€‚æ­£å¦‚ä½ æ‰€è¯´çš„ï¼Œæ—©æœŸæ”¯æŒå¯èƒ½ä¼šè¢«åˆå¹¶åˆ° 5.13 ä¸­ï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œå¹¶ä¸èƒ½è¯´æ˜ Linux å’Œè‹¹æœç”µè„‘å°†æ¥ä¼šæ€æ ·ã€‚</p><p>ä¸»è¦é—®é¢˜ä¸æ˜¯ arm64 æ¶æ„ï¼Œè€Œæ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬ä»¶é©±åŠ¨ç¨‹åºï¼ˆç‰¹åˆ«æ˜¯ SSD å’Œ GPUï¼‰ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€äº›åº•å±‚çš„ä¸œè¥¿å¾—åˆ°äº†æ”¯æŒï¼Œä½†é™¤äº†å¯ä»¥å¯ç”¨ç¡¬ä»¶ä¹‹å¤–ï¼Œæ²¡æœ‰ä»»ä½•æœ‰ç”¨çš„ç»“æœã€‚è¦æƒ³è¾¾åˆ°å¯ä»¥è¢«äººä»¬ä½¿ç”¨çš„ç¨‹åº¦ï¼Œè¿˜éœ€è¦ä¸€äº›æ—¶é—´ã€‚</p><p>ä¸ä»…ä»…æ˜¯è‹¹æœçš„ç¡¬ä»¶å¾—åˆ°äº†æ”¹è¿›â€”â€”arm64 æ¶æ„æ€»ä½“ä¸Šä¹Ÿå·²ç»æˆé•¿äº†å¾ˆå¤šï¼Œå†…æ ¸åœ¨æœåŠ¡å™¨é¢†åŸŸä¹Ÿæ›´å…·ç«äº‰åŠ›äº†ã€‚ä¸ä¹…å‰ï¼Œarm64 åœ¨æœåŠ¡å™¨é¢†åŸŸçš„ç«äº‰åŠ›è¿˜å¾ˆå¼±ï¼Œä½†äºšé©¬é€Šçš„ Graviton2 å’Œå®‰åŸ¹çš„ Altra å¤„ç†å™¨â€”â€”éƒ½æ˜¯åŸºäºæ”¹è¿›åçš„ ARM Neoverse IPâ€”â€”æ¯”å‡ å¹´å‰çš„äº§å“è¦å¥½å¾ˆå¤šã€‚</p><p>æˆ‘å·²ç»ç­‰äº†åå¤šå¹´éƒ½æ²¡èƒ½ç­‰åˆ°ä¸€ä¸ªå¯ç”¨çš„ ARM æœºå™¨ï¼Œå¯èƒ½è¿˜è¦ç»§ç»­ç­‰ä¸‹å»ï¼Œä½†æƒ…å†µæ˜æ˜¾æ¯”ä»¥å‰å¥½äº†ä¸€äº›ã€‚</p><p>äº‹å®ä¸Šï¼Œæˆ‘å¾ˆæ—©ä¹‹å‰å°±æƒ³è¦ä¸€å° ARM æœºå™¨ã€‚å½“æˆ‘è¿˜æ˜¯ä¸ªå°‘å¹´ï¼Œæˆ‘çœŸæ­£æƒ³è¦çš„æ˜¯ä¸€å° Acorn Archimedesï¼Œä½†å¯ç”¨æ€§å’Œä»·æ ¼è®©æˆ‘æœ€ç»ˆé€‰æ‹©äº† Sinclair QLï¼ˆM68008 å¤„ç†å™¨ï¼‰ï¼Œç„¶åå‡ å¹´åæ¢æˆäº† i386ã€‚</p><p>æ‰€ä»¥ï¼Œè¿™ä¸ªæƒ³æ³•å·²ç»é…é…¿äº†å‡ åå¹´ã€‚ä½†åˆ°ç°åœ¨å®ƒä»¬è¿˜æ²¡æœ‰è¢«å¹¿æ³›ä½¿ç”¨ï¼Œè€Œä¸”å¯¹äºæˆ‘æ¥è¯´ï¼Œå®ƒä»¬åœ¨ä»·æ ¼å’Œæ€§èƒ½æ–¹é¢éƒ½ä¸å…·ç«äº‰åŠ›ã€‚å¸Œæœ›åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œè¿™ä¸ªæƒ³æ³•èƒ½å¤Ÿå˜æˆç°å®ã€‚</p><h3><span id="é‡å†™å†…æ ¸ä¼šåšå‡ºçš„æ”¹å˜">é‡å†™å†…æ ¸ä¼šåšå‡ºçš„æ”¹å˜</span></h3><p><strong>Jeremy Andrewsï¼šå†…æ ¸ä¸­æœ‰ä»€ä¹ˆä¸œè¥¿éœ€è¦è¿›è¡Œå®Œå…¨çš„é‡å†™æ‰èƒ½è¾¾åˆ°æœ€ä¼˜çš„å—ï¼Ÿæˆ–è€…è¯´ï¼Œå†…æ ¸å·²ç»æœ‰ 30 å¹´çš„å†å²äº†ï¼ŒçŸ¥è¯†ã€ç¼–ç¨‹è¯­è¨€å’Œç¡¬ä»¶åœ¨è¿™ 30 å¹´é‡Œå‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ï¼šå¦‚æœç°åœ¨è®©ä½ ä»å¤´å¼€å§‹é‡å†™ï¼Œä½ ä¼šåšå‡ºå“ªäº›æ”¹å˜ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šå¦‚æœæœ‰å¿…è¦çš„è¯æˆ‘ä»¬ä¼šè¿™ä¹ˆåšçš„ã€‚æˆ‘ä»¬çœŸçš„å¾ˆæ“…é•¿é‡å†™ï¼Œé‚£äº›æœ¬æ¥ä¼šé€ æˆç¾éš¾çš„ä¸œè¥¿å¾ˆä¹…ä»¥å‰å°±è¢«æˆ‘ä»¬é‡å†™äº†ã€‚</p><p>æˆ‘ä»¬æœ‰å¾ˆå¤šâ€œå…¼å®¹â€å±‚ï¼Œä¸è¿‡å®ƒä»¬ä¸€èˆ¬ä¸ä¼šé€ æˆå¤ªå¤§é—®é¢˜ã€‚å¦‚æœä»å¤´å¼€å§‹é‡å†™ï¼Œè¿™äº›å…¼å®¹å±‚æ˜¯å¦è¦å»æ‰ï¼Œæˆ‘ä»¬è¿˜ä¸æ¸…æ¥šâ€”â€”å®ƒä»¬å­˜åœ¨çš„ç›®çš„æ˜¯ä¸ºäº†ä¸æ—§äºŒè¿›åˆ¶æ–‡ä»¶å‘åå…¼å®¹ï¼ˆé€šå¸¸æ˜¯ä¸æ—§æ¶æ„å‘åå…¼å®¹ï¼Œä¾‹å¦‚åœ¨ x86-64 ä¸Šè¿è¡Œ 32 ä½çš„ x86 åº”ç”¨ç¨‹åºï¼‰ã€‚å› ä¸ºæˆ‘è®¤ä¸ºå‘åå…¼å®¹æ˜¯éå¸¸é‡è¦çš„ï¼Œæ‰€ä»¥å³ä½¿é‡å†™ï¼Œæˆ‘ä¹Ÿå¸Œæœ›ä¿ç•™è¿™äº›å…¼å®¹å±‚ã€‚</p><p>æ‰€ä»¥å¾ˆæ˜æ˜¾ï¼Œæœ‰å¾ˆå¤šä¸œè¥¿å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼Œæ¯•ç«Ÿä»»ä½•ä¸œè¥¿éƒ½æœ‰æ”¹è¿›çš„ç©ºé—´ã€‚ä½†å°±ä½ æçš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸å¾—ä¸è¯´ï¼Œæˆ‘ä¸é„™è§†ä»»ä½•ä¸œè¥¿ã€‚æœ‰ä¸€äº›é—ç•™é©±åŠ¨ç¨‹åºï¼Œå¯èƒ½æ²¡æœ‰äººå…³å¿ƒï¼Œä¹Ÿæ²¡æœ‰äººå»æ¸…ç†ï¼Œä¼šåšä¸€äº›ä¸‘é™‹çš„äº‹æƒ…ï¼Œä½†è¿™ä¸»è¦æ˜¯å› ä¸ºâ€œæ²¡æœ‰äººå…³å¿ƒâ€ã€‚è¿™äº›åœ¨è¿‡å»ä¸æ˜¯é—®é¢˜ï¼Œè€Œä¸€æ—¦æˆä¸ºé—®é¢˜ï¼Œæˆ‘ä»¬å°±ä¼šç§¯ææŠŠè¿™äº›æ²¡äººå…³å¿ƒçš„ä¸œè¥¿ç§»é™¤æ‰ã€‚å¤šå¹´æ¥ï¼Œæˆ‘ä»¬å·²ç»ç§»é™¤äº†å¾ˆå¤šé©±åŠ¨ç¨‹åºï¼Œå½“ç»´æŠ¤ä¸å†æœ‰ä»»ä½•æ„ä¹‰æ—¶ï¼Œæˆ‘ä»¬ä¼šæ”¾å¼ƒæ•´ä¸ªæ¶æ„æ”¯æŒã€‚</p><p>â€œé‡å†™â€çš„ä¸»è¦åŸå› æ˜¯ï¼šæ•´ä¸ªæ¶æ„ä¸å†æœ‰æ„ä¹‰ï¼Œä½†ä»ç„¶å­˜åœ¨ä¸€äº›åº”ç”¨åœºæ™¯ã€‚æœ€æœ‰å¯èƒ½çš„æƒ…å†µæ˜¯ï¼Œä¸€äº›å°å‹åµŒå…¥å¼ç³»ç»Ÿå¹¶ä¸éœ€è¦ Linux æä¾›çš„æ‰€æœ‰ä¸œè¥¿ï¼Œå®ƒä»¬çš„ç¡¬ä»¶å¾ˆå°ï¼Œéœ€è¦çš„æ˜¯æ›´ç®€å•ã€æ›´å°‘çš„ç³»ç»ŸåŠŸèƒ½ã€‚</p><p>Linux å·²ç»æœ‰äº†é•¿è¶³çš„å‘å±•ã€‚ç°åœ¨ï¼Œå³ä½¿æ˜¯å°ç¡¬ä»¶ï¼ˆæ¯”å¦‚æ‰‹æœºç­‰ï¼‰ä¹Ÿæ¯”å½“åˆå¼€å‘ Linux æ‰€ä½¿ç”¨çš„æœºå™¨å¼ºå¤§å¾—å¤šã€‚</p><h3><span id="ä¸ä¼šç”¨-rust-å–ä»£-c-è¯­è¨€æ¥å¼€å‘å†…æ ¸">ä¸ä¼šç”¨ Rust å–ä»£ C è¯­è¨€æ¥å¼€å‘å†…æ ¸</span></h3><p><strong>Jeremy Andrewsï¼šå¦‚æœç”¨ Rust æ¥é‡å†™ä¸€éƒ¨åˆ†ç³»ç»Ÿä¼šæ€æ ·ï¼Ÿåœ¨è¿™æ–¹é¢è¿˜æœ‰æ”¹è¿›çš„ä½™åœ°å—ï¼Ÿåœ¨å†…æ ¸å¼€å‘æ–¹é¢ï¼Œä½ è§‰å¾—æ˜¯å¦æœ‰å¯èƒ½ç”¨å¦ä¸€ç§è¯­è¨€ï¼ˆæ¯”å¦‚ Rustï¼‰æ¥å–ä»£ C è¯­è¨€ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘ä¸è®¤ä¸ºæˆ‘ä»¬ä¼šç”¨ Rust å–ä»£ C è¯­è¨€æ¥å¼€å‘å†…æ ¸ï¼Œä½†å¯èƒ½ä¼šç”¨æ¥å¼€å‘ä¸€äº›é©±åŠ¨ç¨‹åºï¼Œä¹Ÿè®¸æ˜¯æ•´ä¸ªé©±åŠ¨å­ç³»ç»Ÿï¼Œä¹Ÿè®¸æ˜¯æ–‡ä»¶ç³»ç»Ÿã€‚æ‰€ä»¥ä¸æ˜¯â€œå–ä»£ C è¯­è¨€â€ï¼Œè€Œæ˜¯â€œåœ¨ä¸€äº›æœ‰æ„ä¹‰çš„åœ°æ–¹æ‰©å±•æˆ‘ä»¬çš„ C ä»£ç â€ã€‚</p><p>å½“ç„¶ï¼Œé©±åŠ¨ç¨‹åºå‡ ä¹å äº†å†…æ ¸çš„ä¸€åŠä»£ç ï¼Œæœ‰éå¸¸å¤§çš„é‡å†™ç©ºé—´ï¼Œä½†æˆ‘ä¸è®¤ä¸ºæ‰€æœ‰äººéƒ½ä¼šå¾ˆæœŸå¾…ä½¿ç”¨ Rust å…¨ç›˜é‡å†™ç°æœ‰çš„é©±åŠ¨ç¨‹åºã€‚å¯èƒ½â€œæœ‰äº›äººä¼šç”¨ Rust å¼€å‘æ–°é©±åŠ¨ç¨‹åºï¼Œæˆ–è€…é€‚å½“åœ°é‡å†™ä¸€éƒ¨åˆ†æ—§é©±åŠ¨ç¨‹åºâ€ã€‚</p><p>ç°åœ¨æ›´å¤šçš„æ˜¯â€œäººä»¬åœ¨å°è¯•å’Œä½“éªŒâ€Rustï¼Œä»…æ­¤è€Œå·²ã€‚Rust ä¼˜åŠ¿çš„èƒŒåè‚¯å®šå­˜åœ¨å¤æ‚æ€§ï¼Œæ‰€ä»¥æˆ‘ä¼šé‡‡å–è§‚æœ›çš„æ€åº¦ï¼Œçœ‹çœ‹è¿™äº›ä¼˜åŠ¿æ˜¯å¦çœŸçš„å¥æ•ˆã€‚</p><h3><span id="å†…æ ¸ä¸­æœ€ä»¤-linux-ä¹‹çˆ¶è‡ªè±ªçš„éƒ¨åˆ†">å†…æ ¸ä¸­æœ€ä»¤ Linux ä¹‹çˆ¶è‡ªè±ªçš„éƒ¨åˆ†</span></h3><p><strong>Jeremy Andrewsï¼šå†…æ ¸ä¸­æ˜¯å¦æœ‰ä½ ä¸ªäººæ„Ÿåˆ°æœ€è‡ªè±ªçš„éƒ¨åˆ†ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘æœ€æƒ³è¯´çš„æ˜¯ VFS å±‚ï¼ˆè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯è·¯å¾„åæŸ¥æ‰¾ï¼‰å’Œ VMã€‚å‰è€…æ˜¯å› ä¸º Linux åœ¨åšä¸€äº›åŸºç¡€ä»»åŠ¡ï¼ˆåœ¨æ“ä½œç³»ç»Ÿä¸­æŸ¥æ‰¾æ–‡ä»¶åç¡®å®æ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„æ“ä½œï¼‰æ—¶æ¯”å…¶ä»–ç³»ç»Ÿéƒ½è¦å¥½å¾—å¤šï¼Œåè€…ä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬æ”¯æŒ 20 å¤šç§æ¶æ„ï¼Œä½†ä»ç„¶åœ¨ä½¿ç”¨ä¸€ä¸ªåŸºæœ¬ç»Ÿä¸€çš„ VM å±‚ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸€ç‚¹å¾ˆäº†ä¸èµ·ã€‚</p><p>ä½†ä¸æ­¤åŒæ—¶ï¼Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºâ€œä½ æœ€å…³æ³¨å†…æ ¸çš„å“ªä¸€éƒ¨åˆ†â€ã€‚å†…æ ¸å¾ˆå¤§ï¼Œä¸åŒçš„å¼€å‘è€…ï¼ˆå’Œä¸åŒçš„ç”¨æˆ·ï¼‰ä¼šå…³æ³¨ä¸åŒçš„æ–¹é¢ã€‚æœ‰äº›äººè®¤ä¸ºè°ƒåº¦æ˜¯å†…æ ¸ä¸­æœ€ä»¤äººæ„Ÿåˆ°å…´å¥‹çš„éƒ¨åˆ†ï¼Œæœ‰äº›äººåˆ™å…³æ³¨è®¾å¤‡é©±åŠ¨ç¨‹åºçš„ç»†èŠ‚ï¼ˆæˆ‘ä»¬æœ‰å¾ˆå¤šè¿™æ ·çš„é©±åŠ¨ç¨‹åºï¼‰ã€‚æˆ‘ä¸ªäººåœ¨ VM å’Œ VFS è¿™ä¸¤ä¸ªæ–¹é¢å‚ä¸å¾—æ›´å¤šï¼Œæ‰€ä»¥è‡ªç„¶ä¼šæåˆ°å®ƒä»¬ã€‚</p><h3><span id="linux-åœ¨è¿™ä¸ªæ–¹é¢æ¯”å…¶ä»–æ“ä½œç³»ç»Ÿåšå¾—æ›´å¥½">Linux åœ¨è¿™ä¸ªæ–¹é¢æ¯”å…¶ä»–æ“ä½œç³»ç»Ÿåšå¾—æ›´å¥½</span></h3><p><strong>Jeremy Andrewsï¼šæˆ‘çœ‹äº†è¿™ä¸ªå…³äºè·¯å¾„åæŸ¥æ‰¾çš„æè¿°ï¼ˆ<a href="https://www.kernel.org/doc/html/latest/filesystems/path-lookup.html%EF%BC%89%EF%BC%8C%E5%AE%83%E6%AF%94%E6%88%91%E9%A2%84%E6%83%B3%E7%9A%84%E8%A6%81%E5%A4%8D%E6%9D%82%E3%80%82%E6%98%AF%E4%BB%80%E4%B9%88%E8%AE%A9" target="_blank" rel="noopener">https://www.kernel.org/doc/html/latest/filesystems/path-lookup.htmlï¼‰ï¼Œå®ƒæ¯”æˆ‘é¢„æƒ³çš„è¦å¤æ‚ã€‚æ˜¯ä»€ä¹ˆè®©</a> Linux åœ¨è¿™æ–¹é¢æ¯”å…¶ä»–æ“ä½œç³»ç»Ÿåšå¾—æ›´å¥½ï¼Ÿä½ è¯´çš„â€œæ›´å¥½â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šè·¯å¾„åæŸ¥æ‰¾æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§å’ŒåŸºç¡€çš„ä»»åŠ¡ï¼Œä»¥è‡³äºå¤§å¤šæ•°éå†…æ ¸å¼€å‘è€…ä¸è®¤ä¸ºå®ƒä¼šæ˜¯ä¸€ä¸ªé—®é¢˜ï¼šä»–ä»¬åªçŸ¥é“æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶è®¤ä¸ºè¿™æ˜¯ç†æ‰€å½“ç„¶çš„ã€‚</p><p>ä½†è¦åšå¥½å…¶å®æ˜¯ç›¸å½“å¤æ‚çš„ã€‚ç¡®åˆ‡åœ°è¯´ï¼Œå› ä¸ºå‡ ä¹æ‰€æœ‰åœ°æ–¹éƒ½åœ¨ç”¨è·¯å¾„åæŸ¥æ‰¾ï¼Œæ‰€ä»¥å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œè€Œä¸”å¤§å®¶éƒ½å¸Œæœ›å®ƒåœ¨ SMP ç¯å¢ƒä¸­å…·æœ‰è‰¯å¥½çš„ä¼¸ç¼©æ€§ï¼Œè€Œåœ¨é”å®šæ–¹é¢åˆå¾ˆå¤æ‚ã€‚ä½ ä¸æƒ³å‘ç”Ÿ IOï¼Œé‚£ä¹ˆç¼“å­˜å°±éå¸¸é‡è¦ã€‚è·¯å¾„åæŸ¥æ‰¾æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Œä»¥è‡³äºä½ ä¸èƒ½æŠŠå®ƒç•™ç»™åº•å±‚çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ 20 å¤šç§ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œè®©å®ƒä»¬å„è‡ªæ‹¥æœ‰è‡ªå·±çš„ç¼“å­˜å’Œé”å®šæœºåˆ¶å°†æ˜¯ä¸€åœºå½»å¤´å½»å°¾çš„ç¾éš¾ã€‚</p><p>æ‰€ä»¥ï¼ŒVFS å±‚çš„ä¸€ä¸ªä¸»è¦ä»»åŠ¡æ˜¯å¤„ç†æ‰€æœ‰è·¯å¾„åç»„ä»¶çš„é”å®šå’Œç¼“å­˜é—®é¢˜ï¼Œä»¥åŠæ‰€æœ‰çš„åºåˆ—åŒ–å’ŒæŒ‚è½½ç‚¹éå†é—®é¢˜ï¼Œè¿™äº›éƒ½æ˜¯é€šè¿‡æ— é”ç®—æ³•ï¼ˆRCUï¼‰æ¥å®Œæˆçš„ï¼Œä½†ä¹Ÿä¼šæœ‰ä¸€äº›éå¸¸æ™ºèƒ½çš„é”ï¼ˆLinux å†…æ ¸çš„â€œlockrefâ€é”æ˜¯ä¸€ç§éå¸¸ç‰¹æ®Šçš„â€œå¸¦æœ‰å¼•ç”¨è®¡æ•°çš„è‡ªæ—‹é”â€ï¼Œè¡¨é¢ä¸Šçœ‹æ˜¯ä¸º dcache ç¼“å­˜è€Œè®¾è®¡çš„ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸“é—¨çš„é”æ„ŸçŸ¥å¼•ç”¨è®¡æ•°ï¼Œå¯ä»¥åœ¨æŸäº›å¸¸è§æƒ…å†µä¸‹æ¶ˆé™¤é”ï¼‰ã€‚</p><p>æœ€ç»ˆç»“æœæ˜¯ï¼šåº•å±‚æ–‡ä»¶ç³»ç»Ÿä»ç„¶éœ€è¦å¯¹æœªç¼“å­˜çš„å†…å®¹è¿›è¡ŒæŸ¥æ‰¾ï¼Œä½†å®ƒä»¬ä¸éœ€è¦å…³å¿ƒç¼“å­˜å’Œä¸€è‡´æ€§è§„åˆ™ä»¥åŠä¸è·¯å¾„åæŸ¥æ‰¾ç›¸å…³çš„åŸå­æ€§è§„åˆ™ã€‚VFS ä¼šä¸ºå®ƒä»¬å¤„ç†å¥½æ‰€æœ‰è¿™äº›é—®é¢˜ã€‚</p><p>è€Œä¸”å®ƒçš„æ€§èƒ½æ¯”ä»»ä½•å…¶ä»–æ“ä½œç³»ç»Ÿéƒ½è¦å¥½ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥åœ¨æ‹¥æœ‰æ•°åƒä¸ª CPU çš„æœºå™¨ä¸Šå®Œç¾è¿è¡Œã€‚</p><p>æ‰€ä»¥ä¸ä»…ä»…æ˜¯â€œæ›´å¥½â€ï¼Œè€Œæ˜¯â€œå¤§å†™â€çš„æ›´å¥½ã€‚æ²¡æœ‰ä»€ä¹ˆèƒ½ä¸ä¹‹ç›¸æå¹¶è®ºçš„äº†ã€‚Linux dcache æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚</p><h3><span id="æ–°å† ç–«æƒ…å¯¹å†…æ ¸å¼€å‘çš„å½±å“">æ–°å† ç–«æƒ…å¯¹å†…æ ¸å¼€å‘çš„å½±å“</span></h3><p><strong>Jeremy Andrewsï¼šè¿‡å»çš„ä¸€å¹´å¯¹å…¨ä¸–ç•Œæ¥è¯´æ˜¯è‰°éš¾çš„ä¸€å¹´ã€‚æ–°å† ç–«æƒ…å¯¹å†…æ ¸å¼€å‘è¿›ç¨‹å¸¦æ¥äº†å“ªäº›å½±å“ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šå®é™…ä¸Šï¼Œå¾—ç›Šäºæˆ‘ä»¬ä¸€ç›´ä»¥æ¥çš„å·¥ä½œæ–¹å¼ï¼Œå®ƒçš„å½±å“éå¸¸å°ã€‚ç”µå­é‚®ä»¶çœŸçš„æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œæˆ‘ä»¬å¹¶ä¸ä¾èµ–é¢å¯¹é¢çš„ä¼šè®®ã€‚</p><p>æ˜¯çš„ï¼Œå®ƒç¡®å®å½±å“äº†å»å¹´çš„å¹´åº¦å†…æ ¸å³°ä¼šï¼ˆä»Šå¹´çš„å³°ä¼šä»æ‚¬è€Œæœªå†³ï¼‰ï¼Œå¤§å¤šæ•°ä¼šè®®è¢«å–æ¶ˆæˆ–è½¬ä¸ºçº¿ä¸Šè¿›è¡Œã€‚ä»¥å‰åœ¨åŠå…¬å®¤å·¥ä½œçš„äººå¤§éƒ½å¼€å§‹åœ¨å®¶é‡Œå·¥ä½œï¼ˆä½†å¾ˆå¤šæ ¸å¿ƒå†…æ ¸ç»´æŠ¤è€…åœ¨ä¹‹å‰å·²ç»è¿™ä¹ˆåšäº†ï¼‰ã€‚æ‰€ä»¥ï¼Œå‘¨å›´çš„å¾ˆå¤šä¸œè¥¿éƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä½†å†…æ ¸å¼€å‘è¿˜æ˜¯åƒä»¥å‰ä¸€æ ·ã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œæ–°å† ç–«æƒ…åœ¨å…¶ä»–æ–¹é¢å½±å“äº†æˆ‘ä»¬æ‰€æœ‰äººçš„ç”Ÿæ´»ï¼Œä½†æ€»çš„æ¥è¯´ï¼Œä½œä¸ºå‡ ä¹å®Œå…¨é€šè¿‡ç”µå­é‚®ä»¶è¿›è¡Œäº¤æµçš„å†…æ ¸å¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬å¯èƒ½æ˜¯å—å½±å“æœ€å°çš„ã€‚</p><h2><span id="ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ-git">ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ Git</span></h2><h3><span id="å¯¹-git-é¡¹ç›®é¢†å¯¼æƒä¸»åŠ¨æ”¾æ‰‹">å¯¹ Git é¡¹ç›®é¢†å¯¼æƒä¸»åŠ¨æ”¾æ‰‹</span></h3><p><strong>Jeremy Andrewsï¼šLinux åªæ˜¯ä½ å¯¹å¼€æºåšå‡ºçš„ä¼—å¤šè´¡çŒ®ä¸­çš„ä¸€ä¸ªã€‚åœ¨ 2005 å¹´ï¼Œä½ è¿˜åˆ›å»ºäº† Gitï¼Œä¸€ä¸ªéå¸¸æµè¡Œçš„åˆ†å¸ƒå¼æºä»£ç æ§åˆ¶ç³»ç»Ÿã€‚ä½ å¿«é€Ÿåœ°å°† Linux å†…æ ¸æºä»£ç æ ‘ä»ä¸“æœ‰çš„ Bitkeeper è¿ç§»åˆ°å¼€æºçš„ Git ç³»ç»Ÿä¸­ï¼Œå¹¶åœ¨åŒå¹´å°†ç»´æŠ¤å·¥ä½œç§»äº¤ç»™äº† Junio Hamanoã€‚è¿™é‡Œæœ‰å¾ˆå¤šæœ‰è¶£çš„æ•…äº‹ï¼Œæ˜¯ä»€ä¹ˆåŸå› ä¿ƒä½¿ä½ è¿™ä¹ˆå¿«å°±å°†é¡¹ç›®çš„é¢†å¯¼æƒç§»äº¤äº†å‡ºæ¥ï¼Œä½ æ˜¯å¦‚ä½•æ‰¾åˆ°å¹¶é€‰æ‹©äº† Junio çš„ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šç­”æ¡ˆå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘å¹¶ä¸æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„æºä»£ç æ§åˆ¶ç³»ç»Ÿã€‚å¼€å‘ Linux æ˜¯å› ä¸ºç¡¬ä»¶å’Œè½¯ä»¶ä¹‹é—´çš„åº•å±‚æ¥å£å¾ˆå¸å¼•æˆ‘â€”â€”åŸºæœ¬ä¸Šæ˜¯å‡ºäºä¸ªäººçš„çƒ­çˆ±å’Œå…´è¶£ã€‚ç›¸åï¼Œå¼€å‘ Git æ˜¯å› ä¸ºç¡®å®æœ‰è¿™ä¸ªéœ€è¦ï¼šä¸æ˜¯å› ä¸ºæˆ‘è§‰å¾—æºä»£ç æ§åˆ¶å¾ˆæœ‰è¶£ï¼Œè€Œæ˜¯å› ä¸ºæˆ‘ååˆ†é„™è§†å¸‚é¢ä¸Šçš„å¤§å¤šæ•°æºä»£ç æ§åˆ¶ç³»ç»Ÿã€‚è€Œæˆ‘è§‰å¾—æœ€åˆé€‚çš„ã€åœ¨ Linux å¼€å‘å½“ä¸­å¾ˆå¥½ç”¨çš„ BitKeeper å·²ç»æ— æ³•ç»´æŒä¸‹å»äº†ã€‚</p><p>æˆ‘å¼€å‘ Linux å·²ç»è¶…è¿‡ 30 å¹´äº†ï¼ˆè·ç¦»ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„å‘¨å¹´çºªå¿µè¿˜æœ‰å‡ ä¸ªæœˆï¼Œä½†åœ¨ 30 å¹´å‰æˆ‘å°±å¼€å§‹ç ”ç©¶ Linux çš„â€œå‰èº«â€äº†ï¼‰ï¼Œå¹¶ä¸”ä¸€ç›´åœ¨ç»´æŠ¤å®ƒã€‚ä½† Git å‘¢ï¼Ÿæˆ‘ä»æ¥æ²¡æœ‰æƒ³è¿‡æˆ‘çœŸçš„æƒ³è¦é•¿æœŸç»´æŠ¤å®ƒã€‚æˆ‘å–œæ¬¢ç”¨å®ƒï¼Œè€Œä¸”åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæˆ‘è®¤ä¸ºå®ƒæ˜¯æœ€å¥½çš„ SCMï¼Œä½†å®ƒå¹¶ä¸æ˜¯æˆ‘çš„å…´è¶£æ‰€åœ¨ã€‚</p><p>æ‰€ä»¥æˆ‘æ€»æ˜¯å¸Œæœ›åˆ«äººæ¥ä¸ºæˆ‘ç»´æŠ¤ SCMâ€”â€”äº‹å®ä¸Šï¼Œå¦‚æœå½“åˆæˆ‘ä¸ç”¨è‡ªå·±å¼€å‘è¿™ä¸ª SCMï¼Œæˆ‘ä¼šå¾ˆå¼€å¿ƒã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æ•…äº‹çš„èƒŒæ™¯ã€‚</p><p>è‡³äº Junioï¼Œä»–å®é™…ä¸Šæ˜¯æœ€æ—©åŠ å…¥ Git å¼€å‘é˜Ÿä¼çš„äººå‘˜ä¹‹ä¸€ã€‚ä»–åœ¨æˆ‘å°† Git çš„ç¬¬ä¸€ä¸ªéå¸¸ç²—ç³™çš„ç‰ˆæœ¬å…¬å¼€åçš„å‡ å¤©å†…æäº¤äº†ç¬¬ä¸€æ¬¡å˜æ›´ä»£ç ï¼Œæ‰€ä»¥ Junio åœ¨ Git ä¸€å¼€å§‹å°±å‚ä¸å…¶ä¸­äº†ã€‚</p><p>ä½†æˆ‘ä¹‹æ‰€ä»¥æŠŠé¡¹ç›®äº¤ç»™ Junioï¼Œå¹¶ä¸æ˜¯å› ä¸ºä»–æ˜¯ç¬¬ä¸€æ‰¹å‚ä¸é¡¹ç›®çš„äººã€‚åœ¨ç»´æŠ¤äº† Git å‡ ä¸ªæœˆä¹‹åï¼Œè®©æˆ‘å†³å®šå°†é¡¹ç›®äº¤ç»™ Junio ç»´æŠ¤è€…çš„çœŸæ­£åŸå› æ˜¯â€œå¥½å“å‘³â€â€”â€”ä¸€ä¸ªå¾ˆéš¾æè¿°çš„æ¦‚å¿µã€‚æˆ‘çœŸçš„æƒ³ä¸åˆ°è¿˜æœ‰ä»€ä¹ˆæ›´å¥½çš„æè¿°ï¼šç¼–ç¨‹ä¸»è¦æ˜¯ä¸ºäº†è§£å†³æŠ€æœ¯é—®é¢˜ï¼Œä½†å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ä»¥åŠå¦‚ä½•æ€è€ƒä¹Ÿå¾ˆé‡è¦ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä½ å¼€å§‹æ„è¯†åˆ°ï¼šæœ‰äº›äººå°±æœ‰è¿™ç§â€œå¥½å“å‘³â€ï¼Œä»–æ€»èƒ½é€‰æ‹©æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æˆ‘ä¸æƒ³å°†ç¼–ç¨‹è¯´æˆæ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šä¸»è¦æ˜¯å…³äºâ€œå¥½çš„å·¥ç¨‹â€ã€‚æˆ‘å¾ˆå–œæ¬¢æ‰˜é©¬æ–¯Â·çˆ±è¿ªç”Ÿçš„é‚£å¥â€œå¤©æ‰æ˜¯ç™¾åˆ†ä¹‹ä¸€çš„çµæ„ŸåŠ ä¸Šç™¾åˆ†ä¹‹ä¹åä¹çš„æ±—æ°´â€ï¼šç¼–ç¨‹æ¶‰åŠçš„å‡ ä¹éƒ½æ˜¯ç»†ææœ«èŠ‚çš„ä¸œè¥¿å’Œæ—¥å¸¸ç¹é‡çš„å·¥ä½œã€‚ä½†æ˜¯ï¼Œé‚£ç™¾åˆ†ä¹‹ä¸€çš„â€œçµæ„Ÿâ€ï¼Œä¹Ÿå°±æ˜¯â€œå¥½å“å‘³â€ï¼Œä¸ä»…è¦è§£å†³é—®é¢˜ï¼Œè€Œä¸”è¦å¹²å‡€ã€æ¼‚äº®åœ°è§£å†³ã€‚</p><p>Junio å°±æœ‰é‚£ç§â€œå¥½å“å‘³â€ã€‚</p><p>æ¯æ¬¡æåˆ° Gitï¼Œæˆ‘éƒ½æƒ³è¯•ç€è®²æ¸…æ¥šï¼šæˆ‘åœ¨ä¸€å¼€å§‹æå‡ºäº† Git çš„æ ¸å¿ƒæ€æƒ³ï¼Œå¹¶ç»å¸¸å› ä¸ºè¿™éƒ¨åˆ†å·¥ä½œè€Œè·å¾—å¤ªå¤šè£èª‰ã€‚Git çš„è¿™ 15 å¹´ï¼Œæˆ‘ä¹Ÿåªæ˜¯åœ¨ç¬¬ä¸€å¹´çœŸæ­£å‚ä¸äº†é¡¹ç›®ã€‚Junio æ˜¯ä¸€ä¸ªä¼˜ç§€çš„ç»´æŠ¤è€…ï¼Œæ˜¯ä»–è®© Git å˜æˆç°åœ¨çš„æ ·å­ã€‚</p><p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå…³äºâ€œå¥½å“å‘³â€ï¼Œä»¥åŠæ‰¾åˆ°æ‹¥æœ‰å¥½å“å‘³çš„äººï¼Œå¹¶ä¿¡ä»»ä»–ä»¬â€”â€”ä¸ä»…ä»… Git æ˜¯è¿™æ ·ï¼ŒLinux ä¹Ÿæ˜¯è¿™æ ·ã€‚ä¸ Git ä¸ä¸€æ ·çš„æ˜¯ï¼ŒLinux è¿™ä¸ªé¡¹ç›®æˆ‘ä»ç„¶åœ¨ç§¯æç»´æŠ¤ï¼Œä½†ä¸ Git ä¸€æ ·çš„æ˜¯ï¼ŒLinux ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰å¾ˆå¤šäººå…±åŒå‚ä¸çš„é¡¹ç›®ã€‚æˆ‘è®¤ä¸ºï¼ŒLinux çš„ä¸€å¤§æˆåŠŸæ˜¯å®ƒæ‹¥æœ‰æ•°ç™¾åç»´æŠ¤è€…ï¼Œä»–ä»¬éƒ½å…·å¤‡äº†â€œå¥½å“å‘³â€ï¼Œå¹¶ç»´æŠ¤ç€å†…æ ¸çš„ä¸åŒéƒ¨åˆ†ã€‚</p><h3><span id="é¡¹ç›®ç»´æŠ¤å¹¶ééé»‘å³ç™½">é¡¹ç›®ç»´æŠ¤å¹¶éâ€œéé»‘å³ç™½â€</span></h3><p><strong>Jeremy Andrewsï¼šä½ æœ‰æ²¡æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼šæŠŠæ§åˆ¶æƒäº¤ç»™ç»´æŠ¤è€…ï¼Œç„¶åå‘ç°è¿™æ˜¯ä¸€ä¸ªé”™è¯¯çš„å†³å®šï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘ä»¬çš„ç»´æŠ¤ä½“ç³»ä»æ¥å°±ä¸æ˜¯éé»‘å³ç™½çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬ç”šè‡³æ²¡æœ‰å°†ç»´æŠ¤æƒæ­£å¼è®°å½•ä¸‹æ¥ï¼šæˆ‘ä»¬ç¡®å®æœ‰ä¸€ä¸ª MAINTAINERS æ–‡ä»¶ï¼Œä½†é‚£åªæ˜¯ä¸ºäº†è®©ä½ åœ¨é‡åˆ°é—®é¢˜æ—¶èƒ½å¤Ÿæ‰¾åˆ°å¯¹çš„äººï¼Œå¹¶ä¸æ˜¯æŸç§æ’ä»–æ‰€æœ‰æƒçš„æ ‡å¿—ã€‚</p><p>æ‰€ä»¥ï¼Œâ€œè°è´Ÿè´£ä»€ä¹ˆä¸œè¥¿â€æ›´åƒæ˜¯ä¸€ç§æµåŠ¨çš„æŒ‡å—ï¼Œä»¥åŠâ€œè¿™ä¸ªäººå¾ˆæ´»è·ƒï¼Œå·¥ä½œåšå¾—å¾ˆå¥½â€ï¼Œè€Œä¸æ˜¯â€œæˆ‘ä»¬æŠŠæ‰€æœ‰æƒç»™äº†é‚£ä¸ªäººï¼Œç„¶åä»–æç ¸äº†â€ã€‚</p><p>ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œæˆ‘ä»¬çš„ç»´æŠ¤ä½“ç³»ä¹Ÿæ˜¯æµåŠ¨çš„ã€‚å‡è®¾ä½ æ˜¯æŸä¸ªå­ç³»ç»Ÿçš„ç»´æŠ¤è€…ï¼Œå¦‚æœä½ éœ€è¦å¦ä¸€ä¸ªå­ç³»ç»Ÿçš„ä¸œè¥¿ï¼Œæ˜¯å¯ä»¥è·¨ç•Œçš„ã€‚é€šå¸¸äººä»¬åœ¨è¿™æ ·åšä¹‹å‰éƒ½ä¼šè¿›è¡Œå¹¿æ³›çš„æ²Ÿé€šï¼Œè€Œä¸”è¿™ç§äº‹æƒ…ç¡®å®å‘ç”Ÿäº†ã€‚è¿™å¹¶ä¸æ˜¯â€œä½ åªèƒ½åŠ¨è¿™ä¸ªæ–‡ä»¶â€ä¹‹ç±»çš„ç¡¬æ€§è§„å®šã€‚</p><p>å®é™…ä¸Šï¼Œè¿™ä¸å‰é¢è®¨è®ºçš„æœ‰å…³è®¸å¯çš„äº‹æƒ…æœ‰äº›è”ç³»ã€‚â€œGitâ€çš„å¦ä¸€ä¸ªè®¾è®¡åŸåˆ™æ˜¯â€œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä»£ç æ ‘ï¼Œä½†æ²¡æœ‰å“ªä¸€ä¸ªä»£ç æ ‘æ˜¯ç‰¹æ®Šçš„â€ã€‚</p><p>å› ä¸ºå¾ˆå¤šå…¶ä»–é¡¹ç›®éƒ½ä½¿ç”¨äº†å·¥å…·â€”â€”æ¯”å¦‚ CVS æˆ– SVNâ€”â€”è¿™äº›å·¥å…·ä¼šè®©ä¸€äº›äººå˜å¾—â€œç‰¹æ®Šâ€ï¼Œèµ‹äºˆäº†ä»–ä»¬æŸç§â€œæ‰€æœ‰æƒâ€ã€‚åœ¨ BSD ä¸–ç•Œé‡Œï¼Œä»–ä»¬ç§°ä¹‹ä¸ºâ€œcommit bitâ€ï¼šç»™ä¸€ä¸ªç»´æŠ¤è€…â€œcommit bitâ€æ„å‘³ç€ä»–å¯ä»¥å°†ä»£ç æäº¤åˆ°ä¸­å¤®ä»£ç åº“ã€‚</p><p>æˆ‘ä¸€ç›´å¾ˆè®¨åŒè¿™ç§æ¨¡å¼ï¼Œå› ä¸ºå®ƒä¼šä¸å¯é¿å…åœ°å¯¼è‡´æ”¿æ²»â€œå°å›¢ä½“â€çš„å‡ºç°ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ€»æœ‰ä¸€äº›äººæ˜¯ç‰¹æ®Šã€éšæ€§å—ä¿¡ä»»çš„ã€‚é—®é¢˜çš„å…³é”®ç”šè‡³ä¸åœ¨äºâ€œéšæ€§å—ä¿¡ä»»â€ï¼Œè€Œåœ¨äºç¡¬å¸çš„å¦ä¸€é¢â€”â€”å…¶ä»–äººä¸è¢«ä¿¡ä»»ï¼Œä»–ä»¬è¢«å®šä¹‰æˆå±€å¤–äººï¼Œå¿…é¡»å—åˆ¶äºç›‘æŠ¤è€…ã€‚</p><p>åŒæ ·ï¼Œåœ¨ Git å¼€å‘ä¸­ä¹Ÿä¸å­˜åœ¨è¿™ç§æƒ…å†µã€‚æ¯ä¸ªäººéƒ½æ˜¯å¹³ç­‰çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥å…‹éš†ä»£ç ï¼Œåšè‡ªå·±çš„å¼€å‘ï¼Œåšå¥½äº†ï¼Œå°±å¯ä»¥åˆå¹¶å›æ¥ã€‚</p><p>æ‰€ä»¥ï¼Œæ²¡æœ‰å¿…è¦ç»™äººä»¬ç‰¹æƒï¼Œä¹Ÿä¸éœ€è¦â€œcommit bitâ€ã€‚è¿™æ ·å°±å¯ä»¥é¿å…å‡ºç°æ”¿æ²»â€œå°å›¢ä½“â€ï¼Œä¹Ÿä¸éœ€è¦â€œéšæ€§ä¿¡ä»»â€ã€‚å¦‚æœä»–ä»¬åšå¾—ä¸å¥½â€”â€”æˆ–è€…æ›´å¸¸è§çš„æ˜¯ï¼Œæœ€ç»ˆæ¶ˆå¤±äº†ï¼Œå¹¶è½¬å‘äº†å¦ä¸€ä¸ªå…´è¶£â€”â€”ä»–ä»¬çš„ä»£ç å°±ä¸ä¼šè¢«åˆå¹¶å›æ¥ï¼Œä¹Ÿä¸ä¼šé˜»ç¢å…¶ä»–æœ‰æ–°æƒ³æ³•çš„äººã€‚</p><h3><span id="å¯¹-git-ç‰¹æ€§çš„çœ‹æ³•">å¯¹ Git ç‰¹æ€§çš„çœ‹æ³•</span></h3><p><strong>Jeremy Andrewsï¼šGit æœ‰æ²¡æœ‰å“ªäº›æ–°ç‰¹æ€§è®©ä½ å°è±¡æ·±åˆ»ï¼Œå¹¶æˆä¸ºä½ å·¥ä½œæµçš„ä¸€éƒ¨åˆ†ï¼Ÿè¿˜æœ‰å“ªäº›ç‰¹æ€§æ˜¯ä½ æƒ³è¦å¢åŠ çš„ï¼Ÿ</strong></p><p><strong>Linus Torvalds</strong>ï¼šæˆ‘å¯¹ Git çš„éœ€æ±‚æ€»æ˜¯æœ€æ—©å¾—åˆ°æ»¡è¶³çš„ï¼Œæ‰€ä»¥ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼ŒGit æ²¡æœ‰â€œæ–°â€ç‰¹æ€§ã€‚</p><p>è¿™äº›å¹´æ¥ï¼ŒGit ç¡®å®æœ‰å¾ˆå¤§çš„æ”¹è¿›ï¼Œæœ‰ä¸€äº›åœ¨æˆ‘çš„å·¥ä½œæµä¸­å·²ç»ä½“ç°å‡ºæ¥äº†ã€‚ä¾‹å¦‚ï¼ŒGit çš„é€Ÿåº¦ä¸€ç›´éƒ½å¾ˆå¿«â€”â€”æ¯•ç«Ÿè¿™æ˜¯æˆ‘çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€â€”â€”ä½†å®ƒçš„å¤§éƒ¨åˆ†ç‰¹æ€§æœ€åˆæ˜¯å›´ç»• shell è„šæœ¬è€Œæ„å»ºçš„ã€‚å¤šå¹´æ¥ï¼Œå¤§å¤šæ•° shell è„šæœ¬éƒ½å·²ç»æ¶ˆå¤±äº†ï¼Œè¿™æ„å‘³ç€æˆ‘å¯ä»¥æ¯”åŸæ¥æ›´å¿«åœ°åº”ç”¨ Andrew Morton çš„è¡¥ä¸ã€‚è¿™ä¸€ç‚¹ä»¤äººæ„Ÿåˆ°æ¬£æ…°ï¼Œå› ä¸ºè¿™å®é™…ä¸Šæ˜¯æˆ‘æ—©æœŸç”¨äºæ€§èƒ½æµ‹è¯•çš„åŸºå‡†ä¹‹ä¸€ã€‚</p><p>æ‰€ä»¥ï¼ŒGit å¯¹æˆ‘æ¥è¯´ä¸€ç›´éƒ½å¾ˆå¥½ï¼Œè€Œä¸”å˜å¾—è¶Šæ¥è¶Šå¥½ã€‚</p><p>Git æœ€å¤§çš„æ”¹è¿›åœ¨äºâ€œæ™®é€šç”¨æˆ·â€çš„ä½¿ç”¨ä½“éªŒå˜å¾—æ›´å¥½äº†ã€‚ä¸€éƒ¨åˆ†åŸå› æ˜¯äººä»¬åœ¨å­¦ä¹  Git å·¥ä½œæµçš„è¿‡ç¨‹ä¸­é€æ¸ä¹ æƒ¯äº†å®ƒï¼Œä½†æ›´å¤šçš„æ˜¯å› ä¸º Git æœ¬èº«å˜å¾—æ›´æ˜“äºä½¿ç”¨ã€‚</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ æ¶æ„å¤´æ¡ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/wxejbh4w" target="_blank" rel="noopener">https://tinyurl.com/wxejbh4w</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;ä½œè€…ä¸¨ Jeremy Andrews&lt;/li&gt;
&lt;li&gt;è¯‘è€…ä¸¨å± çµ&lt;/li&gt;
&lt;li&gt;ç­–åˆ’ä¸¨è”¡èŠ³èŠ³&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Linux è¯ç”Ÿäº 1991 å¹´ï¼Œè·ä»Šå·²ç» 30 å¹´äº†ã€‚è™½ç„¶å®ƒä¸€å¼€å§‹åªæ˜¯ Linus çš„ä¸€ä¸ªä¸ªäººé¡¹ç›®ï¼Œè€Œéå‡ºäºè¦å¼€å‘ä¸€ä¸ªæ–°æ“ä½œç³»ç»Ÿçš„ä¼Ÿå¤§æ¢¦æƒ³ï¼Œä½†å¦‚ä»Šçš„ Linux æ—©å·²æ— å¤„ä¸åœ¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;30 å¹´å‰ï¼Œå½“ Linus Torvalds ç¬¬ä¸€æ¬¡å‘å¸ƒ Linux å†…æ ¸æ—¶ï¼Œä»–è¿˜æ˜¯èµ«å°”è¾›åŸºå¤§å­¦çš„ä¸€å 21 å²çš„å­¦ç”Ÿã€‚ä»–å®£å¸ƒè¯´ï¼šâ€œæˆ‘æ­£åœ¨å¼€å‘ä¸€ä¸ªï¼ˆå…è´¹çš„ï¼‰æ“ä½œç³»ç»Ÿï¼ˆè¿™åªæ˜¯ä¸ªçˆ±å¥½ï¼Œä¸ä¼šåšå¾—å¾ˆå¤§ï¼Œä¹Ÿä¸ä¼šå¾ˆä¸“ä¸šâ€¦â€¦ï¼‰â€ã€‚30 å¹´åï¼Œ500 å¼ºè¶…çº§è®¡ç®—æœºå’Œ 70% ä»¥ä¸Šçš„æ™ºèƒ½æ‰‹æœºéƒ½åœ¨è¿è¡Œ Linuxã€‚å¾ˆæ˜¾ç„¶ï¼ŒLinux ä¸ä»…å¤§ï¼Œè€Œä¸”å¾ˆä¸“ä¸šã€‚&lt;/p&gt;
&lt;p&gt;30 å¹´æ¥ï¼ŒLinus Torvalds ä¸€ç›´åœ¨é¢†å¯¼ç€ Linux å†…æ ¸çš„å¼€å‘ï¼Œå¯å‘äº†æ— æ•°å¼€å‘è€…å’Œå¼€æºé¡¹ç›®ã€‚2005 å¹´ï¼ŒLinus å¼€å‘äº† Gitï¼Œç”¨æ¥ç®¡ç†å†…æ ¸å¼€å‘è¿‡ç¨‹ã€‚Git ç°åœ¨å·²ç»æˆä¸ºæœ€æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå—åˆ°æ— æ•°å¼€æºå’Œç§æœ‰é¡¹ç›®çš„ä¿¡ä»»ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å€¼ Linux è¯ç”Ÿ 30 å‘¨å¹´ä¹‹é™…ï¼ŒLinus Torvalds é€šè¿‡ç”µå­é‚®ä»¶å›å¤äº† Tag 1 å’¨è¯¢å…¬å¸çš„åˆ›å§‹åˆä¼™äºº / é¦–å¸­æ‰§è¡Œå®˜ Jeremy Andrews çš„è®¿è°ˆé—®é¢˜ï¼ˆã€ŠAn Interview With Linus Torvalds: Linux and Git - Part 1ã€‹ï¼‰ï¼Œå›é¡¾å¹¶æ€»ç»“äº†è¿‡å»è¿™äº›å¹´ä»–åœ¨é¢†å¯¼å¤§å‹å¼€æºé¡¹ç›®è¿‡ç¨‹ä¸­å¾—åˆ°çš„çœŸçŸ¥ç¼è§ã€‚æœ¬æ–‡ç€é‡ä»‹ç» Linux å†…æ ¸å¼€å‘å’Œ Gitã€‚InfoQ å¯¹è®¿è°ˆå†…å®¹è¿›è¡Œäº†ç¿»è¯‘ï¼Œä»¥é£¨è¯»è€…ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/categories/Linux/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="æ‚è°ˆ" scheme="https://www.hi-linux.com/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>6 å¼ å›¾å¸¦ä½ ææ‡‚å¾®æœåŠ¡</title>
    <link href="https://www.hi-linux.com/posts/39095.html"/>
    <id>https://www.hi-linux.com/posts/39095.html</id>
    <published>2021-06-10T01:00:00.000Z</published>
    <updated>2021-06-10T09:50:38.832Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><p>è™½è¯´<a href="https://martinfowler.com/articles/microservices.html" target="_blank" rel="noopener">å¾®æœåŠ¡</a>æ—©å·²æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜äº†ï¼Œåœ¨ <a href="https://www.infoq.cn/topic/microservice" target="_blank" rel="noopener">infoq</a> æˆ–è€… <a href="https://insights.thoughtworks.cn/tag/microservices/" target="_blank" rel="noopener">thoughtworks</a> ä¸Šå¯ä»¥æ‰¾åˆ°å¾ˆå¤šæ¡ˆä¾‹ï¼Œä¸è¿‡å¯æƒœçš„æ˜¯å…¶ä¸­ç›¸å½“æ¯”ä¾‹çš„æ¡ˆä¾‹æ˜¯å¤±è´¥çš„æ¡ˆä¾‹ï¼Œç©¶å…¶åŸå› ï¼Œé™¤äº†<a href="https://microservices.io/index.html" target="_blank" rel="noopener">æŠ€æœ¯é—¨æ§›</a>ä¹‹å¤–ï¼Œä¸»è¦æ˜¯å› ä¸ºå¾ˆå¤šäººè„±ç¦»äº†å®é™…æƒ…å†µï¼Œåªæ˜¯ä¸ºäº†å¾®æœåŠ¡è€Œå¾®æœåŠ¡ã€‚æœ¬æ–‡é€šè¿‡ä¸€ä¸ªä¾‹å­å¸¦é¢†å¤§å®¶ä»å¤´åˆ°å°¾ä½“éªŒä¸€ä¸‹å¾®æœåŠ¡çš„æ¼”åŒ–è¿‡ç¨‹ï¼Œä¸ä»…è¦åšåˆ°çŸ¥å…¶ç„¶ï¼Œæ›´è¦åšåˆ°çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</p><a id="more"></a><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªåœ¨çº¿è´­ç‰©é¡¹ç›®ï¼Œå…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬å•†åŸã€æ¨èã€è¯„è®ºã€ç”¨æˆ·ç­‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…¸å‹çš„<a href="https://microservices.io/patterns/monolithic.html" target="_blank" rel="noopener">å•ä½“æ¶æ„</a>ï¼šä¸åŒå›¢é˜Ÿçš„æŠ€æœ¯äººå‘˜å·¥ä½œåœ¨åŒä¸€ä¸ªç‰ˆæœ¬åº“ä¸Šï¼Œç³»ç»ŸåŠŸèƒ½æŒ‰æ¨¡å—åˆ’åˆ†ï¼Œä¸åŒæ¨¡å—ä¹‹é—´é€šè¿‡æœ¬åœ°å‡½æ•°è°ƒç”¨ï¼Œé€šå¸¸æ“ä½œåŒä¸€ä¸ªæ•°æ®åº“ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/ms01-20210514145248915-2021-05-14-k5YOD0.png" alt></p><p>åœ¨é¡¹ç›®æ—©æœŸï¼Œå•ä½“æ¶æ„å¾€å¾€èƒ½å¾ˆå¥½çš„é€‚åº”å¿«é€Ÿè¿­ä»£çš„éœ€æ±‚ï¼Œä¸è¿‡éšç€é¡¹ç›®çš„å‘å±•ï¼Œé¡¹ç›®æœ¬èº«ä¼šå˜å¾—å¤æ‚ï¼Œå…¶å¼Šç«¯ä¸å¯é¿å…çš„å‡ºç°ï¼Œæ¯”å¦‚ä¸‹é¢åˆ—ä¸¾çš„ä¸€äº›æƒ…å†µï¼š</p><ul><li>å› ä¸ºå¤§å®¶éƒ½å·¥ä½œåœ¨åŒä¸€ä¸ªç‰ˆæœ¬åº“ä¸Šï¼Œæ‰€ä»¥å¯èƒ½ä¼šé‡åˆ°ï¼šå•†åŸæ¨¡å—å®Œæˆäº†æ–°åŠŸèƒ½ï¼Œå‡†å¤‡ä¸Šçº¿ï¼Œç»“æœæ¨èæ¨¡å—åˆšæäº¤äº†è¿˜æ²¡æ¥å¾—åŠæµ‹è¯•çš„ä»£ç ï¼Œäºæ˜¯ä¸å¾—ä¸æ¨è¿Ÿä¸Šçº¿ã€‚</li><li>ä¸åŒçš„éœ€æ±‚é‡‡ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆï¼šè´Ÿè´£è¯„è®ºæ¨¡å—çš„åŒäº‹æƒ³ç”¨ PHP + MySQL æ¥æ„å»ºç³»ç»Ÿï¼Œè´Ÿè´£ç”¨æˆ·æ¨¡å—çš„åŒäº‹å´æƒ³ç”¨ Golang + PostgreSQL æ¥æ„å»ºç³»ç»Ÿã€‚</li><li>æœ‰çš„æ¨¡å—éœ€è¦é«˜æ€§èƒ½ CPUï¼Œæœ‰çš„æ¨¡å—éœ€è¦å¤§å†…å­˜ï¼Œå› ä¸ºä¸åŒçš„æ¨¡å—æ˜¯è€¦åˆåœ¨ä¸€èµ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸å¾—ä¸åŒæ—¶å…·å¤‡é«˜æ€§èƒ½ CPUï¼Œå¤§å†…å­˜ï¼Œä»è€Œå¢åŠ äº†æˆæœ¬ã€‚</li></ul><p>å¦‚ä½•è§£å†³æ­¤ç±»é—®é¢˜ï¼Ÿ<a href="https://zh.wikipedia.org/wiki/%E5%BA%B7%E5%A8%81%E5%AE%9A%E5%BE%8B" target="_blank" rel="noopener">åº·å¨å®šå¾‹</a>ç»™å‡ºäº†å¾ˆå¥½çš„å»ºè®®ï¼šã€Œè®¾è®¡ç³»ç»Ÿçš„æ¶æ„å—åˆ¶äºäº§ç”Ÿè¿™äº›è®¾è®¡çš„ç»„ç»‡çš„æ²Ÿé€šç»“æ„ã€ï¼Œé€šä¿—ç‚¹è¯´å°±æ˜¯ï¼šã€Œæœ‰ä»€ä¹ˆæ ·çš„ç»„ç»‡æ¶æ„å°±ä¼šè®¾è®¡å‡ºä»€ä¹ˆæ ·çš„ç³»ç»Ÿæ¶æ„ã€ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå› ä¸ºä¸åŒçš„å›¢é˜Ÿè´Ÿè´£ä¸åŒçš„æ¨¡å—ï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶çš„å¯ä»¥é€šè¿‡æ¨¡å—æ¥æŠŠç³»ç»Ÿåˆ‡åˆ†æˆå•†åŸã€æ¨èã€è¯„è®ºã€ç”¨æˆ·ç­‰å‡ ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼šæ¯ä¸ªæœåŠ¡æœ‰è‡ªå·±ç‹¬ç«‹çš„ç‰ˆæœ¬åº“å’Œæ•°æ®åº“ï¼ŒæœåŠ¡ä¹‹é—´é€šè¿‡ RPC æ¥é€šä¿¡ã€‚ä¸åŒçš„æœåŠ¡æ‹¥æœ‰è‡ªå·±çš„ç‰ˆæœ¬åº“ï¼Œå¯ä»¥ä½¿ç”¨é€‚åˆè‡ªå·±çš„æŠ€æœ¯æ ˆå’Œç¡¬ä»¶ï¼Œç‹¬ç«‹å¼€å‘ç‹¬ç«‹éƒ¨ç½²ã€‚</p><p>ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯å¦‚ä½•ç¡®å®šæœåŠ¡ç²’åº¦çš„å¤§å°ï¼Œè™½ç„¶æŒ‰ç…§åº·å¨å®šå¾‹çš„æè¿°åªè¦æŒ‰ç…§ç»„ç»‡æ¶æ„çš„å¤§å°æ¥ç¡®å®šæœåŠ¡çš„å¤§å°å³å¯ï¼Œä½†æ˜¯å¦‚ä½•è§„åˆ’ä¸€ä¸ªåˆç†çš„å›¢é˜Ÿè§„æ¨¡å‘¢ï¼Ÿå®é™…ä¸Šå¹¶æ²¡æœ‰ä¸€ä¸ªç²¾ç¡®çš„ç­”æ¡ˆï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§å®¢è§‚æƒ…å†µæ¥ç¡®å®šä¸€ä¸ªé€‚åˆè‡ªå·±çš„å¤§å°é€‚ä¸­çš„æœåŠ¡ç²’åº¦ï¼Œè¿‡å°çš„ç²’åº¦ä¼šå¯¼è‡´æœåŠ¡ä¹‹é—´å¼ºè€¦åˆï¼Œè¿‡å¤§çš„ç²’åº¦åˆ™èƒŒç¦»äº†å¾®æœåŠ¡çš„åˆè¡·ï¼ŒUber ç”šè‡³è¿˜é’ˆå¯¹æœåŠ¡ç²’åº¦å¤§å°é—®é¢˜å‘æ˜äº†ä¸€ä¸ª<a href="https://mp.weixin.qq.com/s/1P_5mMeZQ8YQzybLmjENLg" target="_blank" rel="noopener">å®æœåŠ¡</a>çš„æ¦‚å¿µï¼Œæœ‰å…´è¶£çš„è¯»è€…ä¸å¦¨çœ‹çœ‹ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/ms02-20210514145255339-2021-05-14-mujm29.png" alt></p><p>å½“æˆ‘ä»¬æŠŠå•ä½“æ¶æ„åˆ‡åˆ†æˆç‹¬ç«‹çš„æœåŠ¡ä¹‹åï¼ŒåŸæœ¬æ¨¡å—é—´æœ¬åœ°çš„å‡½æ•°è°ƒç”¨å˜æˆäº†æœåŠ¡é—´è¿œç¨‹çš„ RPC è°ƒç”¨ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å¤„ç†æœåŠ¡æ²»ç†ä¹‹ç±»çš„é—®é¢˜ï¼Œéšç€å¾®æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œé—®é¢˜ä¼šå˜å¾—è¶Šæ¥è¶Šæ£˜æ‰‹ï¼Œå¥½åœ¨éšç€äº‘åŸç”Ÿçš„å‘å±•ï¼Œç‰¹åˆ«æ˜¯ <a href="https://kubernetes.io/" target="_blank" rel="noopener">K8S</a> å’Œ <a href="https://istio.io/" target="_blank" rel="noopener">istio</a> ç­‰æŠ€æœ¯çš„æˆç†Ÿï¼Œæˆ‘ä»¬çš„æ¶æ„å¯ä»¥æ¼”åŒ–åˆ° <a href="https://www.servicemesher.com/" target="_blank" rel="noopener">service mesh</a> é˜¶æ®µï¼Œé€šè¿‡ sidecar é€æ˜å®ç°æœåŠ¡æ²»ç†ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/ms03-2021-05-14-7Q6UhO.png" alt></p><p>å¦‚æœä»…ä»…æ˜¯æŠŠåŸæœ¬æ¨¡å—é—´æœ¬åœ°çš„å‡½æ•°è°ƒç”¨å˜æˆäº†æœåŠ¡é—´è¿œç¨‹çš„ RPC è°ƒç”¨çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¾®æœåŠ¡å¾ˆå¯èƒ½ä¼šæ²¦ä¸ºã€Œ<a href="https://skyao.io/talk/202007-microservice-avoiding-distributed-monoliths/" target="_blank" rel="noopener">åˆ†å¸ƒå¼å•ä½“</a>ã€ã€‚é—®é¢˜çš„ç—‡ç»“åœ¨äºè¿‡åº¦ä½¿ç”¨ RPCï¼Œå¯¼è‡´æœåŠ¡ä¸æœåŠ¡ä¹‹é—´å¼ºè€¦åˆï¼Œè§£å†³æ–¹æ³•æ˜¯å¼•å…¥ Eventï¼Œé€šè¿‡ Event å®ç°æœåŠ¡ä¸æœåŠ¡çš„è§£è€¦ã€‚</p><p>çœ‹çœ‹å¦‚ä½•å®ç°ä¸‹é¢çš„ä¸šåŠ¡é€»è¾‘ï¼šå½“ä¸€ä¸ªç”¨æˆ·æ³¨å†Œåï¼Œè¦åœ¨å•†åŸé‡Œç»™ç”¨æˆ·ä¸€å¼ ä¼˜æƒ åˆ¸ã€‚</p><ul><li>ä½¿ç”¨ RPCï¼ˆå¼ºè°ƒåšä»€ä¹ˆï¼‰ï¼šå½“ç”¨æˆ·æ¨¡å—åˆ›å»ºäº†ä¸€ä¸ªæ–°ç”¨æˆ·çš„æ—¶å€™ï¼Œé€šè¿‡ RPC è°ƒç”¨å•†åŸæ¨¡å—ç»™ç”¨æˆ·ä¸€å¼ ä¼˜æƒ åˆ¸ï¼Œè¿‡ç¨‹ä¸­ç”¨æˆ·æ¨¡å—å’Œå•†åŸæ¨¡å—æ˜¯å¼ºè€¦åˆçš„ã€‚</li><li>ä½¿ç”¨ Eventï¼ˆå¼ºè°ƒå‘ç”Ÿäº†ä»€ä¹ˆï¼‰ï¼šå½“ç”¨æˆ·æ¨¡å—åˆ›å»ºäº†ä¸€ä¸ªæ–°ç”¨æˆ·çš„æ—¶å€™ï¼Œå®ƒå‘å‡ºä¸€ä¸ª UserCreated äº‹ä»¶ï¼Œå•†åŸæ¨¡å—è§‚å¯Ÿåˆ°å¯¹åº”çš„äº‹ä»¶åï¼Œç»™ç”¨æˆ·ä¸€å¼ ä¼˜æƒ åˆ¸ï¼Œè¿‡ç¨‹ä¸­ç”¨æˆ·æ¨¡å—å’Œå•†åŸæ¨¡å—æ˜¯å¼±è€¦åˆçš„ã€‚</li></ul><p>å®é™…æƒ…å†µä¸­åº”è¯¥æŒ‰éœ€æ±‚æ¥é€‰æ‹©ä½¿ç”¨ RPC æˆ–è€… Eventï¼šå¦‚æœæ˜¯ä¸šåŠ¡é€»è¾‘çš„å®ç°éƒ¨åˆ†ï¼Œå€¾å‘äºé€‰æ‹©ä½¿ç”¨ RPCï¼›å¦‚æœæ˜¯ä¸šåŠ¡é€»è¾‘å®Œæˆä¹‹åçš„åç»­é€šçŸ¥éƒ¨åˆ†ï¼Œå¼ºçƒˆå»ºè®®é€‰æ‹©ä½¿ç”¨ Eventã€‚</p><p><img src="https://img.hi-linux.com/staticfile/ms04-2021-05-14-mw4b0B.png" alt></p><p>æœåŠ¡éƒ¨ç½²å¥½äº†ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘å¦‚ä½•æš´éœ²æœåŠ¡ä»¥ä¾›å‰ç«¯è°ƒç”¨ï¼Œæ¯”å¦‚ç”¨æˆ·æµè§ˆæŸä¸ªå•†å“çš„è¯¦æƒ…é¡µï¼Œå†…å®¹åŒ…æ‹¬å•†å“æ•°æ®ã€ä»¥åŠå¯¹åº”çš„æ¨èæ•°æ®å’Œè¯„è®ºæ•°æ®ï¼Œå¦‚æœç›´æ¥æ“ä½œæœåŠ¡çš„è¯ï¼Œé‚£ä¹ˆéœ€è¦å¤šæ¬¡æŸ¥è¯¢å•†å“æœåŠ¡ã€æ¨èæœåŠ¡ã€è¯„è®ºæœåŠ¡ï¼Œå¹¶ä¸å¯å–ï¼Œæ­¤æ—¶å¯ä»¥åŠ å…¥ <a href="https://microservices.io/patterns/apigateway.html" target="_blank" rel="noopener">API Gateway</a> å……å½“ä»£ç†ï¼Œå‰ç«¯åªè¦è¯·æ±‚ API Gateway ä¸€æ¬¡å°±å¯ä»¥æ‹¿åˆ°æ•°æ®ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/ms05-2021-05-14-oA6Kbk.png" alt></p><p>æœ‰äº† API Gateway ä¹‹åï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬å®Œæˆèšåˆä¹‹ç±»çš„é€»è¾‘ã€‚ä¸è¿‡æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯å‰ç«¯å¯èƒ½æœ‰å¤šç§ä¸åŒçš„ç±»å‹ï¼Œæ¯”å¦‚ PC å‰ç«¯ï¼ŒMobile å‰ç«¯ï¼Œå®ƒä»¬çš„ä¸šåŠ¡é€»è¾‘ä¸å¯é¿å…çš„ä¼šæœ‰å„ç§å„æ ·çš„å·®å¼‚ï¼Œå¦‚æœåœ¨ API Gateway ä¸­å¤„ç†è¿™äº›å·®å¼‚çš„è¯ï¼Œé‚£ä¹ˆä¼šå‡ºç°åå‘³é“ï¼Œä¸ºäº†è§£å†³æ­¤ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥ <a href="https://microservices.io/patterns/apigateway.html" target="_blank" rel="noopener">BFF</a>ï¼ˆBackend For Frontendï¼‰ï¼Œæ¯ä¸€ç§å‰ç«¯éƒ½æœ‰å±äºè‡ªå·±çš„ BFFï¼Œç”¨æ¥å¤„ç†ä¸“å±äºè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œè‡³äº API Gatewayï¼Œåˆ™åªå¤„ç†é‰´æƒï¼Œæ—¥å¿—ç­‰å…¬å…±ä¸šåŠ¡é€»è¾‘ã€‚</p><p><img src="https://img.hi-linux.com/staticfile/ms06-2021-05-14-teyyms.png" alt></p><p>å¾®æœåŠ¡æ˜¯ä¸ªæå…¶å¤æ‚çš„æ¦‚å¿µï¼Œæœ¬æ–‡ä»…å°±ä¸€äº›è¡¨é¢é—®é¢˜æµ…è°ˆä¸€äºŒï¼Œå…¶ä»–è¯¸å¦‚ <a href="https://microservices.io/patterns/data/saga.html" target="_blank" rel="noopener">SAGA</a> ä¹‹ç±»çš„å¤æ‚é—®é¢˜ï¼Œç”±äºç¯‡å¹…æ‰€é™ï¼Œå¹¶æœªæ¶‰çŒï¼Œå¤§å®¶å¦‚æœæœ‰å…´è¶£çš„è¯è¯·è‡ªè¡ŒæŸ¥é˜…ã€‚</p><p>æœ€åæŠŠ <a href="https://martinfowler.com/" target="_blank" rel="noopener">Martin Fowler</a> åœ¨ <a href="https://www.martinfowler.com/books/eaa.html" target="_blank" rel="noopener">PoEAA</a> ä¸­æå‡ºçš„<a href="https://martinfowler.com/bliki/FirstLaw.html" target="_blank" rel="noopener">åˆ†å¸ƒå¼å¯¹è±¡ç¬¬ä¸€å®šå¾‹</a>é€ç»™å¤§å®¶ï¼šä¸è¦åˆ†å¸ƒä½ çš„å¯¹è±¡ï¼å¥—ç”¨è¿™ä¸ªè¯´æ³•çš„è¯ï¼Œä¸éš¾å¼•ç”³å‡ºå¾®æœåŠ¡ç¬¬ä¸€å®šå¾‹ï¼šä¸è¦ä½¿ç”¨å¾®æœåŠ¡ï¼è™½ç„¶è¯é‡Œæœ‰ä¸€äº›æˆè™çš„æˆä»½ï¼Œä½†æ˜¯å®ƒè‡³å°‘å‘Šè¯«æˆ‘ä»¬åœ¨é¢å¯¹å¾®æœåŠ¡çš„æ—¶å€™è¦æ€€æ£ç€ä¸€é¢—æ•¬ç•çš„å¿ƒã€‚</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ ç«ä¸ç¬”è®° ã€ï¼ŒåŸæ–‡ï¼š<a href="http://t.cn/A6VzZPdg" target="_blank" rel="noopener">http://t.cn/A6VzZPdg</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è™½è¯´&lt;a href=&quot;https://martinfowler.com/articles/microservices.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å¾®æœåŠ¡&lt;/a&gt;æ—©å·²æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜äº†ï¼Œåœ¨ &lt;a href=&quot;https://www.infoq.cn/topic/microservice&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;infoq&lt;/a&gt; æˆ–è€… &lt;a href=&quot;https://insights.thoughtworks.cn/tag/microservices/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;thoughtworks&lt;/a&gt; ä¸Šå¯ä»¥æ‰¾åˆ°å¾ˆå¤šæ¡ˆä¾‹ï¼Œä¸è¿‡å¯æƒœçš„æ˜¯å…¶ä¸­ç›¸å½“æ¯”ä¾‹çš„æ¡ˆä¾‹æ˜¯å¤±è´¥çš„æ¡ˆä¾‹ï¼Œç©¶å…¶åŸå› ï¼Œé™¤äº†&lt;a href=&quot;https://microservices.io/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æŠ€æœ¯é—¨æ§›&lt;/a&gt;ä¹‹å¤–ï¼Œä¸»è¦æ˜¯å› ä¸ºå¾ˆå¤šäººè„±ç¦»äº†å®é™…æƒ…å†µï¼Œåªæ˜¯ä¸ºäº†å¾®æœåŠ¡è€Œå¾®æœåŠ¡ã€‚æœ¬æ–‡é€šè¿‡ä¸€ä¸ªä¾‹å­å¸¦é¢†å¤§å®¶ä»å¤´åˆ°å°¾ä½“éªŒä¸€ä¸‹å¾®æœåŠ¡çš„æ¼”åŒ–è¿‡ç¨‹ï¼Œä¸ä»…è¦åšåˆ°çŸ¥å…¶ç„¶ï¼Œæ›´è¦åšåˆ°çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¾®æœåŠ¡" scheme="https://www.hi-linux.com/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="å¾®æœåŠ¡" scheme="https://www.hi-linux.com/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•åœ¨ Linuxä¸‹ä¼˜é›…çš„è¿›è¡Œå¤§æ–‡ä»¶åˆ‡å‰²ä¸åˆå¹¶</title>
    <link href="https://www.hi-linux.com/posts/15581.html"/>
    <id>https://www.hi-linux.com/posts/15581.html</id>
    <published>2021-06-10T01:00:00.000Z</published>
    <updated>2021-06-10T09:50:38.834Z</updated>
    
    <content type="html"><![CDATA[<div id="vip-container"><blockquote><p><strong>å¾€å¾€æ˜¯å› ä¸ºç½‘ç»œä¼ è¾“çš„é™åˆ¶ï¼Œå¯¼è‡´å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Linux ç³»ç»Ÿä¸‹è¿›è¡Œå¤§æ–‡ä»¶çš„åˆ‡å‰²ã€‚è¿™æ ·å°†ä¸€ä¸ªå¤§æ–‡ä»¶åˆ‡å‰²æˆä¸ºå¤šä¸ªå°æ–‡ä»¶ï¼Œè¿›è¡Œä¼ è¾“ï¼Œä¼ è¾“å®Œæ¯•ä¹‹åè¿›è¡Œåˆå¹¶å³å¯ã€‚</strong></p></blockquote><h2><span id="1-æ–‡ä»¶åˆ‡å‰²-split">1. æ–‡ä»¶åˆ‡å‰² - split</span></h2><blockquote><p><strong>åœ¨ Linux ç³»ç»Ÿä¸‹ä½¿ç”¨ split å‘½ä»¤è¿›è¡Œå¤§æ–‡ä»¶åˆ‡å‰²å¾ˆæ–¹ä¾¿</strong></p></blockquote><ul><li><strong>[1] å‘½ä»¤è¯­æ³•</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -a: æŒ‡å®šè¾“å‡ºæ–‡ä»¶åçš„åç¼€é•¿åº¦(é»˜è®¤ä¸º2ä¸ª:aa,ab...)</span></span><br><span class="line"><span class="comment"># -d: æŒ‡å®šè¾“å‡ºæ–‡ä»¶åçš„åç¼€ç”¨æ•°å­—ä»£æ›¿</span></span><br><span class="line"><span class="comment"># -l: è¡Œæ•°åˆ†å‰²æ¨¡å¼(æŒ‡å®šæ¯å¤šå°‘è¡Œåˆ‡æˆä¸€ä¸ªå°æ–‡ä»¶;é»˜è®¤è¡Œæ•°æ˜¯1000è¡Œ)</span></span><br><span class="line"><span class="comment"># -b: äºŒè¿›åˆ¶åˆ†å‰²æ¨¡å¼(æ”¯æŒå•ä½:k/m)</span></span><br><span class="line"><span class="comment"># -C: æ–‡ä»¶å¤§å°åˆ†å‰²æ¨¡å¼(åˆ‡å‰²æ—¶å°½é‡ç»´æŒæ¯è¡Œçš„å®Œæ•´æ€§)</span></span><br><span class="line">split [-a] [-d] [-l &lt;è¡Œæ•°&gt;] [-b &lt;å­—èŠ‚&gt;] [-C &lt;å­—èŠ‚&gt;] [è¦åˆ‡å‰²çš„æ–‡ä»¶] [è¾“å‡ºæ–‡ä»¶å]</span><br></pre></td></tr></table></figure><a id="more"></a><ul><li><strong>[2] ä½¿ç”¨å®ä¾‹</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¡Œåˆ‡å‰²æ–‡ä»¶</span></span><br><span class="line">$ split -l 300000 users.sql /data/users_</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨æ•°å­—åç¼€</span></span><br><span class="line">$ split -d -l 300000 users.sql /data/users_</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‰å­—èŠ‚å¤§å°åˆ†å‰²</span></span><br><span class="line">$ split -d -b 100m users.sql /data/users_</span><br></pre></td></tr></table></figure><ul><li><strong>[3] å¸®åŠ©ä¿¡æ¯</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">$ split --<span class="built_in">help</span></span><br><span class="line">Usage: split [OPTION]... [FILE [PREFIX]]</span><br><span class="line">Output pieces of FILE to PREFIXaa, PREFIXab, ...;</span><br><span class="line">default size is 1000 lines, and default PREFIX is <span class="string">'x'</span>.</span><br><span class="line"></span><br><span class="line">With no FILE, or when FILE is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -a, --suffix-length=N   generate suffixes of length N (default 2)            åç¼€åç§°çš„é•¿åº¦(é»˜è®¤ä¸º2)</span><br><span class="line">      --additional-suffix=SUFFIX  append an additional SUFFIX to file names</span><br><span class="line">  -b, --bytes=SIZE        put SIZE bytes per output file                       æ¯ä¸ªè¾“å‡ºæ–‡ä»¶çš„å­—èŠ‚å¤§å°</span><br><span class="line">  -C, --line-bytes=SIZE   put at most SIZE bytes of records per output file    æ¯ä¸ªè¾“å‡ºæ–‡ä»¶çš„æœ€å¤§å­—èŠ‚å¤§å°</span><br><span class="line">  -d                      use numeric suffixes starting at 0, not alphabetic   ä½¿ç”¨æ•°å­—åç¼€ä»£æ›¿å­—æ¯åç¼€</span><br><span class="line">      --numeric-suffixes[=FROM]  same as -d, but allow setting the start value</span><br><span class="line">  -e, --elide-empty-files  <span class="keyword">do</span> not generate empty output files with <span class="string">'-n'</span>        ä¸äº§ç”Ÿç©ºçš„è¾“å‡ºæ–‡ä»¶</span><br><span class="line">      --filter=COMMAND    write to shell COMMAND; file name is <span class="variable">$FILE</span>           å†™å…¥åˆ°shellå‘½ä»¤è¡Œ</span><br><span class="line">  -l, --lines=NUMBER      put NUMBER lines/records per output file             è®¾å®šæ¯ä¸ªè¾“å‡ºæ–‡ä»¶çš„è¡Œæ•°</span><br><span class="line">  -n, --number=CHUNKS     generate CHUNKS output files; see explanation below  äº§ç”Ÿchunksæ–‡ä»¶</span><br><span class="line">  -t, --separator=SEP     use SEP instead of newline as the record separator;  ä½¿ç”¨æ–°å­—ç¬¦åˆ†å‰²</span><br><span class="line">                            <span class="string">'\0'</span> (zero) specifies the NUL character</span><br><span class="line">  -u, --unbuffered        immediately copy input to output with <span class="string">'-n r/...'</span>     æ— éœ€ç¼“å­˜</span><br><span class="line">      --verbose           <span class="built_in">print</span> a diagnostic just before each                  æ˜¾ç¤ºåˆ†å‰²è¿›åº¦</span><br><span class="line">                            output file is opened</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span>                                    æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</span><br><span class="line">      --version  output version information and <span class="built_in">exit</span>                           æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">The SIZE argument is an <span class="built_in">integer</span> and optional unit (example: 10K is 10*1024).</span><br><span class="line">Units are K,M,G,T,P,E,Z,Y (powers of 1024) or KB,MB,... (powers of 1000).</span><br><span class="line"></span><br><span class="line">CHUNKS may be:</span><br><span class="line">  N       split into N files based on size of input</span><br><span class="line">  K/N     output Kth of N to stdout</span><br><span class="line">  l/N     split into N files without splitting lines/records</span><br><span class="line">  l/K/N   output Kth of N to stdout without splitting lines/records</span><br><span class="line">  r/N     like <span class="string">'l'</span> but use round robin distribution</span><br><span class="line">  r/K/N   likewise but only output Kth of N to stdout</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/split&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) split invocation'</span></span><br></pre></td></tr></table></figure><h2><span id="2-æ–‡ä»¶åˆå¹¶-cat">2. æ–‡ä»¶åˆå¹¶ - cat</span></h2><blockquote><p><strong>åœ¨ Linux ç³»ç»Ÿä¸‹ä½¿ç”¨ cat å‘½ä»¤è¿›è¡Œå¤šä¸ªå°æ–‡ä»¶çš„åˆå¹¶ä¹Ÿå¾ˆæ–¹ä¾¿</strong></p></blockquote><ul><li><strong>[1] å‘½ä»¤è¯­æ³•</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -n: æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line"><span class="comment"># -e: ä»¥$å­—ç¬¦ä½œä¸ºæ¯è¡Œçš„ç»“å°¾</span></span><br><span class="line"><span class="comment"># -t: æ˜¾ç¤ºTABå­—ç¬¦(^I)</span></span><br><span class="line">cat [-n] [-e] [-t] [è¾“å‡ºæ–‡ä»¶å]</span><br></pre></td></tr></table></figure><ul><li><strong>[2] ä½¿ç”¨å®ä¾‹</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå¹¶æ–‡ä»¶</span></span><br><span class="line">$ cat /data/users_* &gt; users.sql</span><br></pre></td></tr></table></figure><ul><li><strong>[3] å¸®åŠ©ä¿¡æ¯</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">$ cat --h</span><br><span class="line">Usage: cat [OPTION]... [FILE]...</span><br><span class="line">Concatenate FILE(s) to standard output.</span><br><span class="line"></span><br><span class="line">With no FILE, or when FILE is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">  -A, --show-all           equivalent to -vET</span><br><span class="line">  -b, --number-nonblank    number nonempty output lines, overrides -n</span><br><span class="line">  -e                       equivalent to -vE</span><br><span class="line">  -E, --show-ends          display $ at end of each line</span><br><span class="line">  -n, --number             number all output lines</span><br><span class="line">  -s, --squeeze-blank      suppress repeated empty output lines</span><br><span class="line">  -t                       equivalent to -vT</span><br><span class="line">  -T, --show-tabs          display TAB characters as ^I</span><br><span class="line">  -u                       (ignored)</span><br><span class="line">  -v, --show-nonprinting   use ^ and M- notation, except <span class="keyword">for</span> LFD and TAB</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">  cat f - g  Output f<span class="string">'s contents, then standard input, then g'</span>s contents.</span><br><span class="line">  cat        Copy standard input to standard output.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/cat&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) cat invocation'</span></span><br></pre></td></tr></table></figure><h2><span id="3-å‚è€ƒæ–‡æ¡£">3. å‚è€ƒæ–‡æ¡£</span></h2><ul><li><a href="https://www.cnblogs.com/bymo/p/7571320.html" target="_blank" rel="noopener">Linux å¤§æ–‡ä»¶çš„åˆ†å‰²ä¸åˆå¹¶</a></li><li><a href="https://www.jianshu.com/p/014ec71b0215" target="_blank" rel="noopener">Linux å­¦ä¹ â€“æ–‡ä»¶åˆ†å‰²ä¸åˆå¹¶</a></li></ul><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œ Escape çš„åšå®¢ ã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/y3zhsyyw%EF%BC%8C%E7%89%88%E6%9D%83%E5%BD%92%E5%8E%9F%E4%BD%9C%E8%80%85%E6%89%80%E6%9C%89%E3%80%82%E6%AC%A2%E8%BF%8E%E6%8A%95%E7%A8%BF%EF%BC%8C%E6%8A%95%E7%A8%BF%E9%82%AE%E7%AE%B1:" target="_blank" rel="noopener">https://tinyurl.com/y3zhsyywï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±:</a> <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote></div><script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script><script>var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if (!isMobile) {    var btw = new BTWPlugin();    btw.init({        "id": "vip-container",        "blogId": "10135-1588830050631-449",        "name": "ã€Œå¥‡å¦™çš„ Linux ä¸–ç•Œã€",        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",        "keyword": "VIP"    });}</script>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¾€å¾€æ˜¯å› ä¸ºç½‘ç»œä¼ è¾“çš„é™åˆ¶ï¼Œå¯¼è‡´å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Linux ç³»ç»Ÿä¸‹è¿›è¡Œå¤§æ–‡ä»¶çš„åˆ‡å‰²ã€‚è¿™æ ·å°†ä¸€ä¸ªå¤§æ–‡ä»¶åˆ‡å‰²æˆä¸ºå¤šä¸ªå°æ–‡ä»¶ï¼Œè¿›è¡Œä¼ è¾“ï¼Œä¼ è¾“å®Œæ¯•ä¹‹åè¿›è¡Œåˆå¹¶å³å¯ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;1-æ–‡ä»¶åˆ‡å‰²-split&quot;&gt;1. æ–‡ä»¶åˆ‡å‰² - split&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ Linux ç³»ç»Ÿä¸‹ä½¿ç”¨ split å‘½ä»¤è¿›è¡Œå¤§æ–‡ä»¶åˆ‡å‰²å¾ˆæ–¹ä¾¿&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;[1] å‘½ä»¤è¯­æ³•&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -a: æŒ‡å®šè¾“å‡ºæ–‡ä»¶åçš„åç¼€é•¿åº¦(é»˜è®¤ä¸º2ä¸ª:aa,ab...)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -d: æŒ‡å®šè¾“å‡ºæ–‡ä»¶åçš„åç¼€ç”¨æ•°å­—ä»£æ›¿&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -l: è¡Œæ•°åˆ†å‰²æ¨¡å¼(æŒ‡å®šæ¯å¤šå°‘è¡Œåˆ‡æˆä¸€ä¸ªå°æ–‡ä»¶;é»˜è®¤è¡Œæ•°æ˜¯1000è¡Œ)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -b: äºŒè¿›åˆ¶åˆ†å‰²æ¨¡å¼(æ”¯æŒå•ä½:k/m)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# -C: æ–‡ä»¶å¤§å°åˆ†å‰²æ¨¡å¼(åˆ‡å‰²æ—¶å°½é‡ç»´æŒæ¯è¡Œçš„å®Œæ•´æ€§)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;split [-a] [-d] [-l &amp;lt;è¡Œæ•°&amp;gt;] [-b &amp;lt;å­—èŠ‚&amp;gt;] [-C &amp;lt;å­—èŠ‚&amp;gt;] [è¦åˆ‡å‰²çš„æ–‡ä»¶] [è¾“å‡ºæ–‡ä»¶å]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="https://www.hi-linux.com/categories/Linux/"/>
    
    
      <category term="æŠ€å·§" scheme="https://www.hi-linux.com/tags/%E6%8A%80%E5%B7%A7/"/>
    
      <category term="Linux" scheme="https://www.hi-linux.com/tags/Linux/"/>
    
      <category term="Shell" scheme="https://www.hi-linux.com/tags/Shell/"/>
    
  </entry>
  
</feed>
