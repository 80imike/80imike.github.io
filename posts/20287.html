<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="Linux,运维,Nginx,Zabbix,Centos,Ansible,MySQL,Python,Docker,ELK,Haproxy,Git,Nodejs,安全,技术">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          史上最全的 Linux 运维工程师面试题 - 奇妙的 Linux 世界
        
    </title>

    <link rel="canonical" href="https://www.hi-linux.com/posts/20287.html">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
<link rel="stylesheet" href="/css/beantech.min.css">

    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/toc.css">


    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="奇妙的 Linux 世界" type="application/atom+xml">
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('/img/header_img/building.jpg')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#技巧" title="技巧">技巧</a>
                            
                              <a class="tag" href="/tags/#Linux" title="Linux">Linux</a>
                            
                              <a class="tag" href="/tags/#运维" title="运维">运维</a>
                            
                        </div>
                        <h1>史上最全的 Linux 运维工程师面试题</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Mike on
                            2020-05-17
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">奇妙的 Linux 世界</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <div id="vip-container"><h3><span id="linux-基础知识篇">Linux 基础知识篇</span></h3>
<p>这一套题算是简单的，考的内容基本是 Linux 基本原理、查找命令、计划命令、防火墙设置等，以上这四点基本算是初级内容。</p>
<ol>
<li>说说 Linux 启动大致过程？</li>
</ol>
<p>加载 BIOS–&gt;读取 MBR–&gt;Boot Loader–&gt;加载内核–&gt;用户层 Init 依据 Inittab 文件来设定系统运行的等级(一般 3 或者 5，3 是多用户命令行，5 是图形界面)–&gt;Init 进程执行 rc.syninit–&gt;启动内核模块–&gt;执行不同级别运行的脚本程序–&gt;执行 /etc/rc.d/rc.local (本地运行服务)–&gt;执行 /bin/login,就可以登录了。</p>
<p>基本看过 「鸟哥 Linux 私房菜」的就能知道，这是第五章管理员的第一个内容。</p>
<p>这道题可以扩展一下：Init 系统运行等级一共有几种，每一种都是什么？</p>
<p>0：关机，只要是0就不能开机<br>
1：单用户模式，不能被远程登陆<br>
2：多用户不能上网模式<br>
3：多用户可以上网模式<br>
4：未使用<br>
5：有图形的 Linux<br>
6：重启，只要是 6 就会不断的重启,子子孙孙无穷匮焉的重启</p>
<a id="more"></a>
<ol start="2">
<li>Linux 系统是由那些部分组成？</li>
</ol>
<p>Linux 由系统内核，Shell，文件系统和应用程序四部分组成。</p>
<ol start="3">
<li>Apache 有几种工作模式，分别简述其工作模式及其优缺点？</li>
</ol>
<p>Apache 主要有两种工作模式：Prefork (Apache 的默认安装模式)和 Worker( 可以在编译的时候添加 --with-mpm=worker 选项来指定)</p>
<p>Prefork 的特点是：预派生</p>
<ul>
<li>这种模式可以不必在请求到来时再产生新的进程，从而减小了系统开销</li>
<li>可以防止意外的内存泄漏</li>
<li>在服务器负载下降的时候会自动减少子进程数</li>
</ul>
<p>Worker的特点是：支持混合的多线程多进程的多路处理模块</p>
<p>如果对于一个高流量的 HTTP 服务器，Worker MPM 是一个比较好的选择，因为 Worker MPM 占用的内存要比 Prefork 更小。</p>
<ol start="4">
<li>说说 LVS 三种工作模式的工作过程？</li>
</ol>
<p>LVS 就是 Linux Virtual Server，Linux 虚拟服务器。</p>
<ul>
<li>NAT (Network Address Translation) 模式。LB 收到用户请求包后，LB 将请求包中虚拟服务器的 IP 地址转换为某个选定 RS 的 IP 地址，转发给 RS；RS 将应答包发给 LB，LB 将应答包中 RS 的 IP 转为虚拟服务器的 IP 地址，回送给用户。</li>
<li>IP 隧道 (IP Tunneling)模式。LB 收到用户请求包后，根据 IP 隧道协议封装该包，然后传给某个选定的 RS；RS 解出请求信息，直接将应答内容传给用户。此时要求 RS 和 LB 都要支持 IP 隧道协议。</li>
<li>DR (Direct Routing) 模式。LB 收到请求包后，将请求包中目标 MAC 地址转换为某个选定 RS 的 MAC 地址后将包转发出去，RS 收到请求包后 ,可直接将应答内容传给用户。此时要求 LB 和所有 RS 都必须在一个物理段内,且 LB 与 RS 群共享一个虚拟 IP。</li>
</ul>
<ol start="5">
<li>列出 Linux 常见打包工具并写相应解压缩参数(至少三种)？</li>
</ol>
<p>Tar 命令就是打包工具，对应的解压缩参数 tar -cvf、 tar -zcvf、 tar -jcvf 是对应拆包解压什么文件的要对应记住，不要记混。</p>
<ol start="6">
<li>一个 EXT3 的文件分区，当用 touch 新建文件时报错，错误信息是磁盘已满，但是使用 df -H 查看分区信息时只使用了 50%，请分析具体原因？</li>
</ol>
<p>两种情况：一种是磁盘配额问题，另外一种就是 EXT3 文件系统的设计不适合很多小文件跟大文件的一种文件格式，出现很多小文件时，容易导致 Inode 耗尽了。</p>
<ol start="7">
<li>请使用 Linux 系统命令统计出 establish 状态的连接数有多少?</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -an |grep ESTABLISHED |wc -l</span><br></pre></td></tr></table></figure>
<p>netstat命令 -a 参数是显示所有链接，-n 是不要域名解析，即都是以数字 IP 的显示。</p>
<p>现实生产系统的时候，如果服务器维持的链接是成千上万的话，少用 netstat，多用 ss。</p>
<ol start="8">
<li>如何统计出一台 Web Server 上的各个状态（ESTABLISHED / SYN_SENT / SYN_RECV 等）的个数？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -antl|grep ESTABLISTHED|wc -l</span><br><span class="line">$ netstat -antl|grep SYN_SENT|wc -l</span><br><span class="line">$ netstat -antl|grep SYN_RECV|wc -l</span><br></pre></td></tr></table></figure>
<p>netstat 命令的 -t 参数是查询 TCP 协议的链接,-l 参数是查询 Listen 状态下的链接。</p>
<p>netstat -an 的话会出现大概三个部分的内容，一部分是 TCP 协议内容，一部分是 UDP 协议的内容，还有一部分是 Unix Socket 方面的链接，Active UNIX domain sockets (servers and established)。</p>
<ol start="9">
<li>查找 /usr/local/apache/logs 目录最后修改时间大于 30 天的文件并删除</li>
</ol>
<p>find 命令以及相关搭配命令是笔试中的重点，因为在现实中运用的情况最多，所以必考必考必考！！！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find &#x2F;usr&#x2F;local&#x2F;apache&#x2F;logs -type f -mtime +30 -ok rm &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>使用 mtime +30 来描述修改时间大于 30 天，使用 -type -f 来描述文件，然后使用 -ok 命令将所有满足的文件都执行下一步操作。</p>
<p>这里是删除文件，所以比较人性化的用 ok，删之前询问一下，如果简单暴力就可以直接 -exec，直接枪毙掉。用了 -exec 的话是不用 -f 的，多此一举。</p>
<ol start="10">
<li>编写个 Shell 脚本将 /usr/local/test 目录下大于 100K 的文件转移到 /tmp 目录</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch AAA.sh</span><br><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">find &#x2F;usr&#x2F;local&#x2F;test&#x2F; -size +100K -exec mv &#123;&#125; &#x2F;tmp \;</span><br></pre></td></tr></table></figure>
<p>注：-exec and -ok 后面的花括号里面的内容就是使用 find 命令查找出来的文件名。</p>
<ol start="11">
<li>添加一条到 192.168.3.0/24 的路由，网关为 192.168.1.254？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ route add -net 192.168.3.0 netmask 255.255.255.0 gw 192.168.1.254  或者  route add -net 192.168.3.0&#x2F;24 gw 192.168.1.254</span><br></pre></td></tr></table></figure>
<p>注：route 命令是临时性的增加路由，如果需要永久性的添加路由方法如下：</p>
<p>方法一</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim etc&#x2F;rc.local</span><br><span class="line">route add -net 192.168.3.0&#x2F;24 gw 192.168.1.254。</span><br></pre></td></tr></table></figure>
<p>方法二</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vim etc&#x2F;sysconfig&#x2F;network </span><br><span class="line">GATEWAY&#x3D;192.168.1.254</span><br></pre></td></tr></table></figure>
<ol start="12">
<li>在每周 6 的凌晨 3:15 执行 /home/shell/collect.pl，并将标准输出和标准错误输出到 /dev/null 设备，请写出 crontab 中的语句？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15 3 * * 6 sh &#x2F;home&#x2F;shell&#x2F;collect.pl  &gt; &#x2F;dev&#x2F;null  2&gt;&amp;1</span><br></pre></td></tr></table></figure>
<p>注：每一个命令的执行肯定都会有成功或者失败，系统默认 1 是 stdout 标准输出，2 是 stderr 标准错误，&amp; 的含义是等同。2&gt;&amp;1 的意思就是将错误的信息重定向输出的地方跟 1 一样，都是去空设备文件。</p>
<ol start="13">
<li>在 11 月份内，每天的早上 6 点到 12 点中，每隔 2 小时执行一次 /usr/bin/httpd.sh 怎么实现 ?</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br><span class="line">1 6-12&#x2F;2 * 11 *  bash &#x2F;usr&#x2F;bin&#x2F;httpd.sh</span><br></pre></td></tr></table></figure>
<p>crontab、at 这种计划任务命令也是面试高频题目，crontab 一共有 5个 <code>*</code>，分别表示 “分钟”、“小时”，“日期”、“月份”、“星期几”。</p>
<p>基本的结构要明白，而且 “当大数有条件，小数任意” 的情况下，小数不要用 <code>*</code>，用 0 or 1。</p>
<p>如果这道题写成 <code>* 6-12/2 * 11 * bash /usr/bin/httpd.sh</code>，你的 Apache会很爽，它会在满足条件的情况下每一分钟都启动一下。</p>
<ol start="14">
<li>匹配 AAA 文本中的 key 并打印出该行及下面的 5 行？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep -A 5 key AAA</span><br></pre></td></tr></table></figure>
<p>注：-A 是查找关键词下面的行，-B 是查找关键词上面的行，-C 是上下的行，注意这里是 grep，而不是 find。</p>
<ol start="15">
<li>查询 AAA 文件里以 abc 结尾的行？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep &quot;abc$&quot; AAA</span><br></pre></td></tr></table></figure>
<p>注：这里不是 grep “abc$” | AAA，这里没有 “|” 的，要注意。</p>
<ol start="16">
<li>打印出 AAA 文件第 1 到第 3 行？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ head -3 AAA</span><br></pre></td></tr></table></figure>
<p>也可以用 sed 命令来实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n &#39;1,3p&#39; AAA</span><br></pre></td></tr></table></figure>
<ol start="17">
<li>查询 AAA 里面空行的所在行号？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep -n &quot;^$&quot; AAA</span><br></pre></td></tr></table></figure>
<p>注意: grep -n 和 cat -n 这两个输出结果的区别。</p>
<ol start="18">
<li>利用 sed 命令将 test.txt 中所有的回车替换成空格？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed -e &quot;s&#x2F;\n&#x2F; &#x2F;g&quot; test.txt</span><br></pre></td></tr></table></figure>
<p>注：sed的 -e 参数是指多重编辑，也就是说可以 <code>sed -e ... -e .... -e....</code> 一次性完成三个动作。</p>
<ol start="19">
<li>使用 ab 命令进行 100000 次请求，同时每秒 40 次并发的频率访问 <a href="http://www.123.com/AAA.txt" target="_blank" rel="noopener">http://www.123.com/AAA.txt</a></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ab -n 100000 -c 40 http:&#x2F;&#x2F;www.123.com&#x2F;AAA.txt</span><br></pre></td></tr></table></figure>
<p>注： ab 命令是 Apache 自带的，同一个 IP 地址并发的访问网站的同一个内容其实是一个隐患。但是现在用路由器上网的情况满地走，所以优化网页的内容是码农的责任，但是适当的缩小准许并发范围是运维人员应该掌握的。</p>
<ol start="20">
<li>按照以下要求配置一个防火墙规则</li>
</ol>
<p>a. 对所有地址开放本服务器的80端口、22端口、10~21端口。<br>
b. 其他机器可以用ping命令来探测本服务器的链接情况<br>
c. 其他没有被准许的端口将禁止访问</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -I INPUT -p tcp -dport 80 -j ACCEPT</span><br><span class="line">$ iptables -I INPUT -p tcp -dport 22 -j ACCEPT</span><br><span class="line">$ iptables -I INPUT -P tcp -dport 10:21 -i ACCEPT</span><br><span class="line">$ iptables -I INPUT -p icmp -j ACCEPT</span><br><span class="line">$ iptables -I INPUT -j REJECT</span><br></pre></td></tr></table></figure>
<p>iptables 也是面试考察的一个重点内容。</p>
<p>iptables 的内容主要包括 “四表+五链”，不过具体问道哪四表哪五链的可能性很小，倒是这种结合实际情况直接让写一连串的规则考题蛮常见的。这道题很基础，写 iptables 有点在 CCNP 里写 ACL 控制访问列表的意思。</p>
<ol start="21">
<li>top 和 ps 命令在进程占有资源率的统计方式有什么不同？</li>
</ol>
<p>ps 命令是显示在执行 ps 这个命令时刻所有进程的情况，而 top 是动态的监控进程的情况。</p>
<p>top 命令显示系统总的统计信息，比如时间、CPU 情况、 内存状态和分区信息等等。</p>
<p>ps -ef 这个是一个比较常见的搭配方式，-e 是所有进程，-f 是文件之间的关系。</p>
<p>ps -aux 也是很常用的，意思是显示包含其他使用者的进程。ps 命令也可以搭配 -more 和管道符使用，也可以搭配输出重定向。</p>
<p>top -n 2 指的是更新两次之后就停；top -d 3 指的是更新周期是三秒；top -p 574 指的是显示 pid 为 574 的进程。top 状态下按 b 是显示高亮。</p>
<ol start="22">
<li>inode 存储了哪些东西？目录名，文件名存在哪里？</li>
</ol>
<p>inode 存储了文件大小、user id、group id、文件的读写执行权限、软连接硬链接被引用的次数、时间戳、block 的位置。唯独没有文件名！！！</p>
<p>目录名、文件名存在目录项里。</p>
<p>ls -i 这个是显示 inode 号码的查询方法。</p>
<p>stat 命令这个可以查询 inode 信息，使用方法为 stat AAA 即可。</p>
<ol start="23">
<li>如何查看 HTTP 的并发请求数与其 TCP 连接状态</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -n | awk &#39;&#x2F;^tcp&#x2F; &#123;++b[$NF]&#125; END &#123;for(a in b) print a, b[a]&#125;&#39;</span><br></pre></td></tr></table></figure>
<ol start="24">
<li>如何用嗅探 80 端口的访问最多的 IP</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tcpdump -i eth0 -tnn dst port 80 -c 1000 | awk -F&quot;.&quot; &#39;&#123;print $1&quot;.&quot;$2&quot;.&quot;$3&quot;.&quot;$4&#125;&#39; | sort | uniq -c | sort -nr |head -10</span><br></pre></td></tr></table></figure>
<ol start="25">
<li>如何查看当前系统每个 IP 的连接数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -n | awk &#39;&#x2F;^tcp&#x2F; &#123;print $5&#125;&#39;| awk -F: &#39;&#123;print $1&#125;&#39; | sort | uniq -c | sort -rn</span><br></pre></td></tr></table></figure>
<ol start="26">
<li>ps aux 命令中的 VSZ 代表什么意思？ RSS 代表什么意思？</li>
</ol>
<p>VSZ：虚拟内存集，进程所占用的虚拟内存的大小<br>
RSS：实际内存集，进程所占用的实际内存的大小</p>
<ol start="27">
<li>符号链接与硬链接的区别</li>
</ol>
<p>硬链接是复制，享用同一个 inode，不能跨分区，不能连目录，a 变 b 也变，但是 a 删 b 不删。<br>
符号链接就是 -s，不享用同一个 inode，可以跨分区可以连目录，等于快捷方式。</p>
<p>28 如何检测并修复 /dev/hda5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ e2fsck -p &#x2F;dev&#x2F;hda5</span><br></pre></td></tr></table></figure>
<p>如果要求是检查 /dev/hda5 是否正常，如果有异常便自动修复，并且设定若有问答均回答[是]，那么语句就是 e2fsck -a -y /dev/hda5</p>
<ol start="29">
<li>显示 /etc/inittab 中以 # 开头，且后面跟了一个或者多个空白字符，而后又跟了任意非空白字符的行</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep &#39;^# \&#123;1,\&#125;[^ ]&#39; &#x2F;etc&#x2F;inittab</span><br></pre></td></tr></table></figure>
<ol start="30">
<li>显示 /etc/inittab 中包含了 : 一个数字 :(即两个冒号中间一个数字)的行</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep &#39;\:[1-9]\&#123;1\&#125;\:&#39; &#x2F;etc&#x2F;inittab</span><br></pre></td></tr></table></figure>
<ol start="31">
<li>统计 /data/mysql 目录里的普通文件个数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find &#x2F;data&#x2F;mysql&#x2F; -type f|wc -l</span><br></pre></td></tr></table></figure>
<ol start="32">
<li>写一个脚本，实现批量添加 20 个用户，用户名为 user1-20，密码为 user 后面跟 5 个随机字符</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#description: useradd</span><br><span class="line">for i in &#96;seq -f&quot;%02g&quot; 1 20&#96;;do</span><br><span class="line">    useradd user$i</span><br><span class="line">    echo &quot;user$i-&#96;echo $RANDOM|md5sum|cut -c 1-5&#96;&quot;|passwd –stdinuser$i &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<ol start="33">
<li>写一个脚本，实现判断 192.168.1.0/24 网络里，当前在线的IP有哪些</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">for ip in &#96;seq 1 255&#96;</span><br><span class="line">  do</span><br><span class="line">    &#123;</span><br><span class="line">     ping -c 1 192.168.1.$ip &gt; &#x2F;dev&#x2F;null 2&gt;&amp;1</span><br><span class="line">     if [ $? -eq 0 ]; then</span><br><span class="line">          echo 192.168.1.$ip UP</span><br><span class="line">     else</span><br><span class="line">          echo 192.168.1.$ip DOWN</span><br><span class="line">     fi</span><br><span class="line">   &#125;&amp;                    #多进程启动</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<ol start="34">
<li>写一个脚本，判断一个指定的脚本是否是语法错误；如果有错误，则提醒用户键入 Q 或者 q 无视错误并退出其它任何键可以通过 vim 打开这个指定的脚本</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">read -p &quot;please input check script-&gt;&quot; file</span><br><span class="line">if [ -f $file ]; then</span><br><span class="line">    sh -n $file &gt; &#x2F;dev&#x2F;null 2&gt;&amp;1</span><br><span class="line">if [ $? -ne 0 ]; then</span><br><span class="line">    read -p “You input $file syntax error,[Type q to exit or Type vim toedit]” answer</span><br><span class="line">    case $answer in</span><br><span class="line">        q | Q)</span><br><span class="line">            exit 0;;</span><br><span class="line">        *）</span><br><span class="line">            vim $file;;</span><br><span class="line">    esac</span><br></pre></td></tr></table></figure>
<ol start="35">
<li>如何执行历史记录里的第 505 条命令</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ !505</span><br></pre></td></tr></table></figure>
<ol start="36">
<li>文件系统 ext2、ext3、ext4 的区别是啥？</li>
</ol>
<p>ext3 和 ext2 的主要区别在于 ext3 引入Journal。<br>
ext2 和 ext3 的格式完全相同，只是在 ext 3 硬盘最后面有一部分空间用来存放 Journal（日志）的记录；<br>
在 ext2  中，写资料到硬盘中时，先将资料写入缓存中，当缓存写满时才会写入硬盘中；<br>
在 ext3 中，写资料到硬盘中时，先将资料写入缓存中，待缓存写满时系统先通知 Journal，再将资料写入硬盘，完成后再通知 Journal，资料已完成写入工作；<br>
在 ext3 中，也就是有 Journal 机制里，系统开机时检查 Journal 的资料，来查看是否有错误产生，这样就快了很多；</p>
<p>ext4 和 ext3 的主要区别在于:首先 ext4 与 ext3 兼容,ext3 只支持 32000 个子目录，而 ext4 支持无限数量的子目录；ext3 所支持的 16TB 文件系统和最大的 2TB 的文件，而 ext4 分别支持 1EB（1,048,576TB，1EB=1024PB，1PB=1024TB）的文件系统，以及 16TB 的文件;ext3 的数据块分配策略是尽快分配，而 ext4 是尽可能地延迟分配，直到文件在 Cache 中写完才开始分配数据块并写入磁盘;ext4 允许关闭日志，以便某些有特殊需求的用户可以借此进一步提升性能等等等等。</p>
<ol start="37">
<li>如何杀死指定的进程？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ps -ef |grep 进程名 |grep -v grep|awk  &#39;&#123;print $2&#125;&#39; |xargs kill -9</span><br></pre></td></tr></table></figure>
<p>注意：这里 awk 后面是单引号不是双引号。</p>
<h3><span id="linux-服务器篇">Linux 服务器篇</span></h3>
<ol>
<li>请写出 Web 服务器的调优要点，以 Nginx 为例。</li>
</ol>
<ul>
<li>尽可能的少用 HTTP，因为 HTTP 是有开销的；</li>
<li>尽可能的使用 CDN；</li>
<li>添加 Expire/Cache-Control 头，这个头是缓存用的，可以缓存图片和 Flash 那样不轻易更改的文件，减少访问时间；</li>
<li>启动 Gzip 压缩，这个没啥好说的了；</li>
<li>尽可能少的重定向，重定向是需要时间的，增加一次重定向就会多一次 Web需求；</li>
<li>如果可以，把 Ajax也做缓存；</li>
<li>减少 DNS 查询，很多网页会有外站的广告，这些广告也是会启动 DNS 查询的，所以如果不缺钱，减少这种广告；</li>
<li>调好服务器里的 TCP 协议栈，这个无论是 Web 服务器还是应用服务器都是必须的；</li>
</ul>
<ol start="2">
<li>编写一个 Nginx 的访问控制规则，要求只准许 192.168.3.29/24 、10.1.20.6/16 、34.26.157.0/24 这些机器访问，除此之外的机器不准许访问。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location&#x2F;&#123;</span><br><span class="line">access 192.168.3.29&#x2F;24;</span><br><span class="line">access 10.1.20.6&#x2F;16;</span><br><span class="line">access 34.26.157.0&#x2F;24;</span><br><span class="line">deny all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>如何在 Nginx 中给 favicon.ico 和 robots.txt 设置过期时间。</li>
</ol>
<p>这里为 favicon.ico 为 99 天，robots.txt 为 7 天并不记录 404 错误日志。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">location ~(favicon.ico) &#123;</span><br><span class="line">    log_not_found off;</span><br><span class="line">    expires 99d;</span><br><span class="line">    break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~(robots.txt) &#123;</span><br><span class="line">    log_not_found off;</span><br><span class="line">    expires 7d;</span><br><span class="line">    break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>如何在 Nginx 中设定某个文件的浏览器缓存过期时间为 600 秒，并不记录访问日志</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location ^~ &#x2F;html&#x2F;scripts&#x2F;loadhead_1.js &#123;</span><br><span class="line">    access_log off;</span><br><span class="line">    expires 600;</span><br><span class="line">    break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>如何在 Nginx 中只允许固定 IP 访问网站，并加上密码。</li>
</ol>
<p>设定账号是 james,密码是 123456。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">printf &quot;james:$(openssl passwd -crypt 123456)\n&quot; &gt;&gt;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;passwd</span><br><span class="line">location \ &#123;</span><br><span class="line">    allow 22.27.164.25; #允许的ipd</span><br><span class="line">    deny all;</span><br><span class="line">    auth_basic “KEY”; #登陆该网页的时候，会有这个“KEY”的提示,提示只能是英文，中文不识别。</span><br><span class="line">    auth_basic_user_file &#x2F;conf&#x2F;htpasswd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>Web 服务器为 Nginx，如果访问服务器的 IP 地址是 203.46.97.124 的话，给他展现的主页是 /123.html,其他人就展现 index.html。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F; &#123;</span><br><span class="line">        if （$remote_addr &#x3D; 203.46.97.124 ) &#123;</span><br><span class="line">            rewrite ^.*$ &#x2F;123.html;</span><br><span class="line">                &#125;</span><br><span class="line">        root &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;html;</span><br><span class="line">        index index.html;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>讲述一下 cookie 和 session 的区别</li>
</ol>
<p>Cookie 机制采用的是在客户端保持状态的方案，而 Session 机制采用的是在服务器端保持状态的方案。</p>
<p>Cookie 不是很安全，别人可以分析存放在本地的 Cookie 并进行 Cookie 欺骗,考虑到安全应当使用 Session。</p>
<p>Session 会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能,考虑到减轻服务器性能方面，应当使用 COOKIE。</p>
<p>单个 Cookie 保存的数据不能超过 4K，很多浏览器都限制一个站点最多保存 20 个 Cookie。</p>
<p>Cookie 如果没有设置生存时间，那么关闭浏览器的瞬间，Cookie 就会消失，下一次登陆依旧要输入账号密码，Cookie 默认是存储在硬盘里而不是内存里，如果是设置了生存时间，那么就会保存在内存里，下一次继续使用。</p>
<p>Session 有一个 Session ID，要是服务器能查询的到 ID，就会按这个 ID 号的内容体现数据，如果查询不到就会新建一个 ID，Session ID 是可以用 Cookie 的形式保存的。</p>
<ol start="8">
<li>写一个脚本自动备份 MySQL 并删除 30 天前的备份文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">#Description:Auto backup mysql</span><br><span class="line">MYSQLDB&#x3D;Test1</span><br><span class="line">MYSQLUSR&#x3D;Username</span><br><span class="line">MYSQLPW&#x3D;PASSWORD    #定义账号、密码和需要备份的数据库名</span><br><span class="line">BAKDIR&#x3D;&#x2F;data&#x2F;backup&#x2F;mysql&#x2F;$(date +%Y-%m-%d)   </span><br><span class="line">if[ $UID -ne 0 ];then    #UID是USERID的意思，0 是ROOT的ID号</span><br><span class="line">    echo This script must use administrator or root user ,please exit!    </span><br><span class="line">#提示当前账户不是ROOT，需要切换成ROOT用户</span><br><span class="line">    sleep 2  </span><br><span class="line">exit 0  </span><br><span class="line">fi  </span><br><span class="line"></span><br><span class="line">if [ ! -d $BAKDIR ];then  </span><br><span class="line">mkdir -p $BAKDIR  </span><br><span class="line">else  </span><br><span class="line">echo This is $BAKDIR exists ,please exit ….  </span><br><span class="line">sleep 2  </span><br><span class="line">exit  </span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;mysqldump -u$MYSQLUSR -p$MYSQLPW -d $MYSQLDB &gt;&#x2F;data&#x2F;backup&#x2F;mysql&#x2F;&#96;date +%Y-%m-%d&#96;&#x2F;www_db.sql  </span><br><span class="line">cd $BAKDIR ; tar -czf  www_mysql_db.tar.gz *.sql  </span><br><span class="line">cd $BAKDIR ;find  . -name &quot;*.sql&quot; |xargs rm -rf[ $? -eq 0 ]&amp;&amp;echo &quot;This &#96;date +%Y-%m-%d&#96; RESIN BACKUP is SUCCESS&quot;</span><br><span class="line">cd &#x2F;data&#x2F;backup&#x2F;mysql&#x2F; ;find . -mtime +30 |xargs rm -rf</span><br></pre></td></tr></table></figure>
<ol start="9">
<li>SELECT id,name FROM test1 和 SELECT id name FROM test1 这两个语句有什么区别？</li>
</ol>
<p>第一个语句会出现两个列，第二个只有一个列，列的内容是 id 的内容，但是列的名称是 name，也就是说第二句话其实就是 “SELECT id AS name FROM test1”。</p>
<ol start="10">
<li>如果想把 test1 表格里满足 age 大于等于 30 的 username 都迁移到 test2 表格里的 username 列，需要什么命令？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT test2(username) SELECT username FROM test1 WHERE age &gt;&#x3D;30;</span><br></pre></td></tr></table></figure>
<p>注： 这种方法要注意，新表/旧表有更新的时候，旧表/新表不随之更新。因为没有链接，仅仅是一个一次性的复制而已。</p>
<ol start="11">
<li>列举出 A 表里满足价格 (price) 大于 A 表里所有货品平均价格的 id,name,age。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT id,name,age FROM A WHERE &gt; (SELECT AVG(price) FROM A)</span><br></pre></td></tr></table></figure>
<ol start="12">
<li>请根据你的理解，简述负载均衡的实现方式</li>
</ol>
<p>负载均衡主要分为两种：硬件（F5）和软件（NGINX、Haproxy、LVS），硬件效果比较牛逼，它是把 4-7 层的负载均衡功能做到一个硬件里面，但是价格昂贵最近用的越来越少了。<br>
软件的负载均衡又分两种：四层和七层：四层是在 IP/TCP 协议栈上把网络包的 IP 地址和端口进行修改，达到转发的目的；七层就是在应用层里把 HTTP 请求、URL 等具体的应用数据发送到具体的服务器上。四层的效率比七层的高，四层一般安排在架构的前端，七层一般就是在具体服务器的前端。软件负载均衡比较常见的几个调度分配方式如下：</p>
<ul>
<li>轮询：访问请求依序分发给后端服务器；</li>
<li>加权轮询：访问请求依序分发后端服务器，服务器权重越高被分发的几率也越大；</li>
<li>最小连接数：将访问请求分发给当前连接数最小的一台后端服务器，服务器权重越高被分发的几率也越大。</li>
</ul>
<ol start="13">
<li>HTTP 一般是无状态的，怎么让它变成有状态的？</li>
</ol>
<p>HTTP 协议跟 IP 协议、UDP 协议一样都是无状态的，HTTP 的无状态意思是每次的请求都是独立的，它的执行情况和结果与前面的请求和之后的请求是无直接关系的，它不会受前面的请求应答情况直接影响，也不会直接影响后面的请求应答情况。补充一下，TCP 是有状态的，它的请求并不独立，它通过包头的一些控制字段来分别包的关系，这里可以自行脑补一下三次握手的图。</p>
<p>那么 HTTP 是无状态的这一点是无法改变的，那么要变得有状态，就需要引入 Cookie 和 Session，通过这两个机制去实现一个有状态的 Web 应用。用一个表达式可以这么理解：Web 应用 = HTTP 协议+ Session、Cookies 等状态机制+其他辅助的机制。</p>
<ol start="14">
<li>多进程和多线程的区别，你更喜欢用哪一个，为什么？</li>
</ol>
<p>多进程：服务器每当接收到一个客户端信息的时候，从主进程里生成一个子进程与客户端建立连接开始交互，每一个子进程之间互相独立不受干扰，完成任务就收回资源，内存等也会被回收；<br>
多线程：服务器每当接收到一个客户端信息的时候，从主进程里生成一个线程与客户端建立连接开始交互,多个线程位于同一个进程内，可以互相访问同样的内存等资源，彼此之间会有影响；</p>
<p>我个人更喜欢多进程，因为简单粗暴！</p>
<ol start="14">
<li>LVS 脑裂如何解决，为什么会产生双 Master？</li>
</ol>
<p>产生双 Master 的原因：1）服务器开启了 Iptables 防火墙，阻碍了心跳信息传输；2）服务器心跳网卡等信息写错了，导致心跳信息发送失败；3）心跳方式不搭配，心跳广播冲突；4）软件出 Bug 了；</p>
<p>要排除脑裂问题，第一步是检查 Iptables,很可能是由于 Iptables 把心跳信息隔断了，重要的话不说三遍也重要！</p>
<ol start="15">
<li>为什么 TCP 比 UDP 的信息更加可靠？详细说说 TCP 滑动窗口原理，窗口的大小如何确定。</li>
</ol>
<p>TCP 可靠性由三个机制保证：1. 序号（TCP报文的序号）2. 确认（ACK机制）3. 重传（超时或者冗余的 ACK）</p>
<p>TCP 在传输的时候，因为接受方 B 能力有限，不可能一口气吃下所有发送方 A 所有的数据流信息，所以 B 要限制 A 每次发送的字节数量，并且一一确认，确认了之后 A 才可以继续发。这样的话，A 的在发送数据流的时候就会有四种形态：</p>
<p>1).已发送已确认；<br>
2).已发送但没被确认；<br>
3).未发送但是接受方已经准备好空间来接收；<br>
4).未发送但是接受方尚未准备好空间来接收；</p>
<p>随着数据流的传输，这个形态是会时刻发生变化的，通过接受方 B 返回的确认信息来改变 2 的大小，同时 B 也会根据一次关于发送方A要发送多少字节确认自己的空间来改变 3 的大小。</p>
<ol start="16">
<li>简单说说 CDN 的工作原理？</li>
</ol>
<p>CDN 的工作原理：通过权威 DNS 服务器来实现优质节点的选择，通过缓存来减少源站的压力。</p>
<p>IT界有个很有名的比喻，正向代理是找马云借钱，反向代理是给 10086 打电话，而反向代理就是 CDN 的实现原理雏形的一部分。</p>
<ol start="17">
<li>请描述 DNS 查询的过程，为什么要有 CNAME 而不是直接返回一个 CDN 边缘节点的 IP。</li>
</ol>
<p>DNS 主要是基于 UDP 协议的。DNS 查询的过程以 <a href="http://www.taobao.com" target="_blank" rel="noopener">www.taobao.com</a> 为例：</p>
<ul>
<li>在浏览器键入 <a href="http://www.taobao.com" target="_blank" rel="noopener">www.taobao.com</a>,其实真正 DNS 协议里用到的是 <a href="http://www.taobao.com" target="_blank" rel="noopener">www.taobao.com</a>. 最后还有一个点，可能是因为美观等原因，一般都不显示;</li>
<li>查询本地缓存（host 文件或者是浏览器的缓存）中有没有该域名对应的记录，有的话就直接用了;</li>
<li>向运营商的 DNS 服务器发起 DNS 解析的请求，一般称运营商的 DNS 服务器为 Local DNS;</li>
<li>Local DNS 会查询本地的缓存，Local DNS 设置的缓存时间是有讲究的，过长过短都不好。</li>
<li>Local DNS 如果没有缓存，会把域名从右往左扫描，依次请求对应的服务器，例如对于域名 <a href="http://www.taobao.com" target="_blank" rel="noopener">www.taobao.com</a>.，先去问负责 . 的根域名服务器，就是传说中全球只有几台的那些服务器，他们会答复 .com 是谁管理的，然后 Local DNS 又去找管理 .com 的服务器（假设名字为 S1），去问问taobao.com是谁管，一般来说，在S1查到的记录是一条cname记录（阿里毕竟大公司，自己管理自己旗下的域名），然后就转到了阿里自己的DNS服务器上来了，一般称之为权威服务器；</li>
<li>权威服务器是阿里自己建的，然后根据公司内部的一些配置查到 <a href="http://www.taobao.com" target="_blank" rel="noopener">www.taobao.com</a>. 对应的服务器是谁，返回一个IP地址；</li>
<li>Local DNS 缓存这个 IP 地址，并且回复浏览器；</li>
<li>浏览器和对应的 IP 地址的服务器建立 TCP 连接，发送 HTTP 报文；</li>
</ul>
<p><a href="https://rorschachchan.github.io/images/cdnyuanli.png" target="_blank" rel="noopener">https://rorschachchan.github.io/images/cdnyuanli.png</a></p>
<p>DNS 查询过程图解</p>
<p>至于说为什么不返回 CDN 边缘节点 IP，是因为使用 CNAME 记录可以很方便地变更 IP 地址，毕竟服务商掌握着 IP 的生杀大权，哪一天需要换 IP 了，在这方面很不方便。</p>
<ol start="18">
<li>什么是乐观锁，什么是悲观锁？</li>
</ol>
<p>悲观锁 Pessimistic Lock, 顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁。这样别人想拿这个数据就会 block 直到它拿到锁。传统的关系型数据库里边就用到了很多这种锁机制，比如行锁，表锁等，读锁，写锁等，都是在做操作之前先上锁。</p>
<p>乐观锁 Optimistic Lock, 顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在更新的时候会判断一下在此期间别人有没有去更新这个数据，可以使用版本号等机制。乐观锁适用于多读的应用类型，这样可以提高吞吐量，像数据库如果提供类似于write_condition 机制的其实都是提供的乐观锁。</p>
<p>两种锁各有优缺点，不可认为一种好于另一种。像乐观锁适用于写比较少的情况下，即冲突真的很少发生的时候，这样可以省去了锁的开销，加大了系统的整个吞吐量。但如果经常产生冲突，上层应用会不断的进行 Retry，这样反倒是降低了性能，所以这种情况下用悲观锁就比较合适。</p>
<ol start="19">
<li>什么是脏读、不可重复读、幻读？</li>
</ol>
<p>脏读又称无效数据的读出，是指在数据库访问中，事务 T1 将某一值修改，然后事务 T2 读取该值，此后 T1 因为某种原因撤销对该值的修改，这就导致了 T2 所读取到的数据是无效的。</p>
<p>不可重复读是指在数据库访问中，一个事务范围内两个相同的查询却返回了不同数据。这是由于查询时系统中其他事务修改的提交而引起的。比如事务 T1 读取某一数据，事务 T2 读取并修改了该数据，T1 为了对读取值进行检验而再次读取该数据，便得到了不同的结果。</p>
<p>幻读是指当事务不是独立执行时发生的一种现象，例如第一个事务对一个表中的数据进行了修改，比如这种修改涉及到表中的全部数据行。同时，第二个事务也修改这个表中的数据，这种修改是向表中插入一行新数据。那么，以后就会发生操作第一个事务的用户发现表中还有没有修改的数据行，就好象发生了幻觉一样。</p>
<ol start="20">
<li>简述一下 A 记录与 NS 记录的区别</li>
</ol>
<ul>
<li>A 记录是名称解析的重要记录，它用于将特定的主机名映射到对应主机的 IP 地址上。你可以在 DNS 服务器中手动创建或通过 DNS 客户端动态更新来创建。</li>
<li>NS 记录此记录指定负责此 DNS 区域的权威名称服务器。</li>
<li>A 记录和 NS 记录的区别是，A 记录直接给出目的 IP，NS 记录将 DNS 解析任务交给特定的服务器，NS 记录中记录的 IP 即为该特定服务器的 IP 地址。</li>
<li>NS 记录优先于 A 记录，A 记录优先于 CNAME 记录。</li>
</ul>
<ol start="21">
<li>MySQL 的 BinLog 有几种形式？</li>
</ol>
<p>MySQL 的 BinLog 有以下几种模式：</p>
<ul>
<li>Statement Level模式</li>
</ul>
<p>简介：每一条会修改数据的 SQL 都会记录到 Master 的 Bin-Log 中。Slave 在复制的时候 SQL 线程会解析成和原来 Master 端执行过的相同语句来执行。<br>
优点：不需要记录每一行数据的变化，减少 Bin-Log 的日志量，节约 IO 以提高性能。因为他只记录在 Master 上所执行语句的细节，以及执行语句时候的上下文的信息。<br>
缺点：很多新功能的加入在复制的时候容易导致出现问题。</p>
<ul>
<li>Row Level模式</li>
</ul>
<p>简介:日志中会记录成每一行数据被修改的模式，然后再 Slave 端在对相同的数据进行修改。<br>
优点：在 Row Level模式下，Bin-Log中可以不记录执行的 SQL 语句的上下文相关的信息。仅仅只需要记录那一条记录被修改了。所以 Row Level 的日志内容会非常清楚记录下每一行数据修改的细节，非常容易理解。而且不会出现某些特点情况下的存储过程，或 Function 以及Triggeer 的调用和触发无法被正确复制的问题。<br>
缺点：所有执行的语句当记录到日志中的时候，都将以每行记录的修改来记录，可能会产生大量的日志。</p>
<ul>
<li>Mixed(前两种的混合模式)</li>
</ul>
<p>根据执行的每一条具体的 SQL 语句来区分对待记录日志的形式，即 MySQL 决定什么时候写 Statement 格式的，什么时候写 Row 格式的 Binlog。</p>
<ol start="22">
<li>如何在线正确清理 MySQL 的 Binlog？</li>
</ol>
<ul>
<li>手动删除方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 首先查看主从库正在使用的binlog文件名称 </span><br><span class="line">show master(slave) status\G</span><br><span class="line"># 删除之前一定要备份</span><br><span class="line">purge master logs before&#39;2017-09-01 00:00:00&#39;; </span><br><span class="line"># 删除指定时间前的日志</span><br><span class="line">purge master logs to&#39;mysql-bin.000001&#39;;</span><br></pre></td></tr></table></figure>
<ul>
<li>自动删除的方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 通过设置 binlog 的过期时间让系统自动删除日志</span><br><span class="line"># 查看过期时间与设置过期时间</span><br><span class="line">show variables like &#39;expire_logs_days&#39;; </span><br><span class="line">set global expire_logs_days &#x3D; 30;</span><br></pre></td></tr></table></figure>
<p>Binlog 记录了数据中的数据变动，便于对数据的基于时间点和基于位置的恢复。但是也要定时清理，不然越来越大。</p>
<ol start="23">
<li>简述 MySQL 主从复制原理及配置主从的完整步骤。</li>
</ol>
<p>MySQL 主从是一个异步过程（网络条件上佳的话，同步效果几乎是实时），原理就是从库得到主库的 BinLog，然后执行这个 BinLog 的内容，达到两边数据库数据一致的目的。具体工作步骤如下：</p>
<ul>
<li>主mysql服务器将数据库更新记录到binlog中，使用自己的log dump线程将binlog先读取然后加锁，再发送到从库，在从库当读取完成，甚至在发动给从节点之前，锁会被释放；</li>
<li>当从库上执行start slave命令之后，从节点会创建一个I/O线程用来连接主节点，请求主库中更新的binlog。I/O线程接收到主节点binlog dump进程发来的更新之后，保存在本地relay log中。</li>
<li>从库此时还有一个SQL线程，它负责读取relay log中的内容，解析成具体的操作并执行，最终保证主从数据的一致性。</li>
</ul>
<p><a href="https://rorschachchan.github.io/images/mysql-sock9.png" target="_blank" rel="noopener">https://rorschachchan.github.io/images/mysql-sock9.png</a></p>
<p>切记！在从库上使用 show slave status\G；看到结果里的 Slave_IO_Running:Yes 和 Slave_SQL_Running:Yes，才算是同步成功，两个 YES 缺一不可。</p>
<p>注意： MySQL 只读实例的 Binlog 日志是没有记录更新信息的，所以它的 Binlog 无法使用。</p>
<ol start="24">
<li>如何理解 MySQL 里最大连接数和请求数之间的关系</li>
</ol>
<p>假设某个数据库的最大连接数是 1000，并不是指最多只能支持 1000 个访问。因为数据库与应用之间肯定会隔着中间件，这个中间件的连接池会管理链接，一般如果代码写的好、事物控制得当，一个事物完成连接会被连接池收回重复利用。所以不是说一个用户登录你的系统或网站就一直占用着，一个连接也可以包含多次请求。</p>
<ol start="25">
<li>MySQL 出现 IOPS 过高，应该如何处理？</li>
</ol>
<p>IOPS (Input/Output Operations Per Second)，即每秒进行读写（I/O）操作的次数。IOPS 是指存储每秒可接受多少次主机发出的访问，主机的一次 IO 需要多次访问存储才可以完成。IOPS 过高比较普遍的原因是实例内存满足不了缓存数据或排序等需要，导致产生大量的物理 IO 或者是查询执行效率低，扫描过多数据行。</p>
<ol start="26">
<li>Sort_Buffer_Size 是什么参数？设置它对服务器性能有何影响？</li>
</ol>
<p>Sort_Buffer_Size 是一个 connection 级参数，在每个 connection 第一次需要使用这个 Buffer 的时候，一次性分配设置的内存。Sort_Buffer_Size 并不是越大越好，由于是 Connection 级的参数，过大的设置+高并发可能会耗尽系统内存资源。Sort_Buffer_Size 超过 256KB 的时候，MySQL 就会使用 mmap() 而不是 malloc() 来进行内存分配，导致性能损耗、效率降低。</p>
<p>如果列长度大于 max_length_for_sort_data 的参数值的话，iowait 会增加, 响应时间明显变长。此时通过 show processlist 查看,发现有很多 session 在处理 sort 操作,此时需要适当调大 max_length_for_sort_data 的参数值。</p>
<ol start="27">
<li>如何从 MySQL 全库备份中恢复某个库和某张表</li>
</ol>
<p>主要用到的参数是 –one-database 简写 -o 的参数，举个例子：</p>
<p>全库备份</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysqldump -uroot -p --single-transaction -A --master-data&#x3D;2 &gt;dump.sql</span><br></pre></td></tr></table></figure>
<p>只还原 erp 库的内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -uroot -pMANAGER erp --one-database &lt;dump.sql</span><br></pre></td></tr></table></figure>
<p>从全库备份中抽取出 t 表的表结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sed -e&#39;&#x2F;.&#x2F;&#123;H;$!d;&#125;&#39; -e &#39;x;&#x2F;CREATE TABLE &#96;t&#96;&#x2F;!d;q&#39; dump.sql</span><br></pre></td></tr></table></figure>
<p>从全库备份中抽取出 t 表的内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grep&#39;INSERT INTO &#96;t&#96;&#39; dump.sql</span><br></pre></td></tr></table></figure>
<ol start="28">
<li>你们数据库是否支持 Emoji 表情，如果不支持，如何操作？</li>
</ol>
<p>如果是 utf8 字符集的话，需要升级至 utf8_mb4 方可支持。</p>
<ol start="29">
<li>mysqldump 备份时，-–master-data 选项的作用是什么？还用过其他的参数么？</li>
</ol>
<p>–master-data 选项的作用就是将二进制的信息写入到输出文件中，即写入备份的 SQL 文件中。</p>
<ul>
<li>–master-data=2 表示在 dump 过程中记录主库的 Binlog 和 Pos 点，并在 dump 文件中注释掉这一行；</li>
<li>–master-data=1 表示在 dump 过程中记录主库的 Binlog 和 Pos 点，并在 dump 文件中不注释掉这一行，即恢复时会执行；</li>
<li>–dump-slave=2 表示在 dump 过程中，在从库 dump，mysqldump 进程也要在从库执行，记录当时主库的 Binlog 和 Pos 点，并在 dump 文件中注释掉这一行；</li>
<li>–dump-slave=1 表示在 dump 过程中，在从库 dump，mysqldump 进程也要在从库执行，记录当时主库的 Binlog 和 Pos 点，并在 dump 文件中不注释掉这一行；</li>
</ul>
<p>注意：在从库上执行备份时，即 –dump-slave=2，这时整个 dump 过程都是 stop io_thread 的状态。加了 --single-transaction 就能保证 innodb 的数据是完全一致的，而 MyIsam 引擎无法保证（因为 MyIsam 压根就不支持事务），要保证 MyIsam 引擎数据一致必须加 --lock-all-tables。</p>
<ol start="30">
<li>什么是数据库事务，事务有哪些特性？</li>
</ol>
<p>一个数据库事务通常包含对数据库进行读或写的一个操作序列。它的存在包含有以下两个目的：</p>
<ul>
<li>为数据库操作提供了一个从失败中恢复到正常状态的方法，同时提供了数据库即使在异常状态下仍能保持一致性的方法。</li>
<li>当多个应用程序在并发访问数据库时，可以在这些应用程序之间提供一个隔离方法，以防止彼此的操作互相干扰。</li>
</ul>
<p>它的特性如下：</p>
<ul>
<li>原子性（Atomicity）：事务作为一个整体被执行，包含在其中的对数据库的操作要么全部被执行，要么都不执行。</li>
<li>一致性（Consistency）：事务应确保数据库的状态从一个一致状态转变为另一个一致状态。一致状态的含义是数据库中的数据应满足完整性约束。</li>
<li>隔离性（Isolation）：多个事务并发执行时，一个事务的执行不应影响其他事务的执行。</li>
<li>持久性（Durability）：一个事务一旦提交，他对数据库的修改应该永久保存在数据库中。</li>
</ul>
<p>事务的原子性与一致性缺一不可。</p>
<ol start="31">
<li>数据表 student 有 id,name,score,city 字段，其中 name 中的名字可有重复，需要消除重复行,请写 SQL 语句。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct name from student</span><br></pre></td></tr></table></figure>
<p>注意：单独的 distinct只能放在开头，否则就报语法错误。</p>
<ol start="32">
<li>在 Nginx 中，如何使用未定义的服务器名称来阻止处理请求?</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name &quot; &quot;;</span><br><span class="line">	return 444;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里，服务器名被保留为一个空字符串，它将在没有主机头字段的情况下匹配请求，而一个特殊的 Nginx 的非标准代码 444 被返回，从而终止连接。</p>
<ol start="33">
<li>Nginx 中如何实现 http 跳转 https？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    listen [::]:80;		#支持ipv6</span><br><span class="line">    server_name www.test.com;</span><br><span class="line">    return 301 https:&#x2F;&#x2F;$server_name$request_uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="34">
<li>在 Nginx 中如果想配置指定域为信任，其他的域名被排除，应该如何配置？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">	    listen 80;</span><br><span class="line">	    server_name b.com;</span><br><span class="line">	    location &#x2F;&#123;</span><br><span class="line">                if ( $http_referer ~* (a.com|b.com|c.com)  ) &#123; </span><br><span class="line">		        Access-Control-Allow-Origin: *</span><br><span class="line">                &#125;</span><br><span class="line">	    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>35 CDN 缓存命中率下降的因素有哪些？</p>
<ul>
<li>客户是否刷新过缓存？</li>
</ul>
<p>如果刷新缓存，有可能会短时间表现命中率下降。特别说明下：CDN 的 URL 或者目录刷新是清除 CDN 缓存的动作（这个比较容易理解偏差）</p>
<ul>
<li>带宽是否突增？并且访问的都是新的 URL？</li>
</ul>
<p>带宽突增或者访问的新 URL 较多，会导致 CDN 节点回源较多，命中率会表现有下降趋势。</p>
<ul>
<li>源站是否有新内容发布？</li>
</ul>
<p>CDN 节点访问新内容，导致 CDN 节点回源较多，命中率会表现有下降趋势。</p>
<ul>
<li>
<p>源站是否出现过异常导致 5XX 和 4XX 增加，由于 5XX 和 4XX 不缓存，会表现命中率下降。</p>
</li>
<li>
<p>源站的访问 URL 的 Header 参数，或者在 CDN 控制管理后台的缓存配置规则是否改变过？</p>
</li>
</ul>
<p>缓存时长的调整，有可能会带来命中率的变化。</p>
<ol start="36">
<li>Docker 的 exec 与 attach 命令有啥区别？</li>
</ol>
<p>attach 开启一个和正在运行的进程交互的终端，如果该进程结束，原 docker container 的进程也会结束。<br>
exec 可以开启多个终端实例，exec -i /bin/bash，由此可见 exec 其实是在运行中的容器中执行一个命令。</p>
<ol start="37">
<li>Docker 的 CMD 与 ENTRYPOINT 命令有啥区别？</li>
</ol>
<p>CMD 的命令会被 Docker run 里的命令覆盖，而 ENTRYPOINT命令不会。<br>
如果要覆盖 ENTRYPOINT，则在 Docker run 里添加 --entrypoint 标签来覆盖即可。<br>
如果 Dockerfile 里指定了 WORKDIR，那么无论是 CMD 还是 ENTRYPOINT 命令都是在这个 WORKDIR 目录里执行。</p>
<ol start="38">
<li>Docker 的 kill 和 stop 命令有啥区别？</li>
</ol>
<p>stop 是优雅退出，先发送 SIGTERM 信号，在一段时间之后（10s）再发送 SIGKILL 信号。Docker 内部的应用程序可以接收 SIGTERM 信号，然后做一些退出前工作，比如保存状态、处理当前请求等。<br>
kill 是暴力退出，即发送 SIGKILL 信号，应用程序直接退出。</p>
<ol start="39">
<li>假设有一个 AAA 的容器，现在需要备份它的挂载卷 /DATA 里的数据，请问如何操作？</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run --volumes-form A -v &#x2F;tmp:&#x2F;backup --name BACKUP ubuntu tar cvf &#x2F;backup&#x2F;A.tar &#x2F;DATA</span><br></pre></td></tr></table></figure>
<p>上面这个语句新建立一个叫 BACKUP 的容器，它与 A 容器挂载情况相同（即都是挂载 /DATA）同时将本地的 /tmp 挂载到容器的 /backup。在容器生成的时候，执行了tar cvf /backup/A.tar /DATA 将 DATA 文件夹的内容进行了打包，又由于 /tmp 已经与 /backup 挂载，所以就可以直接从宿主机上的 /tmp 里得到 A.tar 了。</p>
<h3><span id="参考文档">参考文档</span></h3>
<ol>
<li><a href="http://t.cn/Ai93uIum" target="_blank" rel="noopener">http://t.cn/Ai93uIum</a></li>
<li><a href="http://t.cn/Ai91yzEt" target="_blank" rel="noopener">http://t.cn/Ai91yzEt</a></li>
<li><a href="http://t.cn/Ai91tykl" target="_blank" rel="noopener">http://t.cn/Ai91tykl</a></li>
<li><a href="http://t.cn/Ai91x5ik" target="_blank" rel="noopener">http://t.cn/Ai91x5ik</a></li>
<li><a href="http://t.cn/Ai91pxxs" target="_blank" rel="noopener">http://t.cn/Ai91pxxs</a></li>
<li><a href="http://t.cn/Ai9r1DvO" target="_blank" rel="noopener">http://t.cn/Ai9r1DvO</a></li>
<li><a href="http://t.cn/Ai9douNc" target="_blank" rel="noopener">http://t.cn/Ai9douNc</a></li>
<li><a href="http://t.cn/Ai9dHvb9" target="_blank" rel="noopener">http://t.cn/Ai9dHvb9</a></li>
<li><a href="http://t.cn/Ai9dnJ2z" target="_blank" rel="noopener">http://t.cn/Ai9dnJ2z</a></li>
<li><a href="http://t.cn/Ai9d1sJN" target="_blank" rel="noopener">http://t.cn/Ai9d1sJN</a></li>
</ol>
</div>

			<script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script>
			<script>
			var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);
			if (!isMobile) {
			    var btw = new BTWPlugin();
			    btw.init({
			        "id": "vip-container",
			        "blogId": "10135-1588830050631-449",
			        "name": "「奇妙的 Linux 世界」",
			        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",
			        "keyword": "VIP"
			    });
			}
			</script>
		
                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/posts/60858.html" data-toggle="tooltip" data-placement="top" title="使用 Velero 快速备份和迁移 Kubernetes 集群应用以及持久化数据">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/posts/26290.html" data-toggle="tooltip" data-placement="top" title="巧用 SSLH 实现 HTTPS 和 SSH 共享同一端口">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                
                    <!-- disqus 评论框 start -->
                    <div class="comment">
                        <div id="lv-container" data-id="city" data-uid="MTAyMC8yNzg2My80NDQw"></div>
                    </div>
                    <!-- disqus 评论框 end -->
                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">Linux 基础知识篇</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">Linux 服务器篇</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">参考文档</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#技巧" title="技巧">技巧</a>
                        
                          <a class="tag" href="/tags/#Linux" title="Linux">Linux</a>
                        
                          <a class="tag" href="/tags/#运维" title="运维">运维</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://www.mike.org.cn/" target="_blank">简单.生活</a></li>
                    
                        <li><a href="http://shang.qq.com/wpa/qunwpa?idkey=ea4c43493c2269428ac6ef6141de4b6d78e5ab2d41380ca4099b833b62884ee9" target="_blank">技术交流群</a></li>
                    
                        <li><a href="" target="_blank"></a></li>
                    
                        <li><a href="" target="_blank"></a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>






    <!-- 来必力City版公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];
    
           if (typeof LivereTower === 'function') { return; }
    
           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;
    
           e.parentNode.insertBefore(j, e);
       })(document, 'script');
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    <!-- 来必力City版 公共JS代码 end -->



<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                    <li>
                        <a href="/atom.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/80imike">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/2093524665">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Mike 2024 | Hosted by <a href="https://pages.coding.me" target="_blank" rel="noopener" style="font-weight: bold">Coding Pages</a>
                    <br>
                    Theme by <a href="http://beantech.org" target="_blank" rel="noopener">BeanTech</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://www.huweihuang.com" target="_blank" rel="noopener">胡伟煌</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huweihuang&repo=hexo-theme-huweihuang&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>



<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://www.hi-linux.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->



<script defer src="https://umami.hi-linux.com/script.js"
    data-website-id="db99ccfc-f114-4595-8f3b-9dd1fbd3bf19"></script>


	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://www.hi-linux.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

<script>(function(w,d, s, id) {w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js, fjs = d.getElementsByTagName(s)[0];js = d.createElement(s); js.id = id;js.src = 'https://cdn.webpushr.com/app.min.js';fjs.parentNode.appendChild(js);}(window,document, 'script', 'webpushr-jssdk'));webpushr('init','BF9JK7xV9kjWTdMx2lr6RWaPfXV7wNuZaVAJ1bfIGoBNJavqLEBVFMKLubITnCA4bh2fI9iH9tMF95nXnPt7xxY');</script></body>

</html>
