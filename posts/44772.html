<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="Linux,运维,Nginx,Zabbix,Centos,Ansible,MySQL,Python,Docker,ELK,Haproxy,Git,Nodejs,安全,技术">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          再见 RPM/DEB/TAR，是时候拥抱下一代全平台安装程序 AppImage 了！ - 奇妙的 Linux 世界
        
    </title>

    <link rel="canonical" href="https://www.hi-linux.com/posts/44772.html">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
<link rel="stylesheet" href="/css/beantech.min.css">

    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/toc.css">


    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="奇妙的 Linux 世界" type="application/atom+xml">
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('/img/header_img/building.jpg')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#技巧" title="技巧">技巧</a>
                            
                              <a class="tag" href="/tags/#Linux" title="Linux">Linux</a>
                            
                              <a class="tag" href="/tags/#AppImage" title="AppImage">AppImage</a>
                            
                        </div>
                        <h1>再见 RPM/DEB/TAR，是时候拥抱下一代全平台安装程序 AppImage 了！</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Mike on
                            2021-02-23
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">奇妙的 Linux 世界</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <div id="vip-container"><blockquote>
<p><strong>AppImage: 简单、兼容、无需安装、无需权限、便携并保持基础操作系统不变！</strong></p>
</blockquote>
<p><code>AppImage</code> 是一种在 <code>Linux</code> 系统中用于分发便携式软件，且不需要超级用户权限来安装它们的格式。它还允许 <code>Linux</code> 的上游开发者来分发他们的程序而不用考虑不同 <code>Linux</code> 发行版间的区别。<code>AppImage</code> 的核心思想是一个文件即一个应用程序，每个 <code>AppImage</code> 都包含应用程序以及应用程序运行所需的所有文件。</p>
<table>
<thead>
<tr>
<th style="text-align:left">编号</th>
<th style="text-align:left">工具名称</th>
<th style="text-align:left">功能介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left"><a href="https://github.com/AppImageCrafters/appimage-builder" target="_blank" rel="noopener">appimage-builder</a></td>
<td style="text-align:left">该工具适用于将复核 <code>AppDir</code> 格式的程序转化为 <code>appimage</code> 的独立可执行文件</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left"><a href="https://github.com/AppImage/pkg2appimage/blob/master/pkg2appimage" target="_blank" rel="noopener">pkg2appimage</a></td>
<td style="text-align:left">该工具适用于将 <code>deb</code> 格式的包转化为 <code>appimage</code> 的独立可执行文件</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left"><a href="https://github.com/linuxdeploy/linuxdeploy" target="_blank" rel="noopener">linuxdeploy</a></td>
<td style="text-align:left">该工具适用于将 <code>Linux</code> 系统下的程序转化为 <code>appimage</code> 的独立可执行文件</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left"><a href="https://github.com/probonopd/linuxdeployqt" target="_blank" rel="noopener">linuxdeployqt</a></td>
<td style="text-align:left">该工具适用于将 <code>Linux</code> 系统下的 <code>QT</code> 程序转化为 <code>appimage</code> 的独立可执行文件</td>
</tr>
</tbody>
</table>
<h2><span id="1-appimage-工具介绍">1. AppImage 工具介绍</span></h2>
<blockquote>
<p><strong>像 Linux 本身一样，AppImageKit 是开源的。</strong></p>
</blockquote>
<p><img src="https://img.hi-linux.com/staticfile/extend-install-with-appimage-01-2021-01-26-eBbAa6.png" alt></p>
<ul>
<li><strong>[1] 简单</strong></li>
</ul>
<p><code>AppImage</code> 的核心思想是：<strong>一个应用程序 = 一个文件</strong>。每个 <code>AppImage</code> 都包含应用程序以及应用程序运行所需的所有文件。换句话说，除了操作系统本身的基础组件，<code>Appimage</code> 不需要依赖包即可运行。</p>
<ul>
<li><strong>[2] 可靠</strong></li>
</ul>
<p><code>AppImage</code> 格式是上游应用打包的理想选择，这意味着你可以直接从开发者那里获取软件，而不需要任何中间步骤，这完全符合开发者意图。非常迅速。</p>
<ul>
<li><strong>[3] 快速</strong></li>
</ul>
<p><code>AppImage</code> 应用可以直接下载并且运行，无需安装，并且不需要 <code>root</code> 权限。</p>
<a id="more"></a>
<h2><span id="2-appimage-工具对比">2. AppImage 工具对比</span></h2>
<blockquote>
<p><strong>对比多种软件格式的优势和劣势！</strong></p>
</blockquote>
<p><strong>[1] 与 deb 和 rpm 对比</strong></p>
<ul>
<li><strong>优势</strong></li>
</ul>
<ol>
<li><code>AppImage</code> 格式的应用可跨发行版运行，传统格式不可用或比较难。</li>
<li><code>AppImage</code> 格式不需要安装即可运行，可在 <code>$HOME</code> 分区运行，节省更分区空间。</li>
<li><code>AppImage</code> 无需 <code>root</code> 权限，告别输入密码时代。</li>
<li><code>AppImage</code> 包含应用依赖，可不受软件仓库制约，快速分发应用版本且不破坏系统依赖。</li>
<li><code>AppImage</code> 提供多种打包方式，即可手动打包，也可脚本打包。</li>
</ol>
<ul>
<li><strong>劣势</strong></li>
</ul>
<ol>
<li><code>AppImage</code> 格式会造成库的冗余且体积偏大，戏称为“系统安装了一万个 libc”。</li>
<li><code>AppImage</code> 不受检查，如果有来源不明的人打包，可能会带来安全风险。</li>
<li>运行一个旧的 <code>AppImage</code> 软件所带的依旧是旧版本的依赖库，可能会带来风险。</li>
</ol>
<p><strong>[2] 与 snap 和 flatpak 对比</strong></p>
<ul>
<li><strong>优势</strong></li>
</ul>
<ol>
<li><code>AppImage</code> 无需运行时，安装 <code>snap</code> 和 <code>flatpak</code> 软件安装其运行时。</li>
<li><code>AppImage</code> 格式不需要安装即可运行，可在 <code>$HOME</code> 分区运行，节省更分区空间。</li>
<li><code>AppImage</code> 无需 <code>root</code> 权限，告别输入密码时代。</li>
<li><code>AppImage</code> 不需要软件仓库，当然也可以有，易于传播。</li>
<li><code>AppImage</code> 对华人友好，包括官方网站和官方文档都已经有对应的中文支持。</li>
</ol>
<ul>
<li><strong>劣势</strong></li>
</ul>
<ol>
<li>没有沙箱机制。</li>
<li>没有商业公司支持，导致开发了十多年才具有影响力。</li>
<li>对某些定制化安装的发行版不友好，比如 <code>gentoo</code>、<code>archlinux</code> 等。</li>
</ol>
<h2><span id="3-appimage-目录结构">3. AppImage 目录结构</span></h2>
<blockquote>
<p><strong>需要注意 AppImage 所需的文件以及目录结构！</strong></p>
</blockquote>
<p>使用 <code>AppImage</code> 系列工具的前提就是，你所编写的程序项目或者工具依赖格式必须符合 <code>AppDir</code> 的目录要求，大致目录结构如下所示。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">AppDir</span><br><span class="line">└── AppRun</span><br><span class="line">└── your_app.desktop</span><br><span class="line">└── your_app.png</span><br><span class="line">└── usr</span><br><span class="line">    ├── bin</span><br><span class="line">    │   └── your_app</span><br><span class="line">    ├── lib</span><br><span class="line">    └── share</span><br><span class="line">        ├── applications</span><br><span class="line">        │   └── your_app.desktop</span><br><span class="line">        └── icons</span><br><span class="line">            └── &lt;theme&gt;</span><br><span class="line">                └── &lt;resolution&gt;</span><br><span class="line">                    └── your_app.png</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>[1] <code>AppRun</code> 文件</p>
<ul>
<li>必须要有</li>
<li>启动主负载应用程序</li>
<li>其中 <code>AppRun</code> 文件是程序的启动入口点文件，需要有可执行权限。</li>
<li>在 <code>AppImageKit</code> 项目中提供了一个 <code>AppRun.c</code> 的实现，但我们可以使用语言，比如 <code>shell</code> 的实现，也可以仅使用与主要可执行文件的符号链接。</li>
</ul>
</li>
<li>
<p>[2] <code>your_app.desktop</code> 文件</p>
<ul>
<li>必须要有</li>
<li>类似于 <code>Windows</code> 系统的快捷方式，即双击即可运行。</li>
<li>我们这里的 <code>[your_app].desktop</code> 文件将显示在桌面上，可使用链接的方式存在。</li>
<li>编写的格式可以参考 <a href="https://specifications.freedesktop.org/desktop-entry-spec/latest/ar01s06.html" target="_blank" rel="noopener">Recognized desktop entry keys</a> 这个网站，最简单的方法就是找一个改吧改吧。</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=Hypnos</span><br><span class="line">Exec=hypnos %F</span><br><span class="line">Icon=hypnos</span><br><span class="line">Type=Application</span><br><span class="line">Categories=Audio;AudioVideo;</span><br><span class="line">Comment=Music Player and Library</span><br><span class="line">MimeType=inode/directory;audio/flac;</span><br><span class="line">Name[en]=Hypnos</span><br><span class="line">Terminal=<span class="literal">false</span></span><br><span class="line">StartupNotify=<span class="literal">true</span></span><br><span class="line">NoDisplay=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>[3] <code>your_app.png</code> 文件</p>
<ul>
<li>非必须</li>
<li>提供程序软件包的桌面显示图案。</li>
</ul>
</li>
<li>
<p>[4] <code>Version</code> 文件</p>
<ul>
<li>非必须</li>
<li>用于显示程序软件包所对应的版本信息。</li>
</ul>
</li>
</ul>
<h2><span id="4-appimagetool-命令使用">4. appimagetool 命令使用</span></h2>
<blockquote>
<p><strong>介绍 AppImage 工具的使用格式和常用命令参数。</strong></p>
</blockquote>
<ul>
<li><strong>[1] 打包命令使用</strong></li>
</ul>
<p><code>appimagetool</code> 命令用于把现有的 <code>AppDir</code> 目录生成一个 <code>AppImage</code> 程序。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line">  appimagetool [OPTION...] SOURCE [DESTINATION] - Generate, extract, and inspect AppImages</span><br><span class="line"></span><br><span class="line">Help Options:</span><br><span class="line">  -h, --<span class="built_in">help</span>                  Show <span class="built_in">help</span> options</span><br><span class="line"></span><br><span class="line">Application Options:</span><br><span class="line">  -l, --list                  List files <span class="keyword">in</span> SOURCE AppImage</span><br><span class="line">  -u, --updateinformation     Embed update information STRING; <span class="keyword">if</span> zsyncmake is installed, generate zsync file</span><br><span class="line">  -g, --guess                 Guess update information based on Travis CI or GitLab environment variables</span><br><span class="line">  --bintray-user              Bintray user name</span><br><span class="line">  --bintray-repo              Bintray repository</span><br><span class="line">  --version                   Show version number</span><br><span class="line">  -v, --verbose               Produce verbose output</span><br><span class="line">  -s, --sign                  Sign with gpg[2]</span><br><span class="line">  --comp                      Squashfs compression</span><br><span class="line">  -n, --no-appstream          Do not check AppStream metadata</span><br><span class="line">  --exclude-file              Uses given file as exclude file <span class="keyword">for</span> mksquashfs, <span class="keyword">in</span> addition to .appimageignore.</span><br><span class="line">  --runtime-file              Runtime file to use</span><br><span class="line">  --sign-key                  Key ID to use <span class="keyword">for</span> gpg[2] signatures</span><br><span class="line">  --sign-args                 Extra arguments to use when signing with gpg</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>[2] 打包文件使用</strong></li>
</ul>
<p>如果我们运行一个由 <code>AppImageKit</code> 工具构建的程序，那么其会附加以下参数，对应不同的参数会提供一些额外的特性和功能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># usage</span></span><br><span class="line">./appimagetool-x86_64.AppImage some.AppDir</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">编号</th>
<th style="text-align:left">参数</th>
<th style="text-align:left">解释说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left"><code>--appimage-help</code></td>
<td style="text-align:left">显示帮助选项</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left"><code>--appimage-offset</code></td>
<td style="text-align:left">显示文件系统镜像开始的偏移量</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left"><code>--appimage-extract</code></td>
<td style="text-align:left">从文件系统镜像中提取内容</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left"><code>--appimage-mount</code></td>
<td style="text-align:left">挂载嵌入式文件系统镜像并打印挂载地址</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left"><code>--appimage-signature</code></td>
<td style="text-align:left">显示 AppImage 中的数字签名</td>
</tr>
<tr>
<td style="text-align:left">6</td>
<td style="text-align:left"><code>--appimage-updateinformation</code></td>
<td style="text-align:left">显示 AppImage 中的更新信息</td>
</tr>
<tr>
<td style="text-align:left">7</td>
<td style="text-align:left"><code>--appimage-version</code></td>
<td style="text-align:left">显示 AppImageKit 的版本</td>
</tr>
</tbody>
</table>
<h2><span id="5-pkg2appimage-工具使用">5. pkg2appimage 工具使用</span></h2>
<blockquote>
<p><strong>pkg2appimage 工具适用于将 deb 格式的包变成 appimage 的独立可执行文件！</strong></p>
</blockquote>
<p>如果已经有了对应的二进制文件，不管是 <code>zip</code> 归档文件、<code>.deb</code> 格式的文件还是 <code>ppa</code> 源上的文件，我们只需要编写一个 <code>.yml</code> 格式的描述文件，然后使用 <code>pkg2appimage</code> 工具来运行它，就会帮助我们转换生成一个 <code>AppImage</code> 的独立文件，是不是非常简单呢？<code>yml</code> 描述文件告诉 <code>pkg2appimage</code> 从哪里获得所需要的内容，以及如何将它们转换为 <code>AppImage</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行方式</span></span><br><span class="line">$ bash -ex ./pkg2appimage recipes/XXX.yml</span><br></pre></td></tr></table></figure>
<p>如果你只是看到了简答，那么你就太年轻了，你不知道这个 <code>yml</code> 格式的配置文件到底有多糟心。真的，看了官方文档中的配置文件介绍，以及对于官方仓库的示例软件对于 <code>yml</code>，心里有些懵逼。不过，等多看几次之后，就会发现还是不难写的，只是需要我们再出现错误的时候，能够及时调整配置文件，就可以正常打出我们需要的独立文件。</p>
<p>下面我们就一起看下，<code>yml</code> 文件的编写内容吧！正如我们所看到的那样，<code>.yml</code> 文件由三个部分组成，分别是主体部分、依赖部分和脚本部分。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app:</span> <span class="string">zstd</span>        <span class="comment"># 软件名称</span></span><br><span class="line"><span class="attr">binpatch:</span> <span class="literal">true</span>   <span class="comment"># chdir()</span></span><br><span class="line"><span class="attr">overwrite:</span> <span class="literal">true</span>  <span class="comment"># union file system</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ingredients:</span>     <span class="comment"># 依赖关系；包的内容从哪里来</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">bionic</span></span><br><span class="line">  <span class="attr">package:</span> <span class="string">zstd</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://archive.ubuntu.com/ubuntu/</span> <span class="string">bionic</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span> <span class="string">&gt;</span> <span class="string">./zstd.desktop</span>  <span class="string">&lt;&lt;\EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">[Desktop</span> <span class="string">Entry]</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Type=Application</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Terminal=true</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Name=zstd</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Exec=zstd</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Icon=transmission-tray-icon.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Categories=Development;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span> <span class="string">&gt;</span> <span class="string">./AppRun</span> <span class="string">&lt;&lt;\EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="comment">#!/bin/sh</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">HERE=$(dirname</span> <span class="string">$(readlink</span> <span class="string">-f</span> <span class="string">"$&#123;0&#125;"</span><span class="string">))</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">export</span> <span class="string">LD_LIBRARY_PATH="$&#123;HERE&#125;"/usr/lib:$PATH</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"$&#123;HERE&#125;"</span><span class="string">/usr/bin/zstd</span> <span class="string">$@</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chmod</span> <span class="string">a+x</span> <span class="string">./AppRun</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行如下命令即可生成zstd的独立程序</span></span><br><span class="line">$ pkg2appimage ./zstd-appimage.yml</span><br></pre></td></tr></table></figure>
<ul>
<li>[1] The overall section
<ul>
<li>必须存在</li>
<li>包含应用程序的名称</li>
<li>该名称必须与主入口文件的包名称匹配</li>
</ul>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app:</span> <span class="string">zstd</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[2] The ingredients section
<ul>
<li>必须存在</li>
<li>描述如何获取进入 <code>AppImage</code> 的二进制内容</li>
<li>可包含 <code>zip</code> 归档文件、<code>.deb</code> 格式的文件还是 <code>ppa</code> 源上的文件</li>
</ul>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Using ingredients from a binary archive</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">DLD=$(wget</span> <span class="string">-q</span> <span class="string">"https://api.github.com/repos/atom/atom/releases/latest"</span> <span class="string">-O</span> <span class="bullet">-</span> <span class="string">|</span> <span class="string">grep</span> <span class="string">-E</span> <span class="string">"https.*atom-amd64.tar.gz"</span> <span class="string">|</span> <span class="string">cut</span> <span class="string">-d'"'</span> <span class="string">-f4)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">$DLD</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tar</span> <span class="string">zxvf</span> <span class="string">atom*tar.gz</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Using ingredients from a debian repository</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://archive.ubuntu.com/ubuntu/</span> <span class="string">xenial</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://download.opensuse.org/repositories/isv:/KDAB/xUbuntu_16.04/</span> <span class="string">/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Using ingredients from an Ubuntu PPA</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://us.archive.ubuntu.com/ubuntu/</span> <span class="string">xenial</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">  <span class="attr">ppas:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">geany-dev/ppa</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Using local deb files</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://us.archive.ubuntu.com/ubuntu/</span> <span class="string">xenial</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">  <span class="attr">debs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/home/area42/kdenlive.deb</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/home/area42/kdenlive/*</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Excluding certain packages</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line">  <span class="attr">packages:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">multisystem</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">gksu</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://us.archive.ubuntu.com/ubuntu/</span> <span class="string">xenial</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://liveusb.info/multisystem/depot</span> <span class="string">all</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">qemu</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">qemu-kvm</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cryptsetup</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">libwebkitgtk-3.0-0</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">dmsetup</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pretending certain versions of dependencies being installed</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://archive.ubuntu.com/ubuntu/</span> <span class="string">xenial</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">  <span class="attr">ppas:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">otto-kesselgulasch/gimp-edge</span></span><br><span class="line">  <span class="attr">pretend:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">libcups2</span> <span class="number">1.7</span><span class="number">.2</span><span class="string">-0ubuntu1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Arbitrary scripts in the ingredients section</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">URL=$(wget</span> <span class="string">-q</span> <span class="string">https://www.fosshub.com/JabRef.html</span> <span class="string">-O</span> <span class="bullet">-</span> <span class="string">|</span> <span class="string">grep</span> <span class="string">jar</span> <span class="string">|</span> <span class="string">cut</span> <span class="string">-d</span> <span class="string">'"'</span> <span class="string">-f</span> <span class="number">10</span><span class="string">)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">"$URL"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">--no-check-certificate</span> <span class="string">--no-cookies</span> <span class="string">--header</span> <span class="string">"Cookie: oraclelicense=accept-securebackup-cookie"</span> <span class="string">http://download.oracle.com/otn-pub/java/jdk/8u66-b17/jre-8u66-linux-x64.tar.gz</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[3] The script section
<ul>
<li>必须存在</li>
<li>脚本部分可能包含将二进制内容转换为适合于生成 <code>AppImage</code> 的 <code>AppDir</code> 所需的任意 <code>shell</code> 命令</li>
</ul>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The script section needs to copy ingredients into place</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://archive.ubuntu.com/ubuntu/</span> <span class="string">xenial</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">DLD=$(wget</span> <span class="string">-q</span> <span class="string">"https://github.com/feross/webtorrent-desktop/releases/"</span> <span class="string">-O</span> <span class="bullet">-</span> <span class="string">|</span> <span class="string">grep</span> <span class="string">_amd64.deb</span> <span class="string">|</span> <span class="string">head</span> <span class="string">-n</span> <span class="number">1</span> <span class="string">|</span> <span class="string">cut</span> <span class="string">-d</span> <span class="string">'"'</span> <span class="string">-f</span> <span class="number">2</span><span class="string">)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">"https://github.com/$DLD"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mv</span> <span class="string">opt/webtorrent-desktop/*</span> <span class="string">usr/bin/</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">-e</span> <span class="string">'s|/opt/webtorrent-desktop/||g'</span> <span class="string">webtorrent-desktop.desktop</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The script section needs to copy ingredients into place</span></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">"https://telegram.org/dl/desktop/linux"</span> <span class="string">--trust-server-names</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tar</span> <span class="string">xf</span> <span class="string">tsetup.*.tar.xz</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">../Telegram/Telegram</span> <span class="string">./usr/bin/telegram-desktop</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The script section needs to copy icon and .desktop file in place</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tar</span> <span class="string">xf</span> <span class="string">../fritzing*</span> <span class="string">-C</span> <span class="string">usr/bin/</span> <span class="string">--strip</span> <span class="number">1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mv</span> <span class="string">usr/bin/fritzing.desktop</span> <span class="string">.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The script section needs to copy icon and .desktop file in place</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span>  <span class="comment"># Workaround for:</span></span><br><span class="line">  <span class="bullet">-</span>  <span class="comment"># https://bugzilla.mozilla.org/show_bug.cgi?id=296568</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span> <span class="string">&gt;</span> <span class="string">firefox.desktop</span> <span class="string">&lt;&lt;EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">[Desktop</span> <span class="string">Entry]</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Type=Application</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Name=Firefox</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Icon=firefox</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Exec=firefox</span> <span class="string">%u</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Categories=GNOME;GTK;Network;WebBrowser;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">MimeType=text/html;text/xml;application/xhtml+xml;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">StartupNotify=true</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">EOF</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The script section needs to copy icon and .desktop file in place</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">./usr/share/applications/FBReader.desktop</span> <span class="string">fbreader.desktop</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">-e</span> <span class="string">'s|Exec=FBReader|Exec=fbreader|g'</span> <span class="string">fbreader.desktop</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">-e</span> <span class="string">'s|Name=.*|Name=FBReader|g'</span> <span class="string">fbreader.desktop</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sed</span> <span class="string">-i</span> <span class="string">-e</span> <span class="string">'s|Icon=.*|Icon=fbreader|g'</span> <span class="string">fbreader.desktop</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mv</span> <span class="string">usr/bin/FBReader</span> <span class="string">usr/bin/fbreader</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">usr/share/pixmaps/FBReader.png</span> <span class="string">fbreader.png</span></span><br></pre></td></tr></table></figure>
<p>下面示例是 <code>pip</code> 这个工具的官方仓库中给出的 <code>yml</code> 配置文件。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Converting Python applications packaged with pip</span></span><br><span class="line"><span class="attr">app:</span> <span class="string">mu.codewith.editor</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line">  <span class="attr">sources:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://us.archive.ubuntu.com/ubuntu/</span> <span class="string">xenial</span> <span class="string">xenial-updates</span> <span class="string">xenial-security</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://us.archive.ubuntu.com/ubuntu/</span> <span class="string">xenial-updates</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">deb</span> <span class="string">http://us.archive.ubuntu.com/ubuntu/</span> <span class="string">xenial-security</span> <span class="string">main</span> <span class="string">universe</span></span><br><span class="line">  <span class="attr">packages:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">python3.4-venv</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">https://raw.githubusercontent.com/mu-editor/mu/master/conf/mu.codewith.editor.png</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">https://raw.githubusercontent.com/mu-editor/mu/master/conf/mu.appdata.xml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">../mu.codewith.editor.png</span> <span class="string">./usr/share/icons/hicolor/256x256/</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">../mu.codewith.editor.png</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">usr/share/metainfo/</span> <span class="string">;</span> <span class="string">cp</span> <span class="string">../mu.appdata.xml</span> <span class="string">usr/share/metainfo/</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">virtualenv</span> <span class="string">--python=python3</span> <span class="string">usr</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./usr/bin/pip3</span> <span class="string">install</span> <span class="string">mu-editor</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span> <span class="string">&gt;</span> <span class="string">usr/share/applications/mu.codewith.editor.desktop</span> <span class="string">&lt;&lt;\EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">[Desktop</span> <span class="string">Entry]</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Type=Application</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Name=Mu</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Comment=A</span> <span class="string">Python</span> <span class="string">editor</span> <span class="string">for</span> <span class="string">beginner</span> <span class="string">programmers</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Icon=mu.codewith.editor</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Exec=python3</span> <span class="string">bin/mu-editor</span> <span class="string">%F</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Terminal=false</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Categories=Application;Development;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Keywords=Python;Editor;microbit;micro:bit;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">StartupWMClass=mu</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">MimeType=text/x-python3;text/x-python3;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">usr/share/applications/mu.codewith.editor.desktop</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">usr/bin/pip3</span> <span class="string">freeze</span> <span class="string">|</span> <span class="string">grep</span> <span class="string">"mu-editor"</span> <span class="string">|</span> <span class="string">cut</span> <span class="string">-d</span> <span class="string">"="</span> <span class="string">-f</span> <span class="number">3</span> <span class="string">&gt;&gt;</span> <span class="string">../VERSION</span></span><br></pre></td></tr></table></figure>
<p>下面示例是 <code>Atom</code> 这个代码编辑器官方仓库中给出的 <code>yml</code> 配置文件。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app:</span> <span class="string">Atom</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ingredients:</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">DLD=$(wget</span> <span class="string">-q</span> <span class="string">"https://api.github.com/repos/atom/atom/releases/latest"</span>  <span class="string">-O</span> <span class="bullet">-</span> <span class="string">|</span> <span class="string">grep</span> <span class="string">-E</span> <span class="string">"https.*atom-amd64.tar.gz"</span> <span class="string">|</span> <span class="string">cut</span> <span class="string">-d'"'</span> <span class="string">-f4)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">wget</span> <span class="string">-c</span> <span class="string">$DLD</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">$DLD</span> <span class="string">|</span> <span class="string">cut</span> <span class="string">-d/</span> <span class="string">-f8</span> <span class="string">&gt;</span> <span class="string">VERSION</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tar</span> <span class="string">zxvf</span> <span class="string">atom*tar.gz</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cp</span> <span class="string">-r</span> <span class="string">../atom-*/*</span> <span class="string">usr/bin/</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">find</span> <span class="string">.</span> <span class="string">-name</span> <span class="string">atom.png</span> <span class="string">-exec</span> <span class="string">cp</span> <span class="string">&#123;&#125;</span> <span class="string">atom.png</span> <span class="string">\;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cat</span> <span class="string">&gt;</span> <span class="string">atom.desktop</span> <span class="string">&lt;&lt;\EOF</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">[Desktop</span> <span class="string">Entry]</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Type=Application</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Name=Atom</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Icon=atom</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Exec=atom</span> <span class="string">%u</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Categories=Development;IDE;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Comment=The</span> <span class="string">hackable</span> <span class="string">text</span> <span class="string">editor</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">EOF</span></span><br></pre></td></tr></table></figure>
<h2><span id="6-linuxdeployqt-工具使用">6. linuxdeployqt 工具使用</span></h2>
<blockquote>
<p><strong>linuxdeployqt 是 Linux 下的 qt 打包工具！</strong></p>
</blockquote>
<ul>
<li><strong>[1] 工具安装</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载linuxdeployqt工具</span></span><br><span class="line">$ wget <span class="string">"https://github.com/probonopd/linuxdeployqt/releases/download/7/linuxdeployqt-7-x86_64.AppImage"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名linuxdeployqt名称</span></span><br><span class="line">$ mv linuxdeployqt-continuous-x86_64.AppImage linuxdeployqt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 变成系统可执行文件</span></span><br><span class="line">$ sudo mv ./linuxdeployqt /usr/<span class="built_in">local</span>/bin</span><br><span class="line">$ sudo chmod 755 linuxdeployqt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看linuxdeployqt版本</span></span><br><span class="line">$ sudo linuxdelpoyqt --version</span><br><span class="line">linuxdeployqt 4 (commit 988d294), build 481 built on 2018-02-02 15:05:23 UTC</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># linuxdeployqt命令要用到-appImage选项</span></span><br><span class="line">$ wget -c <span class="string">"https://github.com/AppImage/AppImageKit/releases/download/12/appimagetool-x86_64.AppImage"</span> -O /usr/<span class="built_in">local</span>/bin/appimagetool</span><br><span class="line"></span><br><span class="line"><span class="comment"># 变成系统可执行文件</span></span><br><span class="line">$ sudo chmod a+x /usr/<span class="built_in">local</span>/bin/appimagetool</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>[2] 打包程序</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不能定会成功</span></span><br><span class="line">$ linuxdeployqt &lt;自己的工程名称&gt; -appimage</span><br></pre></td></tr></table></figure>
<h2><span id="7-官方文章中的示例演示">7. 官方文章中的示例演示</span></h2>
<blockquote>
<p><strong>打包软件程序的简单演示流程 - cmake</strong></p>
</blockquote>
<ul>
<li><strong>生成 AppDir 打包目录</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fetch sources (you could as well use a tarball etc.)</span></span><br><span class="line">&gt; git <span class="built_in">clone</span> https://github.com/linuxdeploy/QtQuickApp.git</span><br><span class="line">&gt; <span class="built_in">cd</span> QtQuickApp</span><br><span class="line"></span><br><span class="line"><span class="comment"># build out of source</span></span><br><span class="line">&gt; mkdir build</span><br><span class="line">&gt; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># configure build system</span></span><br><span class="line"><span class="comment"># the flags below are the bare minimum that is needed, the app might define additional variables that might have to be set</span></span><br><span class="line">&gt; cmake .. -DCMAKE_INSTALL_PREFIX=/usr</span><br><span class="line"></span><br><span class="line"><span class="comment"># build the application on all CPU cores</span></span><br><span class="line">&gt; make -j$(nproc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># now "install" resources into future AppDir</span></span><br><span class="line">&gt; make install DESTDIR=AppDir</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">AppDir</span><br><span class="line">└── AppRun</span><br><span class="line">└── your_app.desktop</span><br><span class="line">└── your_app.png</span><br><span class="line">└── usr</span><br><span class="line">    ├── bin</span><br><span class="line">    │   └── your_app</span><br><span class="line">    ├── lib</span><br><span class="line">    └── share</span><br><span class="line">        ├── applications</span><br><span class="line">        │   └── your_app.desktop</span><br><span class="line">        └── icons</span><br><span class="line">            └── &lt;theme&gt;</span><br><span class="line">                └── &lt;resolution&gt;</span><br><span class="line">                    └── your_app.png</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>使用 linuxdeploy 打包成 AppImages</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get linuxdeploy's AppImage</span></span><br><span class="line">&gt; wget https://github.com/linuxdeploy/linuxdeploy/releases/download/continuous/linuxdeploy-x86_64.AppImage</span><br><span class="line">&gt; chmod +x linuxdeploy-x86_64.AppImage</span><br><span class="line"></span><br><span class="line"><span class="comment"># run linuxdeploy and generate an AppDir</span></span><br><span class="line">&gt; ./linuxdeploy-x86_64.AppImage --appdir AppDir</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>官方的 cmake 工具打包示例</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> -x</span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># building in temporary directory to keep system clean</span></span><br><span class="line"><span class="comment"># use RAM disk if possible (as in: not building on CI system like Travis, and RAM disk is available)</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$CI</span>"</span> == <span class="string">""</span> ] &amp;&amp; [ -d /dev/shm ]; <span class="keyword">then</span></span><br><span class="line">    TEMP_BASE=/dev/shm</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    TEMP_BASE=/tmp</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">BUILD_DIR=$(mktemp -d -p <span class="string">"<span class="variable">$TEMP_BASE</span>"</span> appimage-build-XXXXXX)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make sure to clean up build dir, even if errors occur</span></span><br><span class="line"><span class="function"><span class="title">cleanup</span></span> () &#123;</span><br><span class="line">    <span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$BUILD_DIR</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        rm -rf <span class="string">"<span class="variable">$BUILD_DIR</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">trap</span> cleanup EXIT</span><br><span class="line"></span><br><span class="line"><span class="comment"># store repo root as variable</span></span><br><span class="line">REPO_ROOT=$(readlink -f $(dirname $(dirname <span class="variable">$0</span>)))</span><br><span class="line">OLD_CWD=$(readlink -f .)</span><br><span class="line"></span><br><span class="line"><span class="comment"># switch to build dir</span></span><br><span class="line"><span class="built_in">pushd</span> <span class="string">"<span class="variable">$BUILD_DIR</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># configure build files with CMake</span></span><br><span class="line"><span class="comment"># we need to explicitly set the install prefix, as CMake's default is /usr/local for some reason...</span></span><br><span class="line">cmake <span class="string">"<span class="variable">$REPO_ROOT</span>"</span> -DCMAKE_INSTALL_PREFIX=/usr</span><br><span class="line"></span><br><span class="line"><span class="comment"># build project and install files into AppDir</span></span><br><span class="line">make -j$(nproc)</span><br><span class="line">make install DESTDIR=AppDir</span><br><span class="line"></span><br><span class="line"><span class="comment"># now, build AppImage using linuxdeploy and linuxdeploy-plugin-qt</span></span><br><span class="line"><span class="comment"># download linuxdeploy and its Qt plugin</span></span><br><span class="line">wget https://github.com/linuxdeploy/linuxdeploy/releases/download/continuous/linuxdeploy-x86_64.AppImage</span><br><span class="line">wget https://github.com/linuxdeploy/linuxdeploy-plugin-qt/releases/download/continuous/linuxdeploy-plugin-qt-x86_64.AppImage</span><br><span class="line"></span><br><span class="line"><span class="comment"># make them executable</span></span><br><span class="line">chmod +x linuxdeploy*.AppImage</span><br><span class="line"></span><br><span class="line"><span class="comment"># make sure Qt plugin finds QML sources so it can deploy the imported files</span></span><br><span class="line"><span class="built_in">export</span> QML_SOURCES_PATHS=<span class="string">"<span class="variable">$REPO_ROOT</span>"</span>/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># initialize AppDir, bundle shared libraries for QtQuickApp, use Qt plugin to bundle additional resources, and build AppImage, all in one single command</span></span><br><span class="line">./linuxdeploy-x86_64.AppImage --appdir AppDir --plugin qt --output appimage</span><br><span class="line"></span><br><span class="line"><span class="comment"># move built AppImage back into original CWD</span></span><br><span class="line">mv QtQuickApp*.AppImage <span class="string">"<span class="variable">$OLD_CWD</span>"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>本文转载自：「 Escape 的博客 」，原文：<a href="https://tinyurl.com/yxn9znrw%EF%BC%8C%E7%89%88%E6%9D%83%E5%BD%92%E5%8E%9F%E4%BD%9C%E8%80%85%E6%89%80%E6%9C%89%E3%80%82%E6%AC%A2%E8%BF%8E%E6%8A%95%E7%A8%BF%EF%BC%8C%E6%8A%95%E7%A8%BF%E9%82%AE%E7%AE%B1:" target="_blank" rel="noopener">https://tinyurl.com/yxn9znrw，版权归原作者所有。欢迎投稿，投稿邮箱:</a> <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>。</p>
</blockquote>
</div>

			<script src="https://my.openwrite.cn/js/readmore.js" type="text/javascript"></script>
			<script>
			var isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);
			if (!isMobile) {
			    var btw = new BTWPlugin();
			    btw.init({
			        "id": "vip-container",
			        "blogId": "10135-1588830050631-449",
			        "name": "「奇妙的 Linux 世界」",
			        "qrcode": "https://www.hi-linux.com/img/wechat/mp_qrcode_12.jpg",
			        "keyword": "VIP"
			    });
			}
			</script>
		
                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/posts/43416.html" data-toggle="tooltip" data-placement="top" title="实战 Kubernetes 中部署 Nacos 集群">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/posts/51040.html" data-toggle="tooltip" data-placement="top" title="一文搞懂 Kubernetes 如何实现 DNS 解析">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                
                    <!-- disqus 评论框 start -->
                    <div class="comment">
                        <div id="lv-container" data-id="city" data-uid="MTAyMC8yNzg2My80NDQw"></div>
                    </div>
                    <!-- disqus 评论框 end -->
                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">1. AppImage 工具介绍</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">2. AppImage 工具对比</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">3. AppImage 目录结构</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">4. appimagetool 命令使用</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">5. pkg2appimage 工具使用</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">6. linuxdeployqt 工具使用</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#vip-container"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">7. 官方文章中的示例演示</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#技巧" title="技巧">技巧</a>
                        
                          <a class="tag" href="/tags/#Linux" title="Linux">Linux</a>
                        
                          <a class="tag" href="/tags/#AppImage" title="AppImage">AppImage</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://www.mike.org.cn/" target="_blank">简单.生活</a></li>
                    
                        <li><a href="http://shang.qq.com/wpa/qunwpa?idkey=ea4c43493c2269428ac6ef6141de4b6d78e5ab2d41380ca4099b833b62884ee9" target="_blank">技术交流群</a></li>
                    
                        <li><a href="" target="_blank"></a></li>
                    
                        <li><a href="" target="_blank"></a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>






    <!-- 来必力City版公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];
    
           if (typeof LivereTower === 'function') { return; }
    
           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;
    
           e.parentNode.insertBefore(j, e);
       })(document, 'script');
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    <!-- 来必力City版 公共JS代码 end -->



<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                    <li>
                        <a href="/atom.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/80imike">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/2093524665">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Mike 2022 | Hosted by <a href="https://pages.coding.me" target="_blank" rel="noopener" style="font-weight: bold">Coding Pages</a>
                    <br>
                    Theme by <a href="http://beantech.org" target="_blank" rel="noopener">BeanTech</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://www.huweihuang.com" target="_blank" rel="noopener">胡伟煌</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huweihuang&repo=hexo-theme-huweihuang&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>



<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://www.hi-linux.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->



<script async defer data-website-id="0d8da2a4-a24e-4240-9304-00a6e347ddfe"
    src="https://umami.hi-linux.com/umami.js"></script>



	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://www.hi-linux.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

<script>(function(w,d, s, id) {w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js, fjs = d.getElementsByTagName(s)[0];js = d.createElement(s); js.id = id;js.src = 'https://cdn.webpushr.com/app.min.js';fjs.parentNode.appendChild(js);}(window,document, 'script', 'webpushr-jssdk'));webpushr('init','BF9JK7xV9kjWTdMx2lr6RWaPfXV7wNuZaVAJ1bfIGoBNJavqLEBVFMKLubITnCA4bh2fI9iH9tMF95nXnPt7xxY');</script></body>

</html>
